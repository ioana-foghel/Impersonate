2018-05-09 09:35:58.8661|ERROR|Templates|Error in razor template
System.Threading.ThreadAbortException: Thread was being aborted.
   at Dynamicweb.Frontend.Content.GetModuleOutput(Paragraph paragraph, PageView pageview)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.LazyInitValue()
   at CompiledRazorTemplates.Dynamic.cefdaeadabbf.<RenderModule>b__c(TextWriter __razor_helper_writer)
   at RazorEngine.Templating.TemplateWriter.WriteTo(TextWriter writer)
   at RazorEngine.Templating.TemplateBase.WriteTo(TextWriter writer, TemplateWriter helper)
   at CompiledRazorTemplates.Dynamic.cefdaeadabbf.<>c__DisplayClass1.<RenderContent>b__0(TextWriter __razor_helper_writer)
   at RazorEngine.Templating.TemplateWriter.WriteTo(TextWriter writer)
   at RazorEngine.Templating.TemplateBase.Write(TemplateWriter helper)
   at CompiledRazorTemplates.Dynamic.cefdaeadabbf.Execute()
   at RazorEngine.Templating.TemplateBase.RazorEngine.Templating.ITemplate.Run(ExecuteContext context)
   at RazorEngine.Templating.TemplateService.Run(ITemplate template, DynamicViewBag viewBag)
   at RazorEngine.Templating.TemplateService.Parse(String razorTemplate, Object model, DynamicViewBag viewBag, String cacheName)
   at RazorEngine.Razor.Parse[T](String razorTemplate, T model, String cacheName)
   at Dynamicweb.Rendering.Template.RenderRazorTemplate()
2018-05-09 09:49:33.4496|ERROR|Templates|Error in razor template
System.Threading.ThreadAbortException: Thread was being aborted.
   at Dynamicweb.Frontend.Content.GetModuleOutput(Paragraph paragraph, PageView pageview)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.LazyInitValue()
   at CompiledRazorTemplates.Dynamic.cefdaeadabbf.<RenderModule>b__c(TextWriter __razor_helper_writer)
   at RazorEngine.Templating.TemplateWriter.WriteTo(TextWriter writer)
   at RazorEngine.Templating.TemplateBase.WriteTo(TextWriter writer, TemplateWriter helper)
   at CompiledRazorTemplates.Dynamic.cefdaeadabbf.<>c__DisplayClass1.<RenderContent>b__0(TextWriter __razor_helper_writer)
   at RazorEngine.Templating.TemplateWriter.WriteTo(TextWriter writer)
   at RazorEngine.Templating.TemplateBase.Write(TemplateWriter helper)
   at CompiledRazorTemplates.Dynamic.cefdaeadabbf.Execute()
   at RazorEngine.Templating.TemplateBase.RazorEngine.Templating.ITemplate.Run(ExecuteContext context)
   at RazorEngine.Templating.TemplateService.Run(ITemplate template, DynamicViewBag viewBag)
   at RazorEngine.Templating.TemplateService.Parse(String razorTemplate, Object model, DynamicViewBag viewBag, String cacheName)
   at RazorEngine.Razor.Parse[T](String razorTemplate, T model, String cacheName)
   at Dynamicweb.Rendering.Template.RenderRazorTemplate()
2018-05-09 10:24:05.6591|ERROR|Templates|Error parsing razor template
Error parsing template "Designs/Rapido/_parsed/Page.parsed.cshtml"
Line 613: Helper blocks cannot be nested within each other.<hr/>
<div class='template-code'>
<span class='line-number'>  1</span>	@inherits Dynamicweb.Rendering.ViewModelTemplate&lt;Dynamicweb.Frontend.PageViewModel&gt;
<span class='line-number'>  2</span>	
<span class='line-number'>  3</span>	@using Dynamicweb.Frontend.Devices
<span class='line-number'>  4</span>	@using Dynamicweb.Extensibility
<span class='line-number'>  5</span>	@using Dynamicweb.Content
<span class='line-number'>  6</span>	@using Dynamicweb.Security
<span class='line-number'>  7</span>	@using System
<span class='line-number'>  8</span>	@using System.Linq
<span class='line-number'>  9</span>	@using System.Web
<span class='line-number'> 10</span>	@using System.IO
<span class='line-number'> 11</span>	
<span class='line-number'> 12</span>	@{
<span class='line-number'> 13</span>	    //General settings
<span class='line-number'> 14</span>	    string favicon = Model.Area.Item.GetFile(&quot;LogoFavicon&quot;) != null ? Model.Area.Item.GetFile(&quot;LogoFavicon&quot;).Path : &quot;/Files/Images/favicon.png&quot;;
<span class='line-number'> 15</span>	    string logo = Model.Area.Item.GetFile(&quot;LogoImage&quot;) != null ? Model.Area.Item.GetFile(&quot;LogoImage&quot;).Path : &quot;/Files/Images/DWLogo.svg&quot;;
<span class='line-number'> 16</span>	    if (Path.GetExtension(logo).ToLower() != &quot;.svg&quot;)
<span class='line-number'> 17</span>	    {
<span class='line-number'> 18</span>	        logo = &quot;/Admin/Public/GetImage.ashx?height=40&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image=&quot; + @logo;
<span class='line-number'> 19</span>	    }
<span class='line-number'> 20</span>	    string searchPlaceholder = Translate(&quot;Search products&quot;, &quot;Search products&quot;);
<span class='line-number'> 21</span>	    string searchValue = HttpContext.Current.Request.QueryString.Get(&quot;Search&quot;) != null ? HttpContext.Current.Request.QueryString.Get(&quot;Search&quot;) : &quot;&quot;;
<span class='line-number'> 22</span>	    string wireframeMode = Model.Area.Item.GetBoolean(&quot;WireframeMode&quot;).ToString();
<span class='line-number'> 23</span>	
<span class='line-number'> 24</span>	    //Font settings
<span class='line-number'> 25</span>	    string navigationFont = Model.Area.Item.GetItem(&quot;NavigationFont&quot;).GetGoogleFont(&quot;FontFamily&quot;).Family.Replace(&quot; &quot;, &quot;+&quot;);
<span class='line-number'> 26</span>	    string mobileNavigationFont = Model.Area.Item.GetItem(&quot;MobileNavigationFont&quot;).GetGoogleFont(&quot;FontFamily&quot;).Family.Replace(&quot; &quot;, &quot;+&quot;);
<span class='line-number'> 27</span>	    string headerFont = Model.Area.Item.GetItem(&quot;ContentLayoutHeaderFont&quot;).GetGoogleFont(&quot;FontFamily&quot;).Family.Replace(&quot; &quot;, &quot;+&quot;);
<span class='line-number'> 28</span>	    string subHeaderFont = Model.Area.Item.GetItem(&quot;ContentLayoutSubheaderFont&quot;).GetGoogleFont(&quot;FontFamily&quot;).Family.Replace(&quot; &quot;, &quot;+&quot;);
<span class='line-number'> 29</span>	    string contentFont = Model.Area.Item.GetItem(&quot;ContentLayoutBodyText&quot;).GetGoogleFont(&quot;FontFamily&quot;).Family.Replace(&quot; &quot;, &quot;+&quot;);
<span class='line-number'> 30</span>	
<span class='line-number'> 31</span>	    //Page IDs for use in the template
<span class='line-number'> 32</span>	    int pageId = Model.TopPage.ID;
<span class='line-number'> 33</span>	    string firstPageId = Model.Area.FirstActivePage.ID.ToString();
<span class='line-number'> 34</span>	    int cartPageId = GetPageIdByNavigationTag(&quot;CartPage&quot;);
<span class='line-number'> 35</span>	    int miniCartFeedPageId = GetPageIdByNavigationTag(&quot;MiniCartFeed&quot;);
<span class='line-number'> 36</span>	    int cartFeedPageId = GetPageIdByNavigationTag(&quot;CartOrderlinesFeed&quot;);
<span class='line-number'> 37</span>	    int productsPageId = GetPageIdByNavigationTag(&quot;ProductsPage&quot;);
<span class='line-number'> 38</span>	    int productSearchPageId = GetPageIdByNavigationTag(&quot;ProductSearchFeed&quot;);
<span class='line-number'> 39</span>	    int productGroupsPageId = GetPageIdByNavigationTag(&quot;ProductGroupsFeed&quot;);
<span class='line-number'> 40</span>	
<span class='line-number'> 41</span>	    int impersonationPageId = GetPageIdByNavigationTag(&quot;Impersonation&quot;);
<span class='line-number'> 42</span>	
<span class='line-number'> 43</span>	    bool stickyMenu = Pageview.Device.ToString() == &quot;Mobile&quot; || Pageview.Device.ToString() == &quot;Tablet&quot; ? false : Model.Area.Item.GetBoolean(&quot;NavigationStickyMenu&quot;);
<span class='line-number'> 44</span>	    string stickyTop = stickyMenu ? &quot;top-container--sticky&quot; : &quot;&quot;;
<span class='line-number'> 45</span>	    string pagePos = stickyMenu ? &quot;js-page-pos&quot; : &quot;&quot;;
<span class='line-number'> 46</span>	    string topLayout = Model.Area.Item.GetList(&quot;LayoutTop&quot;).SelectedValue;
<span class='line-number'> 47</span>	    bool renderPagesInToolBar = Model.Area.Item.GetBoolean(&quot;RenderPagesInToolBar&quot;);
<span class='line-number'> 48</span>	
<span class='line-number'> 49</span>	    string autoCssLink = &quot;/Files/Templates/Designs/Rapido/css/rapido/rapido_&quot; + Model.Area.ID.ToString() + &quot;.min.css?ticks=&quot; + Model.Area.UpdatedDate.Ticks;
<span class='line-number'> 50</span>	
<span class='line-number'> 51</span>	    string userInitials = &quot;&quot;;
<span class='line-number'> 52</span>	    if (Model.CurrentUser.ID != 0)
<span class='line-number'> 53</span>	    {
<span class='line-number'> 54</span>	        if (!String.IsNullOrEmpty(Model.CurrentUser.Name))
<span class='line-number'> 55</span>	        {
<span class='line-number'> 56</span>	            string[] names = Model.CurrentUser.Name.Split(&#39; &#39;);
<span class='line-number'> 57</span>	            userInitials += Model.CurrentUser.Name.Substring(0, 1);
<span class='line-number'> 58</span>	
<span class='line-number'> 59</span>	            if (names.Length &gt; 0)
<span class='line-number'> 60</span>	            {
<span class='line-number'> 61</span>	                userInitials += names[names.Length - 1].Substring(0, 1);
<span class='line-number'> 62</span>	            }
<span class='line-number'> 63</span>	        }
<span class='line-number'> 64</span>	        else
<span class='line-number'> 65</span>	        {
<span class='line-number'> 66</span>	            userInitials += Model.CurrentUser.FirstName != null &amp;&amp; Model.CurrentUser.FirstName != &quot;&quot; ? Model.CurrentUser.FirstName.Substring(0, 1) : &quot;&quot;;
<span class='line-number'> 67</span>	            userInitials += Model.CurrentUser.LastName != null &amp;&amp; Model.CurrentUser.LastName != &quot;&quot; ? Model.CurrentUser.LastName.Substring(0, 1) : &quot;&quot;;
<span class='line-number'> 68</span>	            userInitials += userInitials.Length == 1 &amp;&amp; Model.CurrentUser.FirstName != null &amp;&amp; Model.CurrentUser.FirstName.Length &gt; 1 ? Model.CurrentUser.FirstName.Substring(1, 2) : &quot;&quot;;
<span class='line-number'> 69</span>	            userInitials += userInitials == &quot;&quot; &amp;&amp; Model.CurrentUser.Email != null &amp;&amp; Model.CurrentUser.Email.Length &gt; 1 ? Model.CurrentUser.Email.Substring(0, 2) : &quot;&quot;;
<span class='line-number'> 70</span>	        }
<span class='line-number'> 71</span>	    }
<span class='line-number'> 72</span>	}
<span class='line-number'> 73</span>	&lt;!DOCTYPE html&gt;
<span class='line-number'> 74</span>	
<span class='line-number'> 75</span>	&lt;html&gt;
<span class='line-number'> 76</span>	&lt;head&gt;
<span class='line-number'> 77</span>	    &lt;meta charset=&quot;utf-8&quot; /&gt;
<span class='line-number'> 78</span>	    &lt;title&gt;@Model.TopPage.Name&lt;/title&gt;
<span class='line-number'> 79</span>	    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, maximum-scale=1&quot;&gt;
<span class='line-number'> 80</span>	    &lt;meta name=&quot;robots&quot; content=&quot;index, follow&quot;&gt;
<span class='line-number'> 81</span>	
<span class='line-number'> 82</span>	    &lt;!-- Favicon --&gt;
<span class='line-number'> 83</span>	    &lt;link href=&quot;@favicon&quot; rel=&quot;icon&quot; type=&quot;image/png&quot;&gt;
<span class='line-number'> 84</span>	
<span class='line-number'> 85</span>	    &lt;!-- Font awesome --&gt;
<span class='line-number'> 86</span>	    &lt;link rel=&quot;stylesheet&quot; href=&quot;/Files/Templates/Designs/Rapido/css/rapido/font-awesome.min.css&quot; type=&quot;text/css&quot;&gt;
<span class='line-number'> 87</span>	
<span class='line-number'> 88</span>	    &lt;!-- Base (Default, wireframe) styles --&gt;
<span class='line-number'> 89</span>	    &lt;link rel=&quot;stylesheet&quot; href=&quot;/Files/Templates/Designs/Rapido/css/base/base.css&quot; type=&quot;text/css&quot;&gt;
<span class='line-number'> 90</span>	
<span class='line-number'> 91</span>	    &lt;!-- Rapido Css from Website Settings --&gt;
<span class='line-number'> 92</span>	    &lt;link id=&quot;rapidoCss&quot; rel=&quot;stylesheet&quot; href=&quot;@autoCssLink&quot; type=&quot;text/css&quot;&gt;
<span class='line-number'> 93</span>	
<span class='line-number'> 94</span>	    &lt;!-- Ignite Css (Custom site specific styles) --&gt;
<span class='line-number'> 95</span>	    &lt;link id=&quot;igniteCss&quot; type=&quot;text/css&quot; href=&quot;/Files/Templates/Designs/Rapido/css/ignite/ignite.min.css&quot; rel=&quot;stylesheet&quot;&gt;
<span class='line-number'> 96</span>	
<span class='line-number'> 97</span>	    &lt;!-- Google fonts --&gt;
<span class='line-number'> 98</span>	    @{
<span class='line-number'> 99</span>	        var fonts = new string[5] { @navigationFont, @mobileNavigationFont, @headerFont, @subHeaderFont, @contentFont };
<span class='line-number'>100</span>	        var family = string.Join(&quot;|&quot;, fonts.Distinct().Select(x =&gt; string.Format(&quot;{0}:100,200,300,400,500,600,700,800,900&quot;, x)));
<span class='line-number'>101</span>	    }
<span class='line-number'>102</span>	    &lt;link href=&quot;https://fonts.googleapis.com/css?family=@family&quot; rel=&quot;stylesheet&quot;&gt;
<span class='line-number'>103</span>	&lt;/head&gt;
<span class='line-number'>104</span>	
<span class='line-number'>105</span>	&lt;body&gt;
<span class='line-number'>106</span>	
<span class='line-number'>107</span>	    @MobileNavigation(userInitials)
<span class='line-number'>108</span>	
<span class='line-number'>109</span>	    @LoginModal()
<span class='line-number'>110</span>	
<span class='line-number'>111</span>	    &lt;main class=&quot;site dw-mod&quot;&gt;
<span class='line-number'>112</span>	        &lt;header class=&quot;top-container @stickyTop dw-mod&quot; id=&quot;Top&quot;&gt;
<span class='line-number'>113</span>	            @if (renderPagesInToolBar)
<span class='line-number'>114</span>	            {
<span class='line-number'>115</span>	                &lt;div class=&quot;tools-navigation dw-mod&quot;&gt;
<span class='line-number'>116</span>	                    &lt;div class=&quot;center-container grid top-container__center-container dw-mod&quot;&gt;
<span class='line-number'>117</span>	                        &lt;div class=&quot;grid__col-xs-12 grid__col--bleed-y&quot;&gt;
<span class='line-number'>118</span>	                            &lt;div class=&quot;grid__cell grid__cell--align-middle-right&quot;&gt;
<span class='line-number'>119</span>	                                @RenderNavigation(new
<span class='line-number'>120</span>	                           {
<span class='line-number'>121</span>	                               id = &quot;topnavigation&quot;,
<span class='line-number'>122</span>	                               cssclass = &quot;menu menu-tools dw-mod dwnavigation&quot;,
<span class='line-number'>123</span>	                               template = &quot;TopMenu.xslt&quot;
<span class='line-number'>124</span>	                           })
<span class='line-number'>125</span>	                            &lt;/div&gt;
<span class='line-number'>126</span>	                        &lt;/div&gt;
<span class='line-number'>127</span>	                    &lt;/div&gt;
<span class='line-number'>128</span>	                &lt;/div&gt;
<span class='line-number'>129</span>	            }
<span class='line-number'>130</span>	
<span class='line-number'>131</span>	            @if (topLayout == &quot;normal&quot;)
<span class='line-number'>132</span>	            {
<span class='line-number'>133</span>	            &lt;!-- Header --&gt;
<span class='line-number'>134</span>	                &lt;div class=&quot;header header-top dw-mod&quot;&gt;
<span class='line-number'>135</span>	                    &lt;div class=&quot;center-container top-container__center-container dw-mod&quot;&gt;
<span class='line-number'>136</span>	                        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>137</span>	
<span class='line-number'>138</span>	                            @* Logo *@
<span class='line-number'>139</span>	                            @if (Pageview.Device.ToString() != &quot;Mobile&quot; &amp;&amp; Pageview.Device.ToString() != &quot;Tablet&quot;)
<span class='line-number'>140</span>	                            {
<span class='line-number'>141</span>	                                &lt;div class=&quot;grid__col-md-3 grid__col-sm-3 grid--align-self-center grid__col--bleed-y&quot;&gt;
<span class='line-number'>142</span>	                                    &lt;div class=&quot;logo dw-mod&quot;&gt;
<span class='line-number'>143</span>	                                        &lt;a href=&quot;/Default.aspx?ID=@firstPageId&quot;&gt;
<span class='line-number'>144</span>	                                            &lt;img class=&quot;grid__cell-img&quot; src=&quot;@logo&quot; alt=&quot;Logo&quot; /&gt;
<span class='line-number'>145</span>	                                        &lt;/a&gt;
<span class='line-number'>146</span>	                                    &lt;/div&gt;
<span class='line-number'>147</span>	                                &lt;/div&gt;
<span class='line-number'>148</span>	                            }
<span class='line-number'>149</span>	                            @if (Pageview.Device.ToString() == &quot;Mobile&quot; || Pageview.Device.ToString() == &quot;Tablet&quot;)
<span class='line-number'>150</span>	                            {
<span class='line-number'>151</span>	                                &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>152</span>	                                    &lt;div class=&quot;grid__cell&quot;&gt;
<span class='line-number'>153</span>	                                        &lt;div class=&quot;logo u-max-w220px u-middle u-margin-bottom dw-mod&quot;&gt;
<span class='line-number'>154</span>	                                            &lt;a href=&quot;/Default.aspx?ID=@firstPageId&quot;&gt;
<span class='line-number'>155</span>	                                                &lt;img class=&quot;grid__cell-img&quot; src=&quot;@logo&quot; alt=&quot;Logo&quot; /&gt;
<span class='line-number'>156</span>	                                            &lt;/a&gt;
<span class='line-number'>157</span>	                                        &lt;/div&gt;
<span class='line-number'>158</span>	                                    &lt;/div&gt;
<span class='line-number'>159</span>	                                &lt;/div&gt;
<span class='line-number'>160</span>	                            }
<span class='line-number'>161</span>	
<span class='line-number'>162</span>	                            @if (Pageview.Device.ToString() != &quot;Mobile&quot; &amp;&amp; Pageview.Device.ToString() != &quot;Tablet&quot;)
<span class='line-number'>163</span>	                            {
<span class='line-number'>164</span>	                                @* Search *@
<span class='line-number'>165</span>	                                &lt;div class=&quot;grid__col-6 grid__col--bleed-y grid--align-self-center&quot;&gt;
<span class='line-number'>166</span>	                                    &lt;div class=&quot;typeahead u-margin u-color-inherit js-typeahead&quot; data-page-size=&quot;10&quot; id=&quot;TopProductSearch&quot; data-search-page-id=&quot;@productSearchPageId&quot; data-result-page-id=&quot;@productsPageId&quot; data-groups-page-id=&quot;@productGroupsPageId&quot;&gt;
<span class='line-number'>167</span>	                                        &lt;button type=&quot;button&quot; class=&quot;btn btn--condensed u-color-light-gray--bg typeahead-group-btn dw-mod js-typeahead-groups-btn&quot; data-group-id=&quot;all&quot;&gt;@Translate(&quot;All&quot;)&lt;/button&gt;
<span class='line-number'>168</span>	                                        &lt;ul class=&quot;dropdown dropdown--absolute-position js-ajax-container js-typeahead-groups-content dw-mod&quot; id=&quot;TopProductSearchGroupsContent&quot; data-template=&quot;SearchGroupsTemplate&quot; data-json-feed=&quot;/Default.aspx?ID=@productGroupsPageId&amp;feedType=productGroups&quot; data-init-onload=&quot;false&quot;&gt;&lt;/ul&gt;
<span class='line-number'>169</span>	                                        &lt;input type=&quot;text&quot; class=&quot;typeahead-search-field u-no-margin js-typeahead-search-field&quot; placeholder=&quot;@searchPlaceholder&quot; value=&quot;@searchValue&quot;&gt;
<span class='line-number'>170</span>	                                        &lt;ul class=&quot;dropdown dropdown--absolute-position u-full-width js-ajax-container js-typeahead-search-content u-full-width dw-mod&quot; id=&quot;TopProductSearchContent&quot; data-template=&quot;SearchContentTemplate&quot; data-no-result-template=&quot;SearchEmpty&quot; data-json-feed=&quot;/Default.aspx?ID=@productSearchPageId&amp;feedType=productsOnly&quot; data-init-onload=&quot;false&quot; data-preloader=&quot;minimal&quot;&gt;&lt;/ul&gt;
<span class='line-number'>171</span>	                                        &lt;button type=&quot;button&quot; class=&quot;btn btn--condensed btn--primary u-no-margin dw-mod js-typeahead-enter-btn&quot;&gt;&lt;i class=&quot;fa fa-search&quot;&gt;&lt;/i&gt;&lt;/button&gt;
<span class='line-number'>172</span>	                                    &lt;/div&gt;
<span class='line-number'>173</span>	                                &lt;/div&gt;
<span class='line-number'>174</span>	
<span class='line-number'>175</span>	                                &lt;div class=&quot;grid__cell grid__cell--align-middle-right&quot;&gt;
<span class='line-number'>176</span>	                                    &lt;ul class=&quot;menu dw-mod u-pull--right&quot;&gt;
<span class='line-number'>177</span>	                                        @RenderSignIn(&quot;outsideNavigation&quot;, userInitials)
<span class='line-number'>178</span>	                                        @RenderLanguageSelector(&quot;outsideNavigation&quot;)
<span class='line-number'>179</span>	                                        @RenderFavorites(&quot;outsideNavigation&quot;)
<span class='line-number'>180</span>	                                        @RenderMiniCart(&quot;outsideNavigation&quot;)
<span class='line-number'>181</span>	                                    &lt;/ul&gt;
<span class='line-number'>182</span>	                                &lt;/div&gt;
<span class='line-number'>183</span>	                            }
<span class='line-number'>184</span>	
<span class='line-number'>185</span>	                            @* Mobile search *@
<span class='line-number'>186</span>	                            @* @if (Pageview.Device.ToString() == &quot;Mobile&quot; || Pageview.Device.ToString() == &quot;Tablet&quot;)
<span class='line-number'>187</span>	                                {
<span class='line-number'>188</span>	                                    &lt;div class=&quot;grid__col-12 grid__col--bleed-y grid--align-self-center&quot;&gt;
<span class='line-number'>189</span>	                                        &lt;div class=&quot;grid__cell&quot;&gt;
<span class='line-number'>190</span>	                                            &lt;div class=&quot;js-typeahead&quot; data-page-size=&quot;10&quot; id=&quot;MobileProductSearch&quot; data-search-page-id=&quot;@productSearchPageId&quot; data-result-page-id=&quot;@productsPageId&quot;&gt;
<span class='line-number'>191</span>	                                                &lt;input type=&quot;text&quot; class=&quot;u-full-width js-typeahead-search-field&quot; placeholder=&quot;@searchPlaceholder&quot; value=&quot;@searchValue&quot;&gt;
<span class='line-number'>192</span>	                                                &lt;ul class=&quot;dropdown dropdown--absolute-position js-ajax-container js-typeahead-search-content dw-mod&quot; id=&quot;MobileProductSearchContent&quot; data-template=&quot;SearchContentTemplate&quot; data-no-result-template=&quot;SearchEmpty&quot; data-json-feed=&quot;/Default.aspx?ID=@productSearchPageId&amp;feedType=productsOnly&quot; data-init-onload=&quot;false&quot;&gt;&lt;/ul&gt;
<span class='line-number'>193</span>	                                            &lt;/div&gt;
<span class='line-number'>194</span>	                                        &lt;/div&gt;
<span class='line-number'>195</span>	                                    &lt;/div&gt;
<span class='line-number'>196</span>	                                }
<span class='line-number'>197</span>	                            *@
<span class='line-number'>198</span>	                        &lt;/div&gt;
<span class='line-number'>199</span>	                    &lt;/div&gt;
<span class='line-number'>200</span>	                &lt;/div&gt;
<span class='line-number'>201</span>	
<span class='line-number'>202</span>	            &lt;!-- Main navigation --&gt;
<span class='line-number'>203</span>	                &lt;nav class=&quot;header header-top dw-mod&quot;&gt;
<span class='line-number'>204</span>	                    &lt;div class=&quot;center-container top-container__center-container dw-mod&quot;&gt;
<span class='line-number'>205</span>	                        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>206</span>	                            &lt;div class=&quot;grid__col-12 grid--align-self-center grid__col--bleed&quot;&gt;
<span class='line-number'>207</span>	                                &lt;div class=&quot;grid__cell&quot;&gt;
<span class='line-number'>208</span>	                                    @MobileNavigationTrigger()
<span class='line-number'>209</span>	                                    @RenderHeaderNavigation()
<span class='line-number'>210</span>	
<span class='line-number'>211</span>	                                    @if (Pageview.Device.ToString() == &quot;Mobile&quot; || Pageview.Device.ToString() == &quot;Tablet&quot;)
<span class='line-number'>212</span>	                                    {
<span class='line-number'>213</span>	                                        &lt;ul class=&quot;menu dw-mod u-pull--right&quot;&gt;
<span class='line-number'>214</span>	                                            @RenderMiniCart()
<span class='line-number'>215</span>	                                        &lt;/ul&gt;
<span class='line-number'>216</span>	                                    }
<span class='line-number'>217</span>	                                &lt;/div&gt;
<span class='line-number'>218</span>	                            &lt;/div&gt;
<span class='line-number'>219</span>	                        &lt;/div&gt;
<span class='line-number'>220</span>	                    &lt;/div&gt;
<span class='line-number'>221</span>	                &lt;/nav&gt;
<span class='line-number'>222</span>	            }
<span class='line-number'>223</span>	
<span class='line-number'>224</span>	            @if (topLayout == &quot;condensed&quot;)
<span class='line-number'>225</span>	            {
<span class='line-number'>226</span>	            &lt;!-- Main navigation --&gt;
<span class='line-number'>227</span>	                &lt;nav class=&quot;main-navigation dw-mod&quot;&gt;
<span class='line-number'>228</span>	                    &lt;div class=&quot;center-container top-container__center-container dw-mod&quot;&gt;
<span class='line-number'>229</span>	                        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>230</span>	
<span class='line-number'>231</span>	                            &lt;div class=&quot;grid__col-md-3 grid--align-self-center grid__col--bleed-y&quot;&gt;
<span class='line-number'>232</span>	                                &lt;div class=&quot;logo u-padding--xs dw-mod&quot;&gt;
<span class='line-number'>233</span>	                                    &lt;a href=&quot;/Default.aspx?ID=@firstPageId&quot;&gt;
<span class='line-number'>234</span>	                                        &lt;img class=&quot;grid__cell-img&quot; src=&quot;@logo&quot; alt=&quot;Logo&quot; /&gt;
<span class='line-number'>235</span>	                                    &lt;/a&gt;
<span class='line-number'>236</span>	                                &lt;/div&gt;
<span class='line-number'>237</span>	                            &lt;/div&gt;
<span class='line-number'>238</span>	
<span class='line-number'>239</span>	                            @* Navigation *@
<span class='line-number'>240</span>	                            &lt;div class=&quot;u-pull--left&quot;&gt;
<span class='line-number'>241</span>	                                @MobileNavigationTrigger()
<span class='line-number'>242</span>	                                @RenderHeaderNavigation()
<span class='line-number'>243</span>	                            &lt;/div&gt;
<span class='line-number'>244</span>	
<span class='line-number'>245</span>	                            &lt;div class=&quot;grid__cell grid__cell--align-middle-right&quot;&gt;
<span class='line-number'>246</span>	                                &lt;ul class=&quot;menu dw-mod u-pull--right&quot;&gt;
<span class='line-number'>247</span>	                                    @RenderSignIn(&quot;inNavigation&quot;, userInitials)
<span class='line-number'>248</span>	                                    @RenderLanguageSelector()
<span class='line-number'>249</span>	                                    @RenderFavorites()
<span class='line-number'>250</span>	                                    @RenderMiniCart()
<span class='line-number'>251</span>	                                &lt;/ul&gt;
<span class='line-number'>252</span>	                            &lt;/div&gt;
<span class='line-number'>253</span>	                        &lt;/div&gt;
<span class='line-number'>254</span>	                    &lt;/div&gt;
<span class='line-number'>255</span>	                &lt;/nav&gt;
<span class='line-number'>256</span>	
<span class='line-number'>257</span>	            &lt;!-- Searchbar --&gt;
<span class='line-number'>258</span>	                &lt;div class=&quot;u-box-shadow u-color-light-gray--bg u-inline-block u-full-width&quot;&gt;
<span class='line-number'>259</span>	                    &lt;div class=&quot;center-container top-container__center-container dw-mod&quot;&gt;
<span class='line-number'>260</span>	                        &lt;div class=&quot;typeahead typeahead--centered u-color-inherit js-typeahead dw-mod&quot; data-page-size=&quot;10&quot; id=&quot;ProductSearchBar&quot; data-search-page-id=&quot;@productSearchPageId&quot; data-result-page-id=&quot;@productsPageId&quot; data-groups-page-id=&quot;@productGroupsPageId&quot;&gt;
<span class='line-number'>261</span>	                            &lt;button type=&quot;button&quot; class=&quot;btn btn--condensed u-color-light-gray--bg typeahead-group-btn dw-mod js-typeahead-groups-btn&quot; data-group-id=&quot;all&quot;&gt;@Translate(&quot;All&quot;)&lt;/button&gt;
<span class='line-number'>262</span>	                            &lt;ul class=&quot;dropdown dropdown--absolute-position js-ajax-container js-typeahead-groups-content dw-mod&quot; id=&quot;ProductSearchBarGroupsContent&quot; data-template=&quot;SearchGroupsTemplate&quot; data-json-feed=&quot;/Default.aspx?ID=@productGroupsPageId&amp;feedType=productGroups&quot; data-init-onload=&quot;false&quot;&gt;&lt;/ul&gt;
<span class='line-number'>263</span>	                            &lt;div class=&quot;typeahead-search-field&quot;&gt;
<span class='line-number'>264</span>	                                &lt;input type=&quot;text&quot; class=&quot;u-no-margin u-full-width js-typeahead-search-field&quot; placeholder=&quot;@searchPlaceholder&quot; value=&quot;@searchValue&quot;&gt;
<span class='line-number'>265</span>	                                &lt;ul class=&quot;dropdown dropdown--absolute-position u-full-width js-ajax-container js-typeahead-search-content dw-mod&quot; id=&quot;ProductSearchBarContent&quot; data-template=&quot;SearchContentTemplate&quot; data-no-result-template=&quot;SearchEmpty&quot; data-json-feed=&quot;/Default.aspx?ID=@productSearchPageId&amp;feedType=productsOnly&quot; data-init-onload=&quot;false&quot;&gt;&lt;/ul&gt;
<span class='line-number'>266</span>	                            &lt;/div&gt;
<span class='line-number'>267</span>	                            &lt;button type=&quot;button&quot; class=&quot;btn btn--condensed btn--primary u-no-margin dw-mod js-typeahead-enter-btn&quot;&gt;&lt;i class=&quot;fa fa-search&quot;&gt;&lt;/i&gt;&lt;/button&gt;
<span class='line-number'>268</span>	                        &lt;/div&gt;
<span class='line-number'>269</span>	                    &lt;/div&gt;
<span class='line-number'>270</span>	                &lt;/div&gt;
<span class='line-number'>271</span>	            }
<span class='line-number'>272</span>	            @if (topLayout == &quot;minimal&quot;)
<span class='line-number'>273</span>	            {
<span class='line-number'>274</span>	            &lt;!-- Main navigation --&gt;
<span class='line-number'>275</span>	                &lt;nav class=&quot;main-navigation dw-mod&quot;&gt;
<span class='line-number'>276</span>	                    &lt;div class=&quot;center-container top-container__center-container dw-mod&quot;&gt;
<span class='line-number'>277</span>	                        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>278</span>	
<span class='line-number'>279</span>	                            &lt;div class=&quot;grid__col-md-3 grid--align-self-center grid__col--bleed-y&quot;&gt;
<span class='line-number'>280</span>	                                &lt;div class=&quot;logo u-padding--xs dw-mod&quot;&gt;
<span class='line-number'>281</span>	                                    &lt;a href=&quot;/Default.aspx?ID=@firstPageId&quot;&gt;
<span class='line-number'>282</span>	                                        &lt;img class=&quot;grid__cell-img&quot; src=&quot;@logo&quot; alt=&quot;Logo&quot; /&gt;
<span class='line-number'>283</span>	                                    &lt;/a&gt;
<span class='line-number'>284</span>	                                &lt;/div&gt;
<span class='line-number'>285</span>	                            &lt;/div&gt;
<span class='line-number'>286</span>	
<span class='line-number'>287</span>	                            @* Navigation *@
<span class='line-number'>288</span>	                            &lt;div class=&quot;u-pull--left&quot;&gt;
<span class='line-number'>289</span>	                                @MobileNavigationTrigger()
<span class='line-number'>290</span>	                                @RenderHeaderNavigation()
<span class='line-number'>291</span>	                            &lt;/div&gt;
<span class='line-number'>292</span>	
<span class='line-number'>293</span>	                            &lt;div class=&quot;grid__cell grid__cell--align-middle-right&quot;&gt;
<span class='line-number'>294</span>	                                &lt;ul class=&quot;menu dw-mod u-pull--right&quot;&gt;
<span class='line-number'>295</span>	                                    @* Search *@
<span class='line-number'>296</span>	                                    &lt;li class=&quot;menu__item menu__item--horizontal menu__item--top-level u-hidden-xxs dw-mod&quot;&gt;
<span class='line-number'>297</span>	                                        &lt;div class=&quot;menu__link u-w50px is-dropdown is-dropdown--no-icon dw-mod&quot;&gt;
<span class='line-number'>298</span>	                                            &lt;i class=&quot;fa fa-search fa-1_5x&quot;&gt;&lt;/i&gt;
<span class='line-number'>299</span>	                                            &lt;div class=&quot;menu menu--dropdown u-w340px top-micro-search dw-mod&quot;&gt;
<span class='line-number'>300</span>	                                                &lt;div class=&quot;typeahead js-typeahead&quot; data-page-size=&quot;10&quot; id=&quot;ProductSearchBar&quot; data-search-page-id=&quot;@productSearchPageId&quot; data-result-page-id=&quot;@productsPageId&quot; data-groups-page-id=&quot;@productGroupsPageId&quot;&gt;
<span class='line-number'>301</span>	                                                    &lt;div class=&quot;typeahead-search-field&quot;&gt;
<span class='line-number'>302</span>	                                                        &lt;input type=&quot;text&quot; class=&quot;u-no-margin u-full-width js-typeahead-search-field&quot; placeholder=&quot;@searchPlaceholder&quot; value=&quot;@searchValue&quot;&gt;
<span class='line-number'>303</span>	                                                        &lt;ul class=&quot;dropdown dropdown--absolute-position u-full-width js-ajax-container js-typeahead-search-content&quot; id=&quot;ProductSearchBarContent&quot; data-template=&quot;SearchContentTemplate&quot; data-no-result-template=&quot;SearchEmpty&quot; data-json-feed=&quot;/Default.aspx?ID=@productSearchPageId&amp;feedType=productsOnly&quot; data-init-onload=&quot;false&quot; data-preloader=&quot;minimal&quot;&gt;&lt;/ul&gt;
<span class='line-number'>304</span>	                                                    &lt;/div&gt;
<span class='line-number'>305</span>	                                                &lt;/div&gt;
<span class='line-number'>306</span>	                                            &lt;/div&gt;
<span class='line-number'>307</span>	                                        &lt;/div&gt;
<span class='line-number'>308</span>	                                    &lt;/li&gt;
<span class='line-number'>309</span>	                                    @RenderSignIn(&quot;inNavigation&quot;, userInitials)
<span class='line-number'>310</span>	                                    @RenderLanguageSelector()
<span class='line-number'>311</span>	                                    @RenderFavorites()
<span class='line-number'>312</span>	                                    @RenderMiniCart()
<span class='line-number'>313</span>	                                &lt;/ul&gt;
<span class='line-number'>314</span>	                            &lt;/div&gt;
<span class='line-number'>315</span>	                        &lt;/div&gt;
<span class='line-number'>316</span>	                    &lt;/div&gt;
<span class='line-number'>317</span>	                &lt;/nav&gt;
<span class='line-number'>318</span>	            }
<span class='line-number'>319</span>	
<span class='line-number'>320</span>	            @* Impersonation bar *@
<span class='line-number'>321</span>	           @* @if (Model.CurrentUser.ID &gt; 0 &amp;&amp; Model.SecondaryUsers.Count &gt; 0)
<span class='line-number'>322</span>	            {
<span class='line-number'>323</span>	                &lt;div class=&quot;u-color-warning--bg&quot;&gt;
<span class='line-number'>324</span>	                    &lt;div class=&quot;center-container top-container__center-container dw-mod&quot;&gt;
<span class='line-number'>325</span>	                        @*Impersonation
<span class='line-number'>326</span>	                        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>327</span>	                            &lt;div class=&quot;grid--align-self-center grid__col-x&quot;&gt;
<span class='line-number'>328</span>	                                @if (Model.CurrentSecondaryUser != null &amp;&amp; Model.CurrentSecondaryUser.ID &gt; 0)
<span class='line-number'>329</span>	                                {
<span class='line-number'>330</span>	                                    string stopImpersonateTranslation = Translate(&quot;Stop impersonation&quot;);
<span class='line-number'>331</span>	                                    string username = &quot;&quot;;
<span class='line-number'>332</span>	                                    if (!string.IsNullOrEmpty(Model.CurrentSecondaryUser.FirstName) &amp;&amp; !string.IsNullOrEmpty(Model.CurrentSecondaryUser.LastName))
<span class='line-number'>333</span>	                                    {
<span class='line-number'>334</span>	                                        username = Model.CurrentSecondaryUser.FirstName + &quot; &quot; + Model.CurrentSecondaryUser.LastName;
<span class='line-number'>335</span>	                                    }
<span class='line-number'>336</span>	                                    else if (!string.IsNullOrEmpty(Model.CurrentSecondaryUser.Name))
<span class='line-number'>337</span>	                                    {
<span class='line-number'>338</span>	                                        username = Model.CurrentSecondaryUser.Name;
<span class='line-number'>339</span>	                                    }
<span class='line-number'>340</span>	                                    else if (!string.IsNullOrEmpty(Model.CurrentSecondaryUser.Email))
<span class='line-number'>341</span>	                                    {
<span class='line-number'>342</span>	                                        username = Model.CurrentSecondaryUser.Email;
<span class='line-number'>343</span>	                                    }
<span class='line-number'>344</span>	                                    else
<span class='line-number'>345</span>	                                    {
<span class='line-number'>346</span>	                                        username = Model.CurrentSecondaryUser.UserName;
<span class='line-number'>347</span>	                                    }
<span class='line-number'>348</span>	                                    &lt;div class=&quot;grid-cell&quot;&gt;
<span class='line-number'>349</span>	                                        &lt;div class=&quot;u-pull--left u-bold u-margin-top&quot;&gt;
<span class='line-number'>350</span>	                                            &lt;i class=&quot;fa fa-user-secret&quot;&gt;&lt;/i&gt;
<span class='line-number'>351</span>	                                            @username&lt;text&gt;&amp;nbsp;&lt;/text&gt;@Translate(&quot;is impersonated by&quot;)&lt;text&gt;&amp;nbsp;&lt;/text&gt;@Pageview.User.UserName
<span class='line-number'>352</span>	                                        &lt;/div&gt;
<span class='line-number'>353</span>	                                        &lt;form method=&quot;post&quot; class=&quot;u-pull--right u-no-margin&quot;&gt;
<span class='line-number'>354</span>	                                            &lt;input type=&quot;submit&quot; class=&quot;btn btn--secondary dw-mod u-no-margin&quot; name=&quot;DwExtranetRemoveSecondaryUser&quot; value=&quot;@stopImpersonateTranslation&quot;&gt;
<span class='line-number'>355</span>	                                        &lt;/form&gt;
<span class='line-number'>356</span>	                                    &lt;/div&gt;
<span class='line-number'>357</span>	                                }
<span class='line-number'>358</span>	                                else
<span class='line-number'>359</span>	                                {
<span class='line-number'>360</span>	                                    string viewListTranslation = Translate(&quot;View the list of users you can impersonate&quot;);
<span class='line-number'>361</span>	                                    &lt;div class=&quot;grid-cell u-bold&quot;&gt;
<span class='line-number'>362</span>	                                        &lt;i class=&quot;fa fa-user-secret&quot;&gt;&lt;/i&gt;
<span class='line-number'>363</span>	                                        &lt;a href=&quot;/Default.aspx?ID=@impersonationPageId&quot; title=&quot;@viewListTranslation&quot; class=&quot;u-color-font-black&quot;&gt;@viewListTranslation&lt;/a&gt;
<span class='line-number'>364</span>	                                    &lt;/div&gt;
<span class='line-number'>365</span>	                                }
<span class='line-number'>366</span>	                            &lt;/div&gt;
<span class='line-number'>367</span>	                        &lt;/div&gt;
<span class='line-number'>368</span>	                    &lt;/div&gt;
<span class='line-number'>369</span>	                &lt;/div&gt;
<span class='line-number'>370</span>	            }*@
<span class='line-number'>371</span>	        &lt;/header&gt;
<span class='line-number'>372</span>	
<span class='line-number'>373</span>	        &lt;!-- Floating mini cart --&gt;
<span class='line-number'>374</span>	        @if (!stickyMenu &amp;&amp; pageId == productsPageId &amp;&amp; Pageview.Device.ToString() != &quot;Mobile&quot; &amp;&amp; Pageview.Device.ToString() != &quot;Tablet&quot;)
<span class='line-number'>375</span>	        {
<span class='line-number'>376</span>	            &lt;div class=&quot;floating-mini-cart u-hidden dw-mod&quot; id=&quot;FloatingMiniCart&quot;&gt;
<span class='line-number'>377</span>	                &lt;div class=&quot;mini-cart dw-mod&quot;&gt;
<span class='line-number'>378</span>	                    &lt;a href=&quot;/Default.aspx?ID=@cartPageId&amp;Purge=True&quot; class=&quot;menu-tools__link menu__link--condensed dw-mod js-mini-cart-button&quot; onmouseover=&quot;Cart.UpdateMiniCart(event, &#39;SecondaryMiniCart&#39;, &#39;/Default.aspx?ID=@miniCartFeedPageId&amp;feedType=MiniCart&#39;)&quot;&gt;
<span class='line-number'>379</span>	                        &lt;i class=&quot;fa fa-shopping-cart fa-4x&quot;&gt;&lt;/i&gt;
<span class='line-number'>380</span>	                        &lt;div class=&quot;mini-cart__counter mini-cart__counter--lg dw-mod&quot;&gt;
<span class='line-number'>381</span>	                            &lt;div class=&quot;js-ajax-container js-mini-cart-counter&quot; id=&quot;FloatingCartCounter&quot; data-template=&quot;MiniCartCounterContent&quot; data-json-feed=&quot;/Default.aspx?ID=@miniCartFeedPageId&amp;feedType=Counter&quot; data-preloader=&quot;false&quot; data-init-onload=&quot;false&quot;&gt;
<span class='line-number'>382</span>	                                &lt;div class=&quot;js-mini-cart-counter-content&quot;&gt;
<span class='line-number'>383</span>	                                    @Model.Cart.TotalProductsCount
<span class='line-number'>384</span>	                                &lt;/div&gt;
<span class='line-number'>385</span>	                            &lt;/div&gt;
<span class='line-number'>386</span>	                        &lt;/div&gt;
<span class='line-number'>387</span>	                    &lt;/a&gt;
<span class='line-number'>388</span>	
<span class='line-number'>389</span>	                    &lt;div class=&quot;mini-cart-dropdown js-ajax-container js-mini-cart dw-mod&quot; id=&quot;SecondaryMiniCart&quot; data-template=&quot;MiniCartContent&quot; data-cart-id=&quot;@miniCartFeedPageId&quot; data-json-feed=&quot;/Default.aspx?ID=@miniCartFeedPageId&amp;feedType=MiniCart&quot; data-init-onload=&quot;false&quot;&gt;&lt;/div&gt;
<span class='line-number'>390</span>	                &lt;/div&gt;
<span class='line-number'>391</span>	            &lt;/div&gt;
<span class='line-number'>392</span>	        }
<span class='line-number'>393</span>	
<span class='line-number'>394</span>	        &lt;!-- Render the content --&gt;
<span class='line-number'>395</span>	        &lt;div id=&quot;Page&quot; class=&quot;page @pagePos&quot;&gt;
<span class='line-number'>396</span>	            &lt;section class=&quot;center-container content-container dw-mod&quot; id=&quot;content&quot;&gt;
<span class='line-number'>397</span>	                @inherits Dynamicweb.Rendering.ViewModelTemplate&lt;Dynamicweb.Frontend.PageViewModel&gt;
<span class='line-number'>398</span>	
<span class='line-number'>399</span>	
<span class='line-number'>400</span>	@if (Model.PropertyItem.GetBoolean(&quot;ShowBreadcrumb&quot;)) {
<span class='line-number'>401</span>	    &lt;div class=&quot;grid__col-12 grid__col--bleed-y&quot;&gt;
<span class='line-number'>402</span>	       @RenderNavigation(new
<span class='line-number'>403</span>	       {
<span class='line-number'>404</span>	           id = &quot;breadcrumb&quot;,
<span class='line-number'>405</span>	           template = &quot;breadcrumb.xslt&quot;
<span class='line-number'>406</span>	       })
<span class='line-number'>407</span>	    &lt;/div&gt;
<span class='line-number'>408</span>	}
<span class='line-number'>409</span>	
<span class='line-number'>410</span>	&lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>411</span>	    @if (Model.PropertyItem.GetBoolean(&quot;LeftMenu&quot;) &amp;&amp; RenderNavigation(new { }) != null)
<span class='line-number'>412</span>	    {
<span class='line-number'>413</span>	        &lt;nav class=&quot;grid__col-md-3 grid__col-sm-12 grid__col-xs-12 paragraph-container&quot;&gt;
<span class='line-number'>414</span>	            &lt;div class=&quot;grid__cell&quot;&gt;
<span class='line-number'>415</span>	               @RenderNavigation(new
<span class='line-number'>416</span>	               {
<span class='line-number'>417</span>	                   id = &quot;leftnav&quot;,
<span class='line-number'>418</span>	                   cssclass = &quot;menu dwnavigation&quot;,
<span class='line-number'>419</span>	                   endlevel = 5,
<span class='line-number'>420</span>	                   template = &quot;LeftNavigation.xslt&quot;
<span class='line-number'>421</span>	                })
<span class='line-number'>422</span>	            &lt;/div&gt;
<span class='line-number'>423</span>	        &lt;/nav&gt;
<span class='line-number'>424</span>	    }
<span class='line-number'>425</span>	    &lt;div class=&quot;grid__col-auto grid__col--bleed&quot;&gt;
<span class='line-number'>426</span>	        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>427</span>	            @Model.Placeholder(&quot;dwcontent&quot;, &quot;content&quot;, &quot;default:true;sort:1&quot;)
<span class='line-number'>428</span>	        &lt;/div&gt;
<span class='line-number'>429</span>	    &lt;/div&gt;
<span class='line-number'>430</span>	&lt;/div&gt;   
<span class='line-number'>431</span>	            &lt;/section&gt;
<span class='line-number'>432</span>	        &lt;/div&gt;
<span class='line-number'>433</span>	    &lt;/main&gt;
<span class='line-number'>434</span>	
<span class='line-number'>435</span>	    @RenderFooter()
<span class='line-number'>436</span>	
<span class='line-number'>437</span>	
<span class='line-number'>438</span>	    &lt;!-- Content rendering helpers --&gt;
<span class='line-number'>439</span>	
<span class='line-number'>440</span>	    @helper MobileNavigation(string userInitials)
<span class='line-number'>441</span>	    {
<span class='line-number'>442</span>	int pageId = Model.TopPage.ID;
<span class='line-number'>443</span>	string signInPage = GetPageIdByNavigationTag(&quot;SignInPage&quot;).ToString();
<span class='line-number'>444</span>	string myProfilePageId = (Model.CurrentUser.ID &lt;= 0) ? GetPageIdByNavigationTag(&quot;SignInPage&quot;).ToString() + &quot;&amp;RedirectPageId=&quot; + GetPageIdByNavigationTag(&quot;CustomerProfile&quot;).ToString() : GetPageIdByNavigationTag(&quot;CustomerProfile&quot;).ToString();
<span class='line-number'>445</span>	string myOrdersPageId = (Model.CurrentUser.ID &lt;= 0) ? GetPageIdByNavigationTag(&quot;SignInPage&quot;).ToString() + &quot;&amp;RedirectPageId=&quot; + GetPageIdByNavigationTag(&quot;CustomerOrders&quot;).ToString() : GetPageIdByNavigationTag(&quot;CustomerOrders&quot;).ToString();
<span class='line-number'>446</span>	string myFavoritesPageId = (Model.CurrentUser.ID &lt;= 0) ? GetPageIdByNavigationTag(&quot;SignInPage&quot;).ToString() + &quot;&amp;RedirectPageId=&quot; + GetPageIdByNavigationTag(&quot;CustomerFavorites&quot;).ToString() : GetPageIdByNavigationTag(&quot;CustomerFavorites&quot;).ToString();
<span class='line-number'>447</span>	string mobileNavigationLevels = Model.Area.Item.GetBoolean(&quot;MobileNavigationLevels&quot;) ? Model.Area.Item.GetString(&quot;MobileNavigationLevels&quot;) : &quot;3&quot;;
<span class='line-number'>448</span>	
<span class='line-number'>449</span>	int miniCartFeedPageId = GetPageIdByNavigationTag(&quot;MiniCartFeed&quot;);
<span class='line-number'>450</span>	int cartFeedPageId = GetPageIdByNavigationTag(&quot;CartOrderlinesFeed&quot;);
<span class='line-number'>451</span>	int createAccountPageId = GetPageIdByNavigationTag(&quot;CreateAccount&quot;);
<span class='line-number'>452</span>	
<span class='line-number'>453</span>	if (Pageview.Device.ToString() == &quot;Mobile&quot; || Pageview.Device.ToString() == &quot;Tablet&quot;)
<span class='line-number'>454</span>	{
<span class='line-number'>455</span>	        &lt;!-- Trigger for mobile navigation --&gt;
<span class='line-number'>456</span>	        &lt;input type=&quot;checkbox&quot; id=&quot;MobileNavTrigger&quot; class=&quot;mobile-nav-trigger&quot; /&gt;
<span class='line-number'>457</span>	
<span class='line-number'>458</span>	        &lt;!-- Mobile navigation --&gt;
<span class='line-number'>459</span>	        &lt;nav class=&quot;mobile-navigation dw-mod&quot;&gt;
<span class='line-number'>460</span>	            &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>461</span>	                &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>462</span>	                    &lt;div class=&quot;grid__cell&quot;&gt;
<span class='line-number'>463</span>	                       @* &lt;div class=&quot;u-pull--left&quot;&gt;
<span class='line-number'>464</span>	                            @if (Model.Languages.Count &gt; 0)
<span class='line-number'>465</span>	                            {
<span class='line-number'>466</span>	                                string selectedLanguage = &quot;&quot;;
<span class='line-number'>467</span>	                                foreach (var lang in Model.Languages)
<span class='line-number'>468</span>	                                {
<span class='line-number'>469</span>	                                    if (lang.IsCurrent)
<span class='line-number'>470</span>	                                    {
<span class='line-number'>471</span>	                                        selectedLanguage = lang.Name;
<span class='line-number'>472</span>	                                    }
<span class='line-number'>473</span>	                                }
<span class='line-number'>474</span>	
<span class='line-number'>475</span>	                                &lt;div class=&quot;btn btn--clean btn--condensed u-no-margin is-dropdown is-dropdown--no-icon dw-mod&quot;&gt;
<span class='line-number'>476</span>	                                    &lt;i class=&quot;fa fa-globe&quot;&gt;&lt;/i&gt; @selectedLanguage
<span class='line-number'>477</span>	                                    &lt;div class=&quot;menu menu--dropdown u-w100px u-ta-left dw-mod&quot;&gt;
<span class='line-number'>478</span>	                                        @foreach (var lang in Model.Languages)
<span class='line-number'>479</span>	                                        {
<span class='line-number'>480</span>	                                            &lt;a href=&quot;/Default.aspx?ID=@lang.Page.ID&amp;CurrencyCode=@Dynamicweb.Services.Areas.GetArea(lang.ID).EcomCurrencyId&quot; class=&quot;menu-dropdown__item dw-mod&quot;&gt;@lang.Name&lt;/a&gt;
<span class='line-number'>481</span>	                                        }
<span class='line-number'>482</span>	                                    &lt;/div&gt;
<span class='line-number'>483</span>	                                &lt;/div&gt;
<span class='line-number'>484</span>	                            }
<span class='line-number'>485</span>	                        &lt;/div&gt;*@
<span class='line-number'>486</span>	                        &lt;div class=&quot;u-pull--left&quot;&gt;
<span class='line-number'>487</span>	                            @if (Model.CurrentUser.ID &lt;= 0)
<span class='line-number'>488</span>	                            {
<span class='line-number'>489</span>	                                &lt;a href=&quot;/default.aspx?ID=@signInPage&quot; class=&quot;mobile-navigation__link list__link dw-mod&quot;&gt;&lt;i class=&quot;fa fa-user&quot;&gt;&lt;/i&gt; @Translate(&quot;Sign in&quot;)&lt;/a&gt;
<span class='line-number'>490</span>	                            }
<span class='line-number'>491</span>	                            else
<span class='line-number'>492</span>	                            {
<span class='line-number'>493</span>	                                &lt;label class=&quot;u-padding u-margin-top&quot; for=&quot;mobileSignIn&quot;&gt;&lt;span class=&quot;circle-icon-btn dw-mod&quot;&gt;@userInitials.ToUpper()&lt;/span&gt;&lt;/label&gt;
<span class='line-number'>494</span>	                            }
<span class='line-number'>495</span>	                        &lt;/div&gt;
<span class='line-number'>496</span>	                    &lt;/div&gt;
<span class='line-number'>497</span>	                &lt;/div&gt;
<span class='line-number'>498</span>	                &lt;div class=&quot;grid__col-12 grid__col--line-top u-no-padding&quot;&gt;&lt;/div&gt;
<span class='line-number'>499</span>	
<span class='line-number'>500</span>	                &lt;input type=&quot;checkbox&quot; id=&quot;mobileSignIn&quot; class=&quot;expand-trigger&quot; /&gt;
<span class='line-number'>501</span>	
<span class='line-number'>502</span>	                @if (Model.CurrentUser.ID &gt; 0)                
<span class='line-number'>503</span>	                {
<span class='line-number'>504</span>	                    &lt;div class=&quot;grid__col-12 u-no-padding expand-container dw-mod&quot;&gt;
<span class='line-number'>505</span>	                        &lt;div class=&quot;expand-container__content u-padding dw-mod&quot;&gt;
<span class='line-number'>506</span>	                            &lt;ul class=&quot;list list--clean dw-mod&quot;&gt;
<span class='line-number'>507</span>	                                &lt;li&gt;
<span class='line-number'>508</span>	                                    &lt;a href=&quot;/default.aspx?ID=@myProfilePageId&quot; class=&quot;mobile-navigation__link list__link dw-mod&quot;&gt;&lt;i class=&quot;fa fa-user&quot;&gt;&lt;/i&gt; @Translate(&quot;My Profile&quot;)&lt;/a&gt;
<span class='line-number'>509</span>	                                &lt;/li&gt;
<span class='line-number'>510</span>	                                &lt;li&gt;
<span class='line-number'>511</span>	                                    &lt;a href=&quot;/default.aspx?ID=@myOrdersPageId&quot; class=&quot;mobile-navigation__link list__link dw-mod&quot;&gt;&lt;i class=&quot;fa fa-list&quot;&gt;&lt;/i&gt; @Translate(&quot;My Orders&quot;)&lt;/a&gt;
<span class='line-number'>512</span>	                                &lt;/li&gt;
<span class='line-number'>513</span>	                                
<span class='line-number'>514</span>	
<span class='line-number'>515</span>	                                &lt;li class=&quot;list__seperator dw-mod&quot;&gt;&lt;/li&gt;
<span class='line-number'>516</span>	                                &lt;li&gt;
<span class='line-number'>517</span>	                                    &lt;a href=&quot;/Admin/Public/ExtranetLogoff.aspx?ID=@pageId&quot; class=&quot;mobile-navigation__link list__link dw-mod&quot;&gt;@Translate(&quot;Sign out&quot;)&lt;/a&gt;
<span class='line-number'>518</span>	                                &lt;/li&gt;
<span class='line-number'>519</span>	                                &lt;li class=&quot;list__seperator dw-mod&quot;&gt;&lt;/li&gt;
<span class='line-number'>520</span>	                            &lt;/ul&gt;
<span class='line-number'>521</span>	                        &lt;/div&gt;
<span class='line-number'>522</span>	                    &lt;/div&gt;
<span class='line-number'>523</span>	                }
<span class='line-number'>524</span>	
<span class='line-number'>525</span>	                &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>526</span>	                    @RenderNavigation(new
<span class='line-number'>527</span>	               {
<span class='line-number'>528</span>	                   id = &quot;mobilenavigation&quot;,
<span class='line-number'>529</span>	                   cssclass = &quot;menu menu-mobile dwnavigation&quot;,
<span class='line-number'>530</span>	                   startLevel = 1,
<span class='line-number'>531</span>	                   endlevel = @mobileNavigationLevels,
<span class='line-number'>532</span>	                   template = &quot;BaseMenuForMobile.xslt&quot;
<span class='line-number'>533</span>	               })
<span class='line-number'>534</span>	                &lt;/div&gt;
<span class='line-number'>535</span>	            &lt;/div&gt;
<span class='line-number'>536</span>	        &lt;/nav&gt;
<span class='line-number'>537</span>	        &lt;label class=&quot;mobile-nav-trigger-off&quot; for=&quot;MobileNavTrigger&quot;&gt;&lt;/label&gt;
<span class='line-number'>538</span>	
<span class='line-number'>539</span>	        &lt;div class=&quot;u-visually-hidden js-ajax-container js-mini-cart&quot; id=&quot;miniCart&quot; data-template=&quot;MiniCartContent&quot; data-cart-id=&quot;@cartFeedPageId&quot; data-json-feed=&quot;/Default.aspx?ID=@miniCartFeedPageId&amp;feedType=MiniCart&quot; data-init-onload=&quot;false&quot;&gt;&lt;/div&gt;
<span class='line-number'>540</span>	}
<span class='line-number'>541</span>	}
<span class='line-number'>542</span>	
<span class='line-number'>543</span>	    @helper LoginModal()
<span class='line-number'>544</span>	    {
<span class='line-number'>545</span>	int pageId = Model.TopPage.ID;
<span class='line-number'>546</span>	string topLayout = Model.Area.Item.GetList(&quot;LayoutTop&quot;).SelectedValue;
<span class='line-number'>547</span>	int createAccountPageId = GetPageIdByNavigationTag(&quot;CreateAccount&quot;);
<span class='line-number'>548</span>	int signInProfilePageId = GetPageIdByNavigationTag(&quot;SignInPage&quot;);
<span class='line-number'>549</span>	string forgotPasswordPageId = signInProfilePageId.ToString() + &quot;&amp;LoginAction=Recovery&quot;;
<span class='line-number'>550</span>	string userSignedInError = !Model.LogOnFailed ? &quot;&quot; : &quot;checked&quot;;
<span class='line-number'>551</span>	string userSignedInErrorText = &quot;&quot;;
<span class='line-number'>552</span>	
<span class='line-number'>553</span>	if (Model.LogOnFailed)
<span class='line-number'>554</span>	{
<span class='line-number'>555</span>	    switch (Model.LogOnFailedReason)
<span class='line-number'>556</span>	    {
<span class='line-number'>557</span>	        case Dynamicweb.Security.UserManagement.LogOnFailedReason.PasswordLengthInvalid:
<span class='line-number'>558</span>	            userSignedInErrorText = Translate(&quot;Password length is invalid&quot;);
<span class='line-number'>559</span>	            break;
<span class='line-number'>560</span>	        case Dynamicweb.Security.UserManagement.LogOnFailedReason.IncorrectLogin:
<span class='line-number'>561</span>	            userSignedInErrorText = Translate(&quot;Invalid email or password&quot;);
<span class='line-number'>562</span>	            break;
<span class='line-number'>563</span>	        case Dynamicweb.Security.UserManagement.LogOnFailedReason.ExceededFailedLogOnLimit:
<span class='line-number'>564</span>	            userSignedInErrorText = Translate(&quot;You have exceeded the limit of allowed login attempts. The user account is temporarily locked&quot;);
<span class='line-number'>565</span>	            break;
<span class='line-number'>566</span>	        case Dynamicweb.Security.UserManagement.LogOnFailedReason.LoginLocked:
<span class='line-number'>567</span>	            userSignedInErrorText = Translate(&quot;The user account is temporarily locked&quot;);
<span class='line-number'>568</span>	            break;
<span class='line-number'>569</span>	        case Dynamicweb.Security.UserManagement.LogOnFailedReason.PasswordExpired:
<span class='line-number'>570</span>	            userSignedInErrorText = Translate(&quot;The password has expired and needs to be renewed&quot;);
<span class='line-number'>571</span>	            break;
<span class='line-number'>572</span>	        default:
<span class='line-number'>573</span>	            userSignedInErrorText = Translate(&quot;An unknown error occured&quot;);
<span class='line-number'>574</span>	            break;
<span class='line-number'>575</span>	    }
<span class='line-number'>576</span>	}
<span class='line-number'>577</span>	
<span class='line-number'>578</span>	  @*  &lt;!-- Trigger for the login modal --&gt;
<span class='line-number'>579</span>	    &lt;input type=&quot;checkbox&quot; id=&quot;SignInModalTrigger&quot; class=&quot;modal-trigger @topLayout&quot; @userSignedInError /&gt;
<span class='line-number'>580</span>	
<span class='line-number'>581</span>	    &lt;!-- Login modal --&gt;
<span class='line-number'>582</span>	    &lt;div class=&quot;modal-container&quot;&gt;
<span class='line-number'>583</span>	        &lt;label for=&quot;SignInModalTrigger&quot; id=&quot;SignInModalOverlay&quot; class=&quot;modal-overlay&quot;&gt;&lt;/label&gt;
<span class='line-number'>584</span>	        &lt;div class=&quot;modal modal--xs&quot; id=&quot;SignInModal&quot;&gt;
<span class='line-number'>585</span>	            &lt;div class=&quot;modal__header&quot;&gt;
<span class='line-number'>586</span>	                &lt;h2&gt;@Translate(&quot;Sign in&quot;)&lt;/h2&gt;
<span class='line-number'>587</span>	            &lt;/div&gt;
<span class='line-number'>588</span>	            &lt;div class=&quot;modal__body&quot;&gt;
<span class='line-number'>589</span>	                &lt;form method=&quot;post&quot; id=&quot;LoginForm&quot; class=&quot;u-no-margin&quot;&gt;
<span class='line-number'>590</span>	                    &lt;input type=&quot;hidden&quot; name=&quot;ID&quot; value=&quot;@pageId&quot; /&gt;
<span class='line-number'>591</span>	                    &lt;input type=&quot;hidden&quot; name=&quot;DWExtranetUsernameRemember&quot; value=&quot;True&quot; /&gt;
<span class='line-number'>592</span>	                    &lt;input type=&quot;hidden&quot; name=&quot;DWExtranetPasswordRemember&quot; value=&quot;True&quot; /&gt;
<span class='line-number'>593</span>	                    &lt;input type=&quot;text&quot; class=&quot;u-full-width&quot; id=&quot;LoginUsername&quot; name=&quot;username&quot; placeholder=&quot;@Translate(&quot;Email&quot;)&quot; /&gt;
<span class='line-number'>594</span>	                    &lt;input type=&quot;password&quot; class=&quot;u-full-width&quot; id=&quot;LoginPassword&quot; name=&quot;password&quot; placeholder=&quot;@Translate(&quot;Password&quot;)&quot; /&gt;
<span class='line-number'>595</span>	                    &lt;div class=&quot;field-error dw-mod&quot;&gt;@userSignedInErrorText&lt;/div&gt;
<span class='line-number'>596</span>	
<span class='line-number'>597</span>	                    &lt;label&gt;
<span class='line-number'>598</span>	                        &lt;input type=&quot;checkbox&quot; id=&quot;RememberMe&quot; name=&quot;Autologin&quot; checked=&quot;checked&quot; value=&quot;True&quot;&gt;
<span class='line-number'>599</span>	                        &lt;span&gt;@Translate(&quot;Remember me&quot;, &quot;Remember me&quot;)&lt;/span&gt;
<span class='line-number'>600</span>	                    &lt;/label&gt;
<span class='line-number'>601</span>	
<span class='line-number'>602</span>	                    &lt;button type=&quot;submit&quot; class=&quot;btn btn--primary btn--full dw-mod&quot; name=&quot;LoginAction&quot; value=&quot;Login&quot; onclick=&quot;Buttons.LockButton(event)&quot;&gt;@Translate(&quot;Sign in&quot;)&lt;/button&gt;
<span class='line-number'>603</span>	
<span class='line-number'>604</span>	                    &lt;a class=&quot;btn btn--link-clean dw-mod&quot; href=&quot;/Default.aspx?id=@forgotPasswordPageId&quot;&gt;@Translate(&quot;Forgot your password?&quot;, &quot;Forgot your password?&quot;)&lt;/a&gt;
<span class='line-number'>605</span>	
<span class='line-number'>606</span>	                    &lt;a class=&quot;btn btn--link-clean dw-mod&quot; href=&quot;/default.aspx?ID=@createAccountPageId&quot;&gt;@Translate(&quot;Create account&quot;)?&lt;/a&gt;
<span class='line-number'>607</span>	                &lt;/form&gt;
<span class='line-number'>608</span>	            &lt;/div&gt;
<span class='line-number'>609</span>	        &lt;/div&gt;
<span class='line-number'>610</span>	    &lt;/div&gt;
<span class='line-number'>611</span>	}
<span class='line-number'>612</span>	      *@
<span class='line-number'>613</span>	    @helper RenderHeaderNavigation()
<span class='line-number'>614</span>	    {
<span class='line-number'>615</span>	bool megaMenu = Model.Area.Item.GetList(&quot;NavigationMegaMenu&quot;).SelectedValue.ToLower() == &quot;true&quot; ? true : false;
<span class='line-number'>616</span>	string megamenuPromotionImage = Model.Area.Item.GetFile(&quot;NavigationMegamenuPromotionImage&quot;) != null ? Model.Area.Item.GetFile(&quot;NavigationMegamenuPromotionImage&quot;).Path : &quot;&quot;;
<span class='line-number'>617</span>	bool renderPagesInToolBar = Model.Area.Item.GetBoolean(&quot;RenderPagesInToolBar&quot;);
<span class='line-number'>618</span>	int startLevel = renderPagesInToolBar ? 1 : 0;
<span class='line-number'>619</span>	
<span class='line-number'>620</span>	if (Pageview.Device.ToString() != &quot;Mobile&quot; &amp;&amp; Pageview.Device.ToString() != &quot;Tablet&quot;)
<span class='line-number'>621</span>	{
<span class='line-number'>622</span>	    if (!megaMenu)
<span class='line-number'>623</span>	    {
<span class='line-number'>624</span>	            @RenderNavigation(new
<span class='line-number'>625</span>	       {
<span class='line-number'>626</span>	           id = &quot;topnavigation&quot;,
<span class='line-number'>627</span>	           cssclass = &quot;menu dw-mod dwnavigation&quot;,
<span class='line-number'>628</span>	           startLevel = @startLevel,
<span class='line-number'>629</span>	           ecomStartLevel = @startLevel + 1,
<span class='line-number'>630</span>	           endlevel = 5,
<span class='line-number'>631</span>	           template = &quot;BaseMenuWithDropdown.xslt&quot;
<span class='line-number'>632</span>	       });
<span class='line-number'>633</span>	        }
<span class='line-number'>634</span>	        else
<span class='line-number'>635</span>	        {
<span class='line-number'>636</span>	            @RenderNavigation(new
<span class='line-number'>637</span>	       {
<span class='line-number'>638</span>	           id = &quot;topnavigation&quot;,
<span class='line-number'>639</span>	           cssclass = &quot;menu dw-mod dwnavigation&quot;,
<span class='line-number'>640</span>	           startLevel = @startLevel,
<span class='line-number'>641</span>	           ecomStartLevel = @startLevel + 1,
<span class='line-number'>642</span>	           endlevel = 5,
<span class='line-number'>643</span>	           promotionImage = megamenuPromotionImage,
<span class='line-number'>644</span>	           promotionLink = Model.Area.Item.GetString(&quot;NavigationMegamenuPromotionLink&quot;),
<span class='line-number'>645</span>	           template = &quot;BaseMegaMenu.xslt&quot;
<span class='line-number'>646</span>	       });
<span class='line-number'>647</span>	        }
<span class='line-number'>648</span>	    }
<span class='line-number'>649</span>	}
<span class='line-number'>650</span>	
<span class='line-number'>651</span>	    @helper MobileNavigationTrigger()
<span class='line-number'>652</span>	    {
<span class='line-number'>653</span>	    @* Mobile navigation trigger *@
<span class='line-number'>654</span>	
<span class='line-number'>655</span>	    if (Pageview.Device.ToString() == &quot;Mobile&quot; || Pageview.Device.ToString() == &quot;Tablet&quot;)
<span class='line-number'>656</span>	    {
<span class='line-number'>657</span>	        &lt;div class=&quot;menu dw-mod u-pull--left&quot;&gt;
<span class='line-number'>658</span>	            &lt;div class=&quot;menu__item menu__item--horizontal menu__item--top-level dw-mod&quot;&gt;
<span class='line-number'>659</span>	                &lt;label for=&quot;MobileNavTrigger&quot; class=&quot;mobile-nav-trigger-button menu__link dw-mod&quot;&gt;&lt;/label&gt;
<span class='line-number'>660</span>	            &lt;/div&gt;
<span class='line-number'>661</span>	        &lt;/div&gt;
<span class='line-number'>662</span>	    }
<span class='line-number'>663</span>	}
<span class='line-number'>664</span>	
<span class='line-number'>665</span>	    @helper RenderLanguageSelector(string type = &quot;inNavigation&quot;)
<span class='line-number'>666</span>	    {
<span class='line-number'>667</span>	string liClasses = type == &quot;inNavigation&quot; ? &quot;menu__item menu__item--horizontal menu__item--top-level dw-mod u-hidden-xxs&quot; : &quot;menu__item menu__item--horizontal menu--clean u-w40px dw-mod&quot;;
<span class='line-number'>668</span>	string menuLinkClass = type == &quot;inNavigation&quot; ? &quot;menu__link&quot; : &quot;header-menu__link&quot;;
<span class='line-number'>669</span>	
<span class='line-number'>670</span>	    @* Language selector *@
<span class='line-number'>671</span>	    if (Model.Languages.Count &gt; 1)
<span class='line-number'>672</span>	    {
<span class='line-number'>673</span>	        &lt;li class=&quot;@liClasses&quot;&gt;
<span class='line-number'>674</span>	            &lt;div class=&quot;@menuLinkClass u-w40px is-dropdown is-dropdown--no-icon dw-mod&quot;&gt;
<span class='line-number'>675</span>	                &lt;i class=&quot;fa fa-globe fa-1_5x&quot;&gt;&lt;/i&gt;
<span class='line-number'>676</span>	                &lt;div class=&quot;menu menu--dropdown u-w100px dw-mod&quot;&gt;
<span class='line-number'>677</span>	                    @foreach (var lang in Model.Languages)
<span class='line-number'>678</span>	                    {
<span class='line-number'>679</span>	                        &lt;a href=&quot;/Default.aspx?ID=@lang.Page.ID&amp;CurrencyCode=@Dynamicweb.Services.Areas.GetArea(lang.ID).EcomCurrencyId&quot; class=&quot;menu-dropdown__item menu-dropdown__item--link dw-mod&quot;&gt;@lang.Name&lt;/a&gt;
<span class='line-number'>680</span>	                    }
<span class='line-number'>681</span>	                &lt;/div&gt;
<span class='line-number'>682</span>	            &lt;/div&gt;
<span class='line-number'>683</span>	        &lt;/li&gt;
<span class='line-number'>684</span>	    }
<span class='line-number'>685</span>	}
<span class='line-number'>686</span>	
<span class='line-number'>687</span>	    @helper RenderMiniCart(string type = &quot;inNavigation&quot;)
<span class='line-number'>688</span>	    {
<span class='line-number'>689</span>	string liClasses = type == &quot;inNavigation&quot; ? &quot;menu__item menu__item--horizontal menu__item--top-level dw-mod&quot; : &quot;menu__item menu__item--horizontal menu--clean dw-mod&quot;;
<span class='line-number'>690</span>	string menuLinkClass = type == &quot;inNavigation&quot; ? &quot;menu__link&quot; : &quot;header-menu__link&quot;;
<span class='line-number'>691</span>	
<span class='line-number'>692</span>	int miniCartFeedPageId = GetPageIdByNavigationTag(&quot;MiniCartFeed&quot;);
<span class='line-number'>693</span>	int cartFeedPageId = GetPageIdByNavigationTag(&quot;CartOrderlinesFeed&quot;);
<span class='line-number'>694</span>	int cartPageId = GetPageIdByNavigationTag(&quot;CartPage&quot;);
<span class='line-number'>695</span>	double cartProductsCount = Model.Cart.TotalProductsCount;
<span class='line-number'>696</span>	
<span class='line-number'>697</span>	    @* Mini cart *@
<span class='line-number'>698</span>	    &lt;li class=&quot;@liClasses&quot;&gt;
<span class='line-number'>699</span>	        &lt;div class=&quot;mini-cart dw-mod&quot;&gt;
<span class='line-number'>700</span>	            &lt;a href=&quot;/Default.aspx?ID=@cartPageId&amp;Purge=True&quot; id=&quot;miniCartCounterWrap&quot; class=&quot;@menuLinkClass dw-mod js-mini-cart-button&quot; onmouseenter=&quot;Cart.UpdateMiniCart(event, &#39;miniCart&#39;, &#39;/Default.aspx?ID=@miniCartFeedPageId&amp;feedType=MiniCart&#39;)&quot;&gt;
<span class='line-number'>701</span>	                &lt;i class=&quot;fa fa-shopping-cart fa-1_5x&quot;&gt;&lt;/i&gt;
<span class='line-number'>702</span>	                &lt;div class=&quot;mini-cart__counter mini-cart__counter--inline dw-mod&quot;&gt;
<span class='line-number'>703</span>	                    &lt;div class=&quot;js-ajax-container js-mini-cart-counter&quot; id=&quot;cartCounter&quot; data-template=&quot;MiniCartCounterContent&quot; data-json-feed=&quot;/Default.aspx?ID=@miniCartFeedPageId&amp;feedType=Counter&quot; data-init-onload=&quot;false&quot; data-preloader=&quot;false&quot;&gt;
<span class='line-number'>704</span>	                        &lt;div class=&quot;js-mini-cart-counter-content&quot;&gt;
<span class='line-number'>705</span>	                            @cartProductsCount
<span class='line-number'>706</span>	                        &lt;/div&gt;
<span class='line-number'>707</span>	                    &lt;/div&gt;
<span class='line-number'>708</span>	                &lt;/div&gt;
<span class='line-number'>709</span>	            &lt;/a&gt;
<span class='line-number'>710</span>	            @if (Pageview.Device.ToString() != &quot;Mobile&quot; &amp;&amp; Pageview.Device.ToString() != &quot;Tablet&quot;)
<span class='line-number'>711</span>	            {
<span class='line-number'>712</span>	                &lt;div class=&quot;mini-cart-dropdown js-ajax-container js-mini-cart dw-mod&quot; id=&quot;miniCart&quot; data-template=&quot;MiniCartContent&quot; data-cart-id=&quot;@miniCartFeedPageId&quot; data-json-feed=&quot;/Default.aspx?ID=@miniCartFeedPageId&amp;feedType=MiniCart&quot; data-init-onload=&quot;false&quot;&gt;&lt;/div&gt;
<span class='line-number'>713</span>	            }
<span class='line-number'>714</span>	        &lt;/div&gt;
<span class='line-number'>715</span>	    &lt;/li&gt;
<span class='line-number'>716</span>	}
<span class='line-number'>717</span>	
<span class='line-number'>718</span>	    @helper RenderSignIn(string type = &quot;inNavigation&quot;, string userInitials = &quot;&quot;)
<span class='line-number'>719</span>	    {
<span class='line-number'>720</span>	string liClasses = type == &quot;inNavigation&quot; ? &quot;menu__item menu__item--horizontal menu__item--top-level dw-mod u-hidden-xxs&quot; : &quot;menu__item menu__item--horizontal menu__item--clean u-w40px dw-mod&quot;;
<span class='line-number'>721</span>	string menuLinkClass = type == &quot;inNavigation&quot; ? &quot;menu__link&quot; : &quot;header-menu__link&quot;;
<span class='line-number'>722</span>	
<span class='line-number'>723</span>	int pageId = Model.TopPage.ID;
<span class='line-number'>724</span>	string myProfilePageId = (Model.CurrentUser.ID &lt;= 0) ? GetPageIdByNavigationTag(&quot;SignInPage&quot;).ToString() + &quot;&amp;RedirectPageId=&quot; + GetPageIdByNavigationTag(&quot;CustomerProfile&quot;).ToString() : GetPageIdByNavigationTag(&quot;CustomerProfile&quot;).ToString();
<span class='line-number'>725</span>	string myOrdersPageId = (Model.CurrentUser.ID &lt;= 0) ? GetPageIdByNavigationTag(&quot;SignInPage&quot;).ToString() + &quot;&amp;RedirectPageId=&quot; + GetPageIdByNavigationTag(&quot;CustomerOrders&quot;).ToString() : GetPageIdByNavigationTag(&quot;CustomerOrders&quot;).ToString();
<span class='line-number'>726</span>	int myDashboardPageId = GetPageIdByNavigationTag(&quot;CustomerDashboard&quot;);
<span class='line-number'>727</span>	string myFavoritesPageId = (Model.CurrentUser.ID &lt;= 0) ? GetPageIdByNavigationTag(&quot;SignInPage&quot;).ToString() + &quot;&amp;RedirectPageId=&quot; + GetPageIdByNavigationTag(&quot;CustomerFavorites&quot;).ToString() : GetPageIdByNavigationTag(&quot;CustomerFavorites&quot;).ToString();
<span class='line-number'>728</span>	int createAccountPageId = GetPageIdByNavigationTag(&quot;CreateAccount&quot;);
<span class='line-number'>729</span>	int signInProfilePageId = GetPageIdByNavigationTag(&quot;SignInPage&quot;);
<span class='line-number'>730</span>	string forgotPasswordPageId = signInProfilePageId.ToString() + &quot;&amp;LoginAction=Recovery&quot;;
<span class='line-number'>731</span>	
<span class='line-number'>732</span>	    @* Sign in + Customer center links *@
<span class='line-number'>733</span>	    &lt;li class=&quot;@liClasses&quot;&gt;
<span class='line-number'>734</span>	        &lt;div class=&quot;@menuLinkClass is-dropdown is-dropdown--no-icon u-w40px dw-mod&quot;&gt;
<span class='line-number'>735</span>	            @if (Model.CurrentUser.ID &lt;= 0)
<span class='line-number'>736</span>	            {
<span class='line-number'>737</span>	                &lt;i class=&quot;fa fa-user fa-1_5x&quot;&gt;&lt;/i&gt;
<span class='line-number'>738</span>	            }
<span class='line-number'>739</span>	            else
<span class='line-number'>740</span>	            {
<span class='line-number'>741</span>	                &lt;a href=&quot;/default.aspx?ID=@myDashboardPageId&quot; class=&quot;u-color-inherit&quot;&gt;&lt;div class=&quot;circle-icon-btn&quot;&gt;@userInitials.ToUpper()&lt;/div&gt;&lt;/a&gt;
<span class='line-number'>742</span>	            }
<span class='line-number'>743</span>	
<span class='line-number'>744</span>	            &lt;div class=&quot;menu menu--dropdown sign-in-dropdown dw-mod&quot;&gt;
<span class='line-number'>745</span>	                &lt;ul class=&quot;list list--clean dw-mod&quot;&gt;
<span class='line-number'>746</span>	                    @if (Model.CurrentUser.ID &lt;= 0)
<span class='line-number'>747</span>	                    {
<span class='line-number'>748</span>	                        &lt;li&gt;
<span class='line-number'>749</span>	                            &lt;label for=&quot;SignInModalTrigger&quot; class=&quot;btn btn--primary btn--full u-no-margin sign-in-modal-trigger-button dw-mod&quot; onclick=&quot;setTimeout(function () { document.getElementById(&#39;LoginUsername&#39;).focus() }, 10)&quot;&gt;@Translate(&quot;Sign in&quot;)&lt;/label&gt;
<span class='line-number'>750</span>	                        &lt;/li&gt;
<span class='line-number'>751</span>	                        &lt;li&gt;
<span class='line-number'>752</span>	                            &lt;a href=&quot;/default.aspx?ID=@createAccountPageId&quot; class=&quot;list__link dw-mod&quot;&gt;@Translate(&quot;Create account&quot;)&lt;/a&gt;
<span class='line-number'>753</span>	                        &lt;/li&gt;
<span class='line-number'>754</span>	                        &lt;li&gt;
<span class='line-number'>755</span>	                            &lt;a href=&quot;/default.aspx?ID=@forgotPasswordPageId&quot; class=&quot;list__link dw-mod&quot;&gt;@Translate(&quot;Forgot your password?&quot;)&lt;/a&gt;
<span class='line-number'>756</span>	                        &lt;/li&gt;
<span class='line-number'>757</span>	                        &lt;li class=&quot;list__seperator dw-mod&quot;&gt;&lt;/li&gt;
<span class='line-number'>758</span>	                    }
<span class='line-number'>759</span>	                    &lt;li&gt;
<span class='line-number'>760</span>	                        &lt;a href=&quot;/default.aspx?ID=@myProfilePageId&quot; class=&quot;list__link dw-mod&quot;&gt;&lt;i class=&quot;fa fa-user&quot;&gt;&lt;/i&gt; @Translate(&quot;My Profile&quot;)&lt;/a&gt;
<span class='line-number'>761</span>	                    &lt;/li&gt;
<span class='line-number'>762</span>	                    &lt;li&gt;
<span class='line-number'>763</span>	                        &lt;a href=&quot;/default.aspx?ID=@myOrdersPageId&quot; class=&quot;list__link dw-mod&quot;&gt;&lt;i class=&quot;fa fa-list&quot;&gt;&lt;/i&gt; @Translate(&quot;My Orders&quot;)&lt;/a&gt;
<span class='line-number'>764</span>	                    &lt;/li&gt;
<span class='line-number'>765</span>	                    &lt;li&gt;
<span class='line-number'>766</span>	                        &lt;a href=&quot;/default.aspx?ID=@myFavoritesPageId&quot; class=&quot;list__link dw-mod&quot;&gt;&lt;i class=&quot;fa fa-star&quot;&gt;&lt;/i&gt; @Translate(&quot;My Favorites&quot;)&lt;/a&gt;
<span class='line-number'>767</span>	                    &lt;/li&gt;
<span class='line-number'>768</span>	                    @if (Model.CurrentUser.ID &gt; 0)
<span class='line-number'>769</span>	                    {
<span class='line-number'>770</span>	                        &lt;li class=&quot;list__seperator dw-mod&quot;&gt;&lt;/li&gt;
<span class='line-number'>771</span>	                        &lt;li&gt;
<span class='line-number'>772</span>	                            &lt;a href=&quot;/Admin/Public/ExtranetLogoff.aspx?ID=@pageId&quot; class=&quot;list__link dw-mod&quot;&gt;@Translate(&quot;Sign out&quot;)&lt;/a&gt;
<span class='line-number'>773</span>	                        &lt;/li&gt;
<span class='line-number'>774</span>	                    }
<span class='line-number'>775</span>	                &lt;/ul&gt;
<span class='line-number'>776</span>	            &lt;/div&gt;
<span class='line-number'>777</span>	        &lt;/div&gt;
<span class='line-number'>778</span>	    &lt;/li&gt;
<span class='line-number'>779</span>	}
<span class='line-number'>780</span>	
<span class='line-number'>781</span>	    @helper RenderFavorites(string type = &quot;inNavigation&quot;)
<span class='line-number'>782</span>	    {
<span class='line-number'>783</span>	string liClasses = type == &quot;inNavigation&quot; ? &quot;menu__item menu__item--horizontal menu__item--top-level dw-mod u-hidden-xxs&quot; : &quot;menu__item menu__item--horizontal menu--clean u-w40px dw-mod&quot;;
<span class='line-number'>784</span>	string menuLinkClass = type == &quot;inNavigation&quot; ? &quot;menu__link&quot; : &quot;header-menu__link&quot;;
<span class='line-number'>785</span>	
<span class='line-number'>786</span>	string myFavoritesPageId = (Model.CurrentUser.ID &lt;= 0) ? GetPageIdByNavigationTag(&quot;SignInPage&quot;).ToString() + &quot;&amp;RedirectPageId=&quot; + GetPageIdByNavigationTag(&quot;CustomerFavorites&quot;).ToString() : GetPageIdByNavigationTag(&quot;CustomerFavorites&quot;).ToString();
<span class='line-number'>787</span>	
<span class='line-number'>788</span>	    @* Favorites *@
<span class='line-number'>789</span>	    if (Model.CurrentUser.ID &gt; 0)
<span class='line-number'>790</span>	    {
<span class='line-number'>791</span>	        &lt;li class=&quot;@liClasses&quot;&gt;
<span class='line-number'>792</span>	            &lt;a href=&quot;/Default.aspx?ID=@myFavoritesPageId&quot; class=&quot;@menuLinkClass dw-mod&quot;&gt;
<span class='line-number'>793</span>	                &lt;i class=&quot;fa fa-star fa-1_5x&quot;&gt;&lt;/i&gt;
<span class='line-number'>794</span>	            &lt;/a&gt;
<span class='line-number'>795</span>	        &lt;/li&gt;
<span class='line-number'>796</span>	    }
<span class='line-number'>797</span>	}
<span class='line-number'>798</span>	
<span class='line-number'>799</span>	
<span class='line-number'>800</span>	    @helper RenderFooter()
<span class='line-number'>801</span>	    {
<span class='line-number'>802</span>	string footerColumnOneContent = !string.IsNullOrEmpty(Model.Area.Item.GetString(&quot;FooterColumnOne&quot;)) ? Model.Area.Item.GetString(&quot;FooterColumnOne&quot;) : &quot;&quot;;
<span class='line-number'>803</span>	string footerColumnTwoContent = !string.IsNullOrEmpty(Model.Area.Item.GetString(&quot;FooterColumnTwo&quot;)) ? Model.Area.Item.GetString(&quot;FooterColumnTwo&quot;) : &quot;&quot;;
<span class='line-number'>804</span>	string footerColumnOneHeader = Model.Area.Item.GetString(&quot;FooterColumnOneHeader&quot;);
<span class='line-number'>805</span>	string footerColumnTwoHeader = Model.Area.Item.GetString(&quot;FooterColumnTwoHeader&quot;);
<span class='line-number'>806</span>	int newsletterSignUpPageId = GetPageIdByNavigationTag(&quot;NewsletterSignUp&quot;);
<span class='line-number'>807</span>	
<span class='line-number'>808</span>	    &lt;!-- Footer section --&gt;
<span class='line-number'>809</span>	    &lt;footer class=&quot;footer dw-mod&quot;&gt;
<span class='line-number'>810</span>	        &lt;div class=&quot;center-container top-container__center-container dw-mod&quot;&gt;
<span class='line-number'>811</span>	            &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>812</span>	                @if (!string.IsNullOrEmpty(footerColumnOneContent) || !string.IsNullOrEmpty(footerColumnOneHeader))
<span class='line-number'>813</span>	                {
<span class='line-number'>814</span>	                    &lt;div class=&quot;grid__col-md-auto&quot;&gt;
<span class='line-number'>815</span>	                        &lt;h4 class=&quot;footer__heading dw-mod&quot;&gt;@footerColumnOneHeader&lt;/h4&gt;
<span class='line-number'>816</span>	                        @footerColumnOneContent
<span class='line-number'>817</span>	                    &lt;/div&gt;
<span class='line-number'>818</span>	                }
<span class='line-number'>819</span>	                @*  @if (!string.IsNullOrEmpty(footerColumnTwoContent) || !string.IsNullOrEmpty(footerColumnTwoHeader))
<span class='line-number'>820</span>	                    {
<span class='line-number'>821</span>	                        &lt;div class=&quot;grid__col-md-auto&quot;&gt;
<span class='line-number'>822</span>	                            &lt;h4 class=&quot;footer__heading dw-mod&quot;&gt;@footerColumnTwoHeader&lt;/h4&gt;
<span class='line-number'>823</span>	                            @footerColumnTwoContent
<span class='line-number'>824</span>	                        &lt;/div&gt;
<span class='line-number'>825</span>	                    }
<span class='line-number'>826</span>	
<span class='line-number'>827</span>	                    @if (Model.Area.Item.GetBoolean(&quot;FooterNewsletterSignUp&quot;))
<span class='line-number'>828</span>	                    {
<span class='line-number'>829</span>	                        &lt;div class=&quot;grid__col-md-auto&quot;&gt;
<span class='line-number'>830</span>	                            &lt;h4 class=&quot;footer__heading dw-mod&quot;&gt;@Translate(&quot;Mailing list&quot;, &quot;Mailing list&quot;)&lt;/h4&gt;
<span class='line-number'>831</span>	                            &lt;p&gt;@Translate(&quot;Sign up if you would like to receive occasional treats from us&quot;, &quot;Sign up if you would like to receive occasional treats from us&quot;).&lt;/p&gt;
<span class='line-number'>832</span>	                            &lt;form class=&quot;form dw-mod&quot; name=&quot;NewsletterRedirect&quot; action=&#39;/Default.aspx&#39; method=&quot;get&quot; enctype=&quot;multipart/form-data&quot;&gt;
<span class='line-number'>833</span>	                                &lt;input name=&quot;ID&quot; id=&quot;ID&quot; value=&quot;@newsletterSignUpPageId&quot; type=&quot;hidden&quot; /&gt;
<span class='line-number'>834</span>	                                &lt;div class=&quot;form__field-combi&quot;&gt;
<span class='line-number'>835</span>	                                    &lt;input name=&quot;NewsletterEmail&quot; id=&quot;NewsletterEmail&quot; type=&quot;text&quot; placeholder=&#39;@Translate(&quot;Your email address&quot;, &quot;Your email address&quot;)&#39; /&gt;
<span class='line-number'>836</span>	                                    &lt;input class=&quot;btn btn--primary dw-mod&quot; type=&quot;submit&quot; id=&quot;Submitter&quot; value=&#39;@Translate(&quot;Go&quot;, &quot;Go&quot;)&#39; /&gt;
<span class='line-number'>837</span>	                                &lt;/div&gt;
<span class='line-number'>838</span>	                            &lt;/form&gt;
<span class='line-number'>839</span>	                        &lt;/div&gt;
<span class='line-number'>840</span>	                    }
<span class='line-number'>841</span>	                    @if (Model.Area.Item.GetItems(&quot;FooterSocialLinks&quot;).Count &gt; 0)
<span class='line-number'>842</span>	                    {
<span class='line-number'>843</span>	                        &lt;div class=&quot;grid__col-md-auto&quot;&gt;
<span class='line-number'>844</span>	                            &lt;h4 class=&quot;footer__heading dw-mod&quot;&gt;@Translate(&quot;Social links&quot;, &quot;Social links&quot;)&lt;/h4&gt;
<span class='line-number'>845</span>	
<span class='line-number'>846</span>	                            &lt;div class=&quot;collection dw-mod&quot;&gt;
<span class='line-number'>847</span>	                                @foreach (var socialitem in Model.Area.Item.GetItems(&quot;FooterSocialLinks&quot;))
<span class='line-number'>848</span>	                                {
<span class='line-number'>849</span>	                                    //Fields.FirstOrDefault(x =&gt; x.SystemName == &quot;Icon&quot;).GetString()
<span class='line-number'>850</span>	                                    var socialIcon = socialitem.GetValue(&quot;Icon&quot;) as Dynamicweb.Frontend.ListViewModel;
<span class='line-number'>851</span>	                                    string socialIconClass = socialIcon.SelectedValue;
<span class='line-number'>852</span>	                                    string socialIconTitle = socialIcon.SelectedName;
<span class='line-number'>853</span>	                                    string socialLink = socialitem.GetString(&quot;Link&quot;);
<span class='line-number'>854</span>	
<span class='line-number'>855</span>	                                    &lt;a href=&quot;@socialLink&quot; title=&quot;@socialIconTitle&quot;&gt;&lt;i class=&quot;fa @socialIconClass fa-2x&quot;&gt;&lt;/i&gt;&lt;/a&gt;
<span class='line-number'>856</span>	                                }
<span class='line-number'>857</span>	                            &lt;/div&gt;
<span class='line-number'>858</span>	                        &lt;/div&gt;
<span class='line-number'>859</span>	                    }
<span class='line-number'>860</span>	                    &lt;div class=&quot;grid__col-12 grid--align-center&quot;&gt;
<span class='line-number'>861</span>	                        &lt;p&gt;@Model.Area.Item.GetString(&quot;FooterCopyrightText&quot;)&lt;/p&gt;
<span class='line-number'>862</span>	                    &lt;/div&gt;
<span class='line-number'>863</span>	                *@
<span class='line-number'>864</span>	            &lt;/div&gt;
<span class='line-number'>865</span>	        &lt;/div&gt;
<span class='line-number'>866</span>	    &lt;/footer&gt;
<span class='line-number'>867</span>	}
<span class='line-number'>868</span>	
<span class='line-number'>869</span>	
<span class='line-number'>870</span>	    @* Templates for Typeahead *@
<span class='line-number'>871</span>	    &lt;script id=&quot;SearchGroupsTemplate&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>872</span>	        &lt;li class=&quot;dropdown__item dw-mod&quot; onclick=&quot;Search.UpdateGroupSelection(this)&quot; data-group-id=&quot;{{id}}&quot;&gt;{{name}}&lt;/li&gt;
<span class='line-number'>873</span>	    &lt;/script&gt;
<span class='line-number'>874</span>	
<span class='line-number'>875</span>	    &lt;script id=&quot;SearchContentTemplate&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>876</span>	        &lt;li class=&quot;dropdown__item dropdown__item--seperator dw-mod&quot;&gt;
<span class='line-number'>877</span>	            &lt;a href=&quot;{{link}}&quot; class=&quot;js-typeahead-link u-color-inherit u-pull--left&quot;&gt;
<span class='line-number'>878</span>	                &lt;div class=&quot;u-margin-right u-pull--left {{noimage}} u-hidden-xs u-hidden-xxs&quot;&gt;&lt;img src=&quot;/Admin/Public/GetImage.ashx?width=45&amp;height=38&amp;crop=1&amp;Compression=75&amp;image={{image}}&quot; alt=&quot;{{name}}&quot;&gt;&lt;/div&gt;
<span class='line-number'>879</span>	                &lt;div class=&quot;u-pull--left&quot;&gt;
<span class='line-number'>880</span>	                    &lt;div class=&quot;u-bold u-max-w220px u-truncate-text js-typeahead-name&quot;&gt;{{name}}&lt;/div&gt;
<span class='line-number'>881</span>	                    &lt;div&gt;{{price}}&lt;/div&gt;
<span class='line-number'>882</span>	                &lt;/div&gt;
<span class='line-number'>883</span>	            &lt;/a&gt;
<span class='line-number'>884</span>	            &lt;div class=&quot;u-margin-left u-pull--right u-hidden-xs u-hidden-xxs&quot;&gt;
<span class='line-number'>885</span>	                &lt;button class=&quot;btn btn--primary btn--condensed u-no-margin dw-mod {{hideBuyOptions}} js-ignore-click-outside&quot; onclick=&quot;Cart.AddToCart(event, &#39;{{id}}&#39;, &#39;1&#39;)&quot;&gt;&lt;i class=&quot;fa fa-shopping-cart js-ignore-click-outside&quot;&gt;&lt;/i&gt;&lt;/button&gt;
<span class='line-number'>886</span>	                &lt;a href=&quot;{{link}}&quot; class=&quot;btn btn--secondary btn--condensed u-no-margin dw-mod {{hideViewMore}} js-ignore-click-outside&quot;&gt;@Translate(&quot;View&quot;)&lt;/a&gt;
<span class='line-number'>887</span>	            &lt;/div&gt;
<span class='line-number'>888</span>	        &lt;/li&gt;
<span class='line-number'>889</span>	    &lt;/script&gt;
<span class='line-number'>890</span>	
<span class='line-number'>891</span>	    &lt;script id=&quot;SearchMore&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>892</span>	        &lt;li class=&quot;dropdown__item dropdown__item--not-selectable dw-mod&quot;&gt;
<span class='line-number'>893</span>	            &lt;a href=&quot;/Default.aspx?ID=@productsPageId&amp;Search={{searchParameter}}&amp;GroupID={{groupId}}&quot; class=&quot;btn btn--primary btn--full u-no-margin dw-mod js-typeahead-link&quot;&gt;
<span class='line-number'>894</span>	                @Translate(&quot;View all&quot;)
<span class='line-number'>895</span>	            &lt;/a&gt;
<span class='line-number'>896</span>	        &lt;/li&gt;
<span class='line-number'>897</span>	    &lt;/script&gt;
<span class='line-number'>898</span>	
<span class='line-number'>899</span>	    &lt;script id=&quot;SearchEmpty&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>900</span>	        &lt;li class=&quot;u-margin u-padding-left&quot;&gt;
<span class='line-number'>901</span>	            @Translate(&quot;Your search gave 0 results&quot;)
<span class='line-number'>902</span>	        &lt;/li&gt;
<span class='line-number'>903</span>	    &lt;/script&gt;
<span class='line-number'>904</span>	    
<span class='line-number'>905</span>	
<span class='line-number'>906</span>	    @* Templates for the mini cart *@
<span class='line-number'>907</span>	    &lt;script id=&quot;MiniCartCounterContent&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>908</span>	        &lt;div class=&quot;js-mini-cart-counter-content dw-mod&quot;&gt;
<span class='line-number'>909</span>	            {{numberofproducts}}
<span class='line-number'>910</span>	        &lt;/div&gt;
<span class='line-number'>911</span>	    &lt;/script&gt;
<span class='line-number'>912</span>	
<span class='line-number'>913</span>	    &lt;script id=&quot;MiniCartContent&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>914</span>	        &lt;div class=&quot;mini-cart-dropdown__inner {{isempty}} dw-mod&quot;&gt;
<span class='line-number'>915</span>	            &lt;h4 class=&quot;u-ta-center u-no-margin u-margin-bottom u-margin-top&quot;&gt;@Translate(&quot;Shopping cart&quot;)&lt;/h4&gt;
<span class='line-number'>916</span>	            &lt;div class=&quot;mini-cart-dropdown__body dw-mod&quot;&gt;
<span class='line-number'>917</span>	                &lt;table class=&quot;table mini-cart-table dw-mod&quot;&gt;
<span class='line-number'>918</span>	                    &lt;thead&gt;
<span class='line-number'>919</span>	                        &lt;tr&gt;
<span class='line-number'>920</span>	                            &lt;td&gt;&amp;nbsp;&lt;/td&gt;
<span class='line-number'>921</span>	                            &lt;td&gt;@Translate(&quot;Product&quot;)&lt;/td&gt;
<span class='line-number'>922</span>	                            &lt;td class=&quot;u-ta-right&quot;&gt;@Translate(&quot;Qty&quot;)&lt;/td&gt;
<span class='line-number'>923</span>	                            &lt;td class=&quot;u-ta-right&quot; width=&quot;120&quot;&gt;@Translate(&quot;Price&quot;)&lt;/td&gt;
<span class='line-number'>924</span>	                        &lt;/tr&gt;
<span class='line-number'>925</span>	                    &lt;/thead&gt;
<span class='line-number'>926</span>	
<span class='line-number'>927</span>	                    &lt;tbody id=&quot;MiniCartOrderLines&quot;&gt;&lt;/tbody&gt;
<span class='line-number'>928</span>	
<span class='line-number'>929</span>	                    &lt;tr&gt;
<span class='line-number'>930</span>	                        &lt;td&gt;&lt;i class=&quot;fa fa-credit-card&quot;&gt;&lt;/i&gt;&lt;/td&gt;
<span class='line-number'>931</span>	                        &lt;td&gt;{{paymentmethod}}&lt;/td&gt;
<span class='line-number'>932</span>	                        &lt;td colspan=&quot;2&quot; class=&quot;u-ta-right&quot; width=&quot;130&quot;&gt;{{paymentfee}}&lt;/td&gt;
<span class='line-number'>933</span>	                    &lt;/tr&gt;
<span class='line-number'>934</span>	                    &lt;tr&gt;
<span class='line-number'>935</span>	                        &lt;td&gt;&lt;i class=&quot;fa fa-truck&quot;&gt;&lt;/i&gt;&lt;/td&gt;
<span class='line-number'>936</span>	                        &lt;td&gt;{{shippingmethod}}&lt;/td&gt;
<span class='line-number'>937</span>	                        &lt;td colspan=&quot;2&quot; class=&quot;u-ta-right&quot; width=&quot;130&quot;&gt;{{shippingfee}}&lt;/td&gt;
<span class='line-number'>938</span>	                    &lt;/tr&gt;
<span class='line-number'>939</span>	                    &lt;tr class=&quot;mini-cart-totals dw-mod&quot;&gt;
<span class='line-number'>940</span>	                        &lt;td colspan=&quot;2&quot;&gt;@Translate(&quot;Total&quot;)&lt;/td&gt;
<span class='line-number'>941</span>	                        &lt;td class=&quot;u-ta-right&quot;&gt;{{numberofproducts}}&lt;/td&gt;
<span class='line-number'>942</span>	                        &lt;td class=&quot;u-ta-right&quot; width=&quot;130&quot;&gt;{{totalprice}}&lt;/td&gt;
<span class='line-number'>943</span>	                    &lt;/tr&gt;
<span class='line-number'>944</span>	                &lt;/table&gt;
<span class='line-number'>945</span>	            &lt;/div&gt;
<span class='line-number'>946</span>	
<span class='line-number'>947</span>	            &lt;table class=&quot;table mini-cart-table dw-mod&quot;&gt;
<span class='line-number'>948</span>	                &lt;tr class=&quot;mini-cart-orderlines__footer dw-mod&quot;&gt;
<span class='line-number'>949</span>	                    &lt;td colspan=&quot;2&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;btn btn--secondary u-pull--left u-no-margin dw-mod btn--sm&quot; onclick=&quot;Cart.EmptyCart(event)&quot;&gt;@Translate(&quot;Empty cart&quot;)&lt;/button&gt;&lt;/td&gt;
<span class='line-number'>950</span>	                    &lt;td colspan=&quot;2&quot; class=&quot;u-ta-right&quot;&gt;&lt;a href=&quot;/Default.aspx?ID=@cartPageId&quot; class=&quot;btn btn--primary u-pull--right u-no-margin dw-mod btn--sm&quot;&gt;@Translate(&quot;Proceed to checkout&quot;)&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>951</span>	                &lt;/tr&gt;
<span class='line-number'>952</span>	            &lt;/table&gt;
<span class='line-number'>953</span>	        &lt;/div&gt;
<span class='line-number'>954</span>	    &lt;/script&gt;
<span class='line-number'>955</span>	
<span class='line-number'>956</span>	    &lt;script id=&quot;MiniCartOrderline&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>957</span>	        &lt;tr class=&quot;{{isempty}}&quot;&gt;
<span class='line-number'>958</span>	            &lt;td&gt;&lt;a href=&quot;{{link}}&quot; class=&quot;{{hideimage}}&quot;&gt;&lt;img src=&quot;/Admin/Public/GetImage.ashx?width=50&amp;height=50&amp;crop=5&amp;Compression=75&amp;image={{image}}&quot; alt=&quot;{{name}}&quot;&gt;&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>959</span>	            &lt;td&gt;
<span class='line-number'>960</span>	                &lt;a href=&quot;{{link}}&quot; class=&quot;mini-cart-orderlines__name&quot;&gt;{{name}}&lt;/a&gt;
<span class='line-number'>961</span>	                &lt;a href=&quot;{{link}}&quot; class=&quot;mini-cart-orderlines__name&quot;&gt;{{variantname}}&lt;/a&gt;
<span class='line-number'>962</span>	            &lt;/td&gt;
<span class='line-number'>963</span>	            &lt;td class=&quot;u-ta-right&quot;&gt;{{quantity}}&lt;/td&gt;
<span class='line-number'>964</span>	            &lt;td class=&quot;u-ta-right&quot;&gt;{{totalprice}}&lt;/td&gt;
<span class='line-number'>965</span>	        &lt;/tr&gt;
<span class='line-number'>966</span>	    &lt;/script&gt;
<span class='line-number'>967</span>	
<span class='line-number'>968</span>	    &lt;script id=&quot;MiniCartOrderlineDiscount&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>969</span>	        &lt;tr class=&quot;table__row--no-border {{isempty}}&quot;&gt;
<span class='line-number'>970</span>	            &lt;td&gt;&amp;nbsp;&lt;/td&gt;
<span class='line-number'>971</span>	            &lt;td&gt;&lt;div class=&quot;mini-cart-orderlines__name dw-mod&quot;&gt;{{name}}&lt;/div&gt;&lt;/td&gt;
<span class='line-number'>972</span>	            &lt;td class=&quot;u-ta-right&quot;&gt;&amp;nbsp;&lt;/td&gt;
<span class='line-number'>973</span>	            &lt;td class=&quot;u-ta-right&quot;&gt;{{totalprice}}&lt;/td&gt;
<span class='line-number'>974</span>	        &lt;/tr&gt;
<span class='line-number'>975</span>	    &lt;/script&gt;
<span class='line-number'>976</span>	
<span class='line-number'>977</span>	    &lt;!-- Javascript --&gt;
<span class='line-number'>978</span>	    &lt;script src=&quot;/Files/Templates/Designs/Rapido/js/master.min.js&quot;&gt;&lt;/script&gt;
<span class='line-number'>979</span>	
<span class='line-number'>980</span>	    @if (Model.Area.Item.GetBoolean(&quot;UseCustomJavascript&quot;))
<span class='line-number'>981</span>	    {
<span class='line-number'>982</span>	        &lt;script src=&quot;/Files/Templates/Designs/Rapido/js/custom.min.js&quot;&gt;&lt;/script&gt;
<span class='line-number'>983</span>	    }
<span class='line-number'>984</span>	
<span class='line-number'>985</span>	    &lt;script&gt;
<span class='line-number'>986</span>	    Wireframe.Init(@wireframeMode.ToLower());
<span class='line-number'>987</span>	    &lt;/script&gt;
<span class='line-number'>988</span>	&lt;/body&gt;
<span class='line-number'>989</span>	&lt;/html&gt;
<span class='line-number'>990</span>	
</div>

2018-05-09 10:24:09.0438|ERROR|Templates|Error parsing razor template
Error parsing template "Designs/Rapido/_parsed/Page.parsed.cshtml"
Line 613: Helper blocks cannot be nested within each other.<hr/>
<div class='template-code'>
<span class='line-number'>  1</span>	@inherits Dynamicweb.Rendering.ViewModelTemplate&lt;Dynamicweb.Frontend.PageViewModel&gt;
<span class='line-number'>  2</span>	
<span class='line-number'>  3</span>	@using Dynamicweb.Frontend.Devices
<span class='line-number'>  4</span>	@using Dynamicweb.Extensibility
<span class='line-number'>  5</span>	@using Dynamicweb.Content
<span class='line-number'>  6</span>	@using Dynamicweb.Security
<span class='line-number'>  7</span>	@using System
<span class='line-number'>  8</span>	@using System.Linq
<span class='line-number'>  9</span>	@using System.Web
<span class='line-number'> 10</span>	@using System.IO
<span class='line-number'> 11</span>	
<span class='line-number'> 12</span>	@{
<span class='line-number'> 13</span>	    //General settings
<span class='line-number'> 14</span>	    string favicon = Model.Area.Item.GetFile(&quot;LogoFavicon&quot;) != null ? Model.Area.Item.GetFile(&quot;LogoFavicon&quot;).Path : &quot;/Files/Images/favicon.png&quot;;
<span class='line-number'> 15</span>	    string logo = Model.Area.Item.GetFile(&quot;LogoImage&quot;) != null ? Model.Area.Item.GetFile(&quot;LogoImage&quot;).Path : &quot;/Files/Images/DWLogo.svg&quot;;
<span class='line-number'> 16</span>	    if (Path.GetExtension(logo).ToLower() != &quot;.svg&quot;)
<span class='line-number'> 17</span>	    {
<span class='line-number'> 18</span>	        logo = &quot;/Admin/Public/GetImage.ashx?height=40&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image=&quot; + @logo;
<span class='line-number'> 19</span>	    }
<span class='line-number'> 20</span>	    string searchPlaceholder = Translate(&quot;Search products&quot;, &quot;Search products&quot;);
<span class='line-number'> 21</span>	    string searchValue = HttpContext.Current.Request.QueryString.Get(&quot;Search&quot;) != null ? HttpContext.Current.Request.QueryString.Get(&quot;Search&quot;) : &quot;&quot;;
<span class='line-number'> 22</span>	    string wireframeMode = Model.Area.Item.GetBoolean(&quot;WireframeMode&quot;).ToString();
<span class='line-number'> 23</span>	
<span class='line-number'> 24</span>	    //Font settings
<span class='line-number'> 25</span>	    string navigationFont = Model.Area.Item.GetItem(&quot;NavigationFont&quot;).GetGoogleFont(&quot;FontFamily&quot;).Family.Replace(&quot; &quot;, &quot;+&quot;);
<span class='line-number'> 26</span>	    string mobileNavigationFont = Model.Area.Item.GetItem(&quot;MobileNavigationFont&quot;).GetGoogleFont(&quot;FontFamily&quot;).Family.Replace(&quot; &quot;, &quot;+&quot;);
<span class='line-number'> 27</span>	    string headerFont = Model.Area.Item.GetItem(&quot;ContentLayoutHeaderFont&quot;).GetGoogleFont(&quot;FontFamily&quot;).Family.Replace(&quot; &quot;, &quot;+&quot;);
<span class='line-number'> 28</span>	    string subHeaderFont = Model.Area.Item.GetItem(&quot;ContentLayoutSubheaderFont&quot;).GetGoogleFont(&quot;FontFamily&quot;).Family.Replace(&quot; &quot;, &quot;+&quot;);
<span class='line-number'> 29</span>	    string contentFont = Model.Area.Item.GetItem(&quot;ContentLayoutBodyText&quot;).GetGoogleFont(&quot;FontFamily&quot;).Family.Replace(&quot; &quot;, &quot;+&quot;);
<span class='line-number'> 30</span>	
<span class='line-number'> 31</span>	    //Page IDs for use in the template
<span class='line-number'> 32</span>	    int pageId = Model.TopPage.ID;
<span class='line-number'> 33</span>	    string firstPageId = Model.Area.FirstActivePage.ID.ToString();
<span class='line-number'> 34</span>	    int cartPageId = GetPageIdByNavigationTag(&quot;CartPage&quot;);
<span class='line-number'> 35</span>	    int miniCartFeedPageId = GetPageIdByNavigationTag(&quot;MiniCartFeed&quot;);
<span class='line-number'> 36</span>	    int cartFeedPageId = GetPageIdByNavigationTag(&quot;CartOrderlinesFeed&quot;);
<span class='line-number'> 37</span>	    int productsPageId = GetPageIdByNavigationTag(&quot;ProductsPage&quot;);
<span class='line-number'> 38</span>	    int productSearchPageId = GetPageIdByNavigationTag(&quot;ProductSearchFeed&quot;);
<span class='line-number'> 39</span>	    int productGroupsPageId = GetPageIdByNavigationTag(&quot;ProductGroupsFeed&quot;);
<span class='line-number'> 40</span>	
<span class='line-number'> 41</span>	    int impersonationPageId = GetPageIdByNavigationTag(&quot;Impersonation&quot;);
<span class='line-number'> 42</span>	
<span class='line-number'> 43</span>	    bool stickyMenu = Pageview.Device.ToString() == &quot;Mobile&quot; || Pageview.Device.ToString() == &quot;Tablet&quot; ? false : Model.Area.Item.GetBoolean(&quot;NavigationStickyMenu&quot;);
<span class='line-number'> 44</span>	    string stickyTop = stickyMenu ? &quot;top-container--sticky&quot; : &quot;&quot;;
<span class='line-number'> 45</span>	    string pagePos = stickyMenu ? &quot;js-page-pos&quot; : &quot;&quot;;
<span class='line-number'> 46</span>	    string topLayout = Model.Area.Item.GetList(&quot;LayoutTop&quot;).SelectedValue;
<span class='line-number'> 47</span>	    bool renderPagesInToolBar = Model.Area.Item.GetBoolean(&quot;RenderPagesInToolBar&quot;);
<span class='line-number'> 48</span>	
<span class='line-number'> 49</span>	    string autoCssLink = &quot;/Files/Templates/Designs/Rapido/css/rapido/rapido_&quot; + Model.Area.ID.ToString() + &quot;.min.css?ticks=&quot; + Model.Area.UpdatedDate.Ticks;
<span class='line-number'> 50</span>	
<span class='line-number'> 51</span>	    string userInitials = &quot;&quot;;
<span class='line-number'> 52</span>	    if (Model.CurrentUser.ID != 0)
<span class='line-number'> 53</span>	    {
<span class='line-number'> 54</span>	        if (!String.IsNullOrEmpty(Model.CurrentUser.Name))
<span class='line-number'> 55</span>	        {
<span class='line-number'> 56</span>	            string[] names = Model.CurrentUser.Name.Split(&#39; &#39;);
<span class='line-number'> 57</span>	            userInitials += Model.CurrentUser.Name.Substring(0, 1);
<span class='line-number'> 58</span>	
<span class='line-number'> 59</span>	            if (names.Length &gt; 0)
<span class='line-number'> 60</span>	            {
<span class='line-number'> 61</span>	                userInitials += names[names.Length - 1].Substring(0, 1);
<span class='line-number'> 62</span>	            }
<span class='line-number'> 63</span>	        }
<span class='line-number'> 64</span>	        else
<span class='line-number'> 65</span>	        {
<span class='line-number'> 66</span>	            userInitials += Model.CurrentUser.FirstName != null &amp;&amp; Model.CurrentUser.FirstName != &quot;&quot; ? Model.CurrentUser.FirstName.Substring(0, 1) : &quot;&quot;;
<span class='line-number'> 67</span>	            userInitials += Model.CurrentUser.LastName != null &amp;&amp; Model.CurrentUser.LastName != &quot;&quot; ? Model.CurrentUser.LastName.Substring(0, 1) : &quot;&quot;;
<span class='line-number'> 68</span>	            userInitials += userInitials.Length == 1 &amp;&amp; Model.CurrentUser.FirstName != null &amp;&amp; Model.CurrentUser.FirstName.Length &gt; 1 ? Model.CurrentUser.FirstName.Substring(1, 2) : &quot;&quot;;
<span class='line-number'> 69</span>	            userInitials += userInitials == &quot;&quot; &amp;&amp; Model.CurrentUser.Email != null &amp;&amp; Model.CurrentUser.Email.Length &gt; 1 ? Model.CurrentUser.Email.Substring(0, 2) : &quot;&quot;;
<span class='line-number'> 70</span>	        }
<span class='line-number'> 71</span>	    }
<span class='line-number'> 72</span>	}
<span class='line-number'> 73</span>	&lt;!DOCTYPE html&gt;
<span class='line-number'> 74</span>	
<span class='line-number'> 75</span>	&lt;html&gt;
<span class='line-number'> 76</span>	&lt;head&gt;
<span class='line-number'> 77</span>	    &lt;meta charset=&quot;utf-8&quot; /&gt;
<span class='line-number'> 78</span>	    &lt;title&gt;@Model.TopPage.Name&lt;/title&gt;
<span class='line-number'> 79</span>	    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, maximum-scale=1&quot;&gt;
<span class='line-number'> 80</span>	    &lt;meta name=&quot;robots&quot; content=&quot;index, follow&quot;&gt;
<span class='line-number'> 81</span>	
<span class='line-number'> 82</span>	    &lt;!-- Favicon --&gt;
<span class='line-number'> 83</span>	    &lt;link href=&quot;@favicon&quot; rel=&quot;icon&quot; type=&quot;image/png&quot;&gt;
<span class='line-number'> 84</span>	
<span class='line-number'> 85</span>	    &lt;!-- Font awesome --&gt;
<span class='line-number'> 86</span>	    &lt;link rel=&quot;stylesheet&quot; href=&quot;/Files/Templates/Designs/Rapido/css/rapido/font-awesome.min.css&quot; type=&quot;text/css&quot;&gt;
<span class='line-number'> 87</span>	
<span class='line-number'> 88</span>	    &lt;!-- Base (Default, wireframe) styles --&gt;
<span class='line-number'> 89</span>	    &lt;link rel=&quot;stylesheet&quot; href=&quot;/Files/Templates/Designs/Rapido/css/base/base.css&quot; type=&quot;text/css&quot;&gt;
<span class='line-number'> 90</span>	
<span class='line-number'> 91</span>	    &lt;!-- Rapido Css from Website Settings --&gt;
<span class='line-number'> 92</span>	    &lt;link id=&quot;rapidoCss&quot; rel=&quot;stylesheet&quot; href=&quot;@autoCssLink&quot; type=&quot;text/css&quot;&gt;
<span class='line-number'> 93</span>	
<span class='line-number'> 94</span>	    &lt;!-- Ignite Css (Custom site specific styles) --&gt;
<span class='line-number'> 95</span>	    &lt;link id=&quot;igniteCss&quot; type=&quot;text/css&quot; href=&quot;/Files/Templates/Designs/Rapido/css/ignite/ignite.min.css&quot; rel=&quot;stylesheet&quot;&gt;
<span class='line-number'> 96</span>	
<span class='line-number'> 97</span>	    &lt;!-- Google fonts --&gt;
<span class='line-number'> 98</span>	    @{
<span class='line-number'> 99</span>	        var fonts = new string[5] { @navigationFont, @mobileNavigationFont, @headerFont, @subHeaderFont, @contentFont };
<span class='line-number'>100</span>	        var family = string.Join(&quot;|&quot;, fonts.Distinct().Select(x =&gt; string.Format(&quot;{0}:100,200,300,400,500,600,700,800,900&quot;, x)));
<span class='line-number'>101</span>	    }
<span class='line-number'>102</span>	    &lt;link href=&quot;https://fonts.googleapis.com/css?family=@family&quot; rel=&quot;stylesheet&quot;&gt;
<span class='line-number'>103</span>	&lt;/head&gt;
<span class='line-number'>104</span>	
<span class='line-number'>105</span>	&lt;body&gt;
<span class='line-number'>106</span>	
<span class='line-number'>107</span>	    @MobileNavigation(userInitials)
<span class='line-number'>108</span>	
<span class='line-number'>109</span>	    @LoginModal()
<span class='line-number'>110</span>	
<span class='line-number'>111</span>	    &lt;main class=&quot;site dw-mod&quot;&gt;
<span class='line-number'>112</span>	        &lt;header class=&quot;top-container @stickyTop dw-mod&quot; id=&quot;Top&quot;&gt;
<span class='line-number'>113</span>	            @if (renderPagesInToolBar)
<span class='line-number'>114</span>	            {
<span class='line-number'>115</span>	                &lt;div class=&quot;tools-navigation dw-mod&quot;&gt;
<span class='line-number'>116</span>	                    &lt;div class=&quot;center-container grid top-container__center-container dw-mod&quot;&gt;
<span class='line-number'>117</span>	                        &lt;div class=&quot;grid__col-xs-12 grid__col--bleed-y&quot;&gt;
<span class='line-number'>118</span>	                            &lt;div class=&quot;grid__cell grid__cell--align-middle-right&quot;&gt;
<span class='line-number'>119</span>	                                @RenderNavigation(new
<span class='line-number'>120</span>	                           {
<span class='line-number'>121</span>	                               id = &quot;topnavigation&quot;,
<span class='line-number'>122</span>	                               cssclass = &quot;menu menu-tools dw-mod dwnavigation&quot;,
<span class='line-number'>123</span>	                               template = &quot;TopMenu.xslt&quot;
<span class='line-number'>124</span>	                           })
<span class='line-number'>125</span>	                            &lt;/div&gt;
<span class='line-number'>126</span>	                        &lt;/div&gt;
<span class='line-number'>127</span>	                    &lt;/div&gt;
<span class='line-number'>128</span>	                &lt;/div&gt;
<span class='line-number'>129</span>	            }
<span class='line-number'>130</span>	
<span class='line-number'>131</span>	            @if (topLayout == &quot;normal&quot;)
<span class='line-number'>132</span>	            {
<span class='line-number'>133</span>	            &lt;!-- Header --&gt;
<span class='line-number'>134</span>	                &lt;div class=&quot;header header-top dw-mod&quot;&gt;
<span class='line-number'>135</span>	                    &lt;div class=&quot;center-container top-container__center-container dw-mod&quot;&gt;
<span class='line-number'>136</span>	                        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>137</span>	
<span class='line-number'>138</span>	                            @* Logo *@
<span class='line-number'>139</span>	                            @if (Pageview.Device.ToString() != &quot;Mobile&quot; &amp;&amp; Pageview.Device.ToString() != &quot;Tablet&quot;)
<span class='line-number'>140</span>	                            {
<span class='line-number'>141</span>	                                &lt;div class=&quot;grid__col-md-3 grid__col-sm-3 grid--align-self-center grid__col--bleed-y&quot;&gt;
<span class='line-number'>142</span>	                                    &lt;div class=&quot;logo dw-mod&quot;&gt;
<span class='line-number'>143</span>	                                        &lt;a href=&quot;/Default.aspx?ID=@firstPageId&quot;&gt;
<span class='line-number'>144</span>	                                            &lt;img class=&quot;grid__cell-img&quot; src=&quot;@logo&quot; alt=&quot;Logo&quot; /&gt;
<span class='line-number'>145</span>	                                        &lt;/a&gt;
<span class='line-number'>146</span>	                                    &lt;/div&gt;
<span class='line-number'>147</span>	                                &lt;/div&gt;
<span class='line-number'>148</span>	                            }
<span class='line-number'>149</span>	                            @if (Pageview.Device.ToString() == &quot;Mobile&quot; || Pageview.Device.ToString() == &quot;Tablet&quot;)
<span class='line-number'>150</span>	                            {
<span class='line-number'>151</span>	                                &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>152</span>	                                    &lt;div class=&quot;grid__cell&quot;&gt;
<span class='line-number'>153</span>	                                        &lt;div class=&quot;logo u-max-w220px u-middle u-margin-bottom dw-mod&quot;&gt;
<span class='line-number'>154</span>	                                            &lt;a href=&quot;/Default.aspx?ID=@firstPageId&quot;&gt;
<span class='line-number'>155</span>	                                                &lt;img class=&quot;grid__cell-img&quot; src=&quot;@logo&quot; alt=&quot;Logo&quot; /&gt;
<span class='line-number'>156</span>	                                            &lt;/a&gt;
<span class='line-number'>157</span>	                                        &lt;/div&gt;
<span class='line-number'>158</span>	                                    &lt;/div&gt;
<span class='line-number'>159</span>	                                &lt;/div&gt;
<span class='line-number'>160</span>	                            }
<span class='line-number'>161</span>	
<span class='line-number'>162</span>	                            @if (Pageview.Device.ToString() != &quot;Mobile&quot; &amp;&amp; Pageview.Device.ToString() != &quot;Tablet&quot;)
<span class='line-number'>163</span>	                            {
<span class='line-number'>164</span>	                                @* Search *@
<span class='line-number'>165</span>	                                &lt;div class=&quot;grid__col-6 grid__col--bleed-y grid--align-self-center&quot;&gt;
<span class='line-number'>166</span>	                                    &lt;div class=&quot;typeahead u-margin u-color-inherit js-typeahead&quot; data-page-size=&quot;10&quot; id=&quot;TopProductSearch&quot; data-search-page-id=&quot;@productSearchPageId&quot; data-result-page-id=&quot;@productsPageId&quot; data-groups-page-id=&quot;@productGroupsPageId&quot;&gt;
<span class='line-number'>167</span>	                                        &lt;button type=&quot;button&quot; class=&quot;btn btn--condensed u-color-light-gray--bg typeahead-group-btn dw-mod js-typeahead-groups-btn&quot; data-group-id=&quot;all&quot;&gt;@Translate(&quot;All&quot;)&lt;/button&gt;
<span class='line-number'>168</span>	                                        &lt;ul class=&quot;dropdown dropdown--absolute-position js-ajax-container js-typeahead-groups-content dw-mod&quot; id=&quot;TopProductSearchGroupsContent&quot; data-template=&quot;SearchGroupsTemplate&quot; data-json-feed=&quot;/Default.aspx?ID=@productGroupsPageId&amp;feedType=productGroups&quot; data-init-onload=&quot;false&quot;&gt;&lt;/ul&gt;
<span class='line-number'>169</span>	                                        &lt;input type=&quot;text&quot; class=&quot;typeahead-search-field u-no-margin js-typeahead-search-field&quot; placeholder=&quot;@searchPlaceholder&quot; value=&quot;@searchValue&quot;&gt;
<span class='line-number'>170</span>	                                        &lt;ul class=&quot;dropdown dropdown--absolute-position u-full-width js-ajax-container js-typeahead-search-content u-full-width dw-mod&quot; id=&quot;TopProductSearchContent&quot; data-template=&quot;SearchContentTemplate&quot; data-no-result-template=&quot;SearchEmpty&quot; data-json-feed=&quot;/Default.aspx?ID=@productSearchPageId&amp;feedType=productsOnly&quot; data-init-onload=&quot;false&quot; data-preloader=&quot;minimal&quot;&gt;&lt;/ul&gt;
<span class='line-number'>171</span>	                                        &lt;button type=&quot;button&quot; class=&quot;btn btn--condensed btn--primary u-no-margin dw-mod js-typeahead-enter-btn&quot;&gt;&lt;i class=&quot;fa fa-search&quot;&gt;&lt;/i&gt;&lt;/button&gt;
<span class='line-number'>172</span>	                                    &lt;/div&gt;
<span class='line-number'>173</span>	                                &lt;/div&gt;
<span class='line-number'>174</span>	
<span class='line-number'>175</span>	                                &lt;div class=&quot;grid__cell grid__cell--align-middle-right&quot;&gt;
<span class='line-number'>176</span>	                                    &lt;ul class=&quot;menu dw-mod u-pull--right&quot;&gt;
<span class='line-number'>177</span>	                                        @RenderSignIn(&quot;outsideNavigation&quot;, userInitials)
<span class='line-number'>178</span>	                                        @RenderLanguageSelector(&quot;outsideNavigation&quot;)
<span class='line-number'>179</span>	                                        @RenderFavorites(&quot;outsideNavigation&quot;)
<span class='line-number'>180</span>	                                        @RenderMiniCart(&quot;outsideNavigation&quot;)
<span class='line-number'>181</span>	                                    &lt;/ul&gt;
<span class='line-number'>182</span>	                                &lt;/div&gt;
<span class='line-number'>183</span>	                            }
<span class='line-number'>184</span>	
<span class='line-number'>185</span>	                            @* Mobile search *@
<span class='line-number'>186</span>	                            @* @if (Pageview.Device.ToString() == &quot;Mobile&quot; || Pageview.Device.ToString() == &quot;Tablet&quot;)
<span class='line-number'>187</span>	                                {
<span class='line-number'>188</span>	                                    &lt;div class=&quot;grid__col-12 grid__col--bleed-y grid--align-self-center&quot;&gt;
<span class='line-number'>189</span>	                                        &lt;div class=&quot;grid__cell&quot;&gt;
<span class='line-number'>190</span>	                                            &lt;div class=&quot;js-typeahead&quot; data-page-size=&quot;10&quot; id=&quot;MobileProductSearch&quot; data-search-page-id=&quot;@productSearchPageId&quot; data-result-page-id=&quot;@productsPageId&quot;&gt;
<span class='line-number'>191</span>	                                                &lt;input type=&quot;text&quot; class=&quot;u-full-width js-typeahead-search-field&quot; placeholder=&quot;@searchPlaceholder&quot; value=&quot;@searchValue&quot;&gt;
<span class='line-number'>192</span>	                                                &lt;ul class=&quot;dropdown dropdown--absolute-position js-ajax-container js-typeahead-search-content dw-mod&quot; id=&quot;MobileProductSearchContent&quot; data-template=&quot;SearchContentTemplate&quot; data-no-result-template=&quot;SearchEmpty&quot; data-json-feed=&quot;/Default.aspx?ID=@productSearchPageId&amp;feedType=productsOnly&quot; data-init-onload=&quot;false&quot;&gt;&lt;/ul&gt;
<span class='line-number'>193</span>	                                            &lt;/div&gt;
<span class='line-number'>194</span>	                                        &lt;/div&gt;
<span class='line-number'>195</span>	                                    &lt;/div&gt;
<span class='line-number'>196</span>	                                }
<span class='line-number'>197</span>	                            *@
<span class='line-number'>198</span>	                        &lt;/div&gt;
<span class='line-number'>199</span>	                    &lt;/div&gt;
<span class='line-number'>200</span>	                &lt;/div&gt;
<span class='line-number'>201</span>	
<span class='line-number'>202</span>	            &lt;!-- Main navigation --&gt;
<span class='line-number'>203</span>	                &lt;nav class=&quot;header header-top dw-mod&quot;&gt;
<span class='line-number'>204</span>	                    &lt;div class=&quot;center-container top-container__center-container dw-mod&quot;&gt;
<span class='line-number'>205</span>	                        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>206</span>	                            &lt;div class=&quot;grid__col-12 grid--align-self-center grid__col--bleed&quot;&gt;
<span class='line-number'>207</span>	                                &lt;div class=&quot;grid__cell&quot;&gt;
<span class='line-number'>208</span>	                                    @MobileNavigationTrigger()
<span class='line-number'>209</span>	                                    @RenderHeaderNavigation()
<span class='line-number'>210</span>	
<span class='line-number'>211</span>	                                    @if (Pageview.Device.ToString() == &quot;Mobile&quot; || Pageview.Device.ToString() == &quot;Tablet&quot;)
<span class='line-number'>212</span>	                                    {
<span class='line-number'>213</span>	                                        &lt;ul class=&quot;menu dw-mod u-pull--right&quot;&gt;
<span class='line-number'>214</span>	                                            @RenderMiniCart()
<span class='line-number'>215</span>	                                        &lt;/ul&gt;
<span class='line-number'>216</span>	                                    }
<span class='line-number'>217</span>	                                &lt;/div&gt;
<span class='line-number'>218</span>	                            &lt;/div&gt;
<span class='line-number'>219</span>	                        &lt;/div&gt;
<span class='line-number'>220</span>	                    &lt;/div&gt;
<span class='line-number'>221</span>	                &lt;/nav&gt;
<span class='line-number'>222</span>	            }
<span class='line-number'>223</span>	
<span class='line-number'>224</span>	            @if (topLayout == &quot;condensed&quot;)
<span class='line-number'>225</span>	            {
<span class='line-number'>226</span>	            &lt;!-- Main navigation --&gt;
<span class='line-number'>227</span>	                &lt;nav class=&quot;main-navigation dw-mod&quot;&gt;
<span class='line-number'>228</span>	                    &lt;div class=&quot;center-container top-container__center-container dw-mod&quot;&gt;
<span class='line-number'>229</span>	                        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>230</span>	
<span class='line-number'>231</span>	                            &lt;div class=&quot;grid__col-md-3 grid--align-self-center grid__col--bleed-y&quot;&gt;
<span class='line-number'>232</span>	                                &lt;div class=&quot;logo u-padding--xs dw-mod&quot;&gt;
<span class='line-number'>233</span>	                                    &lt;a href=&quot;/Default.aspx?ID=@firstPageId&quot;&gt;
<span class='line-number'>234</span>	                                        &lt;img class=&quot;grid__cell-img&quot; src=&quot;@logo&quot; alt=&quot;Logo&quot; /&gt;
<span class='line-number'>235</span>	                                    &lt;/a&gt;
<span class='line-number'>236</span>	                                &lt;/div&gt;
<span class='line-number'>237</span>	                            &lt;/div&gt;
<span class='line-number'>238</span>	
<span class='line-number'>239</span>	                            @* Navigation *@
<span class='line-number'>240</span>	                            &lt;div class=&quot;u-pull--left&quot;&gt;
<span class='line-number'>241</span>	                                @MobileNavigationTrigger()
<span class='line-number'>242</span>	                                @RenderHeaderNavigation()
<span class='line-number'>243</span>	                            &lt;/div&gt;
<span class='line-number'>244</span>	
<span class='line-number'>245</span>	                            &lt;div class=&quot;grid__cell grid__cell--align-middle-right&quot;&gt;
<span class='line-number'>246</span>	                                &lt;ul class=&quot;menu dw-mod u-pull--right&quot;&gt;
<span class='line-number'>247</span>	                                    @RenderSignIn(&quot;inNavigation&quot;, userInitials)
<span class='line-number'>248</span>	                                    @RenderLanguageSelector()
<span class='line-number'>249</span>	                                    @RenderFavorites()
<span class='line-number'>250</span>	                                    @RenderMiniCart()
<span class='line-number'>251</span>	                                &lt;/ul&gt;
<span class='line-number'>252</span>	                            &lt;/div&gt;
<span class='line-number'>253</span>	                        &lt;/div&gt;
<span class='line-number'>254</span>	                    &lt;/div&gt;
<span class='line-number'>255</span>	                &lt;/nav&gt;
<span class='line-number'>256</span>	
<span class='line-number'>257</span>	            &lt;!-- Searchbar --&gt;
<span class='line-number'>258</span>	                &lt;div class=&quot;u-box-shadow u-color-light-gray--bg u-inline-block u-full-width&quot;&gt;
<span class='line-number'>259</span>	                    &lt;div class=&quot;center-container top-container__center-container dw-mod&quot;&gt;
<span class='line-number'>260</span>	                        &lt;div class=&quot;typeahead typeahead--centered u-color-inherit js-typeahead dw-mod&quot; data-page-size=&quot;10&quot; id=&quot;ProductSearchBar&quot; data-search-page-id=&quot;@productSearchPageId&quot; data-result-page-id=&quot;@productsPageId&quot; data-groups-page-id=&quot;@productGroupsPageId&quot;&gt;
<span class='line-number'>261</span>	                            &lt;button type=&quot;button&quot; class=&quot;btn btn--condensed u-color-light-gray--bg typeahead-group-btn dw-mod js-typeahead-groups-btn&quot; data-group-id=&quot;all&quot;&gt;@Translate(&quot;All&quot;)&lt;/button&gt;
<span class='line-number'>262</span>	                            &lt;ul class=&quot;dropdown dropdown--absolute-position js-ajax-container js-typeahead-groups-content dw-mod&quot; id=&quot;ProductSearchBarGroupsContent&quot; data-template=&quot;SearchGroupsTemplate&quot; data-json-feed=&quot;/Default.aspx?ID=@productGroupsPageId&amp;feedType=productGroups&quot; data-init-onload=&quot;false&quot;&gt;&lt;/ul&gt;
<span class='line-number'>263</span>	                            &lt;div class=&quot;typeahead-search-field&quot;&gt;
<span class='line-number'>264</span>	                                &lt;input type=&quot;text&quot; class=&quot;u-no-margin u-full-width js-typeahead-search-field&quot; placeholder=&quot;@searchPlaceholder&quot; value=&quot;@searchValue&quot;&gt;
<span class='line-number'>265</span>	                                &lt;ul class=&quot;dropdown dropdown--absolute-position u-full-width js-ajax-container js-typeahead-search-content dw-mod&quot; id=&quot;ProductSearchBarContent&quot; data-template=&quot;SearchContentTemplate&quot; data-no-result-template=&quot;SearchEmpty&quot; data-json-feed=&quot;/Default.aspx?ID=@productSearchPageId&amp;feedType=productsOnly&quot; data-init-onload=&quot;false&quot;&gt;&lt;/ul&gt;
<span class='line-number'>266</span>	                            &lt;/div&gt;
<span class='line-number'>267</span>	                            &lt;button type=&quot;button&quot; class=&quot;btn btn--condensed btn--primary u-no-margin dw-mod js-typeahead-enter-btn&quot;&gt;&lt;i class=&quot;fa fa-search&quot;&gt;&lt;/i&gt;&lt;/button&gt;
<span class='line-number'>268</span>	                        &lt;/div&gt;
<span class='line-number'>269</span>	                    &lt;/div&gt;
<span class='line-number'>270</span>	                &lt;/div&gt;
<span class='line-number'>271</span>	            }
<span class='line-number'>272</span>	            @if (topLayout == &quot;minimal&quot;)
<span class='line-number'>273</span>	            {
<span class='line-number'>274</span>	            &lt;!-- Main navigation --&gt;
<span class='line-number'>275</span>	                &lt;nav class=&quot;main-navigation dw-mod&quot;&gt;
<span class='line-number'>276</span>	                    &lt;div class=&quot;center-container top-container__center-container dw-mod&quot;&gt;
<span class='line-number'>277</span>	                        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>278</span>	
<span class='line-number'>279</span>	                            &lt;div class=&quot;grid__col-md-3 grid--align-self-center grid__col--bleed-y&quot;&gt;
<span class='line-number'>280</span>	                                &lt;div class=&quot;logo u-padding--xs dw-mod&quot;&gt;
<span class='line-number'>281</span>	                                    &lt;a href=&quot;/Default.aspx?ID=@firstPageId&quot;&gt;
<span class='line-number'>282</span>	                                        &lt;img class=&quot;grid__cell-img&quot; src=&quot;@logo&quot; alt=&quot;Logo&quot; /&gt;
<span class='line-number'>283</span>	                                    &lt;/a&gt;
<span class='line-number'>284</span>	                                &lt;/div&gt;
<span class='line-number'>285</span>	                            &lt;/div&gt;
<span class='line-number'>286</span>	
<span class='line-number'>287</span>	                            @* Navigation *@
<span class='line-number'>288</span>	                            &lt;div class=&quot;u-pull--left&quot;&gt;
<span class='line-number'>289</span>	                                @MobileNavigationTrigger()
<span class='line-number'>290</span>	                                @RenderHeaderNavigation()
<span class='line-number'>291</span>	                            &lt;/div&gt;
<span class='line-number'>292</span>	
<span class='line-number'>293</span>	                            &lt;div class=&quot;grid__cell grid__cell--align-middle-right&quot;&gt;
<span class='line-number'>294</span>	                                &lt;ul class=&quot;menu dw-mod u-pull--right&quot;&gt;
<span class='line-number'>295</span>	                                    @* Search *@
<span class='line-number'>296</span>	                                    &lt;li class=&quot;menu__item menu__item--horizontal menu__item--top-level u-hidden-xxs dw-mod&quot;&gt;
<span class='line-number'>297</span>	                                        &lt;div class=&quot;menu__link u-w50px is-dropdown is-dropdown--no-icon dw-mod&quot;&gt;
<span class='line-number'>298</span>	                                            &lt;i class=&quot;fa fa-search fa-1_5x&quot;&gt;&lt;/i&gt;
<span class='line-number'>299</span>	                                            &lt;div class=&quot;menu menu--dropdown u-w340px top-micro-search dw-mod&quot;&gt;
<span class='line-number'>300</span>	                                                &lt;div class=&quot;typeahead js-typeahead&quot; data-page-size=&quot;10&quot; id=&quot;ProductSearchBar&quot; data-search-page-id=&quot;@productSearchPageId&quot; data-result-page-id=&quot;@productsPageId&quot; data-groups-page-id=&quot;@productGroupsPageId&quot;&gt;
<span class='line-number'>301</span>	                                                    &lt;div class=&quot;typeahead-search-field&quot;&gt;
<span class='line-number'>302</span>	                                                        &lt;input type=&quot;text&quot; class=&quot;u-no-margin u-full-width js-typeahead-search-field&quot; placeholder=&quot;@searchPlaceholder&quot; value=&quot;@searchValue&quot;&gt;
<span class='line-number'>303</span>	                                                        &lt;ul class=&quot;dropdown dropdown--absolute-position u-full-width js-ajax-container js-typeahead-search-content&quot; id=&quot;ProductSearchBarContent&quot; data-template=&quot;SearchContentTemplate&quot; data-no-result-template=&quot;SearchEmpty&quot; data-json-feed=&quot;/Default.aspx?ID=@productSearchPageId&amp;feedType=productsOnly&quot; data-init-onload=&quot;false&quot; data-preloader=&quot;minimal&quot;&gt;&lt;/ul&gt;
<span class='line-number'>304</span>	                                                    &lt;/div&gt;
<span class='line-number'>305</span>	                                                &lt;/div&gt;
<span class='line-number'>306</span>	                                            &lt;/div&gt;
<span class='line-number'>307</span>	                                        &lt;/div&gt;
<span class='line-number'>308</span>	                                    &lt;/li&gt;
<span class='line-number'>309</span>	                                    @RenderSignIn(&quot;inNavigation&quot;, userInitials)
<span class='line-number'>310</span>	                                    @RenderLanguageSelector()
<span class='line-number'>311</span>	                                    @RenderFavorites()
<span class='line-number'>312</span>	                                    @RenderMiniCart()
<span class='line-number'>313</span>	                                &lt;/ul&gt;
<span class='line-number'>314</span>	                            &lt;/div&gt;
<span class='line-number'>315</span>	                        &lt;/div&gt;
<span class='line-number'>316</span>	                    &lt;/div&gt;
<span class='line-number'>317</span>	                &lt;/nav&gt;
<span class='line-number'>318</span>	            }
<span class='line-number'>319</span>	
<span class='line-number'>320</span>	            @* Impersonation bar *@
<span class='line-number'>321</span>	           @* @if (Model.CurrentUser.ID &gt; 0 &amp;&amp; Model.SecondaryUsers.Count &gt; 0)
<span class='line-number'>322</span>	            {
<span class='line-number'>323</span>	                &lt;div class=&quot;u-color-warning--bg&quot;&gt;
<span class='line-number'>324</span>	                    &lt;div class=&quot;center-container top-container__center-container dw-mod&quot;&gt;
<span class='line-number'>325</span>	                        @*Impersonation
<span class='line-number'>326</span>	                        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>327</span>	                            &lt;div class=&quot;grid--align-self-center grid__col-x&quot;&gt;
<span class='line-number'>328</span>	                                @if (Model.CurrentSecondaryUser != null &amp;&amp; Model.CurrentSecondaryUser.ID &gt; 0)
<span class='line-number'>329</span>	                                {
<span class='line-number'>330</span>	                                    string stopImpersonateTranslation = Translate(&quot;Stop impersonation&quot;);
<span class='line-number'>331</span>	                                    string username = &quot;&quot;;
<span class='line-number'>332</span>	                                    if (!string.IsNullOrEmpty(Model.CurrentSecondaryUser.FirstName) &amp;&amp; !string.IsNullOrEmpty(Model.CurrentSecondaryUser.LastName))
<span class='line-number'>333</span>	                                    {
<span class='line-number'>334</span>	                                        username = Model.CurrentSecondaryUser.FirstName + &quot; &quot; + Model.CurrentSecondaryUser.LastName;
<span class='line-number'>335</span>	                                    }
<span class='line-number'>336</span>	                                    else if (!string.IsNullOrEmpty(Model.CurrentSecondaryUser.Name))
<span class='line-number'>337</span>	                                    {
<span class='line-number'>338</span>	                                        username = Model.CurrentSecondaryUser.Name;
<span class='line-number'>339</span>	                                    }
<span class='line-number'>340</span>	                                    else if (!string.IsNullOrEmpty(Model.CurrentSecondaryUser.Email))
<span class='line-number'>341</span>	                                    {
<span class='line-number'>342</span>	                                        username = Model.CurrentSecondaryUser.Email;
<span class='line-number'>343</span>	                                    }
<span class='line-number'>344</span>	                                    else
<span class='line-number'>345</span>	                                    {
<span class='line-number'>346</span>	                                        username = Model.CurrentSecondaryUser.UserName;
<span class='line-number'>347</span>	                                    }
<span class='line-number'>348</span>	                                    &lt;div class=&quot;grid-cell&quot;&gt;
<span class='line-number'>349</span>	                                        &lt;div class=&quot;u-pull--left u-bold u-margin-top&quot;&gt;
<span class='line-number'>350</span>	                                            &lt;i class=&quot;fa fa-user-secret&quot;&gt;&lt;/i&gt;
<span class='line-number'>351</span>	                                            @username&lt;text&gt;&amp;nbsp;&lt;/text&gt;@Translate(&quot;is impersonated by&quot;)&lt;text&gt;&amp;nbsp;&lt;/text&gt;@Pageview.User.UserName
<span class='line-number'>352</span>	                                        &lt;/div&gt;
<span class='line-number'>353</span>	                                        &lt;form method=&quot;post&quot; class=&quot;u-pull--right u-no-margin&quot;&gt;
<span class='line-number'>354</span>	                                            &lt;input type=&quot;submit&quot; class=&quot;btn btn--secondary dw-mod u-no-margin&quot; name=&quot;DwExtranetRemoveSecondaryUser&quot; value=&quot;@stopImpersonateTranslation&quot;&gt;
<span class='line-number'>355</span>	                                        &lt;/form&gt;
<span class='line-number'>356</span>	                                    &lt;/div&gt;
<span class='line-number'>357</span>	                                }
<span class='line-number'>358</span>	                                else
<span class='line-number'>359</span>	                                {
<span class='line-number'>360</span>	                                    string viewListTranslation = Translate(&quot;View the list of users you can impersonate&quot;);
<span class='line-number'>361</span>	                                    &lt;div class=&quot;grid-cell u-bold&quot;&gt;
<span class='line-number'>362</span>	                                        &lt;i class=&quot;fa fa-user-secret&quot;&gt;&lt;/i&gt;
<span class='line-number'>363</span>	                                        &lt;a href=&quot;/Default.aspx?ID=@impersonationPageId&quot; title=&quot;@viewListTranslation&quot; class=&quot;u-color-font-black&quot;&gt;@viewListTranslation&lt;/a&gt;
<span class='line-number'>364</span>	                                    &lt;/div&gt;
<span class='line-number'>365</span>	                                }
<span class='line-number'>366</span>	                            &lt;/div&gt;
<span class='line-number'>367</span>	                        &lt;/div&gt;
<span class='line-number'>368</span>	                    &lt;/div&gt;
<span class='line-number'>369</span>	                &lt;/div&gt;
<span class='line-number'>370</span>	            }*@
<span class='line-number'>371</span>	        &lt;/header&gt;
<span class='line-number'>372</span>	
<span class='line-number'>373</span>	        &lt;!-- Floating mini cart --&gt;
<span class='line-number'>374</span>	        @if (!stickyMenu &amp;&amp; pageId == productsPageId &amp;&amp; Pageview.Device.ToString() != &quot;Mobile&quot; &amp;&amp; Pageview.Device.ToString() != &quot;Tablet&quot;)
<span class='line-number'>375</span>	        {
<span class='line-number'>376</span>	            &lt;div class=&quot;floating-mini-cart u-hidden dw-mod&quot; id=&quot;FloatingMiniCart&quot;&gt;
<span class='line-number'>377</span>	                &lt;div class=&quot;mini-cart dw-mod&quot;&gt;
<span class='line-number'>378</span>	                    &lt;a href=&quot;/Default.aspx?ID=@cartPageId&amp;Purge=True&quot; class=&quot;menu-tools__link menu__link--condensed dw-mod js-mini-cart-button&quot; onmouseover=&quot;Cart.UpdateMiniCart(event, &#39;SecondaryMiniCart&#39;, &#39;/Default.aspx?ID=@miniCartFeedPageId&amp;feedType=MiniCart&#39;)&quot;&gt;
<span class='line-number'>379</span>	                        &lt;i class=&quot;fa fa-shopping-cart fa-4x&quot;&gt;&lt;/i&gt;
<span class='line-number'>380</span>	                        &lt;div class=&quot;mini-cart__counter mini-cart__counter--lg dw-mod&quot;&gt;
<span class='line-number'>381</span>	                            &lt;div class=&quot;js-ajax-container js-mini-cart-counter&quot; id=&quot;FloatingCartCounter&quot; data-template=&quot;MiniCartCounterContent&quot; data-json-feed=&quot;/Default.aspx?ID=@miniCartFeedPageId&amp;feedType=Counter&quot; data-preloader=&quot;false&quot; data-init-onload=&quot;false&quot;&gt;
<span class='line-number'>382</span>	                                &lt;div class=&quot;js-mini-cart-counter-content&quot;&gt;
<span class='line-number'>383</span>	                                    @Model.Cart.TotalProductsCount
<span class='line-number'>384</span>	                                &lt;/div&gt;
<span class='line-number'>385</span>	                            &lt;/div&gt;
<span class='line-number'>386</span>	                        &lt;/div&gt;
<span class='line-number'>387</span>	                    &lt;/a&gt;
<span class='line-number'>388</span>	
<span class='line-number'>389</span>	                    &lt;div class=&quot;mini-cart-dropdown js-ajax-container js-mini-cart dw-mod&quot; id=&quot;SecondaryMiniCart&quot; data-template=&quot;MiniCartContent&quot; data-cart-id=&quot;@miniCartFeedPageId&quot; data-json-feed=&quot;/Default.aspx?ID=@miniCartFeedPageId&amp;feedType=MiniCart&quot; data-init-onload=&quot;false&quot;&gt;&lt;/div&gt;
<span class='line-number'>390</span>	                &lt;/div&gt;
<span class='line-number'>391</span>	            &lt;/div&gt;
<span class='line-number'>392</span>	        }
<span class='line-number'>393</span>	
<span class='line-number'>394</span>	        &lt;!-- Render the content --&gt;
<span class='line-number'>395</span>	        &lt;div id=&quot;Page&quot; class=&quot;page @pagePos&quot;&gt;
<span class='line-number'>396</span>	            &lt;section class=&quot;center-container content-container dw-mod&quot; id=&quot;content&quot;&gt;
<span class='line-number'>397</span>	                @inherits Dynamicweb.Rendering.ViewModelTemplate&lt;Dynamicweb.Frontend.PageViewModel&gt;
<span class='line-number'>398</span>	
<span class='line-number'>399</span>	
<span class='line-number'>400</span>	@if (Model.PropertyItem.GetBoolean(&quot;ShowBreadcrumb&quot;)) {
<span class='line-number'>401</span>	    &lt;div class=&quot;grid__col-12 grid__col--bleed-y&quot;&gt;
<span class='line-number'>402</span>	       @RenderNavigation(new
<span class='line-number'>403</span>	       {
<span class='line-number'>404</span>	           id = &quot;breadcrumb&quot;,
<span class='line-number'>405</span>	           template = &quot;breadcrumb.xslt&quot;
<span class='line-number'>406</span>	       })
<span class='line-number'>407</span>	    &lt;/div&gt;
<span class='line-number'>408</span>	}
<span class='line-number'>409</span>	
<span class='line-number'>410</span>	&lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>411</span>	    @if (Model.PropertyItem.GetBoolean(&quot;LeftMenu&quot;) &amp;&amp; RenderNavigation(new { }) != null)
<span class='line-number'>412</span>	    {
<span class='line-number'>413</span>	        &lt;nav class=&quot;grid__col-md-3 grid__col-sm-12 grid__col-xs-12 paragraph-container&quot;&gt;
<span class='line-number'>414</span>	            &lt;div class=&quot;grid__cell&quot;&gt;
<span class='line-number'>415</span>	               @RenderNavigation(new
<span class='line-number'>416</span>	               {
<span class='line-number'>417</span>	                   id = &quot;leftnav&quot;,
<span class='line-number'>418</span>	                   cssclass = &quot;menu dwnavigation&quot;,
<span class='line-number'>419</span>	                   endlevel = 5,
<span class='line-number'>420</span>	                   template = &quot;LeftNavigation.xslt&quot;
<span class='line-number'>421</span>	                })
<span class='line-number'>422</span>	            &lt;/div&gt;
<span class='line-number'>423</span>	        &lt;/nav&gt;
<span class='line-number'>424</span>	    }
<span class='line-number'>425</span>	    &lt;div class=&quot;grid__col-auto grid__col--bleed&quot;&gt;
<span class='line-number'>426</span>	        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>427</span>	            @Model.Placeholder(&quot;dwcontent&quot;, &quot;content&quot;, &quot;default:true;sort:1&quot;)
<span class='line-number'>428</span>	        &lt;/div&gt;
<span class='line-number'>429</span>	    &lt;/div&gt;
<span class='line-number'>430</span>	&lt;/div&gt;   
<span class='line-number'>431</span>	            &lt;/section&gt;
<span class='line-number'>432</span>	        &lt;/div&gt;
<span class='line-number'>433</span>	    &lt;/main&gt;
<span class='line-number'>434</span>	
<span class='line-number'>435</span>	    @RenderFooter()
<span class='line-number'>436</span>	
<span class='line-number'>437</span>	
<span class='line-number'>438</span>	    &lt;!-- Content rendering helpers --&gt;
<span class='line-number'>439</span>	
<span class='line-number'>440</span>	    @helper MobileNavigation(string userInitials)
<span class='line-number'>441</span>	    {
<span class='line-number'>442</span>	int pageId = Model.TopPage.ID;
<span class='line-number'>443</span>	string signInPage = GetPageIdByNavigationTag(&quot;SignInPage&quot;).ToString();
<span class='line-number'>444</span>	string myProfilePageId = (Model.CurrentUser.ID &lt;= 0) ? GetPageIdByNavigationTag(&quot;SignInPage&quot;).ToString() + &quot;&amp;RedirectPageId=&quot; + GetPageIdByNavigationTag(&quot;CustomerProfile&quot;).ToString() : GetPageIdByNavigationTag(&quot;CustomerProfile&quot;).ToString();
<span class='line-number'>445</span>	string myOrdersPageId = (Model.CurrentUser.ID &lt;= 0) ? GetPageIdByNavigationTag(&quot;SignInPage&quot;).ToString() + &quot;&amp;RedirectPageId=&quot; + GetPageIdByNavigationTag(&quot;CustomerOrders&quot;).ToString() : GetPageIdByNavigationTag(&quot;CustomerOrders&quot;).ToString();
<span class='line-number'>446</span>	string myFavoritesPageId = (Model.CurrentUser.ID &lt;= 0) ? GetPageIdByNavigationTag(&quot;SignInPage&quot;).ToString() + &quot;&amp;RedirectPageId=&quot; + GetPageIdByNavigationTag(&quot;CustomerFavorites&quot;).ToString() : GetPageIdByNavigationTag(&quot;CustomerFavorites&quot;).ToString();
<span class='line-number'>447</span>	string mobileNavigationLevels = Model.Area.Item.GetBoolean(&quot;MobileNavigationLevels&quot;) ? Model.Area.Item.GetString(&quot;MobileNavigationLevels&quot;) : &quot;3&quot;;
<span class='line-number'>448</span>	
<span class='line-number'>449</span>	int miniCartFeedPageId = GetPageIdByNavigationTag(&quot;MiniCartFeed&quot;);
<span class='line-number'>450</span>	int cartFeedPageId = GetPageIdByNavigationTag(&quot;CartOrderlinesFeed&quot;);
<span class='line-number'>451</span>	int createAccountPageId = GetPageIdByNavigationTag(&quot;CreateAccount&quot;);
<span class='line-number'>452</span>	
<span class='line-number'>453</span>	if (Pageview.Device.ToString() == &quot;Mobile&quot; || Pageview.Device.ToString() == &quot;Tablet&quot;)
<span class='line-number'>454</span>	{
<span class='line-number'>455</span>	        &lt;!-- Trigger for mobile navigation --&gt;
<span class='line-number'>456</span>	        &lt;input type=&quot;checkbox&quot; id=&quot;MobileNavTrigger&quot; class=&quot;mobile-nav-trigger&quot; /&gt;
<span class='line-number'>457</span>	
<span class='line-number'>458</span>	        &lt;!-- Mobile navigation --&gt;
<span class='line-number'>459</span>	        &lt;nav class=&quot;mobile-navigation dw-mod&quot;&gt;
<span class='line-number'>460</span>	            &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>461</span>	                &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>462</span>	                    &lt;div class=&quot;grid__cell&quot;&gt;
<span class='line-number'>463</span>	                       @* &lt;div class=&quot;u-pull--left&quot;&gt;
<span class='line-number'>464</span>	                            @if (Model.Languages.Count &gt; 0)
<span class='line-number'>465</span>	                            {
<span class='line-number'>466</span>	                                string selectedLanguage = &quot;&quot;;
<span class='line-number'>467</span>	                                foreach (var lang in Model.Languages)
<span class='line-number'>468</span>	                                {
<span class='line-number'>469</span>	                                    if (lang.IsCurrent)
<span class='line-number'>470</span>	                                    {
<span class='line-number'>471</span>	                                        selectedLanguage = lang.Name;
<span class='line-number'>472</span>	                                    }
<span class='line-number'>473</span>	                                }
<span class='line-number'>474</span>	
<span class='line-number'>475</span>	                                &lt;div class=&quot;btn btn--clean btn--condensed u-no-margin is-dropdown is-dropdown--no-icon dw-mod&quot;&gt;
<span class='line-number'>476</span>	                                    &lt;i class=&quot;fa fa-globe&quot;&gt;&lt;/i&gt; @selectedLanguage
<span class='line-number'>477</span>	                                    &lt;div class=&quot;menu menu--dropdown u-w100px u-ta-left dw-mod&quot;&gt;
<span class='line-number'>478</span>	                                        @foreach (var lang in Model.Languages)
<span class='line-number'>479</span>	                                        {
<span class='line-number'>480</span>	                                            &lt;a href=&quot;/Default.aspx?ID=@lang.Page.ID&amp;CurrencyCode=@Dynamicweb.Services.Areas.GetArea(lang.ID).EcomCurrencyId&quot; class=&quot;menu-dropdown__item dw-mod&quot;&gt;@lang.Name&lt;/a&gt;
<span class='line-number'>481</span>	                                        }
<span class='line-number'>482</span>	                                    &lt;/div&gt;
<span class='line-number'>483</span>	                                &lt;/div&gt;
<span class='line-number'>484</span>	                            }
<span class='line-number'>485</span>	                        &lt;/div&gt;*@
<span class='line-number'>486</span>	                        &lt;div class=&quot;u-pull--left&quot;&gt;
<span class='line-number'>487</span>	                            @if (Model.CurrentUser.ID &lt;= 0)
<span class='line-number'>488</span>	                            {
<span class='line-number'>489</span>	                                &lt;a href=&quot;/default.aspx?ID=@signInPage&quot; class=&quot;mobile-navigation__link list__link dw-mod&quot;&gt;&lt;i class=&quot;fa fa-user&quot;&gt;&lt;/i&gt; @Translate(&quot;Sign in&quot;)&lt;/a&gt;
<span class='line-number'>490</span>	                            }
<span class='line-number'>491</span>	                            else
<span class='line-number'>492</span>	                            {
<span class='line-number'>493</span>	                                &lt;label class=&quot;u-padding u-margin-top&quot; for=&quot;mobileSignIn&quot;&gt;&lt;span class=&quot;circle-icon-btn dw-mod&quot;&gt;@userInitials.ToUpper()&lt;/span&gt;&lt;/label&gt;
<span class='line-number'>494</span>	                            }
<span class='line-number'>495</span>	                        &lt;/div&gt;
<span class='line-number'>496</span>	                    &lt;/div&gt;
<span class='line-number'>497</span>	                &lt;/div&gt;
<span class='line-number'>498</span>	                &lt;div class=&quot;grid__col-12 grid__col--line-top u-no-padding&quot;&gt;&lt;/div&gt;
<span class='line-number'>499</span>	
<span class='line-number'>500</span>	                &lt;input type=&quot;checkbox&quot; id=&quot;mobileSignIn&quot; class=&quot;expand-trigger&quot; /&gt;
<span class='line-number'>501</span>	
<span class='line-number'>502</span>	                @if (Model.CurrentUser.ID &gt; 0)                
<span class='line-number'>503</span>	                {
<span class='line-number'>504</span>	                    &lt;div class=&quot;grid__col-12 u-no-padding expand-container dw-mod&quot;&gt;
<span class='line-number'>505</span>	                        &lt;div class=&quot;expand-container__content u-padding dw-mod&quot;&gt;
<span class='line-number'>506</span>	                            &lt;ul class=&quot;list list--clean dw-mod&quot;&gt;
<span class='line-number'>507</span>	                                &lt;li&gt;
<span class='line-number'>508</span>	                                    &lt;a href=&quot;/default.aspx?ID=@myProfilePageId&quot; class=&quot;mobile-navigation__link list__link dw-mod&quot;&gt;&lt;i class=&quot;fa fa-user&quot;&gt;&lt;/i&gt; @Translate(&quot;My Profile&quot;)&lt;/a&gt;
<span class='line-number'>509</span>	                                &lt;/li&gt;
<span class='line-number'>510</span>	                                &lt;li&gt;
<span class='line-number'>511</span>	                                    &lt;a href=&quot;/default.aspx?ID=@myOrdersPageId&quot; class=&quot;mobile-navigation__link list__link dw-mod&quot;&gt;&lt;i class=&quot;fa fa-list&quot;&gt;&lt;/i&gt; @Translate(&quot;My Orders&quot;)&lt;/a&gt;
<span class='line-number'>512</span>	                                &lt;/li&gt;
<span class='line-number'>513</span>	                                
<span class='line-number'>514</span>	
<span class='line-number'>515</span>	                                &lt;li class=&quot;list__seperator dw-mod&quot;&gt;&lt;/li&gt;
<span class='line-number'>516</span>	                                &lt;li&gt;
<span class='line-number'>517</span>	                                    &lt;a href=&quot;/Admin/Public/ExtranetLogoff.aspx?ID=@pageId&quot; class=&quot;mobile-navigation__link list__link dw-mod&quot;&gt;@Translate(&quot;Sign out&quot;)&lt;/a&gt;
<span class='line-number'>518</span>	                                &lt;/li&gt;
<span class='line-number'>519</span>	                                &lt;li class=&quot;list__seperator dw-mod&quot;&gt;&lt;/li&gt;
<span class='line-number'>520</span>	                            &lt;/ul&gt;
<span class='line-number'>521</span>	                        &lt;/div&gt;
<span class='line-number'>522</span>	                    &lt;/div&gt;
<span class='line-number'>523</span>	                }
<span class='line-number'>524</span>	
<span class='line-number'>525</span>	                &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>526</span>	                    @RenderNavigation(new
<span class='line-number'>527</span>	               {
<span class='line-number'>528</span>	                   id = &quot;mobilenavigation&quot;,
<span class='line-number'>529</span>	                   cssclass = &quot;menu menu-mobile dwnavigation&quot;,
<span class='line-number'>530</span>	                   startLevel = 1,
<span class='line-number'>531</span>	                   endlevel = @mobileNavigationLevels,
<span class='line-number'>532</span>	                   template = &quot;BaseMenuForMobile.xslt&quot;
<span class='line-number'>533</span>	               })
<span class='line-number'>534</span>	                &lt;/div&gt;
<span class='line-number'>535</span>	            &lt;/div&gt;
<span class='line-number'>536</span>	        &lt;/nav&gt;
<span class='line-number'>537</span>	        &lt;label class=&quot;mobile-nav-trigger-off&quot; for=&quot;MobileNavTrigger&quot;&gt;&lt;/label&gt;
<span class='line-number'>538</span>	
<span class='line-number'>539</span>	        &lt;div class=&quot;u-visually-hidden js-ajax-container js-mini-cart&quot; id=&quot;miniCart&quot; data-template=&quot;MiniCartContent&quot; data-cart-id=&quot;@cartFeedPageId&quot; data-json-feed=&quot;/Default.aspx?ID=@miniCartFeedPageId&amp;feedType=MiniCart&quot; data-init-onload=&quot;false&quot;&gt;&lt;/div&gt;
<span class='line-number'>540</span>	}
<span class='line-number'>541</span>	}
<span class='line-number'>542</span>	
<span class='line-number'>543</span>	    @helper LoginModal()
<span class='line-number'>544</span>	    {
<span class='line-number'>545</span>	int pageId = Model.TopPage.ID;
<span class='line-number'>546</span>	string topLayout = Model.Area.Item.GetList(&quot;LayoutTop&quot;).SelectedValue;
<span class='line-number'>547</span>	int createAccountPageId = GetPageIdByNavigationTag(&quot;CreateAccount&quot;);
<span class='line-number'>548</span>	int signInProfilePageId = GetPageIdByNavigationTag(&quot;SignInPage&quot;);
<span class='line-number'>549</span>	string forgotPasswordPageId = signInProfilePageId.ToString() + &quot;&amp;LoginAction=Recovery&quot;;
<span class='line-number'>550</span>	string userSignedInError = !Model.LogOnFailed ? &quot;&quot; : &quot;checked&quot;;
<span class='line-number'>551</span>	string userSignedInErrorText = &quot;&quot;;
<span class='line-number'>552</span>	
<span class='line-number'>553</span>	if (Model.LogOnFailed)
<span class='line-number'>554</span>	{
<span class='line-number'>555</span>	    switch (Model.LogOnFailedReason)
<span class='line-number'>556</span>	    {
<span class='line-number'>557</span>	        case Dynamicweb.Security.UserManagement.LogOnFailedReason.PasswordLengthInvalid:
<span class='line-number'>558</span>	            userSignedInErrorText = Translate(&quot;Password length is invalid&quot;);
<span class='line-number'>559</span>	            break;
<span class='line-number'>560</span>	        case Dynamicweb.Security.UserManagement.LogOnFailedReason.IncorrectLogin:
<span class='line-number'>561</span>	            userSignedInErrorText = Translate(&quot;Invalid email or password&quot;);
<span class='line-number'>562</span>	            break;
<span class='line-number'>563</span>	        case Dynamicweb.Security.UserManagement.LogOnFailedReason.ExceededFailedLogOnLimit:
<span class='line-number'>564</span>	            userSignedInErrorText = Translate(&quot;You have exceeded the limit of allowed login attempts. The user account is temporarily locked&quot;);
<span class='line-number'>565</span>	            break;
<span class='line-number'>566</span>	        case Dynamicweb.Security.UserManagement.LogOnFailedReason.LoginLocked:
<span class='line-number'>567</span>	            userSignedInErrorText = Translate(&quot;The user account is temporarily locked&quot;);
<span class='line-number'>568</span>	            break;
<span class='line-number'>569</span>	        case Dynamicweb.Security.UserManagement.LogOnFailedReason.PasswordExpired:
<span class='line-number'>570</span>	            userSignedInErrorText = Translate(&quot;The password has expired and needs to be renewed&quot;);
<span class='line-number'>571</span>	            break;
<span class='line-number'>572</span>	        default:
<span class='line-number'>573</span>	            userSignedInErrorText = Translate(&quot;An unknown error occured&quot;);
<span class='line-number'>574</span>	            break;
<span class='line-number'>575</span>	    }
<span class='line-number'>576</span>	}
<span class='line-number'>577</span>	
<span class='line-number'>578</span>	  @*  &lt;!-- Trigger for the login modal --&gt;
<span class='line-number'>579</span>	    &lt;input type=&quot;checkbox&quot; id=&quot;SignInModalTrigger&quot; class=&quot;modal-trigger @topLayout&quot; @userSignedInError /&gt;
<span class='line-number'>580</span>	
<span class='line-number'>581</span>	    &lt;!-- Login modal --&gt;
<span class='line-number'>582</span>	    &lt;div class=&quot;modal-container&quot;&gt;
<span class='line-number'>583</span>	        &lt;label for=&quot;SignInModalTrigger&quot; id=&quot;SignInModalOverlay&quot; class=&quot;modal-overlay&quot;&gt;&lt;/label&gt;
<span class='line-number'>584</span>	        &lt;div class=&quot;modal modal--xs&quot; id=&quot;SignInModal&quot;&gt;
<span class='line-number'>585</span>	            &lt;div class=&quot;modal__header&quot;&gt;
<span class='line-number'>586</span>	                &lt;h2&gt;@Translate(&quot;Sign in&quot;)&lt;/h2&gt;
<span class='line-number'>587</span>	            &lt;/div&gt;
<span class='line-number'>588</span>	            &lt;div class=&quot;modal__body&quot;&gt;
<span class='line-number'>589</span>	                &lt;form method=&quot;post&quot; id=&quot;LoginForm&quot; class=&quot;u-no-margin&quot;&gt;
<span class='line-number'>590</span>	                    &lt;input type=&quot;hidden&quot; name=&quot;ID&quot; value=&quot;@pageId&quot; /&gt;
<span class='line-number'>591</span>	                    &lt;input type=&quot;hidden&quot; name=&quot;DWExtranetUsernameRemember&quot; value=&quot;True&quot; /&gt;
<span class='line-number'>592</span>	                    &lt;input type=&quot;hidden&quot; name=&quot;DWExtranetPasswordRemember&quot; value=&quot;True&quot; /&gt;
<span class='line-number'>593</span>	                    &lt;input type=&quot;text&quot; class=&quot;u-full-width&quot; id=&quot;LoginUsername&quot; name=&quot;username&quot; placeholder=&quot;@Translate(&quot;Email&quot;)&quot; /&gt;
<span class='line-number'>594</span>	                    &lt;input type=&quot;password&quot; class=&quot;u-full-width&quot; id=&quot;LoginPassword&quot; name=&quot;password&quot; placeholder=&quot;@Translate(&quot;Password&quot;)&quot; /&gt;
<span class='line-number'>595</span>	                    &lt;div class=&quot;field-error dw-mod&quot;&gt;@userSignedInErrorText&lt;/div&gt;
<span class='line-number'>596</span>	
<span class='line-number'>597</span>	                    &lt;label&gt;
<span class='line-number'>598</span>	                        &lt;input type=&quot;checkbox&quot; id=&quot;RememberMe&quot; name=&quot;Autologin&quot; checked=&quot;checked&quot; value=&quot;True&quot;&gt;
<span class='line-number'>599</span>	                        &lt;span&gt;@Translate(&quot;Remember me&quot;, &quot;Remember me&quot;)&lt;/span&gt;
<span class='line-number'>600</span>	                    &lt;/label&gt;
<span class='line-number'>601</span>	
<span class='line-number'>602</span>	                    &lt;button type=&quot;submit&quot; class=&quot;btn btn--primary btn--full dw-mod&quot; name=&quot;LoginAction&quot; value=&quot;Login&quot; onclick=&quot;Buttons.LockButton(event)&quot;&gt;@Translate(&quot;Sign in&quot;)&lt;/button&gt;
<span class='line-number'>603</span>	
<span class='line-number'>604</span>	                    &lt;a class=&quot;btn btn--link-clean dw-mod&quot; href=&quot;/Default.aspx?id=@forgotPasswordPageId&quot;&gt;@Translate(&quot;Forgot your password?&quot;, &quot;Forgot your password?&quot;)&lt;/a&gt;
<span class='line-number'>605</span>	
<span class='line-number'>606</span>	                    &lt;a class=&quot;btn btn--link-clean dw-mod&quot; href=&quot;/default.aspx?ID=@createAccountPageId&quot;&gt;@Translate(&quot;Create account&quot;)?&lt;/a&gt;
<span class='line-number'>607</span>	                &lt;/form&gt;
<span class='line-number'>608</span>	            &lt;/div&gt;
<span class='line-number'>609</span>	        &lt;/div&gt;
<span class='line-number'>610</span>	    &lt;/div&gt;
<span class='line-number'>611</span>	}
<span class='line-number'>612</span>	      *@
<span class='line-number'>613</span>	    @helper RenderHeaderNavigation()
<span class='line-number'>614</span>	    {
<span class='line-number'>615</span>	bool megaMenu = Model.Area.Item.GetList(&quot;NavigationMegaMenu&quot;).SelectedValue.ToLower() == &quot;true&quot; ? true : false;
<span class='line-number'>616</span>	string megamenuPromotionImage = Model.Area.Item.GetFile(&quot;NavigationMegamenuPromotionImage&quot;) != null ? Model.Area.Item.GetFile(&quot;NavigationMegamenuPromotionImage&quot;).Path : &quot;&quot;;
<span class='line-number'>617</span>	bool renderPagesInToolBar = Model.Area.Item.GetBoolean(&quot;RenderPagesInToolBar&quot;);
<span class='line-number'>618</span>	int startLevel = renderPagesInToolBar ? 1 : 0;
<span class='line-number'>619</span>	
<span class='line-number'>620</span>	if (Pageview.Device.ToString() != &quot;Mobile&quot; &amp;&amp; Pageview.Device.ToString() != &quot;Tablet&quot;)
<span class='line-number'>621</span>	{
<span class='line-number'>622</span>	    if (!megaMenu)
<span class='line-number'>623</span>	    {
<span class='line-number'>624</span>	            @RenderNavigation(new
<span class='line-number'>625</span>	       {
<span class='line-number'>626</span>	           id = &quot;topnavigation&quot;,
<span class='line-number'>627</span>	           cssclass = &quot;menu dw-mod dwnavigation&quot;,
<span class='line-number'>628</span>	           startLevel = @startLevel,
<span class='line-number'>629</span>	           ecomStartLevel = @startLevel + 1,
<span class='line-number'>630</span>	           endlevel = 5,
<span class='line-number'>631</span>	           template = &quot;BaseMenuWithDropdown.xslt&quot;
<span class='line-number'>632</span>	       });
<span class='line-number'>633</span>	        }
<span class='line-number'>634</span>	        else
<span class='line-number'>635</span>	        {
<span class='line-number'>636</span>	            @RenderNavigation(new
<span class='line-number'>637</span>	       {
<span class='line-number'>638</span>	           id = &quot;topnavigation&quot;,
<span class='line-number'>639</span>	           cssclass = &quot;menu dw-mod dwnavigation&quot;,
<span class='line-number'>640</span>	           startLevel = @startLevel,
<span class='line-number'>641</span>	           ecomStartLevel = @startLevel + 1,
<span class='line-number'>642</span>	           endlevel = 5,
<span class='line-number'>643</span>	           promotionImage = megamenuPromotionImage,
<span class='line-number'>644</span>	           promotionLink = Model.Area.Item.GetString(&quot;NavigationMegamenuPromotionLink&quot;),
<span class='line-number'>645</span>	           template = &quot;BaseMegaMenu.xslt&quot;
<span class='line-number'>646</span>	       });
<span class='line-number'>647</span>	        }
<span class='line-number'>648</span>	    }
<span class='line-number'>649</span>	}
<span class='line-number'>650</span>	
<span class='line-number'>651</span>	    @helper MobileNavigationTrigger()
<span class='line-number'>652</span>	    {
<span class='line-number'>653</span>	    @* Mobile navigation trigger *@
<span class='line-number'>654</span>	
<span class='line-number'>655</span>	    if (Pageview.Device.ToString() == &quot;Mobile&quot; || Pageview.Device.ToString() == &quot;Tablet&quot;)
<span class='line-number'>656</span>	    {
<span class='line-number'>657</span>	        &lt;div class=&quot;menu dw-mod u-pull--left&quot;&gt;
<span class='line-number'>658</span>	            &lt;div class=&quot;menu__item menu__item--horizontal menu__item--top-level dw-mod&quot;&gt;
<span class='line-number'>659</span>	                &lt;label for=&quot;MobileNavTrigger&quot; class=&quot;mobile-nav-trigger-button menu__link dw-mod&quot;&gt;&lt;/label&gt;
<span class='line-number'>660</span>	            &lt;/div&gt;
<span class='line-number'>661</span>	        &lt;/div&gt;
<span class='line-number'>662</span>	    }
<span class='line-number'>663</span>	}
<span class='line-number'>664</span>	
<span class='line-number'>665</span>	    @helper RenderLanguageSelector(string type = &quot;inNavigation&quot;)
<span class='line-number'>666</span>	    {
<span class='line-number'>667</span>	string liClasses = type == &quot;inNavigation&quot; ? &quot;menu__item menu__item--horizontal menu__item--top-level dw-mod u-hidden-xxs&quot; : &quot;menu__item menu__item--horizontal menu--clean u-w40px dw-mod&quot;;
<span class='line-number'>668</span>	string menuLinkClass = type == &quot;inNavigation&quot; ? &quot;menu__link&quot; : &quot;header-menu__link&quot;;
<span class='line-number'>669</span>	
<span class='line-number'>670</span>	    @* Language selector *@
<span class='line-number'>671</span>	    if (Model.Languages.Count &gt; 1)
<span class='line-number'>672</span>	    {
<span class='line-number'>673</span>	        &lt;li class=&quot;@liClasses&quot;&gt;
<span class='line-number'>674</span>	            &lt;div class=&quot;@menuLinkClass u-w40px is-dropdown is-dropdown--no-icon dw-mod&quot;&gt;
<span class='line-number'>675</span>	                &lt;i class=&quot;fa fa-globe fa-1_5x&quot;&gt;&lt;/i&gt;
<span class='line-number'>676</span>	                &lt;div class=&quot;menu menu--dropdown u-w100px dw-mod&quot;&gt;
<span class='line-number'>677</span>	                    @foreach (var lang in Model.Languages)
<span class='line-number'>678</span>	                    {
<span class='line-number'>679</span>	                        &lt;a href=&quot;/Default.aspx?ID=@lang.Page.ID&amp;CurrencyCode=@Dynamicweb.Services.Areas.GetArea(lang.ID).EcomCurrencyId&quot; class=&quot;menu-dropdown__item menu-dropdown__item--link dw-mod&quot;&gt;@lang.Name&lt;/a&gt;
<span class='line-number'>680</span>	                    }
<span class='line-number'>681</span>	                &lt;/div&gt;
<span class='line-number'>682</span>	            &lt;/div&gt;
<span class='line-number'>683</span>	        &lt;/li&gt;
<span class='line-number'>684</span>	    }
<span class='line-number'>685</span>	}
<span class='line-number'>686</span>	
<span class='line-number'>687</span>	    @helper RenderMiniCart(string type = &quot;inNavigation&quot;)
<span class='line-number'>688</span>	    {
<span class='line-number'>689</span>	string liClasses = type == &quot;inNavigation&quot; ? &quot;menu__item menu__item--horizontal menu__item--top-level dw-mod&quot; : &quot;menu__item menu__item--horizontal menu--clean dw-mod&quot;;
<span class='line-number'>690</span>	string menuLinkClass = type == &quot;inNavigation&quot; ? &quot;menu__link&quot; : &quot;header-menu__link&quot;;
<span class='line-number'>691</span>	
<span class='line-number'>692</span>	int miniCartFeedPageId = GetPageIdByNavigationTag(&quot;MiniCartFeed&quot;);
<span class='line-number'>693</span>	int cartFeedPageId = GetPageIdByNavigationTag(&quot;CartOrderlinesFeed&quot;);
<span class='line-number'>694</span>	int cartPageId = GetPageIdByNavigationTag(&quot;CartPage&quot;);
<span class='line-number'>695</span>	double cartProductsCount = Model.Cart.TotalProductsCount;
<span class='line-number'>696</span>	
<span class='line-number'>697</span>	    @* Mini cart *@
<span class='line-number'>698</span>	    &lt;li class=&quot;@liClasses&quot;&gt;
<span class='line-number'>699</span>	        &lt;div class=&quot;mini-cart dw-mod&quot;&gt;
<span class='line-number'>700</span>	            &lt;a href=&quot;/Default.aspx?ID=@cartPageId&amp;Purge=True&quot; id=&quot;miniCartCounterWrap&quot; class=&quot;@menuLinkClass dw-mod js-mini-cart-button&quot; onmouseenter=&quot;Cart.UpdateMiniCart(event, &#39;miniCart&#39;, &#39;/Default.aspx?ID=@miniCartFeedPageId&amp;feedType=MiniCart&#39;)&quot;&gt;
<span class='line-number'>701</span>	                &lt;i class=&quot;fa fa-shopping-cart fa-1_5x&quot;&gt;&lt;/i&gt;
<span class='line-number'>702</span>	                &lt;div class=&quot;mini-cart__counter mini-cart__counter--inline dw-mod&quot;&gt;
<span class='line-number'>703</span>	                    &lt;div class=&quot;js-ajax-container js-mini-cart-counter&quot; id=&quot;cartCounter&quot; data-template=&quot;MiniCartCounterContent&quot; data-json-feed=&quot;/Default.aspx?ID=@miniCartFeedPageId&amp;feedType=Counter&quot; data-init-onload=&quot;false&quot; data-preloader=&quot;false&quot;&gt;
<span class='line-number'>704</span>	                        &lt;div class=&quot;js-mini-cart-counter-content&quot;&gt;
<span class='line-number'>705</span>	                            @cartProductsCount
<span class='line-number'>706</span>	                        &lt;/div&gt;
<span class='line-number'>707</span>	                    &lt;/div&gt;
<span class='line-number'>708</span>	                &lt;/div&gt;
<span class='line-number'>709</span>	            &lt;/a&gt;
<span class='line-number'>710</span>	            @if (Pageview.Device.ToString() != &quot;Mobile&quot; &amp;&amp; Pageview.Device.ToString() != &quot;Tablet&quot;)
<span class='line-number'>711</span>	            {
<span class='line-number'>712</span>	                &lt;div class=&quot;mini-cart-dropdown js-ajax-container js-mini-cart dw-mod&quot; id=&quot;miniCart&quot; data-template=&quot;MiniCartContent&quot; data-cart-id=&quot;@miniCartFeedPageId&quot; data-json-feed=&quot;/Default.aspx?ID=@miniCartFeedPageId&amp;feedType=MiniCart&quot; data-init-onload=&quot;false&quot;&gt;&lt;/div&gt;
<span class='line-number'>713</span>	            }
<span class='line-number'>714</span>	        &lt;/div&gt;
<span class='line-number'>715</span>	    &lt;/li&gt;
<span class='line-number'>716</span>	}
<span class='line-number'>717</span>	
<span class='line-number'>718</span>	    @helper RenderSignIn(string type = &quot;inNavigation&quot;, string userInitials = &quot;&quot;)
<span class='line-number'>719</span>	    {
<span class='line-number'>720</span>	string liClasses = type == &quot;inNavigation&quot; ? &quot;menu__item menu__item--horizontal menu__item--top-level dw-mod u-hidden-xxs&quot; : &quot;menu__item menu__item--horizontal menu__item--clean u-w40px dw-mod&quot;;
<span class='line-number'>721</span>	string menuLinkClass = type == &quot;inNavigation&quot; ? &quot;menu__link&quot; : &quot;header-menu__link&quot;;
<span class='line-number'>722</span>	
<span class='line-number'>723</span>	int pageId = Model.TopPage.ID;
<span class='line-number'>724</span>	string myProfilePageId = (Model.CurrentUser.ID &lt;= 0) ? GetPageIdByNavigationTag(&quot;SignInPage&quot;).ToString() + &quot;&amp;RedirectPageId=&quot; + GetPageIdByNavigationTag(&quot;CustomerProfile&quot;).ToString() : GetPageIdByNavigationTag(&quot;CustomerProfile&quot;).ToString();
<span class='line-number'>725</span>	string myOrdersPageId = (Model.CurrentUser.ID &lt;= 0) ? GetPageIdByNavigationTag(&quot;SignInPage&quot;).ToString() + &quot;&amp;RedirectPageId=&quot; + GetPageIdByNavigationTag(&quot;CustomerOrders&quot;).ToString() : GetPageIdByNavigationTag(&quot;CustomerOrders&quot;).ToString();
<span class='line-number'>726</span>	int myDashboardPageId = GetPageIdByNavigationTag(&quot;CustomerDashboard&quot;);
<span class='line-number'>727</span>	string myFavoritesPageId = (Model.CurrentUser.ID &lt;= 0) ? GetPageIdByNavigationTag(&quot;SignInPage&quot;).ToString() + &quot;&amp;RedirectPageId=&quot; + GetPageIdByNavigationTag(&quot;CustomerFavorites&quot;).ToString() : GetPageIdByNavigationTag(&quot;CustomerFavorites&quot;).ToString();
<span class='line-number'>728</span>	int createAccountPageId = GetPageIdByNavigationTag(&quot;CreateAccount&quot;);
<span class='line-number'>729</span>	int signInProfilePageId = GetPageIdByNavigationTag(&quot;SignInPage&quot;);
<span class='line-number'>730</span>	string forgotPasswordPageId = signInProfilePageId.ToString() + &quot;&amp;LoginAction=Recovery&quot;;
<span class='line-number'>731</span>	
<span class='line-number'>732</span>	    @* Sign in + Customer center links *@
<span class='line-number'>733</span>	    &lt;li class=&quot;@liClasses&quot;&gt;
<span class='line-number'>734</span>	        &lt;div class=&quot;@menuLinkClass is-dropdown is-dropdown--no-icon u-w40px dw-mod&quot;&gt;
<span class='line-number'>735</span>	            @if (Model.CurrentUser.ID &lt;= 0)
<span class='line-number'>736</span>	            {
<span class='line-number'>737</span>	                &lt;i class=&quot;fa fa-user fa-1_5x&quot;&gt;&lt;/i&gt;
<span class='line-number'>738</span>	            }
<span class='line-number'>739</span>	            else
<span class='line-number'>740</span>	            {
<span class='line-number'>741</span>	                &lt;a href=&quot;/default.aspx?ID=@myDashboardPageId&quot; class=&quot;u-color-inherit&quot;&gt;&lt;div class=&quot;circle-icon-btn&quot;&gt;@userInitials.ToUpper()&lt;/div&gt;&lt;/a&gt;
<span class='line-number'>742</span>	            }
<span class='line-number'>743</span>	
<span class='line-number'>744</span>	            &lt;div class=&quot;menu menu--dropdown sign-in-dropdown dw-mod&quot;&gt;
<span class='line-number'>745</span>	                &lt;ul class=&quot;list list--clean dw-mod&quot;&gt;
<span class='line-number'>746</span>	                    @if (Model.CurrentUser.ID &lt;= 0)
<span class='line-number'>747</span>	                    {
<span class='line-number'>748</span>	                        &lt;li&gt;
<span class='line-number'>749</span>	                            &lt;label for=&quot;SignInModalTrigger&quot; class=&quot;btn btn--primary btn--full u-no-margin sign-in-modal-trigger-button dw-mod&quot; onclick=&quot;setTimeout(function () { document.getElementById(&#39;LoginUsername&#39;).focus() }, 10)&quot;&gt;@Translate(&quot;Sign in&quot;)&lt;/label&gt;
<span class='line-number'>750</span>	                        &lt;/li&gt;
<span class='line-number'>751</span>	                        &lt;li&gt;
<span class='line-number'>752</span>	                            &lt;a href=&quot;/default.aspx?ID=@createAccountPageId&quot; class=&quot;list__link dw-mod&quot;&gt;@Translate(&quot;Create account&quot;)&lt;/a&gt;
<span class='line-number'>753</span>	                        &lt;/li&gt;
<span class='line-number'>754</span>	                        &lt;li&gt;
<span class='line-number'>755</span>	                            &lt;a href=&quot;/default.aspx?ID=@forgotPasswordPageId&quot; class=&quot;list__link dw-mod&quot;&gt;@Translate(&quot;Forgot your password?&quot;)&lt;/a&gt;
<span class='line-number'>756</span>	                        &lt;/li&gt;
<span class='line-number'>757</span>	                        &lt;li class=&quot;list__seperator dw-mod&quot;&gt;&lt;/li&gt;
<span class='line-number'>758</span>	                    }
<span class='line-number'>759</span>	                    &lt;li&gt;
<span class='line-number'>760</span>	                        &lt;a href=&quot;/default.aspx?ID=@myProfilePageId&quot; class=&quot;list__link dw-mod&quot;&gt;&lt;i class=&quot;fa fa-user&quot;&gt;&lt;/i&gt; @Translate(&quot;My Profile&quot;)&lt;/a&gt;
<span class='line-number'>761</span>	                    &lt;/li&gt;
<span class='line-number'>762</span>	                    &lt;li&gt;
<span class='line-number'>763</span>	                        &lt;a href=&quot;/default.aspx?ID=@myOrdersPageId&quot; class=&quot;list__link dw-mod&quot;&gt;&lt;i class=&quot;fa fa-list&quot;&gt;&lt;/i&gt; @Translate(&quot;My Orders&quot;)&lt;/a&gt;
<span class='line-number'>764</span>	                    &lt;/li&gt;
<span class='line-number'>765</span>	                    &lt;li&gt;
<span class='line-number'>766</span>	                        &lt;a href=&quot;/default.aspx?ID=@myFavoritesPageId&quot; class=&quot;list__link dw-mod&quot;&gt;&lt;i class=&quot;fa fa-star&quot;&gt;&lt;/i&gt; @Translate(&quot;My Favorites&quot;)&lt;/a&gt;
<span class='line-number'>767</span>	                    &lt;/li&gt;
<span class='line-number'>768</span>	                    @if (Model.CurrentUser.ID &gt; 0)
<span class='line-number'>769</span>	                    {
<span class='line-number'>770</span>	                        &lt;li class=&quot;list__seperator dw-mod&quot;&gt;&lt;/li&gt;
<span class='line-number'>771</span>	                        &lt;li&gt;
<span class='line-number'>772</span>	                            &lt;a href=&quot;/Admin/Public/ExtranetLogoff.aspx?ID=@pageId&quot; class=&quot;list__link dw-mod&quot;&gt;@Translate(&quot;Sign out&quot;)&lt;/a&gt;
<span class='line-number'>773</span>	                        &lt;/li&gt;
<span class='line-number'>774</span>	                    }
<span class='line-number'>775</span>	                &lt;/ul&gt;
<span class='line-number'>776</span>	            &lt;/div&gt;
<span class='line-number'>777</span>	        &lt;/div&gt;
<span class='line-number'>778</span>	    &lt;/li&gt;
<span class='line-number'>779</span>	}
<span class='line-number'>780</span>	
<span class='line-number'>781</span>	    @helper RenderFavorites(string type = &quot;inNavigation&quot;)
<span class='line-number'>782</span>	    {
<span class='line-number'>783</span>	string liClasses = type == &quot;inNavigation&quot; ? &quot;menu__item menu__item--horizontal menu__item--top-level dw-mod u-hidden-xxs&quot; : &quot;menu__item menu__item--horizontal menu--clean u-w40px dw-mod&quot;;
<span class='line-number'>784</span>	string menuLinkClass = type == &quot;inNavigation&quot; ? &quot;menu__link&quot; : &quot;header-menu__link&quot;;
<span class='line-number'>785</span>	
<span class='line-number'>786</span>	string myFavoritesPageId = (Model.CurrentUser.ID &lt;= 0) ? GetPageIdByNavigationTag(&quot;SignInPage&quot;).ToString() + &quot;&amp;RedirectPageId=&quot; + GetPageIdByNavigationTag(&quot;CustomerFavorites&quot;).ToString() : GetPageIdByNavigationTag(&quot;CustomerFavorites&quot;).ToString();
<span class='line-number'>787</span>	
<span class='line-number'>788</span>	    @* Favorites *@
<span class='line-number'>789</span>	    if (Model.CurrentUser.ID &gt; 0)
<span class='line-number'>790</span>	    {
<span class='line-number'>791</span>	        &lt;li class=&quot;@liClasses&quot;&gt;
<span class='line-number'>792</span>	            &lt;a href=&quot;/Default.aspx?ID=@myFavoritesPageId&quot; class=&quot;@menuLinkClass dw-mod&quot;&gt;
<span class='line-number'>793</span>	                &lt;i class=&quot;fa fa-star fa-1_5x&quot;&gt;&lt;/i&gt;
<span class='line-number'>794</span>	            &lt;/a&gt;
<span class='line-number'>795</span>	        &lt;/li&gt;
<span class='line-number'>796</span>	    }
<span class='line-number'>797</span>	}
<span class='line-number'>798</span>	
<span class='line-number'>799</span>	
<span class='line-number'>800</span>	    @helper RenderFooter()
<span class='line-number'>801</span>	    {
<span class='line-number'>802</span>	string footerColumnOneContent = !string.IsNullOrEmpty(Model.Area.Item.GetString(&quot;FooterColumnOne&quot;)) ? Model.Area.Item.GetString(&quot;FooterColumnOne&quot;) : &quot;&quot;;
<span class='line-number'>803</span>	string footerColumnTwoContent = !string.IsNullOrEmpty(Model.Area.Item.GetString(&quot;FooterColumnTwo&quot;)) ? Model.Area.Item.GetString(&quot;FooterColumnTwo&quot;) : &quot;&quot;;
<span class='line-number'>804</span>	string footerColumnOneHeader = Model.Area.Item.GetString(&quot;FooterColumnOneHeader&quot;);
<span class='line-number'>805</span>	string footerColumnTwoHeader = Model.Area.Item.GetString(&quot;FooterColumnTwoHeader&quot;);
<span class='line-number'>806</span>	int newsletterSignUpPageId = GetPageIdByNavigationTag(&quot;NewsletterSignUp&quot;);
<span class='line-number'>807</span>	
<span class='line-number'>808</span>	    &lt;!-- Footer section --&gt;
<span class='line-number'>809</span>	    &lt;footer class=&quot;footer dw-mod&quot;&gt;
<span class='line-number'>810</span>	        &lt;div class=&quot;center-container top-container__center-container dw-mod&quot;&gt;
<span class='line-number'>811</span>	            &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>812</span>	                @if (!string.IsNullOrEmpty(footerColumnOneContent) || !string.IsNullOrEmpty(footerColumnOneHeader))
<span class='line-number'>813</span>	                {
<span class='line-number'>814</span>	                    &lt;div class=&quot;grid__col-md-auto&quot;&gt;
<span class='line-number'>815</span>	                        &lt;h4 class=&quot;footer__heading dw-mod&quot;&gt;@footerColumnOneHeader&lt;/h4&gt;
<span class='line-number'>816</span>	                        @footerColumnOneContent
<span class='line-number'>817</span>	                    &lt;/div&gt;
<span class='line-number'>818</span>	                }
<span class='line-number'>819</span>	                @*  @if (!string.IsNullOrEmpty(footerColumnTwoContent) || !string.IsNullOrEmpty(footerColumnTwoHeader))
<span class='line-number'>820</span>	                    {
<span class='line-number'>821</span>	                        &lt;div class=&quot;grid__col-md-auto&quot;&gt;
<span class='line-number'>822</span>	                            &lt;h4 class=&quot;footer__heading dw-mod&quot;&gt;@footerColumnTwoHeader&lt;/h4&gt;
<span class='line-number'>823</span>	                            @footerColumnTwoContent
<span class='line-number'>824</span>	                        &lt;/div&gt;
<span class='line-number'>825</span>	                    }
<span class='line-number'>826</span>	
<span class='line-number'>827</span>	                    @if (Model.Area.Item.GetBoolean(&quot;FooterNewsletterSignUp&quot;))
<span class='line-number'>828</span>	                    {
<span class='line-number'>829</span>	                        &lt;div class=&quot;grid__col-md-auto&quot;&gt;
<span class='line-number'>830</span>	                            &lt;h4 class=&quot;footer__heading dw-mod&quot;&gt;@Translate(&quot;Mailing list&quot;, &quot;Mailing list&quot;)&lt;/h4&gt;
<span class='line-number'>831</span>	                            &lt;p&gt;@Translate(&quot;Sign up if you would like to receive occasional treats from us&quot;, &quot;Sign up if you would like to receive occasional treats from us&quot;).&lt;/p&gt;
<span class='line-number'>832</span>	                            &lt;form class=&quot;form dw-mod&quot; name=&quot;NewsletterRedirect&quot; action=&#39;/Default.aspx&#39; method=&quot;get&quot; enctype=&quot;multipart/form-data&quot;&gt;
<span class='line-number'>833</span>	                                &lt;input name=&quot;ID&quot; id=&quot;ID&quot; value=&quot;@newsletterSignUpPageId&quot; type=&quot;hidden&quot; /&gt;
<span class='line-number'>834</span>	                                &lt;div class=&quot;form__field-combi&quot;&gt;
<span class='line-number'>835</span>	                                    &lt;input name=&quot;NewsletterEmail&quot; id=&quot;NewsletterEmail&quot; type=&quot;text&quot; placeholder=&#39;@Translate(&quot;Your email address&quot;, &quot;Your email address&quot;)&#39; /&gt;
<span class='line-number'>836</span>	                                    &lt;input class=&quot;btn btn--primary dw-mod&quot; type=&quot;submit&quot; id=&quot;Submitter&quot; value=&#39;@Translate(&quot;Go&quot;, &quot;Go&quot;)&#39; /&gt;
<span class='line-number'>837</span>	                                &lt;/div&gt;
<span class='line-number'>838</span>	                            &lt;/form&gt;
<span class='line-number'>839</span>	                        &lt;/div&gt;
<span class='line-number'>840</span>	                    }
<span class='line-number'>841</span>	                    @if (Model.Area.Item.GetItems(&quot;FooterSocialLinks&quot;).Count &gt; 0)
<span class='line-number'>842</span>	                    {
<span class='line-number'>843</span>	                        &lt;div class=&quot;grid__col-md-auto&quot;&gt;
<span class='line-number'>844</span>	                            &lt;h4 class=&quot;footer__heading dw-mod&quot;&gt;@Translate(&quot;Social links&quot;, &quot;Social links&quot;)&lt;/h4&gt;
<span class='line-number'>845</span>	
<span class='line-number'>846</span>	                            &lt;div class=&quot;collection dw-mod&quot;&gt;
<span class='line-number'>847</span>	                                @foreach (var socialitem in Model.Area.Item.GetItems(&quot;FooterSocialLinks&quot;))
<span class='line-number'>848</span>	                                {
<span class='line-number'>849</span>	                                    //Fields.FirstOrDefault(x =&gt; x.SystemName == &quot;Icon&quot;).GetString()
<span class='line-number'>850</span>	                                    var socialIcon = socialitem.GetValue(&quot;Icon&quot;) as Dynamicweb.Frontend.ListViewModel;
<span class='line-number'>851</span>	                                    string socialIconClass = socialIcon.SelectedValue;
<span class='line-number'>852</span>	                                    string socialIconTitle = socialIcon.SelectedName;
<span class='line-number'>853</span>	                                    string socialLink = socialitem.GetString(&quot;Link&quot;);
<span class='line-number'>854</span>	
<span class='line-number'>855</span>	                                    &lt;a href=&quot;@socialLink&quot; title=&quot;@socialIconTitle&quot;&gt;&lt;i class=&quot;fa @socialIconClass fa-2x&quot;&gt;&lt;/i&gt;&lt;/a&gt;
<span class='line-number'>856</span>	                                }
<span class='line-number'>857</span>	                            &lt;/div&gt;
<span class='line-number'>858</span>	                        &lt;/div&gt;
<span class='line-number'>859</span>	                    }
<span class='line-number'>860</span>	                    &lt;div class=&quot;grid__col-12 grid--align-center&quot;&gt;
<span class='line-number'>861</span>	                        &lt;p&gt;@Model.Area.Item.GetString(&quot;FooterCopyrightText&quot;)&lt;/p&gt;
<span class='line-number'>862</span>	                    &lt;/div&gt;
<span class='line-number'>863</span>	                *@
<span class='line-number'>864</span>	            &lt;/div&gt;
<span class='line-number'>865</span>	        &lt;/div&gt;
<span class='line-number'>866</span>	    &lt;/footer&gt;
<span class='line-number'>867</span>	}
<span class='line-number'>868</span>	
<span class='line-number'>869</span>	
<span class='line-number'>870</span>	    @* Templates for Typeahead *@
<span class='line-number'>871</span>	    &lt;script id=&quot;SearchGroupsTemplate&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>872</span>	        &lt;li class=&quot;dropdown__item dw-mod&quot; onclick=&quot;Search.UpdateGroupSelection(this)&quot; data-group-id=&quot;{{id}}&quot;&gt;{{name}}&lt;/li&gt;
<span class='line-number'>873</span>	    &lt;/script&gt;
<span class='line-number'>874</span>	
<span class='line-number'>875</span>	    &lt;script id=&quot;SearchContentTemplate&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>876</span>	        &lt;li class=&quot;dropdown__item dropdown__item--seperator dw-mod&quot;&gt;
<span class='line-number'>877</span>	            &lt;a href=&quot;{{link}}&quot; class=&quot;js-typeahead-link u-color-inherit u-pull--left&quot;&gt;
<span class='line-number'>878</span>	                &lt;div class=&quot;u-margin-right u-pull--left {{noimage}} u-hidden-xs u-hidden-xxs&quot;&gt;&lt;img src=&quot;/Admin/Public/GetImage.ashx?width=45&amp;height=38&amp;crop=1&amp;Compression=75&amp;image={{image}}&quot; alt=&quot;{{name}}&quot;&gt;&lt;/div&gt;
<span class='line-number'>879</span>	                &lt;div class=&quot;u-pull--left&quot;&gt;
<span class='line-number'>880</span>	                    &lt;div class=&quot;u-bold u-max-w220px u-truncate-text js-typeahead-name&quot;&gt;{{name}}&lt;/div&gt;
<span class='line-number'>881</span>	                    &lt;div&gt;{{price}}&lt;/div&gt;
<span class='line-number'>882</span>	                &lt;/div&gt;
<span class='line-number'>883</span>	            &lt;/a&gt;
<span class='line-number'>884</span>	            &lt;div class=&quot;u-margin-left u-pull--right u-hidden-xs u-hidden-xxs&quot;&gt;
<span class='line-number'>885</span>	                &lt;button class=&quot;btn btn--primary btn--condensed u-no-margin dw-mod {{hideBuyOptions}} js-ignore-click-outside&quot; onclick=&quot;Cart.AddToCart(event, &#39;{{id}}&#39;, &#39;1&#39;)&quot;&gt;&lt;i class=&quot;fa fa-shopping-cart js-ignore-click-outside&quot;&gt;&lt;/i&gt;&lt;/button&gt;
<span class='line-number'>886</span>	                &lt;a href=&quot;{{link}}&quot; class=&quot;btn btn--secondary btn--condensed u-no-margin dw-mod {{hideViewMore}} js-ignore-click-outside&quot;&gt;@Translate(&quot;View&quot;)&lt;/a&gt;
<span class='line-number'>887</span>	            &lt;/div&gt;
<span class='line-number'>888</span>	        &lt;/li&gt;
<span class='line-number'>889</span>	    &lt;/script&gt;
<span class='line-number'>890</span>	
<span class='line-number'>891</span>	    &lt;script id=&quot;SearchMore&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>892</span>	        &lt;li class=&quot;dropdown__item dropdown__item--not-selectable dw-mod&quot;&gt;
<span class='line-number'>893</span>	            &lt;a href=&quot;/Default.aspx?ID=@productsPageId&amp;Search={{searchParameter}}&amp;GroupID={{groupId}}&quot; class=&quot;btn btn--primary btn--full u-no-margin dw-mod js-typeahead-link&quot;&gt;
<span class='line-number'>894</span>	                @Translate(&quot;View all&quot;)
<span class='line-number'>895</span>	            &lt;/a&gt;
<span class='line-number'>896</span>	        &lt;/li&gt;
<span class='line-number'>897</span>	    &lt;/script&gt;
<span class='line-number'>898</span>	
<span class='line-number'>899</span>	    &lt;script id=&quot;SearchEmpty&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>900</span>	        &lt;li class=&quot;u-margin u-padding-left&quot;&gt;
<span class='line-number'>901</span>	            @Translate(&quot;Your search gave 0 results&quot;)
<span class='line-number'>902</span>	        &lt;/li&gt;
<span class='line-number'>903</span>	    &lt;/script&gt;
<span class='line-number'>904</span>	    
<span class='line-number'>905</span>	
<span class='line-number'>906</span>	    @* Templates for the mini cart *@
<span class='line-number'>907</span>	    &lt;script id=&quot;MiniCartCounterContent&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>908</span>	        &lt;div class=&quot;js-mini-cart-counter-content dw-mod&quot;&gt;
<span class='line-number'>909</span>	            {{numberofproducts}}
<span class='line-number'>910</span>	        &lt;/div&gt;
<span class='line-number'>911</span>	    &lt;/script&gt;
<span class='line-number'>912</span>	
<span class='line-number'>913</span>	    &lt;script id=&quot;MiniCartContent&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>914</span>	        &lt;div class=&quot;mini-cart-dropdown__inner {{isempty}} dw-mod&quot;&gt;
<span class='line-number'>915</span>	            &lt;h4 class=&quot;u-ta-center u-no-margin u-margin-bottom u-margin-top&quot;&gt;@Translate(&quot;Shopping cart&quot;)&lt;/h4&gt;
<span class='line-number'>916</span>	            &lt;div class=&quot;mini-cart-dropdown__body dw-mod&quot;&gt;
<span class='line-number'>917</span>	                &lt;table class=&quot;table mini-cart-table dw-mod&quot;&gt;
<span class='line-number'>918</span>	                    &lt;thead&gt;
<span class='line-number'>919</span>	                        &lt;tr&gt;
<span class='line-number'>920</span>	                            &lt;td&gt;&amp;nbsp;&lt;/td&gt;
<span class='line-number'>921</span>	                            &lt;td&gt;@Translate(&quot;Product&quot;)&lt;/td&gt;
<span class='line-number'>922</span>	                            &lt;td class=&quot;u-ta-right&quot;&gt;@Translate(&quot;Qty&quot;)&lt;/td&gt;
<span class='line-number'>923</span>	                            &lt;td class=&quot;u-ta-right&quot; width=&quot;120&quot;&gt;@Translate(&quot;Price&quot;)&lt;/td&gt;
<span class='line-number'>924</span>	                        &lt;/tr&gt;
<span class='line-number'>925</span>	                    &lt;/thead&gt;
<span class='line-number'>926</span>	
<span class='line-number'>927</span>	                    &lt;tbody id=&quot;MiniCartOrderLines&quot;&gt;&lt;/tbody&gt;
<span class='line-number'>928</span>	
<span class='line-number'>929</span>	                    &lt;tr&gt;
<span class='line-number'>930</span>	                        &lt;td&gt;&lt;i class=&quot;fa fa-credit-card&quot;&gt;&lt;/i&gt;&lt;/td&gt;
<span class='line-number'>931</span>	                        &lt;td&gt;{{paymentmethod}}&lt;/td&gt;
<span class='line-number'>932</span>	                        &lt;td colspan=&quot;2&quot; class=&quot;u-ta-right&quot; width=&quot;130&quot;&gt;{{paymentfee}}&lt;/td&gt;
<span class='line-number'>933</span>	                    &lt;/tr&gt;
<span class='line-number'>934</span>	                    &lt;tr&gt;
<span class='line-number'>935</span>	                        &lt;td&gt;&lt;i class=&quot;fa fa-truck&quot;&gt;&lt;/i&gt;&lt;/td&gt;
<span class='line-number'>936</span>	                        &lt;td&gt;{{shippingmethod}}&lt;/td&gt;
<span class='line-number'>937</span>	                        &lt;td colspan=&quot;2&quot; class=&quot;u-ta-right&quot; width=&quot;130&quot;&gt;{{shippingfee}}&lt;/td&gt;
<span class='line-number'>938</span>	                    &lt;/tr&gt;
<span class='line-number'>939</span>	                    &lt;tr class=&quot;mini-cart-totals dw-mod&quot;&gt;
<span class='line-number'>940</span>	                        &lt;td colspan=&quot;2&quot;&gt;@Translate(&quot;Total&quot;)&lt;/td&gt;
<span class='line-number'>941</span>	                        &lt;td class=&quot;u-ta-right&quot;&gt;{{numberofproducts}}&lt;/td&gt;
<span class='line-number'>942</span>	                        &lt;td class=&quot;u-ta-right&quot; width=&quot;130&quot;&gt;{{totalprice}}&lt;/td&gt;
<span class='line-number'>943</span>	                    &lt;/tr&gt;
<span class='line-number'>944</span>	                &lt;/table&gt;
<span class='line-number'>945</span>	            &lt;/div&gt;
<span class='line-number'>946</span>	
<span class='line-number'>947</span>	            &lt;table class=&quot;table mini-cart-table dw-mod&quot;&gt;
<span class='line-number'>948</span>	                &lt;tr class=&quot;mini-cart-orderlines__footer dw-mod&quot;&gt;
<span class='line-number'>949</span>	                    &lt;td colspan=&quot;2&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;btn btn--secondary u-pull--left u-no-margin dw-mod btn--sm&quot; onclick=&quot;Cart.EmptyCart(event)&quot;&gt;@Translate(&quot;Empty cart&quot;)&lt;/button&gt;&lt;/td&gt;
<span class='line-number'>950</span>	                    &lt;td colspan=&quot;2&quot; class=&quot;u-ta-right&quot;&gt;&lt;a href=&quot;/Default.aspx?ID=@cartPageId&quot; class=&quot;btn btn--primary u-pull--right u-no-margin dw-mod btn--sm&quot;&gt;@Translate(&quot;Proceed to checkout&quot;)&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>951</span>	                &lt;/tr&gt;
<span class='line-number'>952</span>	            &lt;/table&gt;
<span class='line-number'>953</span>	        &lt;/div&gt;
<span class='line-number'>954</span>	    &lt;/script&gt;
<span class='line-number'>955</span>	
<span class='line-number'>956</span>	    &lt;script id=&quot;MiniCartOrderline&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>957</span>	        &lt;tr class=&quot;{{isempty}}&quot;&gt;
<span class='line-number'>958</span>	            &lt;td&gt;&lt;a href=&quot;{{link}}&quot; class=&quot;{{hideimage}}&quot;&gt;&lt;img src=&quot;/Admin/Public/GetImage.ashx?width=50&amp;height=50&amp;crop=5&amp;Compression=75&amp;image={{image}}&quot; alt=&quot;{{name}}&quot;&gt;&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>959</span>	            &lt;td&gt;
<span class='line-number'>960</span>	                &lt;a href=&quot;{{link}}&quot; class=&quot;mini-cart-orderlines__name&quot;&gt;{{name}}&lt;/a&gt;
<span class='line-number'>961</span>	                &lt;a href=&quot;{{link}}&quot; class=&quot;mini-cart-orderlines__name&quot;&gt;{{variantname}}&lt;/a&gt;
<span class='line-number'>962</span>	            &lt;/td&gt;
<span class='line-number'>963</span>	            &lt;td class=&quot;u-ta-right&quot;&gt;{{quantity}}&lt;/td&gt;
<span class='line-number'>964</span>	            &lt;td class=&quot;u-ta-right&quot;&gt;{{totalprice}}&lt;/td&gt;
<span class='line-number'>965</span>	        &lt;/tr&gt;
<span class='line-number'>966</span>	    &lt;/script&gt;
<span class='line-number'>967</span>	
<span class='line-number'>968</span>	    &lt;script id=&quot;MiniCartOrderlineDiscount&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>969</span>	        &lt;tr class=&quot;table__row--no-border {{isempty}}&quot;&gt;
<span class='line-number'>970</span>	            &lt;td&gt;&amp;nbsp;&lt;/td&gt;
<span class='line-number'>971</span>	            &lt;td&gt;&lt;div class=&quot;mini-cart-orderlines__name dw-mod&quot;&gt;{{name}}&lt;/div&gt;&lt;/td&gt;
<span class='line-number'>972</span>	            &lt;td class=&quot;u-ta-right&quot;&gt;&amp;nbsp;&lt;/td&gt;
<span class='line-number'>973</span>	            &lt;td class=&quot;u-ta-right&quot;&gt;{{totalprice}}&lt;/td&gt;
<span class='line-number'>974</span>	        &lt;/tr&gt;
<span class='line-number'>975</span>	    &lt;/script&gt;
<span class='line-number'>976</span>	
<span class='line-number'>977</span>	    &lt;!-- Javascript --&gt;
<span class='line-number'>978</span>	    &lt;script src=&quot;/Files/Templates/Designs/Rapido/js/master.min.js&quot;&gt;&lt;/script&gt;
<span class='line-number'>979</span>	
<span class='line-number'>980</span>	    @if (Model.Area.Item.GetBoolean(&quot;UseCustomJavascript&quot;))
<span class='line-number'>981</span>	    {
<span class='line-number'>982</span>	        &lt;script src=&quot;/Files/Templates/Designs/Rapido/js/custom.min.js&quot;&gt;&lt;/script&gt;
<span class='line-number'>983</span>	    }
<span class='line-number'>984</span>	
<span class='line-number'>985</span>	    &lt;script&gt;
<span class='line-number'>986</span>	    Wireframe.Init(@wireframeMode.ToLower());
<span class='line-number'>987</span>	    &lt;/script&gt;
<span class='line-number'>988</span>	&lt;/body&gt;
<span class='line-number'>989</span>	&lt;/html&gt;
<span class='line-number'>990</span>	
</div>

2018-05-09 13:02:42.8135|ERROR|Templates|Error compiling razor template
Error compiling template "Designs/Rapido/eCom/Product/Product.cshtml"
Line 1877: The name 'productCatalogId' does not exist in the current context
Line 1881: The name 'requestQuery' does not exist in the current context
Line 1885: The name 'productCatalogId' does not exist in the current context
<hr/>
<div class='template-code'>
<span class='line-number'>  1</span>	@inherits Dynamicweb.Rendering.RazorTemplateBase&lt;Dynamicweb.Rendering.RazorTemplateModel&lt;Dynamicweb.Rendering.Template&gt;&gt;
<span class='line-number'>  2</span>	@using Dynamicweb.Extensibility
<span class='line-number'>  3</span>	@using Dynamicweb.Content
<span class='line-number'>  4</span>	@using System
<span class='line-number'>  5</span>	@using System.IO
<span class='line-number'>  6</span>	
<span class='line-number'>  7</span>	@{
<span class='line-number'>  8</span>	    string pageId = GetGlobalValue(&quot;Global:Page.ID&quot;).ToString();
<span class='line-number'>  9</span>	    string productId = GetString(&quot;Ecom:Product.ID&quot;);
<span class='line-number'> 10</span>	    string onSale = GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;) == GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;) ? &quot;u-hidden&quot; : &quot;&quot;;
<span class='line-number'> 11</span>	    string currentPrice = AddSpaceAfterCurrency(GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;) == GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;) ? GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;) : GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;));
<span class='line-number'> 12</span>	    string hideHelpText = &quot;&quot;;
<span class='line-number'> 13</span>	    string feedId = GetPageIdByNavigationTag(&quot;ProductsFeed&quot;).ToString();
<span class='line-number'> 14</span>	    int featuresCount = 0;
<span class='line-number'> 15</span>	    int thumbsCount = GetLoop(&quot;Details&quot;).Count;
<span class='line-number'> 16</span>	
<span class='line-number'> 17</span>	    foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;))
<span class='line-number'> 18</span>	    {
<span class='line-number'> 19</span>	        if (!String.IsNullOrEmpty(customField.GetString(&quot;Product.CustomField.Value.Clean&quot;)))
<span class='line-number'> 20</span>	        {
<span class='line-number'> 21</span>	            featuresCount++;
<span class='line-number'> 22</span>	        }
<span class='line-number'> 23</span>	    }
<span class='line-number'> 24</span>	
<span class='line-number'> 25</span>	    foreach (LoopItem customField in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'> 26</span>	    {
<span class='line-number'> 27</span>	        foreach (LoopItem field in customField.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'> 28</span>	        {
<span class='line-number'> 29</span>	            if (!String.IsNullOrEmpty(field.GetString(&quot;Ecom:Product.CategoryField.Value&quot;)))
<span class='line-number'> 30</span>	            {
<span class='line-number'> 31</span>	                featuresCount++;
<span class='line-number'> 32</span>	            }
<span class='line-number'> 33</span>	        }
<span class='line-number'> 34</span>	    }
<span class='line-number'> 35</span>	
<span class='line-number'> 36</span>	    foreach (LoopItem alternativeImage in GetLoop(&quot;Ecom:Product.AlternativeImages&quot;))
<span class='line-number'> 37</span>	    {
<span class='line-number'> 38</span>	        if (!String.IsNullOrEmpty(alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;)))
<span class='line-number'> 39</span>	        {
<span class='line-number'> 40</span>	            thumbsCount++;
<span class='line-number'> 41</span>	        }
<span class='line-number'> 42</span>	    }
<span class='line-number'> 43</span>	
<span class='line-number'> 44</span>	    foreach (LoopItem variantgroup in GetLoop(&quot;VariantGroups&quot;))
<span class='line-number'> 45</span>	    {
<span class='line-number'> 46</span>	        foreach (LoopItem variantoption in variantgroup.GetLoop(&quot;VariantAvailableOptions&quot;))
<span class='line-number'> 47</span>	        {
<span class='line-number'> 48</span>	            if (variantoption.GetBoolean(&quot;Ecom:VariantOption.Selected&quot;))
<span class='line-number'> 49</span>	            {
<span class='line-number'> 50</span>	                hideHelpText = &quot;u-hidden&quot;;
<span class='line-number'> 51</span>	            }
<span class='line-number'> 52</span>	        }
<span class='line-number'> 53</span>	    }
<span class='line-number'> 54</span>	
<span class='line-number'> 55</span>	    int relatedProductsPageSize = 4;
<span class='line-number'> 56</span>	    int relatedProductsColumnWidth = 3;
<span class='line-number'> 57</span>	
<span class='line-number'> 58</span>	    if (Pageview.Device.ToString() == &quot;Mobile&quot;)
<span class='line-number'> 59</span>	    {
<span class='line-number'> 60</span>	        relatedProductsPageSize = 1;
<span class='line-number'> 61</span>	        relatedProductsColumnWidth = 12;
<span class='line-number'> 62</span>	    }
<span class='line-number'> 63</span>	
<span class='line-number'> 64</span>	    if (Pageview.Device.ToString() == &quot;Tablet&quot;)
<span class='line-number'> 65</span>	    {
<span class='line-number'> 66</span>	        relatedProductsPageSize = 3;
<span class='line-number'> 67</span>	        relatedProductsColumnWidth = 4;
<span class='line-number'> 68</span>	    }
<span class='line-number'> 69</span>	
<span class='line-number'> 70</span>	    string feedPageUrl = &quot;/Default.aspx?ID=&quot; + GetPageIdByNavigationTag(&quot;RelatedProductsFeed&quot;);
<span class='line-number'> 71</span>	    string feedFullUrl = feedPageUrl + &quot;&amp;feedType=productCatalog&amp;PageSize=&quot; + relatedProductsPageSize + &quot;&amp;ProdID=&quot; + productId;
<span class='line-number'> 72</span>	    string productContainerId = &quot;Product&quot; + productId;
<span class='line-number'> 73</span>	
<span class='line-number'> 74</span>	    string HideStockStatus = GetString(&quot;Ecom:Product:Field.HideShowStock&quot;);
<span class='line-number'> 75</span>	
<span class='line-number'> 76</span>	}
<span class='line-number'> 77</span>	
<span class='line-number'> 78</span>	
<span class='line-number'> 79</span>	@functions {
<span class='line-number'> 80</span>	    string AddSpaceAfterCurrency(string str)
<span class='line-number'> 81</span>	    {
<span class='line-number'> 82</span>	        return str.Insert(str.IndexOfAny(&quot;0123456789-&quot;.ToCharArray()), &quot; &quot;);
<span class='line-number'> 83</span>	    }
<span class='line-number'> 84</span>	}
<span class='line-number'> 85</span>	
<span class='line-number'> 86</span>	&lt;!-- Trigger for the image modal --&gt;
<span class='line-number'> 87</span>	&lt;input type=&quot;checkbox&quot; id=&quot;ImageModalTrigger&quot; class=&quot;modal-trigger&quot; /&gt;
<span class='line-number'> 88</span>	
<span class='line-number'> 89</span>	&lt;!-- Image modal --&gt;
<span class='line-number'> 90</span>	&lt;div class=&quot;modal-container&quot;&gt;
<span class='line-number'> 91</span>	    &lt;label for=&quot;ImageModalTrigger&quot; id=&quot;ImageModalOverlay&quot; class=&quot;modal-overlay&quot;&gt;&lt;/label&gt;
<span class='line-number'> 92</span>	    &lt;div class=&quot;modal modal--full&quot; id=&quot;ImageModal&quot;&gt;
<span class='line-number'> 93</span>	        &lt;div class=&quot;modal__body&quot;&gt;
<span class='line-number'> 94</span>	            &lt;img id=&quot;FullImage&quot; class=&quot;modal--full__img&quot; src=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot; /&gt;
<span class='line-number'> 95</span>	        &lt;/div&gt;
<span class='line-number'> 96</span>	    &lt;/div&gt;
<span class='line-number'> 97</span>	&lt;/div&gt;
<span class='line-number'> 98</span>	
<span class='line-number'> 99</span>	&lt;div class=&quot;paragraph-container__grid--bleed-x paragraph-container__grid--bleed-y&quot;&gt;
<span class='line-number'>100</span>	    &lt;div class=&quot;grid product&quot; id=&quot;productGrid&quot;&gt;
<span class='line-number'>101</span>	        @* Image block with optional thumbs *@
<span class='line-number'>102</span>	        @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)))
<span class='line-number'>103</span>	        {
<span class='line-number'>104</span>	            &lt;div class=&quot;grid__col-md-6 grid__col-sm-6&quot;&gt;
<span class='line-number'>105</span>	                &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>106</span>	                    @if (thumbsCount &gt; 0)
<span class='line-number'>107</span>	                {
<span class='line-number'>108</span>	                        &lt;div class=&quot;grid__col-2 u-hidden-xxs product__thumbs dw-mod&quot;&gt;
<span class='line-number'>109</span>	                            &lt;div class=&quot;thumb-list&quot;&gt;
<span class='line-number'>110</span>	                                &lt;div class=&quot;thumb-list__item thumb-list__item--active dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_@productId&quot; data-full-image=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; data-image-path=&quot;/Admin/Public/GetImage.ashx?width=550&amp;amp;height=550&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot;&gt;&lt;img src=&quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'>111</span>	
<span class='line-number'>112</span>	                                @foreach (LoopItem alternativeImage in GetLoop(&quot;Ecom:Product.AlternativeImages&quot;))
<span class='line-number'>113</span>	                                {
<span class='line-number'>114</span>	                                    if (!String.IsNullOrEmpty(alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;)))
<span class='line-number'>115</span>	                                    {
<span class='line-number'>116</span>	                                        string fullImage = alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>117</span>	                                        string image = &quot;/Admin/Public/GetImage.ashx?width=550&amp;amp;height=550&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>118</span>	                                        string thumb = &quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>119</span>	
<span class='line-number'>120</span>	                                        &lt;div class=&quot;thumb-list__item dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_@productId&quot; data-full-image=&quot;@fullImage&quot; data-image-path=&quot;@image&quot;&gt;&lt;img src=&quot;@thumb&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'>121</span>	                                    }
<span class='line-number'>122</span>	                                }
<span class='line-number'>123</span>	
<span class='line-number'>124</span>	                                @foreach (LoopItem detail in GetLoop(&quot;Details&quot;))
<span class='line-number'>125</span>	                                {
<span class='line-number'>126</span>	                                    string fullImage = detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>127</span>	                                    string image = &quot;/Admin/Public/GetImage.ashx?width=550&amp;amp;height=550&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>128</span>	                                    string thumb = &quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>129</span>	
<span class='line-number'>130</span>	                                    &lt;div class=&quot;thumb-list__item dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_@productId&quot; data-full-image=&quot;@fullImage&quot; data-image-path=&quot;@image&quot;&gt;&lt;img src=&quot;@thumb&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'>131</span>	                                }
<span class='line-number'>132</span>	                            &lt;/div&gt;
<span class='line-number'>133</span>	                        &lt;/div&gt;
<span class='line-number'>134</span>	                    }
<span class='line-number'>135</span>	                    &lt;div class=&quot;grid__col-auto&quot;&gt;
<span class='line-number'>136</span>	                        @if (GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;) != GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;))
<span class='line-number'>137</span>	                        {
<span class='line-number'>138</span>	                            &lt;div class=&quot;sticker u-margin-left dw-mod&quot;&gt;@Translate(&quot;Sale!&quot;)&lt;/div&gt;
<span class='line-number'>139</span>	                        }
<span class='line-number'>140</span>	                        &lt;label for=&quot;ImageModalTrigger&quot; class=&quot;product__image-container&quot;&gt;
<span class='line-number'>141</span>	                            &lt;img class=&quot;thumb-image-view product__image-container__image dw-mod&quot; onclick=&quot;document.getElementById(&#39;FullImage&#39;).src = this.getAttribute(&#39;data-full-image&#39;)&quot; id=&quot;Image_@productId&quot; src=&quot;/Admin/Public/GetImage.ashx?crop=5&amp;height=550&amp;width=550&amp;Compression=75&amp;DoNotUpscale=true&amp;image=@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; data-full-image=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot; /&gt;
<span class='line-number'>142</span>	                        &lt;/label&gt;
<span class='line-number'>143</span>	                    &lt;/div&gt;
<span class='line-number'>144</span>	                &lt;/div&gt;
<span class='line-number'>145</span>	            &lt;/div&gt;
<span class='line-number'>146</span>	        }
<span class='line-number'>147</span>	
<span class='line-number'>148</span>	        @* Primary product informations *@
<span class='line-number'>149</span>	        &lt;div class=&quot;grid__col-auto product__info dw-mod&quot;&gt;
<span class='line-number'>150</span>	            &lt;div class=&quot;grid__cell&quot;&gt;
<span class='line-number'>151</span>	                &lt;div class=&quot;u-pull--left product__title dw-mod&quot;&gt;
<span class='line-number'>152</span>	                    &lt;h1 class=&quot;u-no-margin&quot;&gt;@GetString(&quot;Ecom:Product.Name&quot;) @GetString(&quot;Ecom:Product.SelectedVariantComboName&quot;)&lt;/h1&gt;
<span class='line-number'>153</span>	                    &lt;div class=&quot;item-number dw-mod&quot;&gt;@GetString(&quot;Ecom:Product.Number&quot;)&lt;/div&gt;
<span class='line-number'>154</span>	                &lt;/div&gt;
<span class='line-number'>155</span>	                @*&lt;div class=&quot;u-pull--right&quot;&gt;
<span class='line-number'>156</span>	                    @if (Dynamicweb.Core.Converter.ToBoolean(GetGlobalValue(&quot;Global:Extranet.UserName&quot;)))
<span class='line-number'>157</span>	                    {
<span class='line-number'>158</span>	                        string favoriteId = &quot;Favorite&quot; + GetString(&quot;Ecom:Product.ID&quot;);
<span class='line-number'>159</span>	                        &lt;div id=&quot;@favoriteId&quot; class=&quot;favorites favorites--md u-pull--right dw-mod&quot;&gt;
<span class='line-number'>160</span>	                            &lt;div&gt;
<span class='line-number'>161</span>	                                @{ string favorite = GetBoolean(&quot;Ecom:Product.IsProductInFavoriteList&quot;) ? &quot;fa fa-star&quot; : &quot;fa fa-star-o&quot;; }
<span class='line-number'>162</span>	                                &lt;i class=&quot;@favorite fa-1_5x&quot;&gt;&lt;/i&gt;
<span class='line-number'>163</span>	                            &lt;/div&gt;
<span class='line-number'>164</span>	
<span class='line-number'>165</span>	                            &lt;div class=&quot;favorites-list__container dw-mod&quot;&gt;
<span class='line-number'>166</span>	                                &lt;ul class=&quot;list list--clean dw-mod&quot;&gt;
<span class='line-number'>167</span>	                                    @foreach (LoopItem listType in GetLoop(&quot;CustomerCenter.ListTypes&quot;))
<span class='line-number'>168</span>	                                    {
<span class='line-number'>169</span>	                                        foreach (LoopItem list in listType.GetLoop(&quot;CustomerCenter.ProductLists&quot;))
<span class='line-number'>170</span>	                                        {
<span class='line-number'>171</span>	                                            &lt;li&gt;
<span class='line-number'>172</span>	                                                @{string favLinkType = list.GetString(&quot;Ecom:Product.List.IsProductInThisList&quot;) == &quot;True&quot; ? list.GetString(&quot;Ecom:Product.RemoveFromThisList&quot;) : list.GetString(&quot;Ecom:Product.AddToThisListAction&quot;);}
<span class='line-number'>173</span>	                                                @{string isInListIcon = list.GetString(&quot;Ecom:Product.List.IsProductInThisList&quot;) == &quot;True&quot; ? &quot;fa fa-star&quot; : &quot;fa fa-star-o&quot;;}
<span class='line-number'>174</span>	                                                &lt;a href=&quot;@favLinkType&quot; class=&quot;list__link dw-mod&quot;&gt;&lt;i class=&quot;@isInListIcon&quot;&gt;&lt;/i&gt; @list.GetValue(&quot;Ecom:CustomerCenter.List.Name&quot;)&lt;/a&gt;
<span class='line-number'>175</span>	                                            &lt;/li&gt;
<span class='line-number'>176</span>	                                                        }
<span class='line-number'>177</span>	                                                    }
<span class='line-number'>178</span>	                                &lt;/ul&gt;
<span class='line-number'>179</span>	                            &lt;/div&gt;
<span class='line-number'>180</span>	                        &lt;/div&gt;
<span class='line-number'>181</span>	                                                    }
<span class='line-number'>182</span>	                &lt;/div&gt;*@
<span class='line-number'>183</span>	
<span class='line-number'>184</span>	                &lt;div&gt;
<span class='line-number'>185</span>	                    &lt;div class=&quot;u-border-bottom u-full-width u-pull--left&quot;&gt;&lt;/div&gt;
<span class='line-number'>186</span>	
<span class='line-number'>187</span>	                   @* 
<span class='line-number'>188</span>	                       // Delivery + stock information 
<span class='line-number'>189</span>	                    @if (HideStockStatus == &quot;False&quot;)
<span class='line-number'>190</span>	                    {
<span class='line-number'>191</span>	                        string stockIcon = GetInteger(&quot;Ecom:Product.Stock&quot;) &gt; 0 ? &quot;stock-icon--in&quot; : &quot;stock-icon--not&quot;;
<span class='line-number'>192</span>	                        &lt;table class=&quot;table table--clean delivery-and-stock-info dw-mod&quot;&gt;
<span class='line-number'>193</span>	                            &lt;tr&gt;
<span class='line-number'>194</span>	                                &lt;td class=&quot;u-no-padding&quot;&gt;@GetString(&quot;Ecom:Product:Stock.Text&quot;) &lt;div class=&quot;stock-icon @stockIcon&quot;&gt;&lt;/div&gt;&lt;/td&gt;
<span class='line-number'>195</span>	                                @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product:Stock.Text&quot;)) || !String.IsNullOrEmpty(GetString(&quot;Ecom:Product:Stock.DeliveryText&quot;)))
<span class='line-number'>196</span>	                                {
<span class='line-number'>197</span>	                                    if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product:Stock.DeliveryText&quot;)))
<span class='line-number'>198</span>	                                    {
<span class='line-number'>199</span>	                                        &lt;td class=&quot;u-no-padding u-ta-right&quot;&gt;@Translate(&quot;Shipping&quot;) @GetString(&quot;Ecom:Product:Stock.DeliveryText&quot;) @GetString(&quot;Ecom:Product:Stock.DeliveryUnit&quot;)&lt;/td&gt;
<span class='line-number'>200</span>	                                    }
<span class='line-number'>201</span>	                                }
<span class='line-number'>202</span>	                            &lt;/tr&gt;
<span class='line-number'>203</span>	                        &lt;/table&gt;
<span class='line-number'>204</span>	
<span class='line-number'>205</span>	                    }
<span class='line-number'>206</span>	                    *@                  
<span class='line-number'>207</span>	                    @* Short description *@
<span class='line-number'>208</span>	                    @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product.ShortDescription&quot;)))
<span class='line-number'>209</span>	                    {
<span class='line-number'>210</span>	                        &lt;div class=&quot;introduction-text&quot;&gt;
<span class='line-number'>211</span>	                            @GetString(&quot;Ecom:Product.ShortDescription&quot;)
<span class='line-number'>212</span>	                        &lt;/div&gt;
<span class='line-number'>213</span>	                    }
<span class='line-number'>214</span>	                    @*Certification images*@
<span class='line-number'>215</span>	                    @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product:Field.Certification.Value.Clean&quot;)))
<span class='line-number'>216</span>	                    {
<span class='line-number'>217</span>	                        string[] certStrArr = GetString(&quot;Ecom:Product:Field.Certification.Value.Clean&quot;).Split(&#39;,&#39;);
<span class='line-number'>218</span>	                        &lt;div class=&quot;grid__col-12 u-no-padding&quot;&gt;
<span class='line-number'>219</span>	                            &lt;div class=&quot;grid&quot;&gt;                                                      
<span class='line-number'>220</span>	                                
<span class='line-number'>221</span>	                                    @foreach (string certStrItem in certStrArr)
<span class='line-number'>222</span>	                                    {
<span class='line-number'>223</span>	                                            &lt;div&gt;                                     
<span class='line-number'>224</span>	                                            &lt;img class=&quot;grid__cell-img&quot; style=&quot;padding-right: 3px&quot; src=&quot;/Admin/Public/GetImage.ashx?Image=/Files/Images/Ecom/Certification/@(certStrItem).jpg&amp;Format=jpg&amp;Height=70&amp;Crop=0&amp;DoNotUpscale=1&quot; alt=&quot;certification image&quot; /&gt;                                       
<span class='line-number'>225</span>	                                            &lt;/div&gt;
<span class='line-number'>226</span>	                                    }
<span class='line-number'>227</span>	                              &lt;/div&gt;
<span class='line-number'>228</span>	                       &lt;/div&gt;
<span class='line-number'>229</span>	                    }
<span class='line-number'>230</span>	
<span class='line-number'>231</span>	                    @* Variants *@
<span class='line-number'>232</span>	                    @if (GetLoop(&quot;VariantGroups&quot;).Count &gt; 0)
<span class='line-number'>233</span>	                    {
<span class='line-number'>234</span>	                        &lt;small id=&quot;helpText_@productId&quot; class=&quot;help-text @hideHelpText&quot;&gt;@Translate(&quot;Please select a size and/or color!&quot;)&lt;/small&gt;
<span class='line-number'>235</span>	                        string containerId = &quot;Variants&quot; + productId;
<span class='line-number'>236</span>	                        &lt;div&gt;
<span class='line-number'>237</span>	                            &lt;div id=&quot;@containerId&quot; data-product-id=&quot;@productId&quot;&gt;
<span class='line-number'>238</span>	                                @foreach (LoopItem variantGoup in GetLoop(&quot;VariantGroups&quot;))
<span class='line-number'>239</span>	                                {
<span class='line-number'>240</span>	                                    &lt;div&gt;
<span class='line-number'>241</span>	                                        &lt;div class=&quot;u-bold&quot;&gt;@variantGoup.GetString(&quot;Ecom:VariantGroup.Name&quot;)&lt;/div&gt;
<span class='line-number'>242</span>	                                        &lt;div&gt;
<span class='line-number'>243</span>	                                            @foreach (LoopItem variantOption in variantGoup.GetLoop(&quot;VariantAvailableOptions&quot;))
<span class='line-number'>244</span>	                                            {
<span class='line-number'>245</span>	                                                string selected = variantOption.GetBoolean(&quot;Ecom:VariantOption.Selected&quot;) ? &quot;checked&quot; : &quot;&quot;;
<span class='line-number'>246</span>	
<span class='line-number'>247</span>	                                                if (!string.IsNullOrEmpty(variantOption.GetString(&quot;Ecom:VariantOption.ImgSmall.Clean&quot;)))
<span class='line-number'>248</span>	                                                {
<span class='line-number'>249</span>	                                                    &lt;img src=&quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=50&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image=/Images/@variantOption.GetString(&quot;Ecom:VariantOption.ImgSmall.Clean&quot;)&quot; title=&quot;@variantOption.GetString(&quot;Ecom:VariantOption.Name&quot;)&quot; id=&quot;@variantOption.GetString(&quot;Ecom:VariantOption.ID&quot;)&quot; data-product-id=&quot;@productId&quot; onclick=&quot;Variants.UpdateVariants(this, false)&quot; class=&quot;btn btn--tag @selected&quot; data-check=&quot;@selected&quot; /&gt;
<span class='line-number'>250</span>	                                                }
<span class='line-number'>251</span>	                                                else
<span class='line-number'>252</span>	                                                {
<span class='line-number'>253</span>	                                                    &lt;button type=&quot;button&quot; id=&quot;@variantOption.GetString(&quot;Ecom:VariantOption.ID&quot;)&quot; data-product-id=&quot;@productId&quot; onclick=&quot;Variants.UpdateVariants(this, false)&quot; class=&quot;btn btn--tag @selected&quot; data-check=&quot;@selected&quot;&gt;@variantOption.GetString(&quot;Ecom:VariantOption.Name&quot;)&lt;/button&gt;
<span class='line-number'>254</span>	                                                }
<span class='line-number'>255</span>	                                            }
<span class='line-number'>256</span>	                                        &lt;/div&gt;
<span class='line-number'>257</span>	                                    &lt;/div&gt;
<span class='line-number'>258</span>	                                }
<span class='line-number'>259</span>	                            &lt;/div&gt;
<span class='line-number'>260</span>	                           
<span class='line-number'>261</span>	                        &lt;/div&gt;
<span class='line-number'>262</span>	                    }
<span class='line-number'>263</span>	
<span class='line-number'>264</span>	                    @* BOMProducts *@
<span class='line-number'>265</span>	                    @if (GetLoop(&quot;BOMProducts&quot;).Count &gt; 0)
<span class='line-number'>266</span>	                    {
<span class='line-number'>267</span>	                        &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Including products&quot;)&lt;/h2&gt;
<span class='line-number'>268</span>	                        foreach (LoopItem BOMProductItem in GetLoop(&quot;BOMProducts&quot;))
<span class='line-number'>269</span>	                        {
<span class='line-number'>270</span>	                            string link = &quot;/&quot; + BOMProductItem.GetString(&quot;Ecom:Product.LinkGroup.Clean&quot;) + (!String.IsNullOrEmpty(BOMProductItem.GetString(&quot;Ecom:Product.VariantID&quot;)) ? &quot;&amp;VariantID=&quot; + BOMProductItem.GetString(&quot;Ecom:Product.VariantID&quot;) : &quot;&quot;);
<span class='line-number'>271</span>	                            &lt;div class=&quot;grid__col--border grid&quot;&gt;
<span class='line-number'>272</span>	                                &lt;div class=&quot;grid__cell grid__cell--align-middle-left&quot;&gt;
<span class='line-number'>273</span>	                                    &lt;a href=&quot;@link&quot; class=&quot;u-pull--left u-margin-right&quot;&gt;
<span class='line-number'>274</span>	                                        &lt;img src=&quot;/Admin/Public/GetImage.ashx?width=50&amp;image=@BOMProductItem.GetString(&quot;Ecom:Product.ImageSmall.Default.Clean&quot;)&amp;Compression=99&quot; /&gt;
<span class='line-number'>275</span>	                                    &lt;/a&gt;
<span class='line-number'>276</span>	                                    &lt;a href=&quot;@link&quot;&gt;@BOMProductItem.GetString(&quot;Ecom:Product.Name&quot;)&lt;/a&gt;
<span class='line-number'>277</span>	                                &lt;/div&gt;
<span class='line-number'>278</span>	                            &lt;/div&gt;
<span class='line-number'>279</span>	                        }
<span class='line-number'>280</span>	                    }
<span class='line-number'>281</span>	                &lt;/div&gt;
<span class='line-number'>282</span>	            &lt;/div&gt;
<span class='line-number'>283</span>	
<span class='line-number'>284</span>	            @* Buy block *@
<span class='line-number'>285</span>	            &lt;div class=&quot;grid__cell-footer&quot;&gt;
<span class='line-number'>286</span>	                &lt;div class=&quot;grid__cell product__price-actions js-ajax-container dw-mod&quot; id=&quot;PriceAndActions&quot; data-template=&quot;PricesAndActionsTemplate&quot; data-json-feed=&quot;/Default.aspx?ID=@feedId&amp;ProductID=@productId&quot;&gt;&lt;/div&gt;
<span class='line-number'>287</span>	                &lt;input type=&quot;hidden&quot; value=&quot;@GetString(&quot;Ecom:Product.VariantID.Extented&quot;)&quot; name=&quot;Variant&quot; id=&quot;Variant_@GetString(&quot;Ecom:Product.ID&quot;)&quot; /&gt;
<span class='line-number'>288</span>	            &lt;/div&gt;
<span class='line-number'>289</span>	        &lt;/div&gt;
<span class='line-number'>290</span>	    &lt;/div&gt;
<span class='line-number'>291</span>	
<span class='line-number'>292</span>	    &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>293</span>	        @* Long description *@
<span class='line-number'>294</span>	        @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product.LongDescription&quot;)))
<span class='line-number'>295</span>	        {
<span class='line-number'>296</span>	            &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>297</span>	                &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Description&quot;)&lt;/h2&gt;
<span class='line-number'>298</span>	
<span class='line-number'>299</span>	                &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>300</span>	                    &lt;div class=&quot;grid__col-lg-8 grid__col-md-8 grid__col-sm-12 grid__col-xs-12 product__description dw-mod&quot;&gt;
<span class='line-number'>301</span>	                        @GetString(&quot;Ecom:Product.LongDescription&quot;)
<span class='line-number'>302</span>	                    &lt;/div&gt;
<span class='line-number'>303</span>	                &lt;/div&gt;
<span class='line-number'>304</span>	            &lt;/div&gt;
<span class='line-number'>305</span>	        }
<span class='line-number'>306</span>	
<span class='line-number'>307</span>	        @* Features lists *@
<span class='line-number'>308</span>	        @if (featuresCount &gt; 0 &amp;&amp; featuresCount &lt; 10)
<span class='line-number'>309</span>	        {
<span class='line-number'>310</span>	            &lt;div class=&quot;grid__col-12 product__features dw-mod&quot;&gt;
<span class='line-number'>311</span>	                &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Product information&quot;)&lt;/h2&gt;
<span class='line-number'>312</span>	
<span class='line-number'>313</span>	                &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>314</span>	                    &lt;div class=&quot;grid__col-lg-8 grid__col-md-8 grid__col-sm-12 grid__col-xs-12&quot;&gt;
<span class='line-number'>315</span>	                        @if (GetLoop(&quot;CustomFieldValues&quot;).Count &gt; 0)
<span class='line-number'>316</span>	                        {
<span class='line-number'>317</span>	                            &lt;table class=&quot;table table--clean table--compact&quot;&gt;
<span class='line-number'>318</span>	                                @foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;).Where(x =&gt; x.GetString(&quot;Product.CustomField.System&quot;) != &quot;HideShowStock&quot;))
<span class='line-number'>319</span>	                                {
<span class='line-number'>320</span>	
<span class='line-number'>321</span>	                                    string fieldValue = customField.GetString(&quot;Product.CustomField.Value&quot;);
<span class='line-number'>322</span>	
<span class='line-number'>323</span>	                                    if (customField.GetLoop(&quot;Product.CustomField.Options&quot;).Count &gt; 0)
<span class='line-number'>324</span>	                                    {
<span class='line-number'>325</span>	                                        fieldValue = &quot;&quot;;
<span class='line-number'>326</span>	                                        int count = 0;
<span class='line-number'>327</span>	
<span class='line-number'>328</span>	                                        foreach (LoopItem customFieldOptions in customField.GetLoop(&quot;Product.CustomField.Options&quot;))
<span class='line-number'>329</span>	                                        {
<span class='line-number'>330</span>	                                            if (customFieldOptions.GetBoolean(&quot;Product.CustomField.Option.IsSelected&quot;))
<span class='line-number'>331</span>	                                            {
<span class='line-number'>332</span>	                                                if (count != 0)
<span class='line-number'>333</span>	                                                {
<span class='line-number'>334</span>	                                                    fieldValue += &quot;, &quot;;
<span class='line-number'>335</span>	                                                }
<span class='line-number'>336</span>	
<span class='line-number'>337</span>	                                                fieldValue += customFieldOptions.GetString(&quot;Product.CustomField.Option.Name&quot;);
<span class='line-number'>338</span>	                                                count++;
<span class='line-number'>339</span>	                                            }
<span class='line-number'>340</span>	                                        }
<span class='line-number'>341</span>	                                    }
<span class='line-number'>342</span>	
<span class='line-number'>343</span>	                                    if (fieldValue == &quot;False&quot;)
<span class='line-number'>344</span>	                                    {
<span class='line-number'>345</span>	                                        fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>346</span>	                                    }
<span class='line-number'>347</span>	
<span class='line-number'>348</span>	                                    if (fieldValue == &quot;True&quot;)
<span class='line-number'>349</span>	                                    {
<span class='line-number'>350</span>	                                        fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>351</span>	                                    }
<span class='line-number'>352</span>	
<span class='line-number'>353</span>	                                    if (!String.IsNullOrEmpty(customField.GetString(&quot;Product.CustomField.Name&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>354</span>	                                    {
<span class='line-number'>355</span>	                                        &lt;tr&gt;
<span class='line-number'>356</span>	                                                &lt;td width=&quot;160&quot;&gt;@customField.GetString(&quot;Product.CustomField.Name&quot;):&lt;/td&gt;
<span class='line-number'>357</span>	                                                @if (!String.IsNullOrEmpty(customField.GetString(&quot;Document.FullPath&quot;)))
<span class='line-number'>358</span>	                                                {
<span class='line-number'>359</span>	                                                    &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@customField.GetString(&quot;Document.FullPath&quot;)&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;i class=&quot;fa @getIconForFile(fieldValue)&quot;&gt;&lt;/i&gt; @fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>360</span>	                                                }
<span class='line-number'>361</span>	                                                else
<span class='line-number'>362</span>	                                                {
<span class='line-number'>363</span>	                                                    string[] extArr = { &quot;.jpg&quot;, &quot;.png&quot;, &quot;.gif&quot;, &quot;.jpeg&quot; };
<span class='line-number'>364</span>	
<span class='line-number'>365</span>	                                                    if (extArr.Any(x =&gt; customField.GetString(&quot;Product.CustomField.Value&quot;).Contains(x)))
<span class='line-number'>366</span>	                                                    {
<span class='line-number'>367</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;
<span class='line-number'>368</span>	                                                            &lt;img src=&quot;/Admin/Public/Getimage.ashx?height=50&amp;amp;compression=75&amp;amp;Crop=5&amp;amp;image=@customField.GetString(&quot;Product.CustomField.Value&quot;)&quot; alt=&quot;@fieldValue&quot; /&gt;
<span class='line-number'>369</span>	                                                        &lt;/td&gt;
<span class='line-number'>370</span>	                                                    }
<span class='line-number'>371</span>	                                                    else
<span class='line-number'>372</span>	                                                    {
<span class='line-number'>373</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>374</span>	                                                    }
<span class='line-number'>375</span>	                                                }
<span class='line-number'>376</span>	                                            &lt;/tr&gt;
<span class='line-number'>377</span>	                                        }
<span class='line-number'>378</span>	
<span class='line-number'>379</span>	                                    }
<span class='line-number'>380</span>	                                
<span class='line-number'>381</span>	                                
<span class='line-number'>382</span>	                            &lt;/table&gt;
<span class='line-number'>383</span>	                        }
<span class='line-number'>384</span>	
<span class='line-number'>385</span>	                        @if (GetLoop(&quot;ProductCategories&quot;).Count &gt; 0)
<span class='line-number'>386</span>	                        {
<span class='line-number'>387</span>	                            &lt;table class=&quot;table table--clean table--compact u-margin-bottom&quot;&gt;
<span class='line-number'>388</span>	                                @foreach (LoopItem categoryGroup in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'>389</span>	                                {
<span class='line-number'>390</span>	                                    int fieldsCount = 0;
<span class='line-number'>391</span>	                                    foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>392</span>	                                    {
<span class='line-number'>393</span>	                                        if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;)))
<span class='line-number'>394</span>	                                        {
<span class='line-number'>395</span>	                                            fieldsCount++;
<span class='line-number'>396</span>	                                        }
<span class='line-number'>397</span>	                                    }
<span class='line-number'>398</span>	
<span class='line-number'>399</span>	                                    if (fieldsCount &gt; 0)
<span class='line-number'>400</span>	                                    {
<span class='line-number'>401</span>	                                        &lt;tr&gt;
<span class='line-number'>402</span>	                                            &lt;td colspan=&quot;2&quot; class=&quot;u-ta-left table__section-header dw-mod&quot;&gt;@categoryGroup.GetString(&quot;Ecom:Product.Category.Name&quot;)&lt;/td&gt;
<span class='line-number'>403</span>	                                        &lt;/tr&gt;
<span class='line-number'>404</span>	
<span class='line-number'>405</span>	                                        foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>406</span>	                                        {
<span class='line-number'>407</span>	                                            string fieldValue = categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;);
<span class='line-number'>408</span>	
<span class='line-number'>409</span>	                                            if (fieldValue == &quot;False&quot;)
<span class='line-number'>410</span>	                                            {
<span class='line-number'>411</span>	                                                fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>412</span>	                                            }
<span class='line-number'>413</span>	
<span class='line-number'>414</span>	                                            if (fieldValue == &quot;True&quot;)
<span class='line-number'>415</span>	                                            {
<span class='line-number'>416</span>	                                                fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>417</span>	                                            }
<span class='line-number'>418</span>	
<span class='line-number'>419</span>	                                            if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>420</span>	                                            {
<span class='line-number'>421</span>	                                                &lt;tr&gt;
<span class='line-number'>422</span>	                                                    &lt;td width=&quot;160&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;):&lt;/td&gt;
<span class='line-number'>423</span>	                                                    @if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;9&quot;)
<span class='line-number'>424</span>	                                                    {
<span class='line-number'>425</span>	
<span class='line-number'>426</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@fieldValue&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;i class=&quot;fa @getIconForFile(fieldValue)&quot;&gt;&lt;/i&gt; @fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>427</span>	                                                    }
<span class='line-number'>428</span>	                                                    else if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;15&quot;)
<span class='line-number'>429</span>	                                                    {
<span class='line-number'>430</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.OptionLabel&quot;)&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>431</span>	                                                    }
<span class='line-number'>432</span>	                                                    else if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;8&quot;)
<span class='line-number'>433</span>	                                                    {
<span class='line-number'>434</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a property=&quot;identifier&quot; href=&quot;@fieldValue&quot;&gt;@fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>435</span>	                                                    }
<span class='line-number'>436</span>	                                                    else
<span class='line-number'>437</span>	                                                    {
<span class='line-number'>438</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>439</span>	                                                    }
<span class='line-number'>440</span>	                                                &lt;/tr&gt;
<span class='line-number'>441</span>	                                            }
<span class='line-number'>442</span>	                                        }
<span class='line-number'>443</span>	                                    }
<span class='line-number'>444</span>	                                }
<span class='line-number'>445</span>	                            &lt;/table&gt;
<span class='line-number'>446</span>	                        }
<span class='line-number'>447</span>	                    &lt;/div&gt;
<span class='line-number'>448</span>	                &lt;/div&gt;
<span class='line-number'>449</span>	            &lt;/div&gt;
<span class='line-number'>450</span>	        }
<span class='line-number'>451</span>	
<span class='line-number'>452</span>	
<span class='line-number'>453</span>	        @if (featuresCount &gt;= 10)
<span class='line-number'>454</span>	        {
<span class='line-number'>455</span>	            &lt;div class=&quot;grid__col-12 grid__col--bleed-y&quot;&gt;
<span class='line-number'>456</span>	                &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Product information&quot;)&lt;/h2&gt;
<span class='line-number'>457</span>	
<span class='line-number'>458</span>	                &lt;input type=&quot;checkbox&quot; id=&quot;expandable-text-trigger&quot; class=&quot;expandable-text-trigger&quot; /&gt;
<span class='line-number'>459</span>	                &lt;div class=&quot;expandable-text-container&quot;&gt;
<span class='line-number'>460</span>	                    &lt;div class=&quot;expandable-text-container__content dw-mod&quot;&gt;
<span class='line-number'>461</span>	                        &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>462</span>	                            &lt;div class=&quot;grid__col-lg-8 grid__col-md-8 grid__col-sm-12 grid__col-xs-12&quot;&gt;
<span class='line-number'>463</span>	                                @if (GetLoop(&quot;CustomFieldValues&quot;).Count &gt; 0)
<span class='line-number'>464</span>	                                {
<span class='line-number'>465</span>	                                    &lt;table class=&quot;table table--clean table--compact&quot;&gt;
<span class='line-number'>466</span>	                                        @foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;))
<span class='line-number'>467</span>	                                        {
<span class='line-number'>468</span>	                                            string fieldValue = customField.GetString(&quot;Product.CustomField.Value.Clean&quot;);
<span class='line-number'>469</span>	
<span class='line-number'>470</span>	                                            if (customField.GetLoop(&quot;Product.CustomField.Options&quot;).Count &gt; 0)
<span class='line-number'>471</span>	                                            {
<span class='line-number'>472</span>	                                                fieldValue = &quot;&quot;;
<span class='line-number'>473</span>	                                                int count = 0;
<span class='line-number'>474</span>	
<span class='line-number'>475</span>	                                                foreach (LoopItem customFieldOptions in customField.GetLoop(&quot;Product.CustomField.Options&quot;))
<span class='line-number'>476</span>	                                                {
<span class='line-number'>477</span>	                                                    if (customFieldOptions.GetBoolean(&quot;Product.CustomField.Option.IsSelected&quot;))
<span class='line-number'>478</span>	                                                    {
<span class='line-number'>479</span>	                                                        if (count != 0)
<span class='line-number'>480</span>	                                                        {
<span class='line-number'>481</span>	                                                            fieldValue += &quot;, &quot;;
<span class='line-number'>482</span>	                                                        }
<span class='line-number'>483</span>	
<span class='line-number'>484</span>	                                                        fieldValue += customFieldOptions.GetString(&quot;Product.CustomField.Option.Name&quot;);
<span class='line-number'>485</span>	                                                        count++;
<span class='line-number'>486</span>	                                                    }
<span class='line-number'>487</span>	                                                }
<span class='line-number'>488</span>	                                            }
<span class='line-number'>489</span>	
<span class='line-number'>490</span>	                                            if (fieldValue == &quot;False&quot;)
<span class='line-number'>491</span>	                                            {
<span class='line-number'>492</span>	                                                fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>493</span>	                                            }
<span class='line-number'>494</span>	
<span class='line-number'>495</span>	                                            if (fieldValue == &quot;True&quot;)
<span class='line-number'>496</span>	                                            {
<span class='line-number'>497</span>	                                                fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>498</span>	                                            }
<span class='line-number'>499</span>	
<span class='line-number'>500</span>	                                            if (!String.IsNullOrEmpty(customField.GetString(&quot;Product.CustomField.Name&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>501</span>	                                            {
<span class='line-number'>502</span>	                                                &lt;tr&gt;
<span class='line-number'>503</span>	                                                    &lt;td width=&quot;160&quot;&gt;@customField.GetString(&quot;Product.CustomField.Name&quot;):&lt;/td&gt;
<span class='line-number'>504</span>	                                                    @if (!String.IsNullOrEmpty(customField.GetString(&quot;Document.FullPath&quot;)))
<span class='line-number'>505</span>	                                                    {
<span class='line-number'>506</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@customField.GetString(&quot;Document.FullPath&quot;)&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;&lt;i class=&quot;fa @getIconForFile(fieldValue)&quot;&gt;&lt;/i&gt; &amp;nbsp;@fieldValue&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>507</span>	                                                    }
<span class='line-number'>508</span>	                                                    else
<span class='line-number'>509</span>	                                                    {
<span class='line-number'>510</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>511</span>	                                                    }
<span class='line-number'>512</span>	                                                &lt;/tr&gt;
<span class='line-number'>513</span>	                                            }
<span class='line-number'>514</span>	                                        }
<span class='line-number'>515</span>	                                    &lt;/table&gt;
<span class='line-number'>516</span>	                                }
<span class='line-number'>517</span>	
<span class='line-number'>518</span>	                                @if (GetLoop(&quot;ProductCategories&quot;).Count &gt; 0)
<span class='line-number'>519</span>	                                {
<span class='line-number'>520</span>	                                    &lt;table class=&quot;table table--clean table--compact u-margin-bottom&quot;&gt;
<span class='line-number'>521</span>	                                        @foreach (LoopItem categoryGroup in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'>522</span>	                                        {
<span class='line-number'>523</span>	                                            int fieldsCount = 0;
<span class='line-number'>524</span>	                                            foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>525</span>	                                            {
<span class='line-number'>526</span>	                                                if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;)))
<span class='line-number'>527</span>	                                                {
<span class='line-number'>528</span>	                                                    fieldsCount++;
<span class='line-number'>529</span>	                                                }
<span class='line-number'>530</span>	                                            }
<span class='line-number'>531</span>	
<span class='line-number'>532</span>	                                            if (fieldsCount &gt; 0)
<span class='line-number'>533</span>	                                            {
<span class='line-number'>534</span>	                                                &lt;tr&gt;
<span class='line-number'>535</span>	                                                    &lt;td colspan=&quot;2&quot; class=&quot;u-ta-left table__section-header dw-mod&quot;&gt;@categoryGroup.GetString(&quot;Ecom:Product.Category.Name&quot;)&lt;/td&gt;
<span class='line-number'>536</span>	                                                &lt;/tr&gt;
<span class='line-number'>537</span>	
<span class='line-number'>538</span>	                                                foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>539</span>	                                                {
<span class='line-number'>540</span>	                                                    string fieldValue = categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;);
<span class='line-number'>541</span>	
<span class='line-number'>542</span>	                                                    if (fieldValue == &quot;False&quot;)
<span class='line-number'>543</span>	                                                    {
<span class='line-number'>544</span>	                                                        fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>545</span>	                                                    }
<span class='line-number'>546</span>	
<span class='line-number'>547</span>	                                                    if (fieldValue == &quot;True&quot;)
<span class='line-number'>548</span>	                                                    {
<span class='line-number'>549</span>	                                                        fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>550</span>	                                                    }
<span class='line-number'>551</span>	
<span class='line-number'>552</span>	                                                    if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>553</span>	                                                    {
<span class='line-number'>554</span>	                                                        &lt;tr&gt;
<span class='line-number'>555</span>	                                                            &lt;td width=&quot;160&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;):&lt;/td&gt;
<span class='line-number'>556</span>	                                                            @if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;9&quot;)
<span class='line-number'>557</span>	                                                            {
<span class='line-number'>558</span>	                                                                &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@fieldValue&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;i class=&quot;fa @getIconForFile(fieldValue)&quot;&gt;&lt;/i&gt; @fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>559</span>	                                                            }
<span class='line-number'>560</span>	                                                            else if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;15&quot;)
<span class='line-number'>561</span>	                                                            {
<span class='line-number'>562</span>	                                                                &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.OptionLabel&quot;)&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>563</span>	                                                            }
<span class='line-number'>564</span>	                                                            else if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;8&quot;)
<span class='line-number'>565</span>	                                                            {
<span class='line-number'>566</span>	                                                                &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a property=&quot;identifier&quot; href=&quot;@fieldValue&quot;&gt;@fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>567</span>	                                                            }
<span class='line-number'>568</span>	                                                            else
<span class='line-number'>569</span>	                                                            {
<span class='line-number'>570</span>	                                                                &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>571</span>	                                                            }
<span class='line-number'>572</span>	                                                        &lt;/tr&gt;
<span class='line-number'>573</span>	                                                    }
<span class='line-number'>574</span>	                                                }
<span class='line-number'>575</span>	                                            }
<span class='line-number'>576</span>	                                        }
<span class='line-number'>577</span>	                                    &lt;/table&gt;
<span class='line-number'>578</span>	                                }
<span class='line-number'>579</span>	                            &lt;/div&gt;
<span class='line-number'>580</span>	                        &lt;/div&gt;
<span class='line-number'>581</span>	                    &lt;/div&gt;
<span class='line-number'>582</span>	                    &lt;div class=&quot;u-ta-center&quot;&gt;
<span class='line-number'>583</span>	                        &lt;label for=&quot;expandable-text-trigger&quot; class=&quot;btn btn--secondary expandable-text-container__btn more dw-mod&quot;&gt;@Translate(&quot;Show more&quot;)&lt;/label&gt;
<span class='line-number'>584</span>	                        &lt;label for=&quot;expandable-text-trigger&quot; class=&quot;btn btn--secondary expandable-text-container__btn less dw-mod&quot;&gt;@Translate(&quot;Show less&quot;)&lt;/label&gt;
<span class='line-number'>585</span>	                    &lt;/div&gt;
<span class='line-number'>586</span>	                &lt;/div&gt;
<span class='line-number'>587</span>	            &lt;/div&gt;
<span class='line-number'>588</span>	        }
<span class='line-number'>589</span>	
<span class='line-number'>590</span>	       @* 
<span class='line-number'>591</span>	           // Related products 
<span class='line-number'>592</span>	        &lt;div class=&quot;js-ajax-container&quot; id=&quot;ProductList&quot; data-template=&quot;ProductContainer&quot; data-pre-render-template=&quot;ProductPreRenderContainer&quot; data-json-feed=&quot;@feedFullUrl&quot;&gt;&lt;/div&gt;*@
<span class='line-number'>593</span>	    &lt;/div&gt;
<span class='line-number'>594</span>	&lt;/div&gt;
<span class='line-number'>595</span>	
<span class='line-number'>596</span>	&lt;script id=&quot;PricesAndActionsTemplate&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>597</span>	    &lt;div class=&quot;product__price-actions__price dw-mod&quot;&gt;
<span class='line-number'>598</span>	        &lt;div class=&quot;before-price {{onSale}} dw-mod&quot;&gt;{{discount}}&lt;/div&gt;
<span class='line-number'>599</span>	        &lt;div class=&quot;price dw-mod&quot;&gt;{{price}}&lt;/div&gt;
<span class='line-number'>600</span>	    &lt;/div&gt;
<span class='line-number'>601</span>	    &lt;div class=&quot;buttons-collection buttons-collection--right product__price-actions__actions dw-mod&quot;&gt;
<span class='line-number'>602</span>	        &lt;button type=&quot;button&quot; id=&quot;CartButton_{{id}}&quot; class=&quot;btn btn--primary btn--condensed dw-mod u-pull--right&quot; name=&quot;submit&quot; onclick=&quot;Cart.AddToCart(event, &#39;{{id}}&#39;, document.getElementById(&#39;Quantity_{{id}}&#39;).value, &#39;Unit_{{id}}&#39;, &#39;Variant_{{id}}&#39;);&quot;&gt;&lt;i class=&quot;fa fa-shopping-cart&quot;&gt;&lt;/i&gt;&lt;span class=&quot;u-hidden-xs u-hidden-xxs&quot;&gt; @Translate(&quot;Add to cart&quot;)&lt;/span&gt;&lt;/button&gt;
<span class='line-number'>603</span>	        &lt;input type=&quot;number&quot; class=&quot;u-w70px u-pull--right&quot; id=&quot;Quantity_{{id}}&quot; name=&quot;Quantity&quot; value=&quot;1&quot; min=&quot;1&quot;&gt;
<span class='line-number'>604</span>	        &lt;input type=&quot;checkbox&quot; id=&quot;UnitOptions_{{id}}&quot; class=&quot;dropdown-trigger&quot; /&gt;
<span class='line-number'>605</span>	        &lt;div class=&quot;dropdown u-pull--right u-w150px u-w80px--xs dw-mod {{hasUnits}}&quot;&gt;
<span class='line-number'>606</span>	           @* &lt;label class=&quot;dropdown__header dropdown__btn dw-mod&quot; for=&quot;UnitOptions_{{id}}&quot;&gt;{{unitName}}&lt;/label&gt;*@
<span class='line-number'>607</span>	            &lt;div class=&quot;dropdown__content dw-mod&quot; id=&quot;unitOptions&quot; data-template=&quot;Units&quot;&gt;&lt;/div&gt;
<span class='line-number'>608</span>	            &lt;label class=&quot;dropdown-trigger-off&quot; for=&quot;UnitOptions_{{id}}&quot;&gt;&lt;/label&gt;
<span class='line-number'>609</span>	        &lt;/div&gt;
<span class='line-number'>610</span>	        &lt;input type=&quot;hidden&quot; value=&quot;{{unitId}}&quot; name=&quot;Unit&quot; id=&quot;Unit_{{id}}&quot; /&gt;
<span class='line-number'>611</span>	    &lt;/div&gt;
<span class='line-number'>612</span>	&lt;/script&gt;
<span class='line-number'>613</span>	
<span class='line-number'>614</span>	&lt;script id=&quot;Units&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>615</span>	    &lt;div class=&quot;dropdown__item dw-mod&quot; onclick=&quot;Dynamo.UpdateContent(&#39;PriceAndActions&#39;, &#39;/Default.aspx?ID=@feedId&amp;ProductID=@productId&amp;UnitID={{value}}&#39;)&quot;&gt;{{name}}&lt;/div&gt;
<span class='line-number'>616</span>	&lt;/script&gt;
<span class='line-number'>617</span>	
<span class='line-number'>618</span>	
<span class='line-number'>619</span>	@* Script templates for related products *@
<span class='line-number'>620</span>	&lt;script id=&quot;ProductPreRenderContainer&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>621</span>	    &lt;div class=&quot;u-h600px u-full-width&quot;&gt;
<span class='line-number'>622</span>	        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>623</span>	            &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>624</span>	                &lt;div class=&quot;pre-render-element pre-render-element--md&quot;&gt;&lt;/div&gt;
<span class='line-number'>625</span>	            &lt;/div&gt;
<span class='line-number'>626</span>	        &lt;/div&gt;
<span class='line-number'>627</span>	    &lt;/div&gt;
<span class='line-number'>628</span>	&lt;/script&gt;
<span class='line-number'>629</span>	
<span class='line-number'>630</span>	&lt;script id=&quot;ProductContainer&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>631</span>	    &lt;div class=&quot;u-min-h500px u-full-width&quot;&gt;
<span class='line-number'>632</span>	        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>633</span>	            &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>634</span>	                &lt;h2 class=&quot;section-title section-title--condensed&quot;&gt;@Translate(&quot;What about these products?&quot;)&lt;/h2&gt;
<span class='line-number'>635</span>	            &lt;/div&gt;
<span class='line-number'>636</span>	
<span class='line-number'>637</span>	            &lt;div class=&quot;grid__col-45px grid__col--bleed-x&quot;&gt;
<span class='line-number'>638</span>	                &lt;div class=&quot;grid__cell grid__cell--align-middle-left&quot;&gt;
<span class='line-number'>639</span>	                    &lt;button class=&quot;btn btn--condensed btn--clean {{prevdisabled}} dw-mod&quot; onclick=&quot;Dynamo.UpdateContent(&#39;ProductList&#39;, &#39;{{prevPage}}&#39;)&quot; {{prevdisabled}}&gt;&lt;i class=&quot;fa fa-chevron-left fa-2x&quot;&gt;&lt;/i&gt;&lt;/button&gt;
<span class='line-number'>640</span>	                &lt;/div&gt;
<span class='line-number'>641</span>	            &lt;/div&gt;
<span class='line-number'>642</span>	            &lt;div class=&quot;grid__col-auto grid__col--bleed-x&quot;&gt;
<span class='line-number'>643</span>	                &lt;div id=&quot;ProductsContainer&quot; class=&quot;grid product-list dw-mod&quot; data-template=&quot;ProductGridItemContainer&quot;&gt;&lt;/div&gt;
<span class='line-number'>644</span>	            &lt;/div&gt;
<span class='line-number'>645</span>	            &lt;div class=&quot;grid__col-45px grid__col--bleed-x&quot;&gt;
<span class='line-number'>646</span>	                &lt;div class=&quot;grid__cell grid__cell--align-middle-right&quot;&gt;
<span class='line-number'>647</span>	                    &lt;button class=&quot;btn btn--condensed btn--clean {{nextdisabled}} dw-mod&quot; onclick=&quot;Dynamo.UpdateContent(&#39;ProductList&#39;, &#39;{{nextPage}}&#39;)&quot; {{nextdisabled}}&gt;&lt;i class=&quot;fa fa-chevron-right fa-2x&quot;&gt;&lt;/i&gt;&lt;/button&gt;
<span class='line-number'>648</span>	                &lt;/div&gt;
<span class='line-number'>649</span>	            &lt;/div&gt;
<span class='line-number'>650</span>	        &lt;/div&gt;
<span class='line-number'>651</span>	    &lt;/div&gt;
<span class='line-number'>652</span>	&lt;/script&gt;
<span class='line-number'>653</span>	
<span class='line-number'>654</span>	&lt;script id=&quot;ProductGridItemContainer&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>655</span>	    &lt;div id=&quot;Product&quot; class=&quot;grid__col-@relatedProductsColumnWidth product-list__list-item dw-mod&quot; data-template=&quot;ProductGridItem&quot; data-preloader=&quot;false&quot;&gt;&lt;/div&gt;
<span class='line-number'>656</span>	&lt;/script&gt;
<span class='line-number'>657</span>	
<span class='line-number'>658</span>	&lt;script id=&quot;ProductGridItem&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>659</span>	    &lt;div class=&quot;grid__cell product-list__grid-item__image dw-mod {{noImage}}&quot;&gt;
<span class='line-number'>660</span>	        &lt;div class=&quot;sticker {{onSale}} dw-mod&quot;&gt;@Translate(&quot;Sale!&quot;)&lt;/div&gt;
<span class='line-number'>661</span>	        &lt;a href=&quot;{{link}}&quot; onclick=&quot;Scroll.SavePosition(event)&quot;&gt;&lt;img class=&quot;grid__cell-img grid__cell-img--centered&quot; src=&quot;/Admin/Public/GetImage.ashx?width=300&amp;amp;height=300&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image={{image}}&quot; alt=&quot;{{name}}&quot; /&gt;&lt;/a&gt;
<span class='line-number'>662</span>	    &lt;/div&gt;
<span class='line-number'>663</span>	
<span class='line-number'>664</span>	    &lt;div class=&quot;grid__cell product-list__grid-item__price-info dw-mod&quot;&gt;
<span class='line-number'>665</span>	        &lt;a href=&quot;{{link}}&quot; onclick=&quot;Scroll.SavePosition(event)&quot; title=&quot;{{name}}&quot;&gt;&lt;h6 class=&quot;u-condensed-text&quot;&gt;{{name}}&lt;/h6&gt;&lt;/a&gt;
<span class='line-number'>666</span>	        &lt;div class=&quot;item-number dw-mod&quot;&gt;{{number}}&lt;/div&gt;
<span class='line-number'>667</span>	        &lt;div class=&quot;price dw-mod&quot;&gt;{{price}}&lt;/div&gt;
<span class='line-number'>668</span>	        &lt;div class=&quot;before-price {{onSale}} dw-mod&quot;&gt;{{discount}}&lt;/div&gt;
<span class='line-number'>669</span>	    &lt;/div&gt;
<span class='line-number'>670</span>	
<span class='line-number'>671</span>	    &lt;div class=&quot;product-list__grid-item__footer dw-mod&quot;&gt;
<span class='line-number'>672</span>	        &lt;div class=&quot;u-ta-center&quot;&gt;
<span class='line-number'>673</span>	            &lt;a href=&quot;{{link}}&quot; id=&quot;CartButton_{{id}}&quot; class=&quot;btn btn--secondary btn--full u-no-margin dw-mod&quot;&gt;@Translate(&quot;View&quot;)&lt;/a&gt;
<span class='line-number'>674</span>	        &lt;/div&gt;
<span class='line-number'>675</span>	    &lt;/div&gt;
<span class='line-number'>676</span>	&lt;/script&gt;
<span class='line-number'>677</span>	
<span class='line-number'>678</span>	@*Variants data generation*@
<span class='line-number'>679</span>	&lt;script&gt;
<span class='line-number'>680</span>	    document.addEventListener(&quot;DOMContentLoaded&quot;, function (event) {
<span class='line-number'>681</span>	        var variants = [];
<span class='line-number'>682</span>	
<span class='line-number'>683</span>	        document.getElementById(&quot;productGrid&quot;).addEventListener(&#39;contentLoaded&#39;, function (e) {
<span class='line-number'>684</span>	            if (e.srcElement.classList.contains(&quot;js-variants-wrap&quot;)) {
<span class='line-number'>685</span>	                Variants.SetVariantOptionStatesForProductList(e.srcElement);
<span class='line-number'>686</span>	            }
<span class='line-number'>687</span>	        }, false);
<span class='line-number'>688</span>	
<span class='line-number'>689</span>	        @foreach (LoopItem variantgroup in GetLoop(&quot;VariantGroups&quot;))
<span class='line-number'>690</span>	        {
<span class='line-number'>691</span>	            &lt;text&gt;var optionsArray = [];&lt;/text&gt;
<span class='line-number'>692</span>	
<span class='line-number'>693</span>	            foreach (LoopItem variantoption in variantgroup.GetLoop(&quot;VariantAvailableOptions&quot;))
<span class='line-number'>694</span>	            {
<span class='line-number'>695</span>	                string variantSelection = variantoption.GetBoolean(&quot;Ecom:VariantOption.Selected&quot;) ? &quot;checked&quot; : &quot;&quot;;
<span class='line-number'>696</span>	
<span class='line-number'>697</span>	                &lt;text&gt;
<span class='line-number'>698</span>	        var option = new Variants.VariantOption(&quot;@variantoption.GetValue(&quot;Ecom:VariantOption.ID&quot;)&quot;, &quot;@GetString(&quot;Ecom:Product.ID&quot;)&quot;, &quot;@variantoption.GetString(&quot;Ecom:VariantOption.Name&quot;)&quot;, &quot;@variantSelection&quot;, &quot;&quot;, &quot;@variantoption.GetString(&quot;Ecom:VariantOption.Color&quot;)&quot;, &quot;@variantoption.GetString(&quot;Ecom:VariantOption.ImgSmall.Clean&quot;)&quot;);
<span class='line-number'>699</span>	        optionsArray.push(option);
<span class='line-number'>700</span>	        &lt;/text&gt;
<span class='line-number'>701</span>	            }
<span class='line-number'>702</span>	
<span class='line-number'>703</span>	            &lt;text&gt;
<span class='line-number'>704</span>	        var group = new Variants.VariantGroup(&quot;@GetString(&quot;Ecom:Product.ID&quot;)_@variantgroup.GetValue(&quot;Ecom:VariantGroup.ID&quot;)&quot;, &quot;@variantgroup.GetValue(&quot;Ecom:VariantGroup.Name&quot;)&quot;, optionsArray);
<span class='line-number'>705</span>	        variants.push(group);
<span class='line-number'>706</span>	        &lt;/text&gt;
<span class='line-number'>707</span>	            }
<span class='line-number'>708</span>	
<span class='line-number'>709</span>	        var combinations = [];
<span class='line-number'>710</span>	        @foreach (LoopItem variantcomb in GetLoop(&quot;VariantStockCombinations&quot;))
<span class='line-number'>711</span>	            {
<span class='line-number'>712</span>	                &lt;text&gt;
<span class='line-number'>713</span>	        combinations.push(new Variants.CombinationItem(&quot;@variantcomb.GetValue(&quot;Ecom:VariantStockCombination.VariantID&quot;)&quot;));
<span class='line-number'>714</span>	        &lt;/text&gt;
<span class='line-number'>715</span>	            }
<span class='line-number'>716</span>	
<span class='line-number'>717</span>	        Variants.SetProductFeedId(&#39;@feedId&#39;);
<span class='line-number'>718</span>	        Variants.SetProductUrl(&#39;/@GetString(&quot;Ecom:Product.VariantLinkGroup.Clean&quot;)&#39;);
<span class='line-number'>719</span>	       
<span class='line-number'>720</span>	  		Dynamo.SetDataInCache((&quot;Variants&quot; + &quot;@productId&quot;), variants);
<span class='line-number'>721</span>	        Dynamo.SetDataInCache((&quot;Combinations&quot; + &quot;@productId&quot;), combinations);
<span class='line-number'>722</span>	  
<span class='line-number'>723</span>	        document.getElementById(&quot;PriceAndActions&quot;).addEventListener(&#39;contentLoaded&#39;, function (e) {
<span class='line-number'>724</span>	            Variants.InitVariants(variants, combinations, &quot;@productId&quot;);
<span class='line-number'>725</span>	        }, false);
<span class='line-number'>726</span>	    });
<span class='line-number'>727</span>	&lt;/script&gt;
<span class='line-number'>728</span>	
<span class='line-number'>729</span>	@functions {
<span class='line-number'>730</span>	    string getIconForFile(string fileName)
<span class='line-number'>731</span>	    {
<span class='line-number'>732</span>	        string ext = Path.GetExtension(fileName);
<span class='line-number'>733</span>	        string icon = &quot;&quot;;
<span class='line-number'>734</span>	        switch (ext.ToLower())
<span class='line-number'>735</span>	        {
<span class='line-number'>736</span>	            case &quot;.pdf&quot;:
<span class='line-number'>737</span>	                icon = &quot;fa-file-pdf-o&quot;;
<span class='line-number'>738</span>	                break;
<span class='line-number'>739</span>	            case &quot;.xls&quot;:
<span class='line-number'>740</span>	            case &quot;.xlsx&quot;:
<span class='line-number'>741</span>	                icon = &quot;fa-file-excel-o&quot;;
<span class='line-number'>742</span>	                break;
<span class='line-number'>743</span>	            case &quot;.ppt&quot;:
<span class='line-number'>744</span>	            case &quot;.pptx&quot;:
<span class='line-number'>745</span>	                icon = &quot;fa-file-powerpoint-o&quot;;
<span class='line-number'>746</span>	                break;
<span class='line-number'>747</span>	            case &quot;.doc&quot;:
<span class='line-number'>748</span>	            case &quot;.docx&quot;:
<span class='line-number'>749</span>	                icon = &quot;fa-file-word-o&quot;;
<span class='line-number'>750</span>	                break;
<span class='line-number'>751</span>	            case &quot;.jpg&quot;:
<span class='line-number'>752</span>	            case &quot;.jpeg&quot;:
<span class='line-number'>753</span>	            case &quot;.png&quot;:
<span class='line-number'>754</span>	            case &quot;.gif&quot;:
<span class='line-number'>755</span>	                icon = &quot;fa-file-image-o&quot;;
<span class='line-number'>756</span>	                break;
<span class='line-number'>757</span>	            default:
<span class='line-number'>758</span>	                icon = &quot;fa-file-o&quot;;
<span class='line-number'>759</span>	                break;
<span class='line-number'>760</span>	        }
<span class='line-number'>761</span>	        return icon;
<span class='line-number'>762</span>	    }
<span class='line-number'>763</span>	}
<span class='line-number'>764</span>	&lt;script&gt;
<span class='line-number'>765</span>	    document.addEventListener(&quot;DOMContentLoaded&quot;, function (event) {
<span class='line-number'>766</span>	        Facets.Init(&quot;productList&quot;, &#39;@productCatalogId&#39;, &#39;@requestQuery&#39;);
<span class='line-number'>767</span>	
<span class='line-number'>768</span>	        Variants.SetProductFeedId(&#39;@productCatalogId&#39;);
<span class='line-number'>769</span>	        Variants.SetViewMode(&quot;productList&quot;);
<span class='line-number'>770</span>	
<span class='line-number'>771</span>	        document.getElementById(&quot;productList&quot;).addEventListener(&#39;contentLoaded&#39;, function (e) {
<span class='line-number'>772</span>	            if (e.srcElement.classList.contains(&quot;js-variants-wrap&quot;)) {
<span class='line-number'>773</span>	                Variants.SetVariantOptionStatesForProductList(e.srcElement);
<span class='line-number'>774</span>	            }
<span class='line-number'>775</span>	        }, false);
<span class='line-number'>776</span>	    });
<span class='line-number'>777</span>	&lt;/script&gt;
<span class='line-number'>778</span>	&lt;!-- Javascript --&gt;
<span class='line-number'>779</span>	&lt;script src=&quot;~/Files/Templates/Designs/Rapido/js/master.min.js&quot;&gt;&lt;/script&gt;
</div>

2018-05-09 16:00:05.1347|ERROR|Templates|Error in razor template
System.Threading.ThreadAbortException: Thread was being aborted.
   at Dynamicweb.Frontend.Content.GetModuleOutput(Paragraph paragraph, PageView pageview)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.LazyInitValue()
   at CompiledRazorTemplates.Dynamic.dfcecfbfcec.Execute()
   at RazorEngine.Templating.TemplateBase.RazorEngine.Templating.ITemplate.Run(ExecuteContext context)
   at RazorEngine.Templating.TemplateService.Run(ITemplate template, DynamicViewBag viewBag)
   at RazorEngine.Templating.TemplateService.Parse(String razorTemplate, Object model, DynamicViewBag viewBag, String cacheName)
   at RazorEngine.Razor.Parse[T](String razorTemplate, T model, String cacheName)
   at Dynamicweb.Rendering.Template.RenderRazorTemplate()
2018-05-09 16:00:31.2885|ERROR|Templates|Error in razor template
System.Threading.ThreadAbortException: Thread was being aborted.
   at Dynamicweb.Frontend.Content.GetModuleOutput(Paragraph paragraph, PageView pageview)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.LazyInitValue()
   at CompiledRazorTemplates.Dynamic.dfcecfbfcec.Execute()
   at RazorEngine.Templating.TemplateBase.RazorEngine.Templating.ITemplate.Run(ExecuteContext context)
   at RazorEngine.Templating.TemplateService.Run(ITemplate template, DynamicViewBag viewBag)
   at RazorEngine.Templating.TemplateService.Parse(String razorTemplate, Object model, DynamicViewBag viewBag, String cacheName)
   at RazorEngine.Razor.Parse[T](String razorTemplate, T model, String cacheName)
   at Dynamicweb.Rendering.Template.RenderRazorTemplate()
2018-05-09 16:31:06.1016|ERROR|Templates|Error in razor template
System.ArgumentException: Parent ID must be greater than 0, but it was 0
   at Dynamicweb.Core.Ensure.That[TException](Boolean condition, String message)
   at Dynamicweb.Content.PageService.GetPagesByParentID(Int32 parentId)
   at CompiledRazorTemplates.Dynamic.acfdceeabefcefea.Execute()
   at RazorEngine.Templating.TemplateBase.RazorEngine.Templating.ITemplate.Run(ExecuteContext context)
   at RazorEngine.Templating.TemplateService.Run(ITemplate template, DynamicViewBag viewBag)
   at RazorEngine.Templating.TemplateService.Parse(String razorTemplate, Object model, DynamicViewBag viewBag, String cacheName)
   at RazorEngine.Razor.Parse[T](String razorTemplate, T model, String cacheName)
   at Dynamicweb.Rendering.Template.RenderRazorTemplate()
2018-05-09 16:31:45.2256|ERROR|Templates|Error in razor template
System.ArgumentException: Parent ID must be greater than 0, but it was 0
   at Dynamicweb.Core.Ensure.That[TException](Boolean condition, String message)
   at Dynamicweb.Content.PageService.GetPagesByParentID(Int32 parentId)
   at CompiledRazorTemplates.Dynamic.acfdceeabefcefea.Execute()
   at RazorEngine.Templating.TemplateBase.RazorEngine.Templating.ITemplate.Run(ExecuteContext context)
   at RazorEngine.Templating.TemplateService.Run(ITemplate template, DynamicViewBag viewBag)
   at RazorEngine.Templating.TemplateService.Parse(String razorTemplate, Object model, DynamicViewBag viewBag, String cacheName)
   at RazorEngine.Razor.Parse[T](String razorTemplate, T model, String cacheName)
   at Dynamicweb.Rendering.Template.RenderRazorTemplate()
2018-05-09 16:35:20.4561|ERROR|Templates|Error compiling razor template
Error compiling template "Designs/Rapido/eCom/Product/Product.cshtml"
Line 1739: 'Dynamicweb.Ecommerce.International.Language.GetLanguages()' is obsolete: 'Use LanguageService.GetLanguages instead.'
Line 1891: 'Dynamicweb.Ecommerce.International.Language.GetLanguages()' is obsolete: 'Use LanguageService.GetLanguages instead.'
Line 2220: The name 'productCatalogId' does not exist in the current context
Line 2224: The name 'requestQuery' does not exist in the current context
Line 2228: The name 'productCatalogId' does not exist in the current context
<hr/>
<div class='template-code'>
<span class='line-number'>  1</span>	@inherits Dynamicweb.Rendering.RazorTemplateBase&lt;Dynamicweb.Rendering.RazorTemplateModel&lt;Dynamicweb.Rendering.Template&gt;&gt;
<span class='line-number'>  2</span>	@using Dynamicweb.Extensibility
<span class='line-number'>  3</span>	@using Dynamicweb.Content
<span class='line-number'>  4</span>	@using System
<span class='line-number'>  5</span>	@using System.IO
<span class='line-number'>  6</span>	@using System.Text.RegularExpressions
<span class='line-number'>  7</span>	@using Dynamicweb.Ecommerce.International;
<span class='line-number'>  8</span>	
<span class='line-number'>  9</span>	@{
<span class='line-number'> 10</span>	    string exportPageId = GetPageIdByNavigationTag(&quot;ProductExportFeed&quot;).ToString();
<span class='line-number'> 11</span>	    int pdfFolderId = GetPageIdByNavigationTag(&quot;PdfFolder&quot;);
<span class='line-number'> 12</span>	    string productId = GetString(&quot;Ecom:Product.ID&quot;);
<span class='line-number'> 13</span>	    string onSale = GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;) == GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;) ? &quot;u-hidden&quot; : &quot;&quot;;
<span class='line-number'> 14</span>	    string hideHelpText = &quot;&quot;;
<span class='line-number'> 15</span>	    string feedId = GetPageIdByNavigationTag(&quot;ProductsFeed&quot;).ToString();
<span class='line-number'> 16</span>	    string feedUrl = &quot;/Default.aspx?ID=&quot; + feedId + &quot;&amp;feedType=productCatalog&quot;;
<span class='line-number'> 17</span>	    int featuresCount = 0;
<span class='line-number'> 18</span>	    int thumbsCount = GetLoop(&quot;Details&quot;).Count;
<span class='line-number'> 19</span>	    int documentsCount = 0;
<span class='line-number'> 20</span>	
<span class='line-number'> 21</span>	    foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;))
<span class='line-number'> 22</span>	    {
<span class='line-number'> 23</span>	        if (!String.IsNullOrEmpty(customField.GetString(&quot;Product.CustomField.Value.Clean&quot;)))
<span class='line-number'> 24</span>	        {
<span class='line-number'> 25</span>	            featuresCount++;
<span class='line-number'> 26</span>	        }
<span class='line-number'> 27</span>	    }
<span class='line-number'> 28</span>	
<span class='line-number'> 29</span>	    foreach (LoopItem customField in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'> 30</span>	    {
<span class='line-number'> 31</span>	        foreach (LoopItem field in customField.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'> 32</span>	        {
<span class='line-number'> 33</span>	            if (!String.IsNullOrEmpty(field.GetString(&quot;Ecom:Product.CategoryField.Value&quot;)))
<span class='line-number'> 34</span>	            {
<span class='line-number'> 35</span>	                featuresCount++;
<span class='line-number'> 36</span>	            }
<span class='line-number'> 37</span>	        }
<span class='line-number'> 38</span>	    }
<span class='line-number'> 39</span>	
<span class='line-number'> 40</span>	    foreach (LoopItem alternativeImage in GetLoop(&quot;Ecom:Product.AlternativeImages&quot;))
<span class='line-number'> 41</span>	    {
<span class='line-number'> 42</span>	        if (!String.IsNullOrEmpty(alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;)))
<span class='line-number'> 43</span>	        {
<span class='line-number'> 44</span>	            thumbsCount++;
<span class='line-number'> 45</span>	        }
<span class='line-number'> 46</span>	    }
<span class='line-number'> 47</span>	
<span class='line-number'> 48</span>	    if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product.ImageSmall.Default.Clean&quot;)))
<span class='line-number'> 49</span>	    {
<span class='line-number'> 50</span>	        thumbsCount++;
<span class='line-number'> 51</span>	    }
<span class='line-number'> 52</span>	
<span class='line-number'> 53</span>	    foreach (LoopItem variantgroup in GetLoop(&quot;VariantGroups&quot;))
<span class='line-number'> 54</span>	    {
<span class='line-number'> 55</span>	        foreach (LoopItem variantoption in variantgroup.GetLoop(&quot;VariantAvailableOptions&quot;))
<span class='line-number'> 56</span>	        {
<span class='line-number'> 57</span>	            if (variantoption.GetBoolean(&quot;Ecom:VariantOption.Selected&quot;))
<span class='line-number'> 58</span>	            {
<span class='line-number'> 59</span>	                hideHelpText = &quot;u-hidden&quot;;
<span class='line-number'> 60</span>	            }
<span class='line-number'> 61</span>	        }
<span class='line-number'> 62</span>	    }
<span class='line-number'> 63</span>	
<span class='line-number'> 64</span>	    string feedPageUrl = &quot;/Default.aspx?ID=&quot; + GetPageIdByNavigationTag(&quot;RelatedProductsFeed&quot;);
<span class='line-number'> 65</span>	    string feedFullUrl = feedPageUrl + &quot;&amp;feedType=productCatalog&amp;PageSize=3&amp;ProdID=&quot; + productId;
<span class='line-number'> 66</span>	    string productContainerId = &quot;Product&quot; + productId;
<span class='line-number'> 67</span>	}
<span class='line-number'> 68</span>	
<span class='line-number'> 69</span>	&lt;!-- Trigger for the image modal --&gt;
<span class='line-number'> 70</span>	&lt;input type=&quot;checkbox&quot; id=&quot;ImageModalTrigger&quot; class=&quot;modal-trigger&quot; /&gt;
<span class='line-number'> 71</span>	
<span class='line-number'> 72</span>	&lt;!-- Image modal --&gt;
<span class='line-number'> 73</span>	&lt;div class=&quot;modal-container&quot;&gt;
<span class='line-number'> 74</span>	    &lt;label for=&quot;ImageModalTrigger&quot; id=&quot;ImageModalOverlay&quot; class=&quot;modal-overlay&quot;&gt;&lt;/label&gt;
<span class='line-number'> 75</span>	    &lt;div class=&quot;modal modal--full&quot; id=&quot;ImageModal&quot;&gt;
<span class='line-number'> 76</span>	        &lt;div class=&quot;modal__body&quot;&gt;
<span class='line-number'> 77</span>	            &lt;img id=&quot;FullImage&quot; class=&quot;modal--full__img&quot; src=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot; /&gt;
<span class='line-number'> 78</span>	        &lt;/div&gt;
<span class='line-number'> 79</span>	    &lt;/div&gt;
<span class='line-number'> 80</span>	&lt;/div&gt;
<span class='line-number'> 81</span>	
<span class='line-number'> 82</span>	&lt;input type=&quot;checkbox&quot; class=&quot;panel-trigger js-remember-state&quot; id=&quot;PIMProductToolsTrigger&quot; checked /&gt;
<span class='line-number'> 83</span>	&lt;div class=&quot;fit-to-panel-size&quot;&gt;
<span class='line-number'> 84</span>	    &lt;div class=&quot;paragraph-container__grid--bleed&quot;&gt;
<span class='line-number'> 85</span>	        @*Please be aware that the below html must be implemented twice (Static HTML and dynamic Script template) to make it update when shifting units *@
<span class='line-number'> 86</span>	
<span class='line-number'> 87</span>	        &lt;div class=&quot;js-ajax-container&quot; id=&quot;@productContainerId&quot; data-template=&quot;productUpdateableContentTemplate&quot; data-json-feed=&quot;@feedUrl&quot; data-preloader=&quot;false&quot; data-init-onload=&quot;false&quot;&gt;
<span class='line-number'> 88</span>	            &lt;div class=&quot;grid product&quot;&gt;
<span class='line-number'> 89</span>	                @* Image block with optional thumbs *@
<span class='line-number'> 90</span>	                @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)))
<span class='line-number'> 91</span>	                {
<span class='line-number'> 92</span>	                    &lt;div class=&quot;grid__col-md-6 grid__col-sm-6&quot;&gt;
<span class='line-number'> 93</span>	                        &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'> 94</span>	                            @if (thumbsCount &gt; 0)
<span class='line-number'> 95</span>	                {
<span class='line-number'> 96</span>	                                &lt;div class=&quot;grid__col-2 u-hidden-xxs product__thumbs dw-mod&quot;&gt;
<span class='line-number'> 97</span>	                                    &lt;div class=&quot;thumb-list&quot;&gt;
<span class='line-number'> 98</span>	                                        &lt;div class=&quot;thumb-list__item thumb-list__item--active dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_@productId&quot; data-full-image=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; data-image-path=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot;&gt;&lt;img src=&quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image=@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'> 99</span>	                                        @foreach (LoopItem alternativeImage in GetLoop(&quot;Ecom:Product.AlternativeImages&quot;))
<span class='line-number'>100</span>	                                        {
<span class='line-number'>101</span>	                                            if (!String.IsNullOrEmpty(alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;)))
<span class='line-number'>102</span>	                                            {
<span class='line-number'>103</span>	                                                string fullImage = alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>104</span>	                                                string image = &quot;/Admin/Public/GetImage.ashx?width=550&amp;amp;height=550&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>105</span>	                                                string thumb = &quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>106</span>	
<span class='line-number'>107</span>	                                                &lt;div class=&quot;thumb-list__item dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_@productId&quot; data-full-image=&quot;@fullImage&quot; data-image-path=&quot;@image&quot;&gt;&lt;img src=&quot;@thumb&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'>108</span>	                                            }
<span class='line-number'>109</span>	                                        }
<span class='line-number'>110</span>	
<span class='line-number'>111</span>	                                        @foreach (LoopItem detail in GetLoop(&quot;Details&quot;))
<span class='line-number'>112</span>	                                        {
<span class='line-number'>113</span>	                                            string fullImage = detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>114</span>	                                            string image = &quot;/Admin/Public/GetImage.ashx?width=550&amp;amp;height=550&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>115</span>	                                            string thumb = &quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>116</span>	
<span class='line-number'>117</span>	                                            &lt;div class=&quot;thumb-list__item dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_@productId&quot; data-full-image=&quot;@fullImage&quot; data-image-path=&quot;@image&quot;&gt;&lt;img src=&quot;@thumb&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'>118</span>	                                        }
<span class='line-number'>119</span>	                                    &lt;/div&gt;
<span class='line-number'>120</span>	                                &lt;/div&gt;
<span class='line-number'>121</span>	                            }
<span class='line-number'>122</span>	                            &lt;div class=&quot;grid__col-auto&quot;&gt;
<span class='line-number'>123</span>	                                @if (GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;) != GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;))
<span class='line-number'>124</span>	                                {
<span class='line-number'>125</span>	                                    &lt;div class=&quot;sticker u-margin-left dw-mod&quot;&gt;@Translate(&quot;Sale!&quot;)&lt;/div&gt;
<span class='line-number'>126</span>	                                }
<span class='line-number'>127</span>	                                &lt;label for=&quot;ImageModalTrigger&quot;&gt;
<span class='line-number'>128</span>	                                    &lt;img class=&quot;thumb-image-view product__image dw-mod&quot; onclick=&quot;document.getElementById(&#39;FullImage&#39;).src = this.getAttribute(&#39;data-full-image&#39;)&quot; id=&quot;Image_@productId&quot; src=&quot;/Admin/Public/GetImage.ashx?crop=5&amp;height=550&amp;width=550&amp;Compression=75&amp;DoNotUpscale=true&amp;image=@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; data-full-image=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot; /&gt;
<span class='line-number'>129</span>	                                &lt;/label&gt;
<span class='line-number'>130</span>	                            &lt;/div&gt;
<span class='line-number'>131</span>	                        &lt;/div&gt;
<span class='line-number'>132</span>	                    &lt;/div&gt;
<span class='line-number'>133</span>	                }
<span class='line-number'>134</span>	
<span class='line-number'>135</span>	                @* Primary product informations *@
<span class='line-number'>136</span>	                &lt;div class=&quot;grid__col-md-5&quot;&gt;
<span class='line-number'>137</span>	                    &lt;div class=&quot;grid__cell&quot;&gt;
<span class='line-number'>138</span>	                        &lt;div class=&quot;product__title dw-mod&quot;&gt;
<span class='line-number'>139</span>	                            &lt;h1 class=&quot;u-no-margin&quot;&gt;@GetString(&quot;Ecom:Product.Name&quot;) @GetString(&quot;Ecom:Product.SelectedVariantComboName&quot;)&lt;/h1&gt;
<span class='line-number'>140</span>	                            &lt;div class=&quot;item-number&quot;&gt;@GetString(&quot;Ecom:Product.Number&quot;)&lt;/div&gt;
<span class='line-number'>141</span>	                        &lt;/div&gt;
<span class='line-number'>142</span>	                        &lt;div&gt;
<span class='line-number'>143</span>	                            @* Short description *@
<span class='line-number'>144</span>	                            &lt;div class=&quot;introduction-text&quot;&gt;
<span class='line-number'>145</span>	                                @GetString(&quot;Ecom:Product.ShortDescription&quot;)
<span class='line-number'>146</span>	                            &lt;/div&gt;
<span class='line-number'>147</span>	
<span class='line-number'>148</span>	                            @* Variants *@
<span class='line-number'>149</span>	                            @if (GetLoop(&quot;VariantGroups&quot;).Count &gt; 0 &amp;&amp; GetBoolean(&quot;Ecom:Product.ShowInProductList&quot;))
<span class='line-number'>150</span>	                            {
<span class='line-number'>151</span>	                                &lt;div&gt;
<span class='line-number'>152</span>	                                    &lt;div id=&quot;Variants&quot; data-template=&quot;VariantGroup&quot; data-product-id=&quot;@productId&quot;&gt;&lt;/div&gt;
<span class='line-number'>153</span>	                                    &lt;small id=&quot;helpText_@productId&quot; class=&quot;help-text @hideHelpText&quot;&gt;@Translate(&quot;Please select variant!&quot;)&lt;/small&gt;
<span class='line-number'>154</span>	                                &lt;/div&gt;
<span class='line-number'>155</span>	                            }
<span class='line-number'>156</span>	
<span class='line-number'>157</span>	                            @* BOMProducts *@
<span class='line-number'>158</span>	                            @if (GetLoop(&quot;BOMProducts&quot;).Count &gt; 0)
<span class='line-number'>159</span>	                            {
<span class='line-number'>160</span>	                                &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Including products&quot;)&lt;/h2&gt;
<span class='line-number'>161</span>	                                foreach (LoopItem BOMProductItem in GetLoop(&quot;BOMProducts&quot;))
<span class='line-number'>162</span>	                                {
<span class='line-number'>163</span>	                                    string link = &quot;/&quot; + BOMProductItem.GetString(&quot;Ecom:Product.LinkGroup.Clean&quot;) + (!String.IsNullOrEmpty(BOMProductItem.GetString(&quot;Ecom:Product.VariantID&quot;)) ? &quot;&amp;VariantID=&quot; + BOMProductItem.GetString(&quot;Ecom:Product.VariantID&quot;) : &quot;&quot;);
<span class='line-number'>164</span>	                                    &lt;div class=&quot;grid__col--border grid&quot;&gt;
<span class='line-number'>165</span>	                                        &lt;div class=&quot;grid__cell grid__cell--align-middle-left&quot;&gt;
<span class='line-number'>166</span>	                                            &lt;a href=&quot;@link&quot; class=&quot;u-pull--left u-margin-right&quot;&gt;
<span class='line-number'>167</span>	                                                &lt;img src=&quot;/Admin/Public/GetImage.ashx?width=50&amp;image=@BOMProductItem.GetString(&quot;Ecom:Product.ImageSmall.Default.Clean&quot;)&amp;Compression=99&quot; /&gt;
<span class='line-number'>168</span>	                                            &lt;/a&gt;
<span class='line-number'>169</span>	                                            &lt;a href=&quot;@link&quot;&gt;@BOMProductItem.GetString(&quot;Ecom:Product.Name&quot;)&lt;/a&gt;
<span class='line-number'>170</span>	                                        &lt;/div&gt;
<span class='line-number'>171</span>	                                    &lt;/div&gt;
<span class='line-number'>172</span>	                                }
<span class='line-number'>173</span>	                            }
<span class='line-number'>174</span>	                        &lt;/div&gt;
<span class='line-number'>175</span>	
<span class='line-number'>176</span>	                        &lt;input type=&quot;hidden&quot; id=&quot;CartButton_@GetString(&quot;Ecom:Product.ID&quot;)&quot; name=&quot;submit&quot; /&gt;
<span class='line-number'>177</span>	                        &lt;input type=&quot;hidden&quot; value=&quot;@GetString(&quot;Ecom:Product.VariantID.Extented&quot;)&quot; name=&quot;Variant&quot; id=&quot;Variant_@GetString(&quot;Ecom:Product.ID&quot;)&quot; /&gt;
<span class='line-number'>178</span>	                    &lt;/div&gt;
<span class='line-number'>179</span>	                &lt;/div&gt;
<span class='line-number'>180</span>	
<span class='line-number'>181</span>	                &lt;div class=&quot;grid__col-3&quot;&gt;&lt;/div&gt;
<span class='line-number'>182</span>	            &lt;/div&gt;
<span class='line-number'>183</span>	        &lt;/div&gt;
<span class='line-number'>184</span>	
<span class='line-number'>185</span>	        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>186</span>	            @* Long description *@
<span class='line-number'>187</span>	            @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product.LongDescription&quot;)))
<span class='line-number'>188</span>	            {
<span class='line-number'>189</span>	                &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>190</span>	                    &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Description&quot;)&lt;/h2&gt;
<span class='line-number'>191</span>	
<span class='line-number'>192</span>	                    @GetString(&quot;Ecom:Product.LongDescription&quot;)
<span class='line-number'>193</span>	                &lt;/div&gt;
<span class='line-number'>194</span>	            }
<span class='line-number'>195</span>	
<span class='line-number'>196</span>	            @* Features lists *@
<span class='line-number'>197</span>	            @if (featuresCount &gt; 0 &amp;&amp; featuresCount &lt; 10)
<span class='line-number'>198</span>	            {
<span class='line-number'>199</span>	                &lt;div class=&quot;grid__col-12 grid__col--bleed-y&quot;&gt;
<span class='line-number'>200</span>	                    &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Product information&quot;)&lt;/h2&gt;
<span class='line-number'>201</span>	                    &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>202</span>	                        @if (GetLoop(&quot;CustomFieldValues&quot;).Count &gt; 0)
<span class='line-number'>203</span>	                        {
<span class='line-number'>204</span>	                            &lt;div class=&quot;grid__col-md-6 grid__col-sm-6&quot;&gt;
<span class='line-number'>205</span>	                                &lt;table class=&quot;table table--clean table--compact u-margin-bottom&quot;&gt;
<span class='line-number'>206</span>	                                    @foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;))
<span class='line-number'>207</span>	                                    {
<span class='line-number'>208</span>	                                        string fieldValue = customField.GetString(&quot;Product.CustomField.Value&quot;);
<span class='line-number'>209</span>	
<span class='line-number'>210</span>	                                        if (customField.GetLoop(&quot;Product.CustomField.Options&quot;).Count &gt; 0)
<span class='line-number'>211</span>	                                        {
<span class='line-number'>212</span>	                                            fieldValue = &quot;&quot;;
<span class='line-number'>213</span>	                                            int count = 0;
<span class='line-number'>214</span>	
<span class='line-number'>215</span>	                                            foreach (LoopItem customFieldOptions in customField.GetLoop(&quot;Product.CustomField.Options&quot;))
<span class='line-number'>216</span>	                                            {
<span class='line-number'>217</span>	                                                if (customFieldOptions.GetBoolean(&quot;Product.CustomField.Option.IsSelected&quot;))
<span class='line-number'>218</span>	                                                {
<span class='line-number'>219</span>	                                                    if (count != 0)
<span class='line-number'>220</span>	                                                    {
<span class='line-number'>221</span>	                                                        fieldValue += &quot;, &quot;;
<span class='line-number'>222</span>	                                                    }
<span class='line-number'>223</span>	
<span class='line-number'>224</span>	                                                    fieldValue += customFieldOptions.GetString(&quot;Product.CustomField.Option.Name&quot;);
<span class='line-number'>225</span>	                                                    count++;
<span class='line-number'>226</span>	                                                }
<span class='line-number'>227</span>	                                            }
<span class='line-number'>228</span>	                                        }
<span class='line-number'>229</span>	
<span class='line-number'>230</span>	                                        if (fieldValue == &quot;False&quot;)
<span class='line-number'>231</span>	                                        {
<span class='line-number'>232</span>	                                            fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>233</span>	                                        }
<span class='line-number'>234</span>	
<span class='line-number'>235</span>	                                        if (fieldValue == &quot;True&quot;)
<span class='line-number'>236</span>	                                        {
<span class='line-number'>237</span>	                                            fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>238</span>	                                        }
<span class='line-number'>239</span>	
<span class='line-number'>240</span>	                                        if (!String.IsNullOrEmpty(customField.GetString(&quot;Product.CustomField.Name&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>241</span>	                                        {
<span class='line-number'>242</span>	                                            &lt;tr&gt;
<span class='line-number'>243</span>	                                                &lt;td width=&quot;160&quot;&gt;@customField.GetString(&quot;Product.CustomField.Name&quot;):&lt;/td&gt;
<span class='line-number'>244</span>	                                                @if (!String.IsNullOrEmpty(customField.GetString(&quot;Document.FullPath&quot;)))
<span class='line-number'>245</span>	                                                {
<span class='line-number'>246</span>	                                                    &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@customField.GetString(&quot;Document.FullPath&quot;)&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;i class=&quot;fa fa-arrow-circle-down&quot;&gt;&lt;/i&gt; @fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>247</span>	                                                }
<span class='line-number'>248</span>	                                                else
<span class='line-number'>249</span>	                                                {
<span class='line-number'>250</span>	                                                    &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>251</span>	                                                }
<span class='line-number'>252</span>	                                            &lt;/tr&gt;
<span class='line-number'>253</span>	                                        }
<span class='line-number'>254</span>	                                    }
<span class='line-number'>255</span>	                                &lt;/table&gt;
<span class='line-number'>256</span>	                            &lt;/div&gt;
<span class='line-number'>257</span>	                            &lt;div class=&quot;grid__col-md-6 grid__col-sm-6&quot;&gt;&lt;/div&gt;
<span class='line-number'>258</span>	                        }
<span class='line-number'>259</span>	
<span class='line-number'>260</span>	                        @if (GetLoop(&quot;ProductCategories&quot;).Count &gt; 0)
<span class='line-number'>261</span>	                        {
<span class='line-number'>262</span>	                            &lt;div class=&quot;grid__col-md-6 grid__col-sm-6&quot;&gt;
<span class='line-number'>263</span>	                                &lt;table class=&quot;table table--clean table--compact u-margin-bottom&quot;&gt;
<span class='line-number'>264</span>	                                    @foreach (LoopItem categoryGroup in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'>265</span>	                                    {
<span class='line-number'>266</span>	                                        int fieldsCount = 0;
<span class='line-number'>267</span>	                                        foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>268</span>	                                        {
<span class='line-number'>269</span>	                                            if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;)))
<span class='line-number'>270</span>	                                            {
<span class='line-number'>271</span>	                                                fieldsCount++;
<span class='line-number'>272</span>	                                            }
<span class='line-number'>273</span>	                                        }
<span class='line-number'>274</span>	
<span class='line-number'>275</span>	                                        if (fieldsCount &gt; 0)
<span class='line-number'>276</span>	                                        {
<span class='line-number'>277</span>	                                            &lt;tr&gt;
<span class='line-number'>278</span>	                                                &lt;td colspan=&quot;2&quot; class=&quot;u-ta-left table__section-header dw-mod&quot;&gt;@categoryGroup.GetString(&quot;Ecom:Product.Category.Name&quot;)&lt;/td&gt;
<span class='line-number'>279</span>	                                            &lt;/tr&gt;
<span class='line-number'>280</span>	
<span class='line-number'>281</span>	                                            foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>282</span>	                                            {
<span class='line-number'>283</span>	                                                string fieldValue = categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;);
<span class='line-number'>284</span>	
<span class='line-number'>285</span>	                                                if (fieldValue == &quot;False&quot;)
<span class='line-number'>286</span>	                                                {
<span class='line-number'>287</span>	                                                    fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>288</span>	                                                }
<span class='line-number'>289</span>	
<span class='line-number'>290</span>	                                                if (fieldValue == &quot;True&quot;)
<span class='line-number'>291</span>	                                                {
<span class='line-number'>292</span>	                                                    fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>293</span>	                                                }
<span class='line-number'>294</span>	
<span class='line-number'>295</span>	                                                if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>296</span>	                                                {
<span class='line-number'>297</span>	                                                    &lt;tr&gt;
<span class='line-number'>298</span>	                                                        &lt;td width=&quot;160&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;):&lt;/td&gt;
<span class='line-number'>299</span>	                                                        @if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;9&quot;)
<span class='line-number'>300</span>	                                                        {
<span class='line-number'>301</span>	                                                            &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@fieldValue&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;i class=&quot;fa fa-arrow-circle-down&quot;&gt;&lt;/i&gt; @fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>302</span>	                                                        }
<span class='line-number'>303</span>	                                                        else
<span class='line-number'>304</span>	                                                        {
<span class='line-number'>305</span>	                                                            &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>306</span>	                                                        }
<span class='line-number'>307</span>	                                                    &lt;/tr&gt;
<span class='line-number'>308</span>	                                                }
<span class='line-number'>309</span>	                                            }
<span class='line-number'>310</span>	                                        }
<span class='line-number'>311</span>	                                    }
<span class='line-number'>312</span>	                                &lt;/table&gt;
<span class='line-number'>313</span>	                            &lt;/div&gt;
<span class='line-number'>314</span>	                            &lt;div class=&quot;grid__col-md-6 grid__col-sm-6&quot;&gt;&lt;/div&gt;
<span class='line-number'>315</span>	                        }
<span class='line-number'>316</span>	                    &lt;/div&gt;
<span class='line-number'>317</span>	                &lt;/div&gt;
<span class='line-number'>318</span>	            }
<span class='line-number'>319</span>	
<span class='line-number'>320</span>	            @if (featuresCount &gt;= 10)
<span class='line-number'>321</span>	            {
<span class='line-number'>322</span>	                &lt;div class=&quot;grid__col-12 grid__col--bleed-y&quot;&gt;
<span class='line-number'>323</span>	                    &lt;input type=&quot;checkbox&quot; id=&quot;expandable-text-trigger&quot; class=&quot;expandable-text-trigger&quot; /&gt;
<span class='line-number'>324</span>	                    &lt;div class=&quot;expandable-text-container&quot;&gt;
<span class='line-number'>325</span>	                        &lt;div class=&quot;expandable-text-container__content dw-mod&quot;&gt;
<span class='line-number'>326</span>	                            &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Product information&quot;)&lt;/h2&gt;
<span class='line-number'>327</span>	                            &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>328</span>	                                @if (GetLoop(&quot;CustomFieldValues&quot;).Count &gt; 0)
<span class='line-number'>329</span>	                                {
<span class='line-number'>330</span>	                                    &lt;div class=&quot;grid__col-md-5 grid__col-sm-6&quot;&gt;
<span class='line-number'>331</span>	                                        &lt;table class=&quot;table table--clean table--compact u-margin-bottom&quot;&gt;
<span class='line-number'>332</span>	                                            @foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;))
<span class='line-number'>333</span>	                                            {
<span class='line-number'>334</span>	                                                string fieldValue = customField.GetString(&quot;Product.CustomField.Value.Clean&quot;);
<span class='line-number'>335</span>	
<span class='line-number'>336</span>	                                                if (customField.GetLoop(&quot;Product.CustomField.Options&quot;).Count &gt; 0)
<span class='line-number'>337</span>	                                                {
<span class='line-number'>338</span>	                                                    fieldValue = &quot;&quot;;
<span class='line-number'>339</span>	                                                    int count = 0;
<span class='line-number'>340</span>	
<span class='line-number'>341</span>	                                                    foreach (LoopItem customFieldOptions in customField.GetLoop(&quot;Product.CustomField.Options&quot;))
<span class='line-number'>342</span>	                                                    {
<span class='line-number'>343</span>	                                                        if (customFieldOptions.GetBoolean(&quot;Product.CustomField.Option.IsSelected&quot;))
<span class='line-number'>344</span>	                                                        {
<span class='line-number'>345</span>	                                                            if (count != 0)
<span class='line-number'>346</span>	                                                            {
<span class='line-number'>347</span>	                                                                fieldValue += &quot;, &quot;;
<span class='line-number'>348</span>	                                                            }
<span class='line-number'>349</span>	
<span class='line-number'>350</span>	                                                            fieldValue += customFieldOptions.GetString(&quot;Product.CustomField.Option.Name&quot;);
<span class='line-number'>351</span>	                                                            count++;
<span class='line-number'>352</span>	                                                        }
<span class='line-number'>353</span>	                                                    }
<span class='line-number'>354</span>	                                                }
<span class='line-number'>355</span>	
<span class='line-number'>356</span>	                                                if (fieldValue == &quot;False&quot;)
<span class='line-number'>357</span>	                                                {
<span class='line-number'>358</span>	                                                    fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>359</span>	                                                }
<span class='line-number'>360</span>	
<span class='line-number'>361</span>	                                                if (fieldValue == &quot;True&quot;)
<span class='line-number'>362</span>	                                                {
<span class='line-number'>363</span>	                                                    fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>364</span>	                                                }
<span class='line-number'>365</span>	
<span class='line-number'>366</span>	                                                if (!String.IsNullOrEmpty(customField.GetString(&quot;Product.CustomField.Name&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>367</span>	                                                {
<span class='line-number'>368</span>	                                                    &lt;tr&gt;
<span class='line-number'>369</span>	                                                        &lt;td width=&quot;160&quot;&gt;@customField.GetString(&quot;Product.CustomField.Name&quot;):&lt;/td&gt;
<span class='line-number'>370</span>	                                                        @if (!String.IsNullOrEmpty(customField.GetString(&quot;Document.FullPath&quot;)))
<span class='line-number'>371</span>	                                                        {
<span class='line-number'>372</span>	                                                            documentsCount++;
<span class='line-number'>373</span>	                                                            &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@customField.GetString(&quot;Document.FullPath&quot;)&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;&lt;i class=&quot;fa fa-arrow-circle-down&quot;&gt;&lt;/i&gt; @fieldValue&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>374</span>	                                                        }
<span class='line-number'>375</span>	                                                        else
<span class='line-number'>376</span>	                                                        {
<span class='line-number'>377</span>	                                                            &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>378</span>	                                                        }
<span class='line-number'>379</span>	                                                    &lt;/tr&gt;
<span class='line-number'>380</span>	                                                }
<span class='line-number'>381</span>	                                            }
<span class='line-number'>382</span>	                                        &lt;/table&gt;
<span class='line-number'>383</span>	                                    &lt;/div&gt;
<span class='line-number'>384</span>	                                    &lt;div class=&quot;grid__col-md-5 grid__col-sm-6&quot;&gt;&lt;/div&gt;
<span class='line-number'>385</span>	                                }
<span class='line-number'>386</span>	
<span class='line-number'>387</span>	                                @if (GetLoop(&quot;ProductCategories&quot;).Count &gt; 0)
<span class='line-number'>388</span>	                                {
<span class='line-number'>389</span>	                                    &lt;div class=&quot;grid__col-md-5 grid__col-sm-6&quot;&gt;
<span class='line-number'>390</span>	                                        &lt;table class=&quot;table table--clean table--compact u-margin-bottom&quot;&gt;
<span class='line-number'>391</span>	                                            @foreach (LoopItem categoryGroup in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'>392</span>	                                            {
<span class='line-number'>393</span>	                                                int fieldsCount = 0;
<span class='line-number'>394</span>	                                                foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>395</span>	                                                {
<span class='line-number'>396</span>	                                                    if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;)))
<span class='line-number'>397</span>	                                                    {
<span class='line-number'>398</span>	                                                        fieldsCount++;
<span class='line-number'>399</span>	                                                    }
<span class='line-number'>400</span>	                                                }
<span class='line-number'>401</span>	
<span class='line-number'>402</span>	                                                if (fieldsCount &gt; 0)
<span class='line-number'>403</span>	                                                {
<span class='line-number'>404</span>	                                                    &lt;tr&gt;
<span class='line-number'>405</span>	                                                        &lt;td colspan=&quot;2&quot; class=&quot;u-ta-left table__section-header dw-mod&quot;&gt;@categoryGroup.GetString(&quot;Ecom:Product.Category.Name&quot;)&lt;/td&gt;
<span class='line-number'>406</span>	                                                    &lt;/tr&gt;
<span class='line-number'>407</span>	
<span class='line-number'>408</span>	                                                    foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>409</span>	                                                    {
<span class='line-number'>410</span>	                                                        string fieldValue = categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;);
<span class='line-number'>411</span>	
<span class='line-number'>412</span>	                                                        if (fieldValue == &quot;False&quot;)
<span class='line-number'>413</span>	                                                        {
<span class='line-number'>414</span>	                                                            fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>415</span>	                                                        }
<span class='line-number'>416</span>	
<span class='line-number'>417</span>	                                                        if (fieldValue == &quot;True&quot;)
<span class='line-number'>418</span>	                                                        {
<span class='line-number'>419</span>	                                                            fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>420</span>	                                                        }
<span class='line-number'>421</span>	
<span class='line-number'>422</span>	                                                        if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>423</span>	                                                        {
<span class='line-number'>424</span>	                                                            &lt;tr&gt;
<span class='line-number'>425</span>	                                                                &lt;td width=&quot;160&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;):&lt;/td&gt;
<span class='line-number'>426</span>	                                                                @if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;9&quot;)
<span class='line-number'>427</span>	                                                                {
<span class='line-number'>428</span>	                                                                    documentsCount++;
<span class='line-number'>429</span>	                                                                    &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@fieldValue&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;i class=&quot;fa fa-arrow-circle-down&quot;&gt;&lt;/i&gt; @fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>430</span>	                                                                }
<span class='line-number'>431</span>	                                                                else
<span class='line-number'>432</span>	                                                                {
<span class='line-number'>433</span>	                                                                    &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>434</span>	                                                                }
<span class='line-number'>435</span>	                                                            &lt;/tr&gt;
<span class='line-number'>436</span>	                                                        }
<span class='line-number'>437</span>	                                                    }
<span class='line-number'>438</span>	                                                }
<span class='line-number'>439</span>	                                            }
<span class='line-number'>440</span>	                                        &lt;/table&gt;
<span class='line-number'>441</span>	                                    &lt;/div&gt;
<span class='line-number'>442</span>	                                    &lt;div class=&quot;grid__col-md-5 grid__col-sm-6&quot;&gt;&lt;/div&gt;
<span class='line-number'>443</span>	                                }
<span class='line-number'>444</span>	                            &lt;/div&gt;
<span class='line-number'>445</span>	                        &lt;/div&gt;
<span class='line-number'>446</span>	
<span class='line-number'>447</span>	                        &lt;div class=&quot;u-ta-center&quot;&gt;
<span class='line-number'>448</span>	                            &lt;label for=&quot;expandable-text-trigger&quot; class=&quot;btn btn--secondary expandable-text-container__btn more dw-mod&quot;&gt;@Translate(&quot;Show more&quot;)&lt;/label&gt;
<span class='line-number'>449</span>	                            &lt;label for=&quot;expandable-text-trigger&quot; class=&quot;btn btn--secondary expandable-text-container__btn less dw-mod&quot;&gt;@Translate(&quot;Show less&quot;)&lt;/label&gt;
<span class='line-number'>450</span>	                        &lt;/div&gt;
<span class='line-number'>451</span>	                    &lt;/div&gt;
<span class='line-number'>452</span>	                &lt;/div&gt;
<span class='line-number'>453</span>	            }
<span class='line-number'>454</span>	
<span class='line-number'>455</span>	            @* Related products *@
<span class='line-number'>456</span>	            &lt;div class=&quot;grid js-ajax-container&quot; id=&quot;ProductList&quot; data-template=&quot;ProductContainer&quot; data-pre-render-template=&quot;ProductPreRenderContainer&quot; data-json-feed=&quot;@feedFullUrl&quot; data-preloader=&quot;overlay&quot;&gt;&lt;/div&gt;
<span class='line-number'>457</span>	        &lt;/div&gt;
<span class='line-number'>458</span>	    &lt;/div&gt;
<span class='line-number'>459</span>	&lt;/div&gt;
<span class='line-number'>460</span>	&lt;aside class=&quot;panel panel--right dw-mod&quot;&gt;
<span class='line-number'>461</span>	    &lt;label for=&quot;PIMProductToolsTrigger&quot; class=&quot;panel-trigger-btn grid--justify-center dw-mod&quot;&gt;&lt;/label&gt;
<span class='line-number'>462</span>	
<span class='line-number'>463</span>	    &lt;div class=&quot;panel__content dw-mod&quot;&gt;
<span class='line-number'>464</span>	        &lt;form action=&quot;/Default.aspx?ID=@exportPageId&amp;ProductID=@System.Web.HttpContext.Current.Request.QueryString.Get(&quot;ProductID&quot;)&quot; method=&quot;post&quot;&gt;
<span class='line-number'>465</span>	            &lt;div class=&quot;panel__content__body panel__content__body--auto-height-400px dw-mod&quot;&gt;
<span class='line-number'>466</span>	                &lt;h6 class=&quot;panel__header dw-mod&quot;&gt;@Translate(&quot;Images&quot;) (@(thumbsCount))&lt;/h6&gt;
<span class='line-number'>467</span>	                @if (thumbsCount &gt; 0)
<span class='line-number'>468</span>	                {
<span class='line-number'>469</span>	                    &lt;ul class=&quot;list list--clean dw-mod&quot;&gt;
<span class='line-number'>470</span>	                        &lt;li&gt;
<span class='line-number'>471</span>	                            &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>472</span>	                                &lt;div class=&quot;grid__col-xs-1 grid--align-self-center&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;Image_@GetString(&quot;Ecom:Product.ImageSmall.Default.Clean&quot;)&quot; class=&quot;u-no-margin&quot; /&gt;&lt;/div&gt;
<span class='line-number'>473</span>	                                &lt;div class=&quot;grid__col-xs-3 grid__col--bleed-y&quot;&gt;&lt;img src=&quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image=@GetString(&quot;Ecom:Product.ImageSmall.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot; class=&quot;flex-img&quot;&gt;&lt;/div&gt;
<span class='line-number'>474</span>	                                &lt;div class=&quot;grid__col-xs-8 grid--align-self-center grid__col--bleed-y&quot;&gt;@GetString(&quot;Ecom:Product.Name&quot;)&lt;/div&gt;
<span class='line-number'>475</span>	                            &lt;/div&gt;
<span class='line-number'>476</span>	                        &lt;/li&gt;
<span class='line-number'>477</span>	
<span class='line-number'>478</span>	                        @foreach (LoopItem alternativeImage in GetLoop(&quot;Ecom:Product.AlternativeImages&quot;))
<span class='line-number'>479</span>	                        {
<span class='line-number'>480</span>	                            if (!String.IsNullOrEmpty(alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;)))
<span class='line-number'>481</span>	                            {
<span class='line-number'>482</span>	                                string image = alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>483</span>	                                string thumb = &quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image=&quot; + image;
<span class='line-number'>484</span>	
<span class='line-number'>485</span>	                                &lt;li&gt;
<span class='line-number'>486</span>	                                    &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>487</span>	                                        &lt;div class=&quot;grid__col-xs-1 grid--align-self-center&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;Image_@image&quot; class=&quot;u-no-margin&quot; /&gt;&lt;/div&gt;
<span class='line-number'>488</span>	                                        &lt;div class=&quot;grid__col-xs-3 grid__col--bleed-y&quot;&gt;&lt;img src=&quot;@thumb&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'>489</span>	                                        &lt;div class=&quot;grid__col-xs-8 grid--align-self-center grid__col--bleed-y&quot;&gt;&lt;span class=&quot;u-truncate-text u-w170px&quot;&gt;@GetString(&quot;Ecom:Product.Name&quot;)&lt;/span&gt;&lt;/div&gt;
<span class='line-number'>490</span>	                                    &lt;/div&gt;
<span class='line-number'>491</span>	                                &lt;/li&gt;
<span class='line-number'>492</span>	                            }
<span class='line-number'>493</span>	                        }
<span class='line-number'>494</span>	
<span class='line-number'>495</span>	                        @foreach (LoopItem detail in GetLoop(&quot;Details&quot;))
<span class='line-number'>496</span>	                        {
<span class='line-number'>497</span>	                            string image = detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>498</span>	                            string thumb = &quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image=&quot; + image;
<span class='line-number'>499</span>	                            &lt;li&gt;
<span class='line-number'>500</span>	                                &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>501</span>	                                    &lt;div class=&quot;grid__col-xs-1 grid--align-self-center&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;Image_@image&quot; class=&quot;u-no-margin&quot; /&gt;&lt;/div&gt;
<span class='line-number'>502</span>	                                    &lt;div class=&quot;grid__col-xs-3 grid__col--bleed-y&quot;&gt;&lt;img src=&quot;@thumb&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot; class=&quot;flex-img&quot;&gt;&lt;/div&gt;
<span class='line-number'>503</span>	                                    &lt;div class=&quot;grid__col-xs-8 grid--align-self-center grid__col--bleed-y&quot;&gt;&lt;span class=&quot;u-truncate-text u-w170px&quot;&gt;@GetString(&quot;Ecom:Product.Name&quot;)&lt;/span&gt;&lt;/div&gt;
<span class='line-number'>504</span>	                                &lt;/div&gt;
<span class='line-number'>505</span>	                            &lt;/li&gt;
<span class='line-number'>506</span>	                        }
<span class='line-number'>507</span>	                    &lt;/ul&gt;
<span class='line-number'>508</span>	                }
<span class='line-number'>509</span>	
<span class='line-number'>510</span>	                @if (documentsCount &gt; 0)
<span class='line-number'>511</span>	                {
<span class='line-number'>512</span>	                    &lt;h6 class=&quot;panel__header panel__header--line dw-mod&quot;&gt;@Translate(&quot;Documents&quot;) (@documentsCount)&lt;/h6&gt;
<span class='line-number'>513</span>	
<span class='line-number'>514</span>	                        &lt;ul class=&quot;list list--clean dw-mod&quot;&gt;
<span class='line-number'>515</span>	                            @foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;))
<span class='line-number'>516</span>	                            {
<span class='line-number'>517</span>	                                if (!String.IsNullOrEmpty(customField.GetString(&quot;Document.FullPath&quot;)))
<span class='line-number'>518</span>	                                {
<span class='line-number'>519</span>	                                    &lt;li&gt;
<span class='line-number'>520</span>	                                        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>521</span>	                                            &lt;div class=&quot;grid__col-xs-1 grid__col--bleed-y&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;Document_@customField.GetString(&quot;Document.FullPath&quot;)&quot; class=&quot;u-no-margin&quot; /&gt;&lt;/div&gt;
<span class='line-number'>522</span>	                                            &lt;div class=&quot;grid__col-xs-11 grid__col--bleed-y&quot;&gt;&lt;span class=&quot;u-truncate-text u-max-w220px&quot;&gt;@Path.GetFileName(customField.GetString(&quot;Document.FullPath&quot;))&lt;/span&gt;&lt;/div&gt;
<span class='line-number'>523</span>	                                        &lt;/div&gt;
<span class='line-number'>524</span>	                                    &lt;/li&gt;
<span class='line-number'>525</span>	                                }
<span class='line-number'>526</span>	                            }
<span class='line-number'>527</span>	
<span class='line-number'>528</span>	                            @foreach (LoopItem categoryGroup in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'>529</span>	                            {
<span class='line-number'>530</span>	                                foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>531</span>	                                {
<span class='line-number'>532</span>	                                    string fieldValue = categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;);
<span class='line-number'>533</span>	
<span class='line-number'>534</span>	                                    if (!String.IsNullOrEmpty(fieldValue))
<span class='line-number'>535</span>	                                    {
<span class='line-number'>536</span>	                                        if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;9&quot;)
<span class='line-number'>537</span>	                                        {
<span class='line-number'>538</span>	                                            &lt;li&gt;
<span class='line-number'>539</span>	                                                &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>540</span>	                                                    &lt;div class=&quot;grid__col-xs-1 grid__col--bleed-y&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;Document_@fieldValue&quot; class=&quot;u-no-margin&quot; /&gt;&lt;/div&gt;
<span class='line-number'>541</span>	                                                    &lt;div class=&quot;grid__col-xs-11 grid__col--bleed-y&quot;&gt;&lt;span class=&quot;u-truncate-text u-max-w220px&quot;&gt;@Path.GetFileName(fieldValue)&lt;/span&gt;&lt;/div&gt;
<span class='line-number'>542</span>	                                                &lt;/div&gt;
<span class='line-number'>543</span>	                                            &lt;/li&gt;
<span class='line-number'>544</span>	                                        }
<span class='line-number'>545</span>	                                    }
<span class='line-number'>546</span>	                                }
<span class='line-number'>547</span>	                            }
<span class='line-number'>548</span>	                        &lt;/ul&gt;
<span class='line-number'>549</span>	                }
<span class='line-number'>550</span>	            &lt;/div&gt;
<span class='line-number'>551</span>	
<span class='line-number'>552</span>	            &lt;div class=&quot;panel__content__footer panel__content__footer--400px dw-mod&quot;&gt;
<span class='line-number'>553</span>	                &lt;input id=&quot;ID&quot; name=&quot;ID&quot; type=&quot;hidden&quot; value=&quot;532&quot; /&gt;
<span class='line-number'>554</span>	                &lt;input id=&quot;download&quot; name=&quot;download&quot; type=&quot;hidden&quot; value=&quot;true&quot; /&gt;
<span class='line-number'>555</span>	                &lt;input id=&quot;siteUrl&quot; name=&quot;siteUrl&quot; type=&quot;hidden&quot; value=&quot;@string.Format(&quot;{0}://{1}&quot;, GetGlobalValue(&quot;Global:Request.Scheme&quot;), GetGlobalValue(&quot;Global:Request.Host&quot;))&quot; /&gt;
<span class='line-number'>556</span>	
<span class='line-number'>557</span>	                &lt;h6 class=&quot;panel__header panel__header--line dw-mod&quot;&gt;@Translate(&quot;Export&quot;)&lt;/h6&gt;
<span class='line-number'>558</span>	
<span class='line-number'>559</span>	                &lt;label&gt;@Translate(&quot;Language&quot;)&lt;/label&gt;
<span class='line-number'>560</span>	                &lt;select id=&quot;exportLanguage&quot; name=&quot;LanguageId&quot; class=&quot;u-full-width&quot;&gt;
<span class='line-number'>561</span>	                    @foreach (Language lang in Language.GetLanguages())
<span class='line-number'>562</span>	                    {
<span class='line-number'>563</span>	                        &lt;option value=&quot;@lang.LanguageId&quot;&gt;@lang.Name&lt;/option&gt;
<span class='line-number'>564</span>	                    }
<span class='line-number'>565</span>	                &lt;/select&gt;
<span class='line-number'>566</span>	
<span class='line-number'>567</span>	                &lt;label&gt;@Translate(&quot;Purpose&quot;)&lt;/label&gt;
<span class='line-number'>568</span>	                &lt;select id=&quot;purpose&quot; name=&quot;purpose&quot; class=&quot;u-full-width&quot;&gt;
<span class='line-number'>569</span>	                    &lt;option value=&quot;Original&quot;&gt;@Translate(&quot;Original&quot;)&lt;/option&gt;
<span class='line-number'>570</span>	                    &lt;option value=&quot;Print&quot;&gt;@Translate(&quot;Print&quot;)&lt;/option&gt;
<span class='line-number'>571</span>	                    &lt;option value=&quot;Office&quot;&gt;@Translate(&quot;Office&quot;)&lt;/option&gt;
<span class='line-number'>572</span>	                    &lt;option value=&quot;Web&quot;&gt;Web&lt;/option&gt;
<span class='line-number'>573</span>	                &lt;/select&gt;
<span class='line-number'>574</span>	
<span class='line-number'>575</span>	                &lt;label&gt;@Translate(&quot;Export format&quot;)&lt;/label&gt;
<span class='line-number'>576</span>	                &lt;select id=&quot;exportFormat&quot; name=&quot;format&quot; class=&quot;u-full-width&quot;&gt;
<span class='line-number'>577</span>	                    &lt;option value=&quot;xml&quot;&gt;Xml&lt;/option&gt;
<span class='line-number'>578</span>	                    &lt;option value=&quot;json&quot;&gt;Json&lt;/option&gt;
<span class='line-number'>579</span>	                    &lt;option value=&quot;csv&quot;&gt;Csv&lt;/option&gt;
<span class='line-number'>580</span>	                &lt;/select&gt;
<span class='line-number'>581</span>	
<span class='line-number'>582</span>	                &lt;input type=&quot;submit&quot; value=&quot;@Translate(&quot;Download&quot;)&quot; class=&quot;btn btn--full btn--primary dw-mod&quot; title=&quot;@Translate(&quot;Download&quot;)&quot; /&gt;
<span class='line-number'>583</span>	            &lt;/div&gt;
<span class='line-number'>584</span>	        &lt;/form&gt;
<span class='line-number'>585</span>	
<span class='line-number'>586</span>	        &lt;form action=&quot;/Default.aspx?ID=@exportPageId&amp;ProductID=@System.Web.HttpContext.Current.Request.QueryString.Get(&quot;ProductID&quot;)&amp;GeneratePdf=true&quot; method=&quot;post&quot;&gt;
<span class='line-number'>587</span>	            &lt;div class=&quot;panel__content__footer panel__content__footer--400px dw-mod&quot;&gt;
<span class='line-number'>588</span>	                &lt;h6 class=&quot;panel__header panel__header--line dw-mod&quot;&gt;@Translate(&quot;Generate PDF&quot;)&lt;/h6&gt;
<span class='line-number'>589</span>	                &lt;input id=&quot;siteUrl&quot; name=&quot;siteUrl&quot; type=&quot;hidden&quot; value=&quot;@string.Format(&quot;{0}://{1}&quot;, GetGlobalValue(&quot;Global:Request.Scheme&quot;), GetGlobalValue(&quot;Global:Request.Host&quot;))&quot; /&gt;
<span class='line-number'>590</span>	                &lt;label&gt;@Translate(&quot;Language&quot;)&lt;/label&gt;
<span class='line-number'>591</span>	                &lt;select id=&quot;PdfLanguageId&quot; name=&quot;PdfLanguageId&quot; class=&quot;u-full-width&quot;&gt;
<span class='line-number'>592</span>	                    @foreach (Language lang in Language.GetLanguages())
<span class='line-number'>593</span>	                    {
<span class='line-number'>594</span>	                        &lt;option value=&quot;@lang.LanguageId&quot;&gt;@lang.Name&lt;/option&gt;
<span class='line-number'>595</span>	                    }
<span class='line-number'>596</span>	                &lt;/select&gt;
<span class='line-number'>597</span>	
<span class='line-number'>598</span>	                &lt;label&gt;@Translate(&quot;Generate PDF&quot;)&lt;/label&gt;
<span class='line-number'>599</span>	                &lt;select id=&quot;PdfPageId&quot; name=&quot;PdfPageId&quot; class=&quot;u-full-width&quot;&gt;
<span class='line-number'>600</span>	                    &lt;option value=&quot;&quot; selected&gt;@Translate(&quot;Select type&quot;)&lt;/option&gt;
<span class='line-number'>601</span>	                    @foreach (Dynamicweb.Content.Page page in ServiceLocator.Current.GetPageService().GetPagesByParentID(pdfFolderId))
<span class='line-number'>602</span>	                    {
<span class='line-number'>603</span>	                        &lt;option value=&quot;@page.ID&quot; selected&gt;@page.MenuText&lt;/option&gt;
<span class='line-number'>604</span>	                    }
<span class='line-number'>605</span>	                &lt;/select&gt;
<span class='line-number'>606</span>	
<span class='line-number'>607</span>	                &lt;input type=&quot;submit&quot; value=&quot;@Translate(&quot;Generate PDF&quot;)&quot; class=&quot;btn btn--full btn--primary dw-mod&quot; title=&quot;@Translate(&quot;Generate PDF&quot;)&quot; /&gt;
<span class='line-number'>608</span>	            &lt;/div&gt;
<span class='line-number'>609</span>	        &lt;/form&gt;
<span class='line-number'>610</span>	    &lt;/div&gt;
<span class='line-number'>611</span>	&lt;/aside&gt;
<span class='line-number'>612</span>	
<span class='line-number'>613</span>	@* Script templates for the updateable product content *@
<span class='line-number'>614</span>	&lt;script id=&quot;productUpdateableContentTemplate&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>615</span>	    &lt;div class=&quot;grid product&quot;&gt;
<span class='line-number'>616</span>	        @* Image block with optional thumbs *@
<span class='line-number'>617</span>	        &lt;div class=&quot;grid__col-md-6 grid__col-sm-6&quot;&gt;
<span class='line-number'>618</span>	            &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>619</span>	                &lt;div class=&quot;grid__col-2 u-color-light-gray--bg u-hidden-xxs &quot;&gt;
<span class='line-number'>620</span>	                    &lt;div class=&quot;thumb-list&quot;&gt;
<span class='line-number'>621</span>	                        &lt;div id=&quot;ThumbnailImages&quot; data-template=&quot;ThumbnailImageTemplate&quot;&gt;&lt;/div&gt;
<span class='line-number'>622</span>	                    &lt;/div&gt;
<span class='line-number'>623</span>	                &lt;/div&gt;
<span class='line-number'>624</span>	
<span class='line-number'>625</span>	                &lt;div class=&quot;grid__col-auto&quot;&gt;
<span class='line-number'>626</span>	                    &lt;div class=&quot;sticker {{onSale}} dw-mod&quot;&gt;@Translate(&quot;Sale!&quot;)&lt;/div&gt;
<span class='line-number'>627</span>	                    &lt;img class=&quot;thumb-image-view flex-img&quot; id=&quot;Image_{{id}}&quot; src=&quot;/Admin/Public/GetImage.ashx?height=550&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image={{image}}&quot; alt=&quot;{{name}}&quot; /&gt;
<span class='line-number'>628</span>	                &lt;/div&gt;
<span class='line-number'>629</span>	            &lt;/div&gt;
<span class='line-number'>630</span>	        &lt;/div&gt;
<span class='line-number'>631</span>	
<span class='line-number'>632</span>	        @* Primary product informations *@
<span class='line-number'>633</span>	        &lt;div class=&quot;grid__col-auto&quot;&gt;
<span class='line-number'>634</span>	            &lt;div class=&quot;grid__cell&quot;&gt;
<span class='line-number'>635</span>	                &lt;div class=&quot;u-pull--left product__title dw-mod&quot;&gt;
<span class='line-number'>636</span>	                    &lt;h1 class=&quot;u-no-margin&quot;&gt;{{name}}&lt;/h1&gt;
<span class='line-number'>637</span>	                    &lt;div class=&quot;item-number dw-mod&quot;&gt;{{number}}&lt;/div&gt;
<span class='line-number'>638</span>	                &lt;/div&gt;
<span class='line-number'>639</span>	
<span class='line-number'>640</span>	                &lt;div&gt;
<span class='line-number'>641</span>	                    @* Short description *@
<span class='line-number'>642</span>	                    &lt;div class=&quot;introduction-text&quot;&gt;
<span class='line-number'>643</span>	                        {{description}}
<span class='line-number'>644</span>	                    &lt;/div&gt;
<span class='line-number'>645</span>	
<span class='line-number'>646</span>	                    @* Variants *@
<span class='line-number'>647</span>	                    &lt;div&gt;
<span class='line-number'>648</span>	                        @* Combinations div needed to handle variant options(used in script block with Variants.SetVariantOptionStatesForProductList function) and should not be deleted *@
<span class='line-number'>649</span>	                        &lt;div id=&quot;Combinations&quot; data-template=&quot;VariantCombinations&quot; data-product-id=&quot;{{id}}&quot; class=&quot;js-variants-wrap u-hidden&quot;&gt;&lt;/div&gt;
<span class='line-number'>650</span>	                        &lt;div id=&quot;Variants&quot; data-template=&quot;VariantGroup&quot; data-product-id=&quot;{{id}}&quot;&gt;&lt;/div&gt;
<span class='line-number'>651</span>	                        &lt;small id=&quot;helpText_{{id}}&quot; class=&quot;help-text {{hideViewMore}} {{hideHelpText}}&quot;&gt;@Translate(&quot;Please select variant!&quot;)&lt;/small&gt;
<span class='line-number'>652</span>	                    &lt;/div&gt;
<span class='line-number'>653</span>	                &lt;/div&gt;
<span class='line-number'>654</span>	            &lt;/div&gt;
<span class='line-number'>655</span>	
<span class='line-number'>656</span>	            &lt;div class=&quot;grid__cell-footer&quot;&gt;
<span class='line-number'>657</span>	                &lt;input type=&quot;hidden&quot; id=&quot;CartButton_{{id}}&quot; class=&quot;btn btn--primary dw-mod u-pull--right&quot; name=&quot;submit&quot; /&gt;
<span class='line-number'>658</span>	                &lt;input type=&quot;hidden&quot; value=&quot;{{variantid}}&quot; name=&quot;Variant&quot; id=&quot;Variant_{{id}}&quot; /&gt;
<span class='line-number'>659</span>	            &lt;/div&gt;
<span class='line-number'>660</span>	        &lt;/div&gt;
<span class='line-number'>661</span>	    &lt;/div&gt;
<span class='line-number'>662</span>	&lt;/script&gt;
<span class='line-number'>663</span>	
<span class='line-number'>664</span>	@* Thumbnail images *@
<span class='line-number'>665</span>	&lt;script id=&quot;ThumbnailImageTemplate&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>666</span>	    &lt;div class=&quot;thumb-list__item dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_{{productId}}&quot; data-image-path=&quot;/Admin/Public/GetImage.ashx?width=500&amp;amp;height=500&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image={{image}}&quot;&gt;&lt;img src=&quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image={{image}}&quot;&gt;&lt;/div&gt;
<span class='line-number'>667</span>	&lt;/script&gt;
<span class='line-number'>668</span>	
<span class='line-number'>669</span>	
<span class='line-number'>670</span>	@* Variants templates *@
<span class='line-number'>671</span>	&lt;script id=&quot;VariantGroup&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>672</span>	    &lt;div&gt;
<span class='line-number'>673</span>	        &lt;div&gt;{{name}}&lt;/div&gt;
<span class='line-number'>674</span>	        &lt;div id=&quot;VariantOptions&quot; data-template=&quot;VariantOption&quot;&gt;&lt;/div&gt;
<span class='line-number'>675</span>	    &lt;/div&gt;
<span class='line-number'>676</span>	&lt;/script&gt;
<span class='line-number'>677</span>	
<span class='line-number'>678</span>	&lt;script id=&quot;VariantOption&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>679</span>	    &lt;button type=&quot;button&quot; id=&quot;{{id}}&quot; data-product-id=&quot;@productId&quot; onclick=&quot;Variants.UpdateVariants(this)&quot; class=&quot;btn btn--tag {{disabled}} {{selected}}&quot; data-check=&quot;{{selected}}&quot; {{disabled}}&gt;{{name}}&lt;/button&gt;
<span class='line-number'>680</span>	&lt;/script&gt;
<span class='line-number'>681</span>	
<span class='line-number'>682</span>	@* Favorites templates *@
<span class='line-number'>683</span>	&lt;script id=&quot;FavoriteTemplate&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>684</span>	    &lt;div class=&quot;favorites-list u-pull--right u-ta-left&quot;&gt;
<span class='line-number'>685</span>	        &lt;i class=&quot;{{favoriteIcon}} fa-1_5x&quot;&gt;&lt;/i&gt;
<span class='line-number'>686</span>	        &lt;div class=&quot;favorites-list__container dw-mod&quot;&gt;
<span class='line-number'>687</span>	            &lt;ul id=&quot;FavoriteLists&quot; data-template=&quot;FavoriteListItem&quot; class=&quot;list list--clean dw-mod&quot;&gt;&lt;/ul&gt;
<span class='line-number'>688</span>	        &lt;/div&gt;
<span class='line-number'>689</span>	    &lt;/div&gt;
<span class='line-number'>690</span>	&lt;/script&gt;
<span class='line-number'>691</span>	
<span class='line-number'>692</span>	@* BOMProduct templates *@
<span class='line-number'>693</span>	&lt;script id=&quot;BOMProductTemplate&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>694</span>	    &lt;div class=&quot;grid__col--border grid&quot;&gt;
<span class='line-number'>695</span>	        &lt;div class=&quot;grid__cell grid__cell--align-middle-left&quot;&gt;
<span class='line-number'>696</span>	            &lt;a href=&quot;{{link}}&quot; class=&quot;u-pull--left u-margin-right&quot;&gt;
<span class='line-number'>697</span>	                &lt;img src=&quot;/Admin/Public/GetImage.ashx?width=50&amp;image={{image}}&amp;Compression=99&quot; /&gt;
<span class='line-number'>698</span>	            &lt;/a&gt;
<span class='line-number'>699</span>	            &lt;a href=&quot;{{link}}&quot;&gt;{{name}}&lt;/a&gt;
<span class='line-number'>700</span>	        &lt;/div&gt;
<span class='line-number'>701</span>	    &lt;/div&gt;
<span class='line-number'>702</span>	&lt;/script&gt;
<span class='line-number'>703</span>	
<span class='line-number'>704</span>	&lt;script id=&quot;FavoriteListItem&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>705</span>	    &lt;li&gt;
<span class='line-number'>706</span>	        &lt;a href=&quot;{{link}}&quot; class=&quot;list__link dw-mod&quot;&gt;&lt;i class=&quot;{{favoriteIcon}}&quot;&gt;&lt;/i&gt; {{name}}&lt;/a&gt;
<span class='line-number'>707</span>	    &lt;/li&gt;
<span class='line-number'>708</span>	&lt;/script&gt;
<span class='line-number'>709</span>	
<span class='line-number'>710</span>	&lt;script id=&quot;unitOption&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>711</span>	    &lt;div class=&quot;dropdown__item dw-mod&quot; onclick=&quot;Dynamo.UpdateContent(&#39;@productContainerId&#39;, &#39;@feedUrl&amp;ProductID=@productId&amp;UnitID={{value}}&#39;)&quot;&gt;{{name}}&lt;/div&gt;
<span class='line-number'>712</span>	&lt;/script&gt;
<span class='line-number'>713</span>	
<span class='line-number'>714</span>	
<span class='line-number'>715</span>	@* Script templates for related products *@
<span class='line-number'>716</span>	&lt;script id=&quot;ProductPreRenderContainer&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>717</span>	    &lt;div class=&quot;grid__col-md-4&quot;&gt;
<span class='line-number'>718</span>	        &lt;div class=&quot;pre-render-element pre-render-element--md&quot;&gt;&lt;/div&gt;
<span class='line-number'>719</span>	    &lt;/div&gt;
<span class='line-number'>720</span>	    &lt;div class=&quot;grid__col-md-4&quot;&gt;
<span class='line-number'>721</span>	        &lt;div class=&quot;pre-render-element pre-render-element--md&quot;&gt;&lt;/div&gt;
<span class='line-number'>722</span>	    &lt;/div&gt;
<span class='line-number'>723</span>	    &lt;div class=&quot;grid__col-md-4&quot;&gt;
<span class='line-number'>724</span>	        &lt;div class=&quot;pre-render-element pre-render-element--md&quot;&gt;&lt;/div&gt;
<span class='line-number'>725</span>	    &lt;/div&gt;
<span class='line-number'>726</span>	&lt;/script&gt;
<span class='line-number'>727</span>	
<span class='line-number'>728</span>	&lt;script id=&quot;ProductContainer&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>729</span>	    &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>730</span>	        &lt;h2 class=&quot;section-title section-title--condensed&quot;&gt;@Translate(&quot;What about these products?&quot;)&lt;/h2&gt;
<span class='line-number'>731</span>	    &lt;/div&gt;
<span class='line-number'>732</span>	
<span class='line-number'>733</span>	    &lt;div class=&quot;grid__col-1 grid__col--bleed-x&quot;&gt;
<span class='line-number'>734</span>	        &lt;div class=&quot;grid__cell grid__cell--align-middle-right&quot;&gt;
<span class='line-number'>735</span>	            &lt;button class=&quot;btn btn--condensed btn--clean {{prevdisabled}} dw-mod&quot; onclick=&quot;Dynamo.UpdateContent(&#39;ProductList&#39;, &#39;{{prevPage}}&#39;)&quot; {{prevdisabled}}&gt;&lt;i class=&quot;fa fa-chevron-left fa-2x&quot;&gt;&lt;/i&gt;&lt;/button&gt;
<span class='line-number'>736</span>	        &lt;/div&gt;
<span class='line-number'>737</span>	    &lt;/div&gt;
<span class='line-number'>738</span>	    &lt;div class=&quot;grid__col-10 grid__col--bleed-x&quot;&gt;
<span class='line-number'>739</span>	        &lt;div id=&quot;ProductsContainer&quot; class=&quot;grid product-list dw-mod&quot; data-template=&quot;ProductGridItemContainer&quot;&gt;&lt;/div&gt;
<span class='line-number'>740</span>	    &lt;/div&gt;
<span class='line-number'>741</span>	    &lt;div class=&quot;grid__col-1 grid__col--bleed-x&quot;&gt;
<span class='line-number'>742</span>	        &lt;div class=&quot;grid__cell grid__cell--align-middle-left&quot;&gt;
<span class='line-number'>743</span>	            &lt;button class=&quot;btn btn--condensed btn--clean {{nextdisabled}} dw-mod&quot; onclick=&quot;Dynamo.UpdateContent(&#39;ProductList&#39;, &#39;{{nextPage}}&#39;)&quot; {{nextdisabled}}&gt;&lt;i class=&quot;fa fa-chevron-right fa-2x&quot;&gt;&lt;/i&gt;&lt;/button&gt;
<span class='line-number'>744</span>	        &lt;/div&gt;
<span class='line-number'>745</span>	    &lt;/div&gt;
<span class='line-number'>746</span>	&lt;/script&gt;
<span class='line-number'>747</span>	
<span class='line-number'>748</span>	&lt;script id=&quot;ProductGridItemContainer&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>749</span>	    &lt;div id=&quot;Product&quot; class=&quot;grid__col-lg-4 grid__col-md-4 grid__col-sm-4 grid__col-xs-6&quot; data-template=&quot;ProductGridItem&quot; data-preloader=&quot;false&quot;&gt;&lt;/div&gt;
<span class='line-number'>750</span>	&lt;/script&gt;
<span class='line-number'>751</span>	
<span class='line-number'>752</span>	&lt;script id=&quot;ProductGridItem&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>753</span>	    &lt;div class=&quot;grid__cell u-border {{noImage}}&quot;&gt;
<span class='line-number'>754</span>	        &lt;div class=&quot;sticker {{onSale}} dw-mod&quot;&gt;@Translate(&quot;Sale!&quot;)&lt;/div&gt;
<span class='line-number'>755</span>	        &lt;a href=&quot;{{link}}&quot; onclick=&quot;Scroll.SavePosition(event)&quot;&gt;&lt;img class=&quot;grid__cell-img grid__cell-img--centered&quot; src=&quot;/Admin/Public/GetImage.ashx?width=300&amp;amp;height=300&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image={{image}}&quot; alt=&quot;{{name}}&quot; /&gt;&lt;/a&gt;
<span class='line-number'>756</span>	    &lt;/div&gt;
<span class='line-number'>757</span>	
<span class='line-number'>758</span>	    &lt;div class=&quot;grid__cell card u-color-light--bg u-border-left u-border-right&quot;&gt;
<span class='line-number'>759</span>	        &lt;div class=&quot;u-ta-center&quot;&gt;
<span class='line-number'>760</span>	            &lt;a href=&quot;{{link}}&quot; onclick=&quot;Scroll.SavePosition(event)&quot; title=&quot;{{name}}&quot;&gt;&lt;h6 class=&quot;u-ta-center u-condensed-text&quot;&gt;{{name}}&lt;/h6&gt;&lt;/a&gt;
<span class='line-number'>761</span>	            &lt;div class=&quot;item-number dw-mod&quot;&gt;{{number}}&lt;/div&gt;
<span class='line-number'>762</span>	            &lt;div class=&quot;before-price {{onSale}} dw-mod&quot;&gt;{{discount}}&lt;/div&gt;
<span class='line-number'>763</span>	            &lt;div class=&quot;price dw-mod&quot;&gt;{{price}}&lt;/div&gt;
<span class='line-number'>764</span>	        &lt;/div&gt;
<span class='line-number'>765</span>	    &lt;/div&gt;
<span class='line-number'>766</span>	
<span class='line-number'>767</span>	    &lt;div class=&quot;card-footer u-color-light--bg u-border-left u-border-right u-border-bottom&quot;&gt;
<span class='line-number'>768</span>	        &lt;div class=&quot;u-ta-center&quot;&gt;
<span class='line-number'>769</span>	            &lt;a href=&quot;{{link}}&quot; id=&quot;CartButton_{{id}}&quot; class=&quot;btn btn--secondary btn--full u-no-margin dw-mod&quot;&gt;@Translate(&quot;View&quot;)&lt;/a&gt;
<span class='line-number'>770</span>	        &lt;/div&gt;
<span class='line-number'>771</span>	    &lt;/div&gt;
<span class='line-number'>772</span>	&lt;/script&gt;
<span class='line-number'>773</span>	
<span class='line-number'>774</span>	@*Variants data generation*@
<span class='line-number'>775</span>	&lt;script&gt;
<span class='line-number'>776</span>	    document.addEventListener(&quot;DOMContentLoaded&quot;, function (event) {
<span class='line-number'>777</span>	        Facets.Init(&quot;productList&quot;, &#39;@productCatalogId&#39;, &#39;@requestQuery&#39;);
<span class='line-number'>778</span>	
<span class='line-number'>779</span>	        Variants.SetProductFeedId(&#39;@productCatalogId&#39;);
<span class='line-number'>780</span>	        Variants.SetViewMode(&quot;productList&quot;);
<span class='line-number'>781</span>	
<span class='line-number'>782</span>	        document.getElementById(&quot;productList&quot;).addEventListener(&#39;contentLoaded&#39;, function (e) {
<span class='line-number'>783</span>	            if (e.srcElement.classList.contains(&quot;js-variants-wrap&quot;)) {
<span class='line-number'>784</span>	                Variants.SetVariantOptionStatesForProductList(e.srcElement);
<span class='line-number'>785</span>	            }
<span class='line-number'>786</span>	        }, false);
<span class='line-number'>787</span>	    });
<span class='line-number'>788</span>	&lt;/script&gt;
</div>

2018-05-09 16:36:17.2719|ERROR|Templates|Error in razor template
System.ArgumentException: Parent ID must be greater than 0, but it was 0
   at Dynamicweb.Core.Ensure.That[TException](Boolean condition, String message)
   at Dynamicweb.Content.PageService.GetPagesByParentID(Int32 parentId)
   at CompiledRazorTemplates.Dynamic.bebfeeadaceded.Execute()
   at RazorEngine.Templating.TemplateBase.RazorEngine.Templating.ITemplate.Run(ExecuteContext context)
   at RazorEngine.Templating.TemplateService.Run(ITemplate template, DynamicViewBag viewBag)
   at RazorEngine.Templating.TemplateService.Parse(String razorTemplate, Object model, DynamicViewBag viewBag, String cacheName)
   at RazorEngine.Razor.Parse[T](String razorTemplate, T model, String cacheName)
   at Dynamicweb.Rendering.Template.RenderRazorTemplate()
2018-05-09 16:36:45.7412|ERROR|Templates|Error in razor template
System.ArgumentException: Parent ID must be greater than 0, but it was 0
   at Dynamicweb.Core.Ensure.That[TException](Boolean condition, String message)
   at Dynamicweb.Content.PageService.GetPagesByParentID(Int32 parentId)
   at CompiledRazorTemplates.Dynamic.bebfeeadaceded.Execute()
   at RazorEngine.Templating.TemplateBase.RazorEngine.Templating.ITemplate.Run(ExecuteContext context)
   at RazorEngine.Templating.TemplateService.Run(ITemplate template, DynamicViewBag viewBag)
   at RazorEngine.Templating.TemplateService.Parse(String razorTemplate, Object model, DynamicViewBag viewBag, String cacheName)
   at RazorEngine.Razor.Parse[T](String razorTemplate, T model, String cacheName)
   at Dynamicweb.Rendering.Template.RenderRazorTemplate()
2018-05-09 16:37:21.0229|ERROR|Templates|Error compiling razor template
Error compiling template "Designs/Rapido/eCom/Product/Product.cshtml"
Line 1740: 'Dynamicweb.Ecommerce.International.Language.GetLanguages()' is obsolete: 'Use LanguageService.GetLanguages instead.'
Line 1892: 'Dynamicweb.Ecommerce.International.Language.GetLanguages()' is obsolete: 'Use LanguageService.GetLanguages instead.'
Line 2221: The name 'productCatalogId' does not exist in the current context
Line 2225: The name 'requestQuery' does not exist in the current context
Line 2229: The name 'productCatalogId' does not exist in the current context
<hr/>
<div class='template-code'>
<span class='line-number'>  1</span>	@inherits Dynamicweb.Rendering.RazorTemplateBase&lt;Dynamicweb.Rendering.RazorTemplateModel&lt;Dynamicweb.Rendering.Template&gt;&gt;
<span class='line-number'>  2</span>	@using Dynamicweb.Extensibility
<span class='line-number'>  3</span>	@using Dynamicweb.Content
<span class='line-number'>  4</span>	@using System
<span class='line-number'>  5</span>	@using System.IO
<span class='line-number'>  6</span>	@using System.Text.RegularExpressions
<span class='line-number'>  7</span>	@using Dynamicweb.Ecommerce.International;
<span class='line-number'>  8</span>	
<span class='line-number'>  9</span>	@{
<span class='line-number'> 10</span>	    string exportPageId = GetPageIdByNavigationTag(&quot;ProductExportFeed&quot;).ToString();
<span class='line-number'> 11</span>	    int pdfFolderId = GetPageIdByNavigationTag(&quot;PdfFolder&quot;);
<span class='line-number'> 12</span>	    string productId = GetString(&quot;Ecom:Product.ID&quot;);
<span class='line-number'> 13</span>	    string onSale = GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;) == GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;) ? &quot;u-hidden&quot; : &quot;&quot;;
<span class='line-number'> 14</span>	    string hideHelpText = &quot;&quot;;
<span class='line-number'> 15</span>	    string feedId = GetPageIdByNavigationTag(&quot;ProductsFeed&quot;).ToString();
<span class='line-number'> 16</span>	    string feedUrl = &quot;/Default.aspx?ID=&quot; + feedId + &quot;&amp;feedType=productCatalog&quot;;
<span class='line-number'> 17</span>	    int featuresCount = 0;
<span class='line-number'> 18</span>	    int thumbsCount = GetLoop(&quot;Details&quot;).Count;
<span class='line-number'> 19</span>	    int documentsCount = 0;
<span class='line-number'> 20</span>	
<span class='line-number'> 21</span>	    foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;))
<span class='line-number'> 22</span>	    {
<span class='line-number'> 23</span>	        if (!String.IsNullOrEmpty(customField.GetString(&quot;Product.CustomField.Value.Clean&quot;)))
<span class='line-number'> 24</span>	        {
<span class='line-number'> 25</span>	            featuresCount++;
<span class='line-number'> 26</span>	        }
<span class='line-number'> 27</span>	    }
<span class='line-number'> 28</span>	
<span class='line-number'> 29</span>	    foreach (LoopItem customField in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'> 30</span>	    {
<span class='line-number'> 31</span>	        foreach (LoopItem field in customField.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'> 32</span>	        {
<span class='line-number'> 33</span>	            if (!String.IsNullOrEmpty(field.GetString(&quot;Ecom:Product.CategoryField.Value&quot;)))
<span class='line-number'> 34</span>	            {
<span class='line-number'> 35</span>	                featuresCount++;
<span class='line-number'> 36</span>	            }
<span class='line-number'> 37</span>	        }
<span class='line-number'> 38</span>	    }
<span class='line-number'> 39</span>	
<span class='line-number'> 40</span>	    foreach (LoopItem alternativeImage in GetLoop(&quot;Ecom:Product.AlternativeImages&quot;))
<span class='line-number'> 41</span>	    {
<span class='line-number'> 42</span>	        if (!String.IsNullOrEmpty(alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;)))
<span class='line-number'> 43</span>	        {
<span class='line-number'> 44</span>	            thumbsCount++;
<span class='line-number'> 45</span>	        }
<span class='line-number'> 46</span>	    }
<span class='line-number'> 47</span>	
<span class='line-number'> 48</span>	    if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product.ImageSmall.Default.Clean&quot;)))
<span class='line-number'> 49</span>	    {
<span class='line-number'> 50</span>	        thumbsCount++;
<span class='line-number'> 51</span>	    }
<span class='line-number'> 52</span>	
<span class='line-number'> 53</span>	    foreach (LoopItem variantgroup in GetLoop(&quot;VariantGroups&quot;))
<span class='line-number'> 54</span>	    {
<span class='line-number'> 55</span>	        foreach (LoopItem variantoption in variantgroup.GetLoop(&quot;VariantAvailableOptions&quot;))
<span class='line-number'> 56</span>	        {
<span class='line-number'> 57</span>	            if (variantoption.GetBoolean(&quot;Ecom:VariantOption.Selected&quot;))
<span class='line-number'> 58</span>	            {
<span class='line-number'> 59</span>	                hideHelpText = &quot;u-hidden&quot;;
<span class='line-number'> 60</span>	            }
<span class='line-number'> 61</span>	        }
<span class='line-number'> 62</span>	    }
<span class='line-number'> 63</span>	
<span class='line-number'> 64</span>	    string feedPageUrl = &quot;/Default.aspx?ID=&quot; + GetPageIdByNavigationTag(&quot;RelatedProductsFeed&quot;);
<span class='line-number'> 65</span>	    string feedFullUrl = feedPageUrl + &quot;&amp;feedType=productCatalog&amp;PageSize=3&amp;ProdID=&quot; + productId;
<span class='line-number'> 66</span>	    string productContainerId = &quot;Product&quot; + productId;
<span class='line-number'> 67</span>	}
<span class='line-number'> 68</span>	
<span class='line-number'> 69</span>	&lt;!-- Trigger for the image modal --&gt;
<span class='line-number'> 70</span>	&lt;input type=&quot;checkbox&quot; id=&quot;ImageModalTrigger&quot; class=&quot;modal-trigger&quot; /&gt;
<span class='line-number'> 71</span>	
<span class='line-number'> 72</span>	&lt;!-- Image modal --&gt;
<span class='line-number'> 73</span>	&lt;div class=&quot;modal-container&quot;&gt;
<span class='line-number'> 74</span>	    &lt;label for=&quot;ImageModalTrigger&quot; id=&quot;ImageModalOverlay&quot; class=&quot;modal-overlay&quot;&gt;&lt;/label&gt;
<span class='line-number'> 75</span>	    &lt;div class=&quot;modal modal--full&quot; id=&quot;ImageModal&quot;&gt;
<span class='line-number'> 76</span>	        &lt;div class=&quot;modal__body&quot;&gt;
<span class='line-number'> 77</span>	            &lt;img id=&quot;FullImage&quot; class=&quot;modal--full__img&quot; src=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot; /&gt;
<span class='line-number'> 78</span>	        &lt;/div&gt;
<span class='line-number'> 79</span>	    &lt;/div&gt;
<span class='line-number'> 80</span>	&lt;/div&gt;
<span class='line-number'> 81</span>	
<span class='line-number'> 82</span>	&lt;input type=&quot;checkbox&quot; class=&quot;panel-trigger js-remember-state&quot; id=&quot;PIMProductToolsTrigger&quot; checked /&gt;
<span class='line-number'> 83</span>	&lt;div class=&quot;fit-to-panel-size&quot;&gt;
<span class='line-number'> 84</span>	    &lt;div class=&quot;paragraph-container__grid--bleed&quot;&gt;
<span class='line-number'> 85</span>	        @*Please be aware that the below html must be implemented twice (Static HTML and dynamic Script template) to make it update when shifting units *@
<span class='line-number'> 86</span>	
<span class='line-number'> 87</span>	        &lt;div class=&quot;js-ajax-container&quot; id=&quot;@productContainerId&quot; data-template=&quot;productUpdateableContentTemplate&quot; data-json-feed=&quot;@feedUrl&quot; data-preloader=&quot;false&quot; data-init-onload=&quot;false&quot;&gt;
<span class='line-number'> 88</span>	            &lt;div class=&quot;grid product&quot;&gt;
<span class='line-number'> 89</span>	                @* Image block with optional thumbs *@
<span class='line-number'> 90</span>	                @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)))
<span class='line-number'> 91</span>	                {
<span class='line-number'> 92</span>	                &lt;div class=&quot;grid__col-md-6 grid__col-sm-6&quot;&gt;
<span class='line-number'> 93</span>	                    &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'> 94</span>	                        @if (thumbsCount &gt; 0)
<span class='line-number'> 95</span>	                {
<span class='line-number'> 96</span>	                &lt;div class=&quot;grid__col-2 u-hidden-xxs product__thumbs dw-mod&quot;&gt;
<span class='line-number'> 97</span>	                    &lt;div class=&quot;thumb-list&quot;&gt;
<span class='line-number'> 98</span>	                        &lt;div class=&quot;thumb-list__item thumb-list__item--active dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_@productId&quot; data-full-image=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; data-image-path=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot;&gt;&lt;img src=&quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image=@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'> 99</span>	                                @foreach (LoopItem alternativeImage in GetLoop(&quot;Ecom:Product.AlternativeImages&quot;))
<span class='line-number'>100</span>	                                {
<span class='line-number'>101</span>	                                    if (!String.IsNullOrEmpty(alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;)))
<span class='line-number'>102</span>	                                    {
<span class='line-number'>103</span>	                                        string fullImage = alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>104</span>	                                        string image = &quot;/Admin/Public/GetImage.ashx?width=550&amp;amp;height=550&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>105</span>	                                        string thumb = &quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>106</span>	
<span class='line-number'>107</span>	                                        &lt;div class=&quot;thumb-list__item dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_@productId&quot; data-full-image=&quot;@fullImage&quot; data-image-path=&quot;@image&quot;&gt;&lt;img src=&quot;@thumb&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'>108</span>	                                    }
<span class='line-number'>109</span>	                                }
<span class='line-number'>110</span>	
<span class='line-number'>111</span>	                                @foreach (LoopItem detail in GetLoop(&quot;Details&quot;))
<span class='line-number'>112</span>	                                {
<span class='line-number'>113</span>	                                    string fullImage = detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>114</span>	                                    string image = &quot;/Admin/Public/GetImage.ashx?width=550&amp;amp;height=550&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>115</span>	                                    string thumb = &quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>116</span>	
<span class='line-number'>117</span>	                                    &lt;div class=&quot;thumb-list__item dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_@productId&quot; data-full-image=&quot;@fullImage&quot; data-image-path=&quot;@image&quot;&gt;&lt;img src=&quot;@thumb&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'>118</span>	                                }
<span class='line-number'>119</span>	                            &lt;/div&gt;
<span class='line-number'>120</span>	                        &lt;/div&gt;
<span class='line-number'>121</span>	                        }
<span class='line-number'>122</span>	                        &lt;div class=&quot;grid__col-auto&quot;&gt;
<span class='line-number'>123</span>	                            @if (GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;) != GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;))
<span class='line-number'>124</span>	                            {
<span class='line-number'>125</span>	                            &lt;div class=&quot;sticker u-margin-left dw-mod&quot;&gt;@Translate(&quot;Sale!&quot;)&lt;/div&gt;
<span class='line-number'>126</span>	                            }
<span class='line-number'>127</span>	                            &lt;label for=&quot;ImageModalTrigger&quot;&gt;
<span class='line-number'>128</span>	                                &lt;img class=&quot;thumb-image-view product__image dw-mod&quot; onclick=&quot;document.getElementById(&#39;FullImage&#39;).src = this.getAttribute(&#39;data-full-image&#39;)&quot; id=&quot;Image_@productId&quot; src=&quot;/Admin/Public/GetImage.ashx?crop=5&amp;height=550&amp;width=550&amp;Compression=75&amp;DoNotUpscale=true&amp;image=@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; data-full-image=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot; /&gt;
<span class='line-number'>129</span>	                            &lt;/label&gt;
<span class='line-number'>130</span>	                        &lt;/div&gt;
<span class='line-number'>131</span>	                    &lt;/div&gt;
<span class='line-number'>132</span>	                &lt;/div&gt;
<span class='line-number'>133</span>	                }
<span class='line-number'>134</span>	
<span class='line-number'>135</span>	                @* Primary product informations *@
<span class='line-number'>136</span>	                &lt;div class=&quot;grid__col-md-5&quot;&gt;
<span class='line-number'>137</span>	                    &lt;div class=&quot;grid__cell&quot;&gt;
<span class='line-number'>138</span>	                        &lt;div class=&quot;product__title dw-mod&quot;&gt;
<span class='line-number'>139</span>	                            &lt;h1 class=&quot;u-no-margin&quot;&gt;@GetString(&quot;Ecom:Product.Name&quot;) @GetString(&quot;Ecom:Product.SelectedVariantComboName&quot;)&lt;/h1&gt;
<span class='line-number'>140</span>	                            &lt;div class=&quot;item-number&quot;&gt;@GetString(&quot;Ecom:Product.Number&quot;)&lt;/div&gt;
<span class='line-number'>141</span>	                        &lt;/div&gt;
<span class='line-number'>142</span>	                        &lt;div&gt;
<span class='line-number'>143</span>	                            @* Short description *@
<span class='line-number'>144</span>	                            &lt;div class=&quot;introduction-text&quot;&gt;
<span class='line-number'>145</span>	                                @GetString(&quot;Ecom:Product.ShortDescription&quot;)
<span class='line-number'>146</span>	                            &lt;/div&gt;
<span class='line-number'>147</span>	
<span class='line-number'>148</span>	                            @* Variants *@
<span class='line-number'>149</span>	                            @if (GetLoop(&quot;VariantGroups&quot;).Count &gt; 0 &amp;&amp; GetBoolean(&quot;Ecom:Product.ShowInProductList&quot;))
<span class='line-number'>150</span>	                            {
<span class='line-number'>151</span>	                                &lt;div&gt;
<span class='line-number'>152</span>	                                    &lt;div id=&quot;Variants&quot; data-template=&quot;VariantGroup&quot; data-product-id=&quot;@productId&quot;&gt;&lt;/div&gt;
<span class='line-number'>153</span>	                                    &lt;small id=&quot;helpText_@productId&quot; class=&quot;help-text @hideHelpText&quot;&gt;@Translate(&quot;Please select variant!&quot;)&lt;/small&gt;
<span class='line-number'>154</span>	                                &lt;/div&gt;
<span class='line-number'>155</span>	                            }
<span class='line-number'>156</span>	
<span class='line-number'>157</span>	                            @* BOMProducts *@
<span class='line-number'>158</span>	                            @if (GetLoop(&quot;BOMProducts&quot;).Count &gt; 0)
<span class='line-number'>159</span>	                            {
<span class='line-number'>160</span>	                                &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Including products&quot;)&lt;/h2&gt;
<span class='line-number'>161</span>	                                foreach (LoopItem BOMProductItem in GetLoop(&quot;BOMProducts&quot;))
<span class='line-number'>162</span>	                                {
<span class='line-number'>163</span>	                                    string link = &quot;/&quot; + BOMProductItem.GetString(&quot;Ecom:Product.LinkGroup.Clean&quot;) + (!String.IsNullOrEmpty(BOMProductItem.GetString(&quot;Ecom:Product.VariantID&quot;)) ? &quot;&amp;VariantID=&quot; + BOMProductItem.GetString(&quot;Ecom:Product.VariantID&quot;) : &quot;&quot;);
<span class='line-number'>164</span>	                                    &lt;div class=&quot;grid__col--border grid&quot;&gt;
<span class='line-number'>165</span>	                                        &lt;div class=&quot;grid__cell grid__cell--align-middle-left&quot;&gt;
<span class='line-number'>166</span>	                                            &lt;a href=&quot;@link&quot; class=&quot;u-pull--left u-margin-right&quot;&gt;
<span class='line-number'>167</span>	                                                &lt;img src=&quot;/Admin/Public/GetImage.ashx?width=50&amp;image=@BOMProductItem.GetString(&quot;Ecom:Product.ImageSmall.Default.Clean&quot;)&amp;Compression=99&quot; /&gt;
<span class='line-number'>168</span>	                                            &lt;/a&gt;
<span class='line-number'>169</span>	                                            &lt;a href=&quot;@link&quot;&gt;@BOMProductItem.GetString(&quot;Ecom:Product.Name&quot;)&lt;/a&gt;
<span class='line-number'>170</span>	                                        &lt;/div&gt;
<span class='line-number'>171</span>	                                    &lt;/div&gt;
<span class='line-number'>172</span>	                                }
<span class='line-number'>173</span>	                            }
<span class='line-number'>174</span>	                        &lt;/div&gt;
<span class='line-number'>175</span>	
<span class='line-number'>176</span>	                        &lt;input type=&quot;hidden&quot; id=&quot;CartButton_@GetString(&quot;Ecom:Product.ID&quot;)&quot; name=&quot;submit&quot; /&gt;
<span class='line-number'>177</span>	                        &lt;input type=&quot;hidden&quot; value=&quot;@GetString(&quot;Ecom:Product.VariantID.Extented&quot;)&quot; name=&quot;Variant&quot; id=&quot;Variant_@GetString(&quot;Ecom:Product.ID&quot;)&quot; /&gt;
<span class='line-number'>178</span>	                    &lt;/div&gt;
<span class='line-number'>179</span>	                &lt;/div&gt;
<span class='line-number'>180</span>	
<span class='line-number'>181</span>	                &lt;div class=&quot;grid__col-3&quot;&gt;&lt;/div&gt;
<span class='line-number'>182</span>	            &lt;/div&gt;
<span class='line-number'>183</span>	        &lt;/div&gt;
<span class='line-number'>184</span>	
<span class='line-number'>185</span>	        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>186</span>	            @* Long description *@
<span class='line-number'>187</span>	            @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product.LongDescription&quot;)))
<span class='line-number'>188</span>	            {
<span class='line-number'>189</span>	                &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>190</span>	                    &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Description&quot;)&lt;/h2&gt;
<span class='line-number'>191</span>	
<span class='line-number'>192</span>	                    @GetString(&quot;Ecom:Product.LongDescription&quot;)
<span class='line-number'>193</span>	                &lt;/div&gt;
<span class='line-number'>194</span>	            }
<span class='line-number'>195</span>	
<span class='line-number'>196</span>	            @* Features lists *@
<span class='line-number'>197</span>	            @if (featuresCount &gt; 0 &amp;&amp; featuresCount &lt; 10)
<span class='line-number'>198</span>	            {
<span class='line-number'>199</span>	                &lt;div class=&quot;grid__col-12 grid__col--bleed-y&quot;&gt;
<span class='line-number'>200</span>	                    &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Product information&quot;)&lt;/h2&gt;
<span class='line-number'>201</span>	                    &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>202</span>	                        @if (GetLoop(&quot;CustomFieldValues&quot;).Count &gt; 0)
<span class='line-number'>203</span>	                        {
<span class='line-number'>204</span>	                            &lt;div class=&quot;grid__col-md-6 grid__col-sm-6&quot;&gt;
<span class='line-number'>205</span>	                                &lt;table class=&quot;table table--clean table--compact u-margin-bottom&quot;&gt;
<span class='line-number'>206</span>	                                    @foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;))
<span class='line-number'>207</span>	                                    {
<span class='line-number'>208</span>	                                        string fieldValue = customField.GetString(&quot;Product.CustomField.Value&quot;);
<span class='line-number'>209</span>	
<span class='line-number'>210</span>	                                        if (customField.GetLoop(&quot;Product.CustomField.Options&quot;).Count &gt; 0)
<span class='line-number'>211</span>	                                        {
<span class='line-number'>212</span>	                                            fieldValue = &quot;&quot;;
<span class='line-number'>213</span>	                                            int count = 0;
<span class='line-number'>214</span>	
<span class='line-number'>215</span>	                                            foreach (LoopItem customFieldOptions in customField.GetLoop(&quot;Product.CustomField.Options&quot;))
<span class='line-number'>216</span>	                                            {
<span class='line-number'>217</span>	                                                if (customFieldOptions.GetBoolean(&quot;Product.CustomField.Option.IsSelected&quot;))
<span class='line-number'>218</span>	                                                {
<span class='line-number'>219</span>	                                                    if (count != 0)
<span class='line-number'>220</span>	                                                    {
<span class='line-number'>221</span>	                                                        fieldValue += &quot;, &quot;;
<span class='line-number'>222</span>	                                                    }
<span class='line-number'>223</span>	
<span class='line-number'>224</span>	                                                    fieldValue += customFieldOptions.GetString(&quot;Product.CustomField.Option.Name&quot;);
<span class='line-number'>225</span>	                                                    count++;
<span class='line-number'>226</span>	                                                }
<span class='line-number'>227</span>	                                            }
<span class='line-number'>228</span>	                                        }
<span class='line-number'>229</span>	
<span class='line-number'>230</span>	                                        if (fieldValue == &quot;False&quot;)
<span class='line-number'>231</span>	                                        {
<span class='line-number'>232</span>	                                            fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>233</span>	                                        }
<span class='line-number'>234</span>	
<span class='line-number'>235</span>	                                        if (fieldValue == &quot;True&quot;)
<span class='line-number'>236</span>	                                        {
<span class='line-number'>237</span>	                                            fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>238</span>	                                        }
<span class='line-number'>239</span>	
<span class='line-number'>240</span>	                                        if (!String.IsNullOrEmpty(customField.GetString(&quot;Product.CustomField.Name&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>241</span>	                                        {
<span class='line-number'>242</span>	                                            &lt;tr&gt;
<span class='line-number'>243</span>	                                                &lt;td width=&quot;160&quot;&gt;@customField.GetString(&quot;Product.CustomField.Name&quot;):&lt;/td&gt;
<span class='line-number'>244</span>	                                                @if (!String.IsNullOrEmpty(customField.GetString(&quot;Document.FullPath&quot;)))
<span class='line-number'>245</span>	                                                {
<span class='line-number'>246</span>	                                                    &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@customField.GetString(&quot;Document.FullPath&quot;)&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;i class=&quot;fa fa-arrow-circle-down&quot;&gt;&lt;/i&gt; @fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>247</span>	                                                }
<span class='line-number'>248</span>	                                                else
<span class='line-number'>249</span>	                                                {
<span class='line-number'>250</span>	                                                    &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>251</span>	                                                }
<span class='line-number'>252</span>	                                            &lt;/tr&gt;
<span class='line-number'>253</span>	                                        }
<span class='line-number'>254</span>	                                    }
<span class='line-number'>255</span>	                                &lt;/table&gt;
<span class='line-number'>256</span>	                            &lt;/div&gt;
<span class='line-number'>257</span>	                            &lt;div class=&quot;grid__col-md-6 grid__col-sm-6&quot;&gt;&lt;/div&gt;
<span class='line-number'>258</span>	                        }
<span class='line-number'>259</span>	
<span class='line-number'>260</span>	                        @if (GetLoop(&quot;ProductCategories&quot;).Count &gt; 0)
<span class='line-number'>261</span>	                        {
<span class='line-number'>262</span>	                            &lt;div class=&quot;grid__col-md-6 grid__col-sm-6&quot;&gt;
<span class='line-number'>263</span>	                                &lt;table class=&quot;table table--clean table--compact u-margin-bottom&quot;&gt;
<span class='line-number'>264</span>	                                    @foreach (LoopItem categoryGroup in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'>265</span>	                                    {
<span class='line-number'>266</span>	                                        int fieldsCount = 0;
<span class='line-number'>267</span>	                                        foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>268</span>	                                        {
<span class='line-number'>269</span>	                                            if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;)))
<span class='line-number'>270</span>	                                            {
<span class='line-number'>271</span>	                                                fieldsCount++;
<span class='line-number'>272</span>	                                            }
<span class='line-number'>273</span>	                                        }
<span class='line-number'>274</span>	
<span class='line-number'>275</span>	                                        if (fieldsCount &gt; 0)
<span class='line-number'>276</span>	                                        {
<span class='line-number'>277</span>	                                            &lt;tr&gt;
<span class='line-number'>278</span>	                                                &lt;td colspan=&quot;2&quot; class=&quot;u-ta-left table__section-header dw-mod&quot;&gt;@categoryGroup.GetString(&quot;Ecom:Product.Category.Name&quot;)&lt;/td&gt;
<span class='line-number'>279</span>	                                            &lt;/tr&gt;
<span class='line-number'>280</span>	
<span class='line-number'>281</span>	                                            foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>282</span>	                                            {
<span class='line-number'>283</span>	                                                string fieldValue = categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;);
<span class='line-number'>284</span>	
<span class='line-number'>285</span>	                                                if (fieldValue == &quot;False&quot;)
<span class='line-number'>286</span>	                                                {
<span class='line-number'>287</span>	                                                    fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>288</span>	                                                }
<span class='line-number'>289</span>	
<span class='line-number'>290</span>	                                                if (fieldValue == &quot;True&quot;)
<span class='line-number'>291</span>	                                                {
<span class='line-number'>292</span>	                                                    fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>293</span>	                                                }
<span class='line-number'>294</span>	
<span class='line-number'>295</span>	                                                if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>296</span>	                                                {
<span class='line-number'>297</span>	                                                    &lt;tr&gt;
<span class='line-number'>298</span>	                                                        &lt;td width=&quot;160&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;):&lt;/td&gt;
<span class='line-number'>299</span>	                                                        @if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;9&quot;)
<span class='line-number'>300</span>	                                                        {
<span class='line-number'>301</span>	                                                            &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@fieldValue&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;i class=&quot;fa fa-arrow-circle-down&quot;&gt;&lt;/i&gt; @fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>302</span>	                                                        }
<span class='line-number'>303</span>	                                                        else
<span class='line-number'>304</span>	                                                        {
<span class='line-number'>305</span>	                                                            &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>306</span>	                                                        }
<span class='line-number'>307</span>	                                                    &lt;/tr&gt;
<span class='line-number'>308</span>	                                                }
<span class='line-number'>309</span>	                                            }
<span class='line-number'>310</span>	                                        }
<span class='line-number'>311</span>	                                    }
<span class='line-number'>312</span>	                                &lt;/table&gt;
<span class='line-number'>313</span>	                            &lt;/div&gt;
<span class='line-number'>314</span>	                            &lt;div class=&quot;grid__col-md-6 grid__col-sm-6&quot;&gt;&lt;/div&gt;
<span class='line-number'>315</span>	                        }
<span class='line-number'>316</span>	                    &lt;/div&gt;
<span class='line-number'>317</span>	                &lt;/div&gt;
<span class='line-number'>318</span>	            }
<span class='line-number'>319</span>	
<span class='line-number'>320</span>	            @if (featuresCount &gt;= 10)
<span class='line-number'>321</span>	            {
<span class='line-number'>322</span>	                &lt;div class=&quot;grid__col-12 grid__col--bleed-y&quot;&gt;
<span class='line-number'>323</span>	                    &lt;input type=&quot;checkbox&quot; id=&quot;expandable-text-trigger&quot; class=&quot;expandable-text-trigger&quot; /&gt;
<span class='line-number'>324</span>	                    &lt;div class=&quot;expandable-text-container&quot;&gt;
<span class='line-number'>325</span>	                        &lt;div class=&quot;expandable-text-container__content dw-mod&quot;&gt;
<span class='line-number'>326</span>	                            &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Product information&quot;)&lt;/h2&gt;
<span class='line-number'>327</span>	                            &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>328</span>	                                @if (GetLoop(&quot;CustomFieldValues&quot;).Count &gt; 0)
<span class='line-number'>329</span>	                                {
<span class='line-number'>330</span>	                                    &lt;div class=&quot;grid__col-md-5 grid__col-sm-6&quot;&gt;
<span class='line-number'>331</span>	                                        &lt;table class=&quot;table table--clean table--compact u-margin-bottom&quot;&gt;
<span class='line-number'>332</span>	                                            @foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;))
<span class='line-number'>333</span>	                                            {
<span class='line-number'>334</span>	                                                string fieldValue = customField.GetString(&quot;Product.CustomField.Value.Clean&quot;);
<span class='line-number'>335</span>	
<span class='line-number'>336</span>	                                                if (customField.GetLoop(&quot;Product.CustomField.Options&quot;).Count &gt; 0)
<span class='line-number'>337</span>	                                                {
<span class='line-number'>338</span>	                                                    fieldValue = &quot;&quot;;
<span class='line-number'>339</span>	                                                    int count = 0;
<span class='line-number'>340</span>	
<span class='line-number'>341</span>	                                                    foreach (LoopItem customFieldOptions in customField.GetLoop(&quot;Product.CustomField.Options&quot;))
<span class='line-number'>342</span>	                                                    {
<span class='line-number'>343</span>	                                                        if (customFieldOptions.GetBoolean(&quot;Product.CustomField.Option.IsSelected&quot;))
<span class='line-number'>344</span>	                                                        {
<span class='line-number'>345</span>	                                                            if (count != 0)
<span class='line-number'>346</span>	                                                            {
<span class='line-number'>347</span>	                                                                fieldValue += &quot;, &quot;;
<span class='line-number'>348</span>	                                                            }
<span class='line-number'>349</span>	
<span class='line-number'>350</span>	                                                            fieldValue += customFieldOptions.GetString(&quot;Product.CustomField.Option.Name&quot;);
<span class='line-number'>351</span>	                                                            count++;
<span class='line-number'>352</span>	                                                        }
<span class='line-number'>353</span>	                                                    }
<span class='line-number'>354</span>	                                                }
<span class='line-number'>355</span>	
<span class='line-number'>356</span>	                                                if (fieldValue == &quot;False&quot;)
<span class='line-number'>357</span>	                                                {
<span class='line-number'>358</span>	                                                    fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>359</span>	                                                }
<span class='line-number'>360</span>	
<span class='line-number'>361</span>	                                                if (fieldValue == &quot;True&quot;)
<span class='line-number'>362</span>	                                                {
<span class='line-number'>363</span>	                                                    fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>364</span>	                                                }
<span class='line-number'>365</span>	
<span class='line-number'>366</span>	                                                if (!String.IsNullOrEmpty(customField.GetString(&quot;Product.CustomField.Name&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>367</span>	                                                {
<span class='line-number'>368</span>	                                                    &lt;tr&gt;
<span class='line-number'>369</span>	                                                        &lt;td width=&quot;160&quot;&gt;@customField.GetString(&quot;Product.CustomField.Name&quot;):&lt;/td&gt;
<span class='line-number'>370</span>	                                                        @if (!String.IsNullOrEmpty(customField.GetString(&quot;Document.FullPath&quot;)))
<span class='line-number'>371</span>	                                                        {
<span class='line-number'>372</span>	                                                            documentsCount++;
<span class='line-number'>373</span>	                                                            &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@customField.GetString(&quot;Document.FullPath&quot;)&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;&lt;i class=&quot;fa fa-arrow-circle-down&quot;&gt;&lt;/i&gt; @fieldValue&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>374</span>	                                                        }
<span class='line-number'>375</span>	                                                        else
<span class='line-number'>376</span>	                                                        {
<span class='line-number'>377</span>	                                                            &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>378</span>	                                                        }
<span class='line-number'>379</span>	                                                    &lt;/tr&gt;
<span class='line-number'>380</span>	                                                }
<span class='line-number'>381</span>	                                            }
<span class='line-number'>382</span>	                                        &lt;/table&gt;
<span class='line-number'>383</span>	                                    &lt;/div&gt;
<span class='line-number'>384</span>	                                    &lt;div class=&quot;grid__col-md-5 grid__col-sm-6&quot;&gt;&lt;/div&gt;
<span class='line-number'>385</span>	                                }
<span class='line-number'>386</span>	
<span class='line-number'>387</span>	                                @if (GetLoop(&quot;ProductCategories&quot;).Count &gt; 0)
<span class='line-number'>388</span>	                                {
<span class='line-number'>389</span>	                                    &lt;div class=&quot;grid__col-md-5 grid__col-sm-6&quot;&gt;
<span class='line-number'>390</span>	                                        &lt;table class=&quot;table table--clean table--compact u-margin-bottom&quot;&gt;
<span class='line-number'>391</span>	                                            @foreach (LoopItem categoryGroup in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'>392</span>	                                            {
<span class='line-number'>393</span>	                                                int fieldsCount = 0;
<span class='line-number'>394</span>	                                                foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>395</span>	                                                {
<span class='line-number'>396</span>	                                                    if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;)))
<span class='line-number'>397</span>	                                                    {
<span class='line-number'>398</span>	                                                        fieldsCount++;
<span class='line-number'>399</span>	                                                    }
<span class='line-number'>400</span>	                                                }
<span class='line-number'>401</span>	
<span class='line-number'>402</span>	                                                if (fieldsCount &gt; 0)
<span class='line-number'>403</span>	                                                {
<span class='line-number'>404</span>	                                                    &lt;tr&gt;
<span class='line-number'>405</span>	                                                        &lt;td colspan=&quot;2&quot; class=&quot;u-ta-left table__section-header dw-mod&quot;&gt;@categoryGroup.GetString(&quot;Ecom:Product.Category.Name&quot;)&lt;/td&gt;
<span class='line-number'>406</span>	                                                    &lt;/tr&gt;
<span class='line-number'>407</span>	
<span class='line-number'>408</span>	                                                    foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>409</span>	                                                    {
<span class='line-number'>410</span>	                                                        string fieldValue = categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;);
<span class='line-number'>411</span>	
<span class='line-number'>412</span>	                                                        if (fieldValue == &quot;False&quot;)
<span class='line-number'>413</span>	                                                        {
<span class='line-number'>414</span>	                                                            fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>415</span>	                                                        }
<span class='line-number'>416</span>	
<span class='line-number'>417</span>	                                                        if (fieldValue == &quot;True&quot;)
<span class='line-number'>418</span>	                                                        {
<span class='line-number'>419</span>	                                                            fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>420</span>	                                                        }
<span class='line-number'>421</span>	
<span class='line-number'>422</span>	                                                        if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>423</span>	                                                        {
<span class='line-number'>424</span>	                                                            &lt;tr&gt;
<span class='line-number'>425</span>	                                                                &lt;td width=&quot;160&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;):&lt;/td&gt;
<span class='line-number'>426</span>	                                                                @if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;9&quot;)
<span class='line-number'>427</span>	                                                                {
<span class='line-number'>428</span>	                                                                    documentsCount++;
<span class='line-number'>429</span>	                                                                    &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@fieldValue&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;i class=&quot;fa fa-arrow-circle-down&quot;&gt;&lt;/i&gt; @fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>430</span>	                                                                }
<span class='line-number'>431</span>	                                                                else
<span class='line-number'>432</span>	                                                                {
<span class='line-number'>433</span>	                                                                    &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>434</span>	                                                                }
<span class='line-number'>435</span>	                                                            &lt;/tr&gt;
<span class='line-number'>436</span>	                                                        }
<span class='line-number'>437</span>	                                                    }
<span class='line-number'>438</span>	                                                }
<span class='line-number'>439</span>	                                            }
<span class='line-number'>440</span>	                                        &lt;/table&gt;
<span class='line-number'>441</span>	                                    &lt;/div&gt;
<span class='line-number'>442</span>	                                    &lt;div class=&quot;grid__col-md-5 grid__col-sm-6&quot;&gt;&lt;/div&gt;
<span class='line-number'>443</span>	                                }
<span class='line-number'>444</span>	                            &lt;/div&gt;
<span class='line-number'>445</span>	                        &lt;/div&gt;
<span class='line-number'>446</span>	
<span class='line-number'>447</span>	                        &lt;div class=&quot;u-ta-center&quot;&gt;
<span class='line-number'>448</span>	                            &lt;label for=&quot;expandable-text-trigger&quot; class=&quot;btn btn--secondary expandable-text-container__btn more dw-mod&quot;&gt;@Translate(&quot;Show more&quot;)&lt;/label&gt;
<span class='line-number'>449</span>	                            &lt;label for=&quot;expandable-text-trigger&quot; class=&quot;btn btn--secondary expandable-text-container__btn less dw-mod&quot;&gt;@Translate(&quot;Show less&quot;)&lt;/label&gt;
<span class='line-number'>450</span>	                        &lt;/div&gt;
<span class='line-number'>451</span>	                    &lt;/div&gt;
<span class='line-number'>452</span>	                &lt;/div&gt;
<span class='line-number'>453</span>	            }
<span class='line-number'>454</span>	
<span class='line-number'>455</span>	            @* Related products *@
<span class='line-number'>456</span>	            &lt;div class=&quot;grid js-ajax-container&quot; id=&quot;ProductList&quot; data-template=&quot;ProductContainer&quot; data-pre-render-template=&quot;ProductPreRenderContainer&quot; data-json-feed=&quot;@feedFullUrl&quot; data-preloader=&quot;overlay&quot;&gt;&lt;/div&gt;
<span class='line-number'>457</span>	        &lt;/div&gt;
<span class='line-number'>458</span>	    &lt;/div&gt;
<span class='line-number'>459</span>	&lt;/div&gt;
<span class='line-number'>460</span>	&lt;aside class=&quot;panel panel--right dw-mod&quot;&gt;
<span class='line-number'>461</span>	    &lt;label for=&quot;PIMProductToolsTrigger&quot; class=&quot;panel-trigger-btn grid--justify-center dw-mod&quot;&gt;&lt;/label&gt;
<span class='line-number'>462</span>	
<span class='line-number'>463</span>	        &lt;div class=&quot;panel__content dw-mod&quot;&gt;
<span class='line-number'>464</span>	            &lt;form action=&quot;/Default.aspx?ID=@exportPageId&amp;ProductID=@System.Web.HttpContext.Current.Request.QueryString.Get(&quot;ProductID&quot;)&quot; method=&quot;post&quot;&gt;
<span class='line-number'>465</span>	                &lt;div class=&quot;panel__content__body panel__content__body--auto-height-400px dw-mod&quot;&gt;
<span class='line-number'>466</span>	                    &lt;h6 class=&quot;panel__header dw-mod&quot;&gt;@Translate(&quot;Images&quot;) (@(thumbsCount))&lt;/h6&gt;
<span class='line-number'>467</span>	                    @if (thumbsCount &gt; 0)
<span class='line-number'>468</span>	                    {
<span class='line-number'>469</span>	                        &lt;ul class=&quot;list list--clean dw-mod&quot;&gt;
<span class='line-number'>470</span>	                            &lt;li&gt;
<span class='line-number'>471</span>	                                &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>472</span>	                                    &lt;div class=&quot;grid__col-xs-1 grid--align-self-center&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;Image_@GetString(&quot;Ecom:Product.ImageSmall.Default.Clean&quot;)&quot; class=&quot;u-no-margin&quot; /&gt;&lt;/div&gt;
<span class='line-number'>473</span>	                                    &lt;div class=&quot;grid__col-xs-3 grid__col--bleed-y&quot;&gt;&lt;img src=&quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image=@GetString(&quot;Ecom:Product.ImageSmall.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot; class=&quot;flex-img&quot;&gt;&lt;/div&gt;
<span class='line-number'>474</span>	                                    &lt;div class=&quot;grid__col-xs-8 grid--align-self-center grid__col--bleed-y&quot;&gt;@GetString(&quot;Ecom:Product.Name&quot;)&lt;/div&gt;
<span class='line-number'>475</span>	                                &lt;/div&gt;
<span class='line-number'>476</span>	                            &lt;/li&gt;
<span class='line-number'>477</span>	
<span class='line-number'>478</span>	                            @foreach (LoopItem alternativeImage in GetLoop(&quot;Ecom:Product.AlternativeImages&quot;))
<span class='line-number'>479</span>	                            {
<span class='line-number'>480</span>	                                if (!String.IsNullOrEmpty(alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;)))
<span class='line-number'>481</span>	                                {
<span class='line-number'>482</span>	                                    string image = alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>483</span>	                                    string thumb = &quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image=&quot; + image;
<span class='line-number'>484</span>	
<span class='line-number'>485</span>	                                    &lt;li&gt;
<span class='line-number'>486</span>	                                        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>487</span>	                                            &lt;div class=&quot;grid__col-xs-1 grid--align-self-center&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;Image_@image&quot; class=&quot;u-no-margin&quot; /&gt;&lt;/div&gt;
<span class='line-number'>488</span>	                                            &lt;div class=&quot;grid__col-xs-3 grid__col--bleed-y&quot;&gt;&lt;img src=&quot;@thumb&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'>489</span>	                                            &lt;div class=&quot;grid__col-xs-8 grid--align-self-center grid__col--bleed-y&quot;&gt;&lt;span class=&quot;u-truncate-text u-w170px&quot;&gt;@GetString(&quot;Ecom:Product.Name&quot;)&lt;/span&gt;&lt;/div&gt;
<span class='line-number'>490</span>	                                        &lt;/div&gt;
<span class='line-number'>491</span>	                                    &lt;/li&gt;
<span class='line-number'>492</span>	                                }
<span class='line-number'>493</span>	                            }
<span class='line-number'>494</span>	
<span class='line-number'>495</span>	                            @foreach (LoopItem detail in GetLoop(&quot;Details&quot;))
<span class='line-number'>496</span>	                            {
<span class='line-number'>497</span>	                                string image = detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>498</span>	                                string thumb = &quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image=&quot; + image;
<span class='line-number'>499</span>	                                &lt;li&gt;
<span class='line-number'>500</span>	                                    &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>501</span>	                                        &lt;div class=&quot;grid__col-xs-1 grid--align-self-center&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;Image_@image&quot; class=&quot;u-no-margin&quot; /&gt;&lt;/div&gt;
<span class='line-number'>502</span>	                                        &lt;div class=&quot;grid__col-xs-3 grid__col--bleed-y&quot;&gt;&lt;img src=&quot;@thumb&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot; class=&quot;flex-img&quot;&gt;&lt;/div&gt;
<span class='line-number'>503</span>	                                        &lt;div class=&quot;grid__col-xs-8 grid--align-self-center grid__col--bleed-y&quot;&gt;&lt;span class=&quot;u-truncate-text u-w170px&quot;&gt;@GetString(&quot;Ecom:Product.Name&quot;)&lt;/span&gt;&lt;/div&gt;
<span class='line-number'>504</span>	                                    &lt;/div&gt;
<span class='line-number'>505</span>	                                &lt;/li&gt;
<span class='line-number'>506</span>	                            }
<span class='line-number'>507</span>	                        &lt;/ul&gt;
<span class='line-number'>508</span>	                    }
<span class='line-number'>509</span>	
<span class='line-number'>510</span>	                    @if (documentsCount &gt; 0)
<span class='line-number'>511</span>	                    {
<span class='line-number'>512</span>	                        &lt;h6 class=&quot;panel__header panel__header--line dw-mod&quot;&gt;@Translate(&quot;Documents&quot;) (@documentsCount)&lt;/h6&gt;
<span class='line-number'>513</span>	
<span class='line-number'>514</span>	                        &lt;ul class=&quot;list list--clean dw-mod&quot;&gt;
<span class='line-number'>515</span>	                            @foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;))
<span class='line-number'>516</span>	                            {
<span class='line-number'>517</span>	                                if (!String.IsNullOrEmpty(customField.GetString(&quot;Document.FullPath&quot;)))
<span class='line-number'>518</span>	                                {
<span class='line-number'>519</span>	                                    &lt;li&gt;
<span class='line-number'>520</span>	                                        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>521</span>	                                            &lt;div class=&quot;grid__col-xs-1 grid__col--bleed-y&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;Document_@customField.GetString(&quot;Document.FullPath&quot;)&quot; class=&quot;u-no-margin&quot; /&gt;&lt;/div&gt;
<span class='line-number'>522</span>	                                            &lt;div class=&quot;grid__col-xs-11 grid__col--bleed-y&quot;&gt;&lt;span class=&quot;u-truncate-text u-max-w220px&quot;&gt;@Path.GetFileName(customField.GetString(&quot;Document.FullPath&quot;))&lt;/span&gt;&lt;/div&gt;
<span class='line-number'>523</span>	                                        &lt;/div&gt;
<span class='line-number'>524</span>	                                    &lt;/li&gt;
<span class='line-number'>525</span>	                                }
<span class='line-number'>526</span>	                            }
<span class='line-number'>527</span>	
<span class='line-number'>528</span>	                            @foreach (LoopItem categoryGroup in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'>529</span>	                            {
<span class='line-number'>530</span>	                                foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>531</span>	                                {
<span class='line-number'>532</span>	                                    string fieldValue = categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;);
<span class='line-number'>533</span>	
<span class='line-number'>534</span>	                                    if (!String.IsNullOrEmpty(fieldValue))
<span class='line-number'>535</span>	                                    {
<span class='line-number'>536</span>	                                        if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;9&quot;)
<span class='line-number'>537</span>	                                        {
<span class='line-number'>538</span>	                                            &lt;li&gt;
<span class='line-number'>539</span>	                                                &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>540</span>	                                                    &lt;div class=&quot;grid__col-xs-1 grid__col--bleed-y&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;Document_@fieldValue&quot; class=&quot;u-no-margin&quot; /&gt;&lt;/div&gt;
<span class='line-number'>541</span>	                                                    &lt;div class=&quot;grid__col-xs-11 grid__col--bleed-y&quot;&gt;&lt;span class=&quot;u-truncate-text u-max-w220px&quot;&gt;@Path.GetFileName(fieldValue)&lt;/span&gt;&lt;/div&gt;
<span class='line-number'>542</span>	                                                &lt;/div&gt;
<span class='line-number'>543</span>	                                            &lt;/li&gt;
<span class='line-number'>544</span>	                                        }
<span class='line-number'>545</span>	                                    }
<span class='line-number'>546</span>	                                }
<span class='line-number'>547</span>	                            }
<span class='line-number'>548</span>	                        &lt;/ul&gt;
<span class='line-number'>549</span>	                    }
<span class='line-number'>550</span>	                &lt;/div&gt;
<span class='line-number'>551</span>	
<span class='line-number'>552</span>	                &lt;div class=&quot;panel__content__footer panel__content__footer--400px dw-mod&quot;&gt;
<span class='line-number'>553</span>	                &lt;input id=&quot;ID&quot; name=&quot;ID&quot; type=&quot;hidden&quot; value=&quot;532&quot; /&gt;
<span class='line-number'>554</span>	                &lt;input id=&quot;download&quot; name=&quot;download&quot; type=&quot;hidden&quot; value=&quot;true&quot; /&gt;
<span class='line-number'>555</span>	                &lt;input id=&quot;siteUrl&quot; name=&quot;siteUrl&quot; type=&quot;hidden&quot; value=&quot;@string.Format(&quot;{0}://{1}&quot;, GetGlobalValue(&quot;Global:Request.Scheme&quot;), GetGlobalValue(&quot;Global:Request.Host&quot;))&quot; /&gt;
<span class='line-number'>556</span>	
<span class='line-number'>557</span>	                &lt;h6 class=&quot;panel__header panel__header--line dw-mod&quot;&gt;@Translate(&quot;Export&quot;)&lt;/h6&gt;
<span class='line-number'>558</span>	
<span class='line-number'>559</span>	                &lt;label&gt;@Translate(&quot;Language&quot;)&lt;/label&gt;
<span class='line-number'>560</span>	                &lt;select id=&quot;exportLanguage&quot; name=&quot;LanguageId&quot; class=&quot;u-full-width&quot;&gt;
<span class='line-number'>561</span>	                    @foreach (Language lang in Language.GetLanguages())
<span class='line-number'>562</span>	                    {
<span class='line-number'>563</span>	                        &lt;option value=&quot;@lang.LanguageId&quot;&gt;@lang.Name&lt;/option&gt;
<span class='line-number'>564</span>	                    }
<span class='line-number'>565</span>	                &lt;/select&gt;
<span class='line-number'>566</span>	
<span class='line-number'>567</span>	                &lt;label&gt;@Translate(&quot;Purpose&quot;)&lt;/label&gt;
<span class='line-number'>568</span>	                &lt;select id=&quot;purpose&quot; name=&quot;purpose&quot; class=&quot;u-full-width&quot;&gt;
<span class='line-number'>569</span>	                    &lt;option value=&quot;Original&quot;&gt;@Translate(&quot;Original&quot;)&lt;/option&gt;
<span class='line-number'>570</span>	                    &lt;option value=&quot;Print&quot;&gt;@Translate(&quot;Print&quot;)&lt;/option&gt;
<span class='line-number'>571</span>	                    &lt;option value=&quot;Office&quot;&gt;@Translate(&quot;Office&quot;)&lt;/option&gt;
<span class='line-number'>572</span>	                    &lt;option value=&quot;Web&quot;&gt;Web&lt;/option&gt;
<span class='line-number'>573</span>	                &lt;/select&gt;
<span class='line-number'>574</span>	
<span class='line-number'>575</span>	                &lt;label&gt;@Translate(&quot;Export format&quot;)&lt;/label&gt;
<span class='line-number'>576</span>	                &lt;select id=&quot;exportFormat&quot; name=&quot;format&quot; class=&quot;u-full-width&quot;&gt;
<span class='line-number'>577</span>	                    &lt;option value=&quot;xml&quot;&gt;Xml&lt;/option&gt;
<span class='line-number'>578</span>	                    &lt;option value=&quot;json&quot;&gt;Json&lt;/option&gt;
<span class='line-number'>579</span>	                    &lt;option value=&quot;csv&quot;&gt;Csv&lt;/option&gt;
<span class='line-number'>580</span>	                &lt;/select&gt;
<span class='line-number'>581</span>	
<span class='line-number'>582</span>	                &lt;input type=&quot;submit&quot; value=&quot;@Translate(&quot;Download&quot;)&quot; class=&quot;btn btn--full btn--primary dw-mod&quot; title=&quot;@Translate(&quot;Download&quot;)&quot; /&gt;
<span class='line-number'>583</span>	            &lt;/div&gt;
<span class='line-number'>584</span>	            &lt;/form&gt;
<span class='line-number'>585</span>	
<span class='line-number'>586</span>	                &lt;form action=&quot;/Default.aspx?ID=@exportPageId&amp;ProductID=@System.Web.HttpContext.Current.Request.QueryString.Get(&quot;ProductID&quot;)&amp;GeneratePdf=true&quot; method=&quot;post&quot;&gt;
<span class='line-number'>587</span>	            &lt;div class=&quot;panel__content__footer panel__content__footer--400px dw-mod&quot;&gt;
<span class='line-number'>588</span>	                &lt;h6 class=&quot;panel__header panel__header--line dw-mod&quot;&gt;@Translate(&quot;Generate PDF&quot;)&lt;/h6&gt;
<span class='line-number'>589</span>	                &lt;input id=&quot;siteUrl&quot; name=&quot;siteUrl&quot; type=&quot;hidden&quot; value=&quot;@string.Format(&quot;{0}://{1}&quot;, GetGlobalValue(&quot;Global:Request.Scheme&quot;), GetGlobalValue(&quot;Global:Request.Host&quot;))&quot; /&gt;
<span class='line-number'>590</span>	                &lt;label&gt;@Translate(&quot;Language&quot;)&lt;/label&gt;
<span class='line-number'>591</span>	                &lt;select id=&quot;PdfLanguageId&quot; name=&quot;PdfLanguageId&quot; class=&quot;u-full-width&quot;&gt;
<span class='line-number'>592</span>	                    @foreach (Language lang in Language.GetLanguages())
<span class='line-number'>593</span>	                    {
<span class='line-number'>594</span>	                        &lt;option value=&quot;@lang.LanguageId&quot;&gt;@lang.Name&lt;/option&gt;
<span class='line-number'>595</span>	                    }
<span class='line-number'>596</span>	                &lt;/select&gt;
<span class='line-number'>597</span>	
<span class='line-number'>598</span>	                &lt;label&gt;@Translate(&quot;Generate PDF&quot;)&lt;/label&gt;
<span class='line-number'>599</span>	                &lt;select id=&quot;PdfPageId&quot; name=&quot;PdfPageId&quot; class=&quot;u-full-width&quot;&gt;
<span class='line-number'>600</span>	                    &lt;option value=&quot;&quot; selected&gt;@Translate(&quot;Select type&quot;)&lt;/option&gt;
<span class='line-number'>601</span>	                    @foreach (Dynamicweb.Content.Page page in ServiceLocator.Current.GetPageService().GetPagesByParentID(pdfFolderId))
<span class='line-number'>602</span>	                    {
<span class='line-number'>603</span>	                        &lt;option value=&quot;@page.ID&quot; selected&gt;@page.MenuText&lt;/option&gt;
<span class='line-number'>604</span>	                    }
<span class='line-number'>605</span>	                &lt;/select&gt;
<span class='line-number'>606</span>	
<span class='line-number'>607</span>	                &lt;input type=&quot;submit&quot; value=&quot;@Translate(&quot;Generate PDF&quot;)&quot; class=&quot;btn btn--full btn--primary dw-mod&quot; title=&quot;@Translate(&quot;Generate PDF&quot;)&quot; /&gt;
<span class='line-number'>608</span>	            &lt;/div&gt;
<span class='line-number'>609</span>	                &lt;/form&gt;
<span class='line-number'>610</span>	&lt;/div&gt;
<span class='line-number'>611</span>	&lt;/aside&gt;
<span class='line-number'>612</span>	
<span class='line-number'>613</span>	@* Script templates for the updateable product content *@
<span class='line-number'>614</span>	&lt;script id=&quot;productUpdateableContentTemplate&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>615</span>	    &lt;div class=&quot;grid product&quot;&gt;
<span class='line-number'>616</span>	        @* Image block with optional thumbs *@
<span class='line-number'>617</span>	        &lt;div class=&quot;grid__col-md-6 grid__col-sm-6&quot;&gt;
<span class='line-number'>618</span>	            &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>619</span>	                &lt;div class=&quot;grid__col-2 u-color-light-gray--bg u-hidden-xxs &quot;&gt;
<span class='line-number'>620</span>	                    &lt;div class=&quot;thumb-list&quot;&gt;
<span class='line-number'>621</span>	                        &lt;div id=&quot;ThumbnailImages&quot; data-template=&quot;ThumbnailImageTemplate&quot;&gt;&lt;/div&gt;
<span class='line-number'>622</span>	                    &lt;/div&gt;
<span class='line-number'>623</span>	                &lt;/div&gt;
<span class='line-number'>624</span>	
<span class='line-number'>625</span>	                &lt;div class=&quot;grid__col-auto&quot;&gt;
<span class='line-number'>626</span>	                    &lt;div class=&quot;sticker {{onSale}} dw-mod&quot;&gt;@Translate(&quot;Sale!&quot;)&lt;/div&gt;
<span class='line-number'>627</span>	                    &lt;img class=&quot;thumb-image-view flex-img&quot; id=&quot;Image_{{id}}&quot; src=&quot;/Admin/Public/GetImage.ashx?height=550&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image={{image}}&quot; alt=&quot;{{name}}&quot; /&gt;
<span class='line-number'>628</span>	                &lt;/div&gt;
<span class='line-number'>629</span>	            &lt;/div&gt;
<span class='line-number'>630</span>	        &lt;/div&gt;
<span class='line-number'>631</span>	
<span class='line-number'>632</span>	        @* Primary product informations *@
<span class='line-number'>633</span>	        &lt;div class=&quot;grid__col-auto&quot;&gt;
<span class='line-number'>634</span>	            &lt;div class=&quot;grid__cell&quot;&gt;
<span class='line-number'>635</span>	                &lt;div class=&quot;u-pull--left product__title dw-mod&quot;&gt;
<span class='line-number'>636</span>	                    &lt;h1 class=&quot;u-no-margin&quot;&gt;{{name}}&lt;/h1&gt;
<span class='line-number'>637</span>	                    &lt;div class=&quot;item-number dw-mod&quot;&gt;{{number}}&lt;/div&gt;
<span class='line-number'>638</span>	                &lt;/div&gt;
<span class='line-number'>639</span>	
<span class='line-number'>640</span>	                &lt;div&gt;
<span class='line-number'>641</span>	                    @* Short description *@
<span class='line-number'>642</span>	                    &lt;div class=&quot;introduction-text&quot;&gt;
<span class='line-number'>643</span>	                        {{description}}
<span class='line-number'>644</span>	                    &lt;/div&gt;
<span class='line-number'>645</span>	
<span class='line-number'>646</span>	                    @* Variants *@
<span class='line-number'>647</span>	                    &lt;div&gt;
<span class='line-number'>648</span>	                        @* Combinations div needed to handle variant options(used in script block with Variants.SetVariantOptionStatesForProductList function) and should not be deleted *@
<span class='line-number'>649</span>	                        &lt;div id=&quot;Combinations&quot; data-template=&quot;VariantCombinations&quot; data-product-id=&quot;{{id}}&quot; class=&quot;js-variants-wrap u-hidden&quot;&gt;&lt;/div&gt;
<span class='line-number'>650</span>	                        &lt;div id=&quot;Variants&quot; data-template=&quot;VariantGroup&quot; data-product-id=&quot;{{id}}&quot;&gt;&lt;/div&gt;
<span class='line-number'>651</span>	                        &lt;small id=&quot;helpText_{{id}}&quot; class=&quot;help-text {{hideViewMore}} {{hideHelpText}}&quot;&gt;@Translate(&quot;Please select variant!&quot;)&lt;/small&gt;
<span class='line-number'>652</span>	                    &lt;/div&gt;
<span class='line-number'>653</span>	                &lt;/div&gt;
<span class='line-number'>654</span>	            &lt;/div&gt;
<span class='line-number'>655</span>	
<span class='line-number'>656</span>	            &lt;div class=&quot;grid__cell-footer&quot;&gt;
<span class='line-number'>657</span>	                &lt;input type=&quot;hidden&quot; id=&quot;CartButton_{{id}}&quot; class=&quot;btn btn--primary dw-mod u-pull--right&quot; name=&quot;submit&quot; /&gt;
<span class='line-number'>658</span>	                &lt;input type=&quot;hidden&quot; value=&quot;{{variantid}}&quot; name=&quot;Variant&quot; id=&quot;Variant_{{id}}&quot; /&gt;
<span class='line-number'>659</span>	            &lt;/div&gt;
<span class='line-number'>660</span>	        &lt;/div&gt;
<span class='line-number'>661</span>	    &lt;/div&gt;
<span class='line-number'>662</span>	&lt;/script&gt;
<span class='line-number'>663</span>	
<span class='line-number'>664</span>	@* Thumbnail images *@
<span class='line-number'>665</span>	&lt;script id=&quot;ThumbnailImageTemplate&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>666</span>	    &lt;div class=&quot;thumb-list__item dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_{{productId}}&quot; data-image-path=&quot;/Admin/Public/GetImage.ashx?width=500&amp;amp;height=500&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image={{image}}&quot;&gt;&lt;img src=&quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image={{image}}&quot;&gt;&lt;/div&gt;
<span class='line-number'>667</span>	&lt;/script&gt;
<span class='line-number'>668</span>	
<span class='line-number'>669</span>	
<span class='line-number'>670</span>	@* Variants templates *@
<span class='line-number'>671</span>	&lt;script id=&quot;VariantGroup&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>672</span>	    &lt;div&gt;
<span class='line-number'>673</span>	        &lt;div&gt;{{name}}&lt;/div&gt;
<span class='line-number'>674</span>	        &lt;div id=&quot;VariantOptions&quot; data-template=&quot;VariantOption&quot;&gt;&lt;/div&gt;
<span class='line-number'>675</span>	    &lt;/div&gt;
<span class='line-number'>676</span>	&lt;/script&gt;
<span class='line-number'>677</span>	
<span class='line-number'>678</span>	&lt;script id=&quot;VariantOption&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>679</span>	    &lt;button type=&quot;button&quot; id=&quot;{{id}}&quot; data-product-id=&quot;@productId&quot; onclick=&quot;Variants.UpdateVariants(this)&quot; class=&quot;btn btn--tag {{disabled}} {{selected}}&quot; data-check=&quot;{{selected}}&quot; {{disabled}}&gt;{{name}}&lt;/button&gt;
<span class='line-number'>680</span>	&lt;/script&gt;
<span class='line-number'>681</span>	
<span class='line-number'>682</span>	@* Favorites templates *@
<span class='line-number'>683</span>	&lt;script id=&quot;FavoriteTemplate&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>684</span>	    &lt;div class=&quot;favorites-list u-pull--right u-ta-left&quot;&gt;
<span class='line-number'>685</span>	        &lt;i class=&quot;{{favoriteIcon}} fa-1_5x&quot;&gt;&lt;/i&gt;
<span class='line-number'>686</span>	        &lt;div class=&quot;favorites-list__container dw-mod&quot;&gt;
<span class='line-number'>687</span>	            &lt;ul id=&quot;FavoriteLists&quot; data-template=&quot;FavoriteListItem&quot; class=&quot;list list--clean dw-mod&quot;&gt;&lt;/ul&gt;
<span class='line-number'>688</span>	        &lt;/div&gt;
<span class='line-number'>689</span>	    &lt;/div&gt;
<span class='line-number'>690</span>	&lt;/script&gt;
<span class='line-number'>691</span>	
<span class='line-number'>692</span>	@* BOMProduct templates *@
<span class='line-number'>693</span>	&lt;script id=&quot;BOMProductTemplate&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>694</span>	    &lt;div class=&quot;grid__col--border grid&quot;&gt;
<span class='line-number'>695</span>	        &lt;div class=&quot;grid__cell grid__cell--align-middle-left&quot;&gt;
<span class='line-number'>696</span>	            &lt;a href=&quot;{{link}}&quot; class=&quot;u-pull--left u-margin-right&quot;&gt;
<span class='line-number'>697</span>	                &lt;img src=&quot;/Admin/Public/GetImage.ashx?width=50&amp;image={{image}}&amp;Compression=99&quot; /&gt;
<span class='line-number'>698</span>	            &lt;/a&gt;
<span class='line-number'>699</span>	            &lt;a href=&quot;{{link}}&quot;&gt;{{name}}&lt;/a&gt;
<span class='line-number'>700</span>	        &lt;/div&gt;
<span class='line-number'>701</span>	    &lt;/div&gt;
<span class='line-number'>702</span>	&lt;/script&gt;
<span class='line-number'>703</span>	
<span class='line-number'>704</span>	&lt;script id=&quot;FavoriteListItem&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>705</span>	    &lt;li&gt;
<span class='line-number'>706</span>	        &lt;a href=&quot;{{link}}&quot; class=&quot;list__link dw-mod&quot;&gt;&lt;i class=&quot;{{favoriteIcon}}&quot;&gt;&lt;/i&gt; {{name}}&lt;/a&gt;
<span class='line-number'>707</span>	    &lt;/li&gt;
<span class='line-number'>708</span>	&lt;/script&gt;
<span class='line-number'>709</span>	
<span class='line-number'>710</span>	&lt;script id=&quot;unitOption&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>711</span>	    &lt;div class=&quot;dropdown__item dw-mod&quot; onclick=&quot;Dynamo.UpdateContent(&#39;@productContainerId&#39;, &#39;@feedUrl&amp;ProductID=@productId&amp;UnitID={{value}}&#39;)&quot;&gt;{{name}}&lt;/div&gt;
<span class='line-number'>712</span>	&lt;/script&gt;
<span class='line-number'>713</span>	
<span class='line-number'>714</span>	
<span class='line-number'>715</span>	@* Script templates for related products *@
<span class='line-number'>716</span>	&lt;script id=&quot;ProductPreRenderContainer&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>717</span>	    &lt;div class=&quot;grid__col-md-4&quot;&gt;
<span class='line-number'>718</span>	        &lt;div class=&quot;pre-render-element pre-render-element--md&quot;&gt;&lt;/div&gt;
<span class='line-number'>719</span>	    &lt;/div&gt;
<span class='line-number'>720</span>	    &lt;div class=&quot;grid__col-md-4&quot;&gt;
<span class='line-number'>721</span>	        &lt;div class=&quot;pre-render-element pre-render-element--md&quot;&gt;&lt;/div&gt;
<span class='line-number'>722</span>	    &lt;/div&gt;
<span class='line-number'>723</span>	    &lt;div class=&quot;grid__col-md-4&quot;&gt;
<span class='line-number'>724</span>	        &lt;div class=&quot;pre-render-element pre-render-element--md&quot;&gt;&lt;/div&gt;
<span class='line-number'>725</span>	    &lt;/div&gt;
<span class='line-number'>726</span>	&lt;/script&gt;
<span class='line-number'>727</span>	
<span class='line-number'>728</span>	&lt;script id=&quot;ProductContainer&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>729</span>	    &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>730</span>	        &lt;h2 class=&quot;section-title section-title--condensed&quot;&gt;@Translate(&quot;What about these products?&quot;)&lt;/h2&gt;
<span class='line-number'>731</span>	    &lt;/div&gt;
<span class='line-number'>732</span>	
<span class='line-number'>733</span>	    &lt;div class=&quot;grid__col-1 grid__col--bleed-x&quot;&gt;
<span class='line-number'>734</span>	        &lt;div class=&quot;grid__cell grid__cell--align-middle-right&quot;&gt;
<span class='line-number'>735</span>	            &lt;button class=&quot;btn btn--condensed btn--clean {{prevdisabled}} dw-mod&quot; onclick=&quot;Dynamo.UpdateContent(&#39;ProductList&#39;, &#39;{{prevPage}}&#39;)&quot; {{prevdisabled}}&gt;&lt;i class=&quot;fa fa-chevron-left fa-2x&quot;&gt;&lt;/i&gt;&lt;/button&gt;
<span class='line-number'>736</span>	        &lt;/div&gt;
<span class='line-number'>737</span>	    &lt;/div&gt;
<span class='line-number'>738</span>	    &lt;div class=&quot;grid__col-10 grid__col--bleed-x&quot;&gt;
<span class='line-number'>739</span>	        &lt;div id=&quot;ProductsContainer&quot; class=&quot;grid product-list dw-mod&quot; data-template=&quot;ProductGridItemContainer&quot;&gt;&lt;/div&gt;
<span class='line-number'>740</span>	    &lt;/div&gt;
<span class='line-number'>741</span>	    &lt;div class=&quot;grid__col-1 grid__col--bleed-x&quot;&gt;
<span class='line-number'>742</span>	        &lt;div class=&quot;grid__cell grid__cell--align-middle-left&quot;&gt;
<span class='line-number'>743</span>	            &lt;button class=&quot;btn btn--condensed btn--clean {{nextdisabled}} dw-mod&quot; onclick=&quot;Dynamo.UpdateContent(&#39;ProductList&#39;, &#39;{{nextPage}}&#39;)&quot; {{nextdisabled}}&gt;&lt;i class=&quot;fa fa-chevron-right fa-2x&quot;&gt;&lt;/i&gt;&lt;/button&gt;
<span class='line-number'>744</span>	        &lt;/div&gt;
<span class='line-number'>745</span>	    &lt;/div&gt;
<span class='line-number'>746</span>	&lt;/script&gt;
<span class='line-number'>747</span>	
<span class='line-number'>748</span>	&lt;script id=&quot;ProductGridItemContainer&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>749</span>	    &lt;div id=&quot;Product&quot; class=&quot;grid__col-lg-4 grid__col-md-4 grid__col-sm-4 grid__col-xs-6&quot; data-template=&quot;ProductGridItem&quot; data-preloader=&quot;false&quot;&gt;&lt;/div&gt;
<span class='line-number'>750</span>	&lt;/script&gt;
<span class='line-number'>751</span>	
<span class='line-number'>752</span>	&lt;script id=&quot;ProductGridItem&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>753</span>	    &lt;div class=&quot;grid__cell u-border {{noImage}}&quot;&gt;
<span class='line-number'>754</span>	        &lt;div class=&quot;sticker {{onSale}} dw-mod&quot;&gt;@Translate(&quot;Sale!&quot;)&lt;/div&gt;
<span class='line-number'>755</span>	        &lt;a href=&quot;{{link}}&quot; onclick=&quot;Scroll.SavePosition(event)&quot;&gt;&lt;img class=&quot;grid__cell-img grid__cell-img--centered&quot; src=&quot;/Admin/Public/GetImage.ashx?width=300&amp;amp;height=300&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image={{image}}&quot; alt=&quot;{{name}}&quot; /&gt;&lt;/a&gt;
<span class='line-number'>756</span>	    &lt;/div&gt;
<span class='line-number'>757</span>	
<span class='line-number'>758</span>	    &lt;div class=&quot;grid__cell card u-color-light--bg u-border-left u-border-right&quot;&gt;
<span class='line-number'>759</span>	        &lt;div class=&quot;u-ta-center&quot;&gt;
<span class='line-number'>760</span>	            &lt;a href=&quot;{{link}}&quot; onclick=&quot;Scroll.SavePosition(event)&quot; title=&quot;{{name}}&quot;&gt;&lt;h6 class=&quot;u-ta-center u-condensed-text&quot;&gt;{{name}}&lt;/h6&gt;&lt;/a&gt;
<span class='line-number'>761</span>	            &lt;div class=&quot;item-number dw-mod&quot;&gt;{{number}}&lt;/div&gt;
<span class='line-number'>762</span>	            &lt;div class=&quot;before-price {{onSale}} dw-mod&quot;&gt;{{discount}}&lt;/div&gt;
<span class='line-number'>763</span>	            &lt;div class=&quot;price dw-mod&quot;&gt;{{price}}&lt;/div&gt;
<span class='line-number'>764</span>	        &lt;/div&gt;
<span class='line-number'>765</span>	    &lt;/div&gt;
<span class='line-number'>766</span>	
<span class='line-number'>767</span>	    &lt;div class=&quot;card-footer u-color-light--bg u-border-left u-border-right u-border-bottom&quot;&gt;
<span class='line-number'>768</span>	        &lt;div class=&quot;u-ta-center&quot;&gt;
<span class='line-number'>769</span>	            &lt;a href=&quot;{{link}}&quot; id=&quot;CartButton_{{id}}&quot; class=&quot;btn btn--secondary btn--full u-no-margin dw-mod&quot;&gt;@Translate(&quot;View&quot;)&lt;/a&gt;
<span class='line-number'>770</span>	        &lt;/div&gt;
<span class='line-number'>771</span>	    &lt;/div&gt;
<span class='line-number'>772</span>	&lt;/script&gt;
<span class='line-number'>773</span>	
<span class='line-number'>774</span>	@*Variants data generation*@
<span class='line-number'>775</span>	&lt;script&gt;
<span class='line-number'>776</span>	    document.addEventListener(&quot;DOMContentLoaded&quot;, function (event) {
<span class='line-number'>777</span>	        Facets.Init(&quot;productList&quot;, &#39;@productCatalogId&#39;, &#39;@requestQuery&#39;);
<span class='line-number'>778</span>	
<span class='line-number'>779</span>	        Variants.SetProductFeedId(&#39;@productCatalogId&#39;);
<span class='line-number'>780</span>	        Variants.SetViewMode(&quot;productList&quot;);
<span class='line-number'>781</span>	
<span class='line-number'>782</span>	        document.getElementById(&quot;productList&quot;).addEventListener(&#39;contentLoaded&#39;, function (e) {
<span class='line-number'>783</span>	            if (e.srcElement.classList.contains(&quot;js-variants-wrap&quot;)) {
<span class='line-number'>784</span>	                Variants.SetVariantOptionStatesForProductList(e.srcElement);
<span class='line-number'>785</span>	            }
<span class='line-number'>786</span>	        }, false);
<span class='line-number'>787</span>	    });
<span class='line-number'>788</span>	&lt;/script&gt;
</div>

2018-05-09 16:37:55.7323|ERROR|Templates|Error compiling razor template
Error compiling template "Designs/Rapido/eCom/Product/Product.cshtml"
Line 1740: 'Dynamicweb.Ecommerce.International.Language.GetLanguages()' is obsolete: 'Use LanguageService.GetLanguages instead.'
Line 1892: 'Dynamicweb.Ecommerce.International.Language.GetLanguages()' is obsolete: 'Use LanguageService.GetLanguages instead.'
Line 2221: The name 'productCatalogId' does not exist in the current context
Line 2225: The name 'requestQuery' does not exist in the current context
Line 2229: The name 'productCatalogId' does not exist in the current context
<hr/>
<div class='template-code'>
<span class='line-number'>  1</span>	@inherits Dynamicweb.Rendering.RazorTemplateBase&lt;Dynamicweb.Rendering.RazorTemplateModel&lt;Dynamicweb.Rendering.Template&gt;&gt;
<span class='line-number'>  2</span>	@using Dynamicweb.Extensibility
<span class='line-number'>  3</span>	@using Dynamicweb.Content
<span class='line-number'>  4</span>	@using System
<span class='line-number'>  5</span>	@using System.IO
<span class='line-number'>  6</span>	@using System.Text.RegularExpressions
<span class='line-number'>  7</span>	@using Dynamicweb.Ecommerce.International;
<span class='line-number'>  8</span>	
<span class='line-number'>  9</span>	@{
<span class='line-number'> 10</span>	    string exportPageId = GetPageIdByNavigationTag(&quot;ProductExportFeed&quot;).ToString();
<span class='line-number'> 11</span>	    int pdfFolderId = GetPageIdByNavigationTag(&quot;PdfFolder&quot;);
<span class='line-number'> 12</span>	    string productId = GetString(&quot;Ecom:Product.ID&quot;);
<span class='line-number'> 13</span>	    string onSale = GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;) == GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;) ? &quot;u-hidden&quot; : &quot;&quot;;
<span class='line-number'> 14</span>	    string hideHelpText = &quot;&quot;;
<span class='line-number'> 15</span>	    string feedId = GetPageIdByNavigationTag(&quot;ProductsFeed&quot;).ToString();
<span class='line-number'> 16</span>	    string feedUrl = &quot;/Default.aspx?ID=&quot; + feedId + &quot;&amp;feedType=productCatalog&quot;;
<span class='line-number'> 17</span>	    int featuresCount = 0;
<span class='line-number'> 18</span>	    int thumbsCount = GetLoop(&quot;Details&quot;).Count;
<span class='line-number'> 19</span>	    int documentsCount = 0;
<span class='line-number'> 20</span>	
<span class='line-number'> 21</span>	    foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;))
<span class='line-number'> 22</span>	    {
<span class='line-number'> 23</span>	        if (!String.IsNullOrEmpty(customField.GetString(&quot;Product.CustomField.Value.Clean&quot;)))
<span class='line-number'> 24</span>	        {
<span class='line-number'> 25</span>	            featuresCount++;
<span class='line-number'> 26</span>	        }
<span class='line-number'> 27</span>	    }
<span class='line-number'> 28</span>	
<span class='line-number'> 29</span>	    foreach (LoopItem customField in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'> 30</span>	    {
<span class='line-number'> 31</span>	        foreach (LoopItem field in customField.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'> 32</span>	        {
<span class='line-number'> 33</span>	            if (!String.IsNullOrEmpty(field.GetString(&quot;Ecom:Product.CategoryField.Value&quot;)))
<span class='line-number'> 34</span>	            {
<span class='line-number'> 35</span>	                featuresCount++;
<span class='line-number'> 36</span>	            }
<span class='line-number'> 37</span>	        }
<span class='line-number'> 38</span>	    }
<span class='line-number'> 39</span>	
<span class='line-number'> 40</span>	    foreach (LoopItem alternativeImage in GetLoop(&quot;Ecom:Product.AlternativeImages&quot;))
<span class='line-number'> 41</span>	    {
<span class='line-number'> 42</span>	        if (!String.IsNullOrEmpty(alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;)))
<span class='line-number'> 43</span>	        {
<span class='line-number'> 44</span>	            thumbsCount++;
<span class='line-number'> 45</span>	        }
<span class='line-number'> 46</span>	    }
<span class='line-number'> 47</span>	
<span class='line-number'> 48</span>	    if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product.ImageSmall.Default.Clean&quot;)))
<span class='line-number'> 49</span>	    {
<span class='line-number'> 50</span>	        thumbsCount++;
<span class='line-number'> 51</span>	    }
<span class='line-number'> 52</span>	
<span class='line-number'> 53</span>	    foreach (LoopItem variantgroup in GetLoop(&quot;VariantGroups&quot;))
<span class='line-number'> 54</span>	    {
<span class='line-number'> 55</span>	        foreach (LoopItem variantoption in variantgroup.GetLoop(&quot;VariantAvailableOptions&quot;))
<span class='line-number'> 56</span>	        {
<span class='line-number'> 57</span>	            if (variantoption.GetBoolean(&quot;Ecom:VariantOption.Selected&quot;))
<span class='line-number'> 58</span>	            {
<span class='line-number'> 59</span>	                hideHelpText = &quot;u-hidden&quot;;
<span class='line-number'> 60</span>	            }
<span class='line-number'> 61</span>	        }
<span class='line-number'> 62</span>	    }
<span class='line-number'> 63</span>	
<span class='line-number'> 64</span>	    string feedPageUrl = &quot;/Default.aspx?ID=&quot; + GetPageIdByNavigationTag(&quot;RelatedProductsFeed&quot;);
<span class='line-number'> 65</span>	    string feedFullUrl = feedPageUrl + &quot;&amp;feedType=productCatalog&amp;PageSize=3&amp;ProdID=&quot; + productId;
<span class='line-number'> 66</span>	    string productContainerId = &quot;Product&quot; + productId;
<span class='line-number'> 67</span>	}
<span class='line-number'> 68</span>	
<span class='line-number'> 69</span>	&lt;!-- Trigger for the image modal --&gt;
<span class='line-number'> 70</span>	&lt;input type=&quot;checkbox&quot; id=&quot;ImageModalTrigger&quot; class=&quot;modal-trigger&quot; /&gt;
<span class='line-number'> 71</span>	
<span class='line-number'> 72</span>	&lt;!-- Image modal --&gt;
<span class='line-number'> 73</span>	&lt;div class=&quot;modal-container&quot;&gt;
<span class='line-number'> 74</span>	    &lt;label for=&quot;ImageModalTrigger&quot; id=&quot;ImageModalOverlay&quot; class=&quot;modal-overlay&quot;&gt;&lt;/label&gt;
<span class='line-number'> 75</span>	    &lt;div class=&quot;modal modal--full&quot; id=&quot;ImageModal&quot;&gt;
<span class='line-number'> 76</span>	        &lt;div class=&quot;modal__body&quot;&gt;
<span class='line-number'> 77</span>	            &lt;img id=&quot;FullImage&quot; class=&quot;modal--full__img&quot; src=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot; /&gt;
<span class='line-number'> 78</span>	        &lt;/div&gt;
<span class='line-number'> 79</span>	    &lt;/div&gt;
<span class='line-number'> 80</span>	&lt;/div&gt;
<span class='line-number'> 81</span>	
<span class='line-number'> 82</span>	&lt;input type=&quot;checkbox&quot; class=&quot;panel-trigger js-remember-state&quot; id=&quot;PIMProductToolsTrigger&quot; checked /&gt;
<span class='line-number'> 83</span>	&lt;div class=&quot;fit-to-panel-size&quot;&gt;
<span class='line-number'> 84</span>	    &lt;div class=&quot;paragraph-container__grid--bleed&quot;&gt;
<span class='line-number'> 85</span>	        @*Please be aware that the below html must be implemented twice (Static HTML and dynamic Script template) to make it update when shifting units *@
<span class='line-number'> 86</span>	
<span class='line-number'> 87</span>	        &lt;div class=&quot;js-ajax-container&quot; id=&quot;@productContainerId&quot; data-template=&quot;productUpdateableContentTemplate&quot; data-json-feed=&quot;@feedUrl&quot; data-preloader=&quot;false&quot; data-init-onload=&quot;false&quot;&gt;
<span class='line-number'> 88</span>	            &lt;div class=&quot;grid product&quot;&gt;
<span class='line-number'> 89</span>	                @* Image block with optional thumbs *@
<span class='line-number'> 90</span>	                @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)))
<span class='line-number'> 91</span>	                {
<span class='line-number'> 92</span>	                &lt;div class=&quot;grid__col-md-6 grid__col-sm-6&quot;&gt;
<span class='line-number'> 93</span>	                    &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'> 94</span>	                        @if (thumbsCount &gt; 0)
<span class='line-number'> 95</span>	                {
<span class='line-number'> 96</span>	                &lt;div class=&quot;grid__col-2 u-hidden-xxs product__thumbs dw-mod&quot;&gt;
<span class='line-number'> 97</span>	                    &lt;div class=&quot;thumb-list&quot;&gt;
<span class='line-number'> 98</span>	                        &lt;div class=&quot;thumb-list__item thumb-list__item--active dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_@productId&quot; data-full-image=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; data-image-path=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot;&gt;&lt;img src=&quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image=@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'> 99</span>	                                @foreach (LoopItem alternativeImage in GetLoop(&quot;Ecom:Product.AlternativeImages&quot;))
<span class='line-number'>100</span>	                                {
<span class='line-number'>101</span>	                                    if (!String.IsNullOrEmpty(alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;)))
<span class='line-number'>102</span>	                                    {
<span class='line-number'>103</span>	                                        string fullImage = alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>104</span>	                                        string image = &quot;/Admin/Public/GetImage.ashx?width=550&amp;amp;height=550&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>105</span>	                                        string thumb = &quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>106</span>	
<span class='line-number'>107</span>	                                        &lt;div class=&quot;thumb-list__item dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_@productId&quot; data-full-image=&quot;@fullImage&quot; data-image-path=&quot;@image&quot;&gt;&lt;img src=&quot;@thumb&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'>108</span>	                                    }
<span class='line-number'>109</span>	                                }
<span class='line-number'>110</span>	
<span class='line-number'>111</span>	                                @foreach (LoopItem detail in GetLoop(&quot;Details&quot;))
<span class='line-number'>112</span>	                                {
<span class='line-number'>113</span>	                                    string fullImage = detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>114</span>	                                    string image = &quot;/Admin/Public/GetImage.ashx?width=550&amp;amp;height=550&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>115</span>	                                    string thumb = &quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>116</span>	
<span class='line-number'>117</span>	                                    &lt;div class=&quot;thumb-list__item dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_@productId&quot; data-full-image=&quot;@fullImage&quot; data-image-path=&quot;@image&quot;&gt;&lt;img src=&quot;@thumb&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'>118</span>	                                }
<span class='line-number'>119</span>	                            &lt;/div&gt;
<span class='line-number'>120</span>	                        &lt;/div&gt;
<span class='line-number'>121</span>	                        }
<span class='line-number'>122</span>	                        &lt;div class=&quot;grid__col-auto&quot;&gt;
<span class='line-number'>123</span>	                            @if (GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;) != GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;))
<span class='line-number'>124</span>	                            {
<span class='line-number'>125</span>	                            &lt;div class=&quot;sticker u-margin-left dw-mod&quot;&gt;@Translate(&quot;Sale!&quot;)&lt;/div&gt;
<span class='line-number'>126</span>	                            }
<span class='line-number'>127</span>	                            &lt;label for=&quot;ImageModalTrigger&quot;&gt;
<span class='line-number'>128</span>	                                &lt;img class=&quot;thumb-image-view product__image dw-mod&quot; onclick=&quot;document.getElementById(&#39;FullImage&#39;).src = this.getAttribute(&#39;data-full-image&#39;)&quot; id=&quot;Image_@productId&quot; src=&quot;/Admin/Public/GetImage.ashx?crop=5&amp;height=550&amp;width=550&amp;Compression=75&amp;DoNotUpscale=true&amp;image=@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; data-full-image=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot; /&gt;
<span class='line-number'>129</span>	                            &lt;/label&gt;
<span class='line-number'>130</span>	                        &lt;/div&gt;
<span class='line-number'>131</span>	                    &lt;/div&gt;
<span class='line-number'>132</span>	                &lt;/div&gt;
<span class='line-number'>133</span>	                }
<span class='line-number'>134</span>	
<span class='line-number'>135</span>	                @* Primary product informations *@
<span class='line-number'>136</span>	                &lt;div class=&quot;grid__col-md-5&quot;&gt;
<span class='line-number'>137</span>	                    &lt;div class=&quot;grid__cell&quot;&gt;
<span class='line-number'>138</span>	                        &lt;div class=&quot;product__title dw-mod&quot;&gt;
<span class='line-number'>139</span>	                            &lt;h1 class=&quot;u-no-margin&quot;&gt;@GetString(&quot;Ecom:Product.Name&quot;) @GetString(&quot;Ecom:Product.SelectedVariantComboName&quot;)&lt;/h1&gt;
<span class='line-number'>140</span>	                            &lt;div class=&quot;item-number&quot;&gt;@GetString(&quot;Ecom:Product.Number&quot;)&lt;/div&gt;
<span class='line-number'>141</span>	                        &lt;/div&gt;
<span class='line-number'>142</span>	                        &lt;div&gt;
<span class='line-number'>143</span>	                            @* Short description *@
<span class='line-number'>144</span>	                            &lt;div class=&quot;introduction-text&quot;&gt;
<span class='line-number'>145</span>	                                @GetString(&quot;Ecom:Product.ShortDescription&quot;)
<span class='line-number'>146</span>	                            &lt;/div&gt;
<span class='line-number'>147</span>	
<span class='line-number'>148</span>	                            @* Variants *@
<span class='line-number'>149</span>	                            @if (GetLoop(&quot;VariantGroups&quot;).Count &gt; 0 &amp;&amp; GetBoolean(&quot;Ecom:Product.ShowInProductList&quot;))
<span class='line-number'>150</span>	                            {
<span class='line-number'>151</span>	                                &lt;div&gt;
<span class='line-number'>152</span>	                                    &lt;div id=&quot;Variants&quot; data-template=&quot;VariantGroup&quot; data-product-id=&quot;@productId&quot;&gt;&lt;/div&gt;
<span class='line-number'>153</span>	                                    &lt;small id=&quot;helpText_@productId&quot; class=&quot;help-text @hideHelpText&quot;&gt;@Translate(&quot;Please select variant!&quot;)&lt;/small&gt;
<span class='line-number'>154</span>	                                &lt;/div&gt;
<span class='line-number'>155</span>	                            }
<span class='line-number'>156</span>	
<span class='line-number'>157</span>	                            @* BOMProducts *@
<span class='line-number'>158</span>	                            @if (GetLoop(&quot;BOMProducts&quot;).Count &gt; 0)
<span class='line-number'>159</span>	                            {
<span class='line-number'>160</span>	                                &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Including products&quot;)&lt;/h2&gt;
<span class='line-number'>161</span>	                                foreach (LoopItem BOMProductItem in GetLoop(&quot;BOMProducts&quot;))
<span class='line-number'>162</span>	                                {
<span class='line-number'>163</span>	                                    string link = &quot;/&quot; + BOMProductItem.GetString(&quot;Ecom:Product.LinkGroup.Clean&quot;) + (!String.IsNullOrEmpty(BOMProductItem.GetString(&quot;Ecom:Product.VariantID&quot;)) ? &quot;&amp;VariantID=&quot; + BOMProductItem.GetString(&quot;Ecom:Product.VariantID&quot;) : &quot;&quot;);
<span class='line-number'>164</span>	                                    &lt;div class=&quot;grid__col--border grid&quot;&gt;
<span class='line-number'>165</span>	                                        &lt;div class=&quot;grid__cell grid__cell--align-middle-left&quot;&gt;
<span class='line-number'>166</span>	                                            &lt;a href=&quot;@link&quot; class=&quot;u-pull--left u-margin-right&quot;&gt;
<span class='line-number'>167</span>	                                                &lt;img src=&quot;/Admin/Public/GetImage.ashx?width=50&amp;image=@BOMProductItem.GetString(&quot;Ecom:Product.ImageSmall.Default.Clean&quot;)&amp;Compression=99&quot; /&gt;
<span class='line-number'>168</span>	                                            &lt;/a&gt;
<span class='line-number'>169</span>	                                            &lt;a href=&quot;@link&quot;&gt;@BOMProductItem.GetString(&quot;Ecom:Product.Name&quot;)&lt;/a&gt;
<span class='line-number'>170</span>	                                        &lt;/div&gt;
<span class='line-number'>171</span>	                                    &lt;/div&gt;
<span class='line-number'>172</span>	                                }
<span class='line-number'>173</span>	                            }
<span class='line-number'>174</span>	                        &lt;/div&gt;
<span class='line-number'>175</span>	
<span class='line-number'>176</span>	                        &lt;input type=&quot;hidden&quot; id=&quot;CartButton_@GetString(&quot;Ecom:Product.ID&quot;)&quot; name=&quot;submit&quot; /&gt;
<span class='line-number'>177</span>	                        &lt;input type=&quot;hidden&quot; value=&quot;@GetString(&quot;Ecom:Product.VariantID.Extented&quot;)&quot; name=&quot;Variant&quot; id=&quot;Variant_@GetString(&quot;Ecom:Product.ID&quot;)&quot; /&gt;
<span class='line-number'>178</span>	                    &lt;/div&gt;
<span class='line-number'>179</span>	                &lt;/div&gt;
<span class='line-number'>180</span>	
<span class='line-number'>181</span>	                &lt;div class=&quot;grid__col-3&quot;&gt;&lt;/div&gt;
<span class='line-number'>182</span>	            &lt;/div&gt;
<span class='line-number'>183</span>	        &lt;/div&gt;
<span class='line-number'>184</span>	
<span class='line-number'>185</span>	        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>186</span>	            @* Long description *@
<span class='line-number'>187</span>	            @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product.LongDescription&quot;)))
<span class='line-number'>188</span>	            {
<span class='line-number'>189</span>	                &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>190</span>	                    &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Description&quot;)&lt;/h2&gt;
<span class='line-number'>191</span>	
<span class='line-number'>192</span>	                    @GetString(&quot;Ecom:Product.LongDescription&quot;)
<span class='line-number'>193</span>	                &lt;/div&gt;
<span class='line-number'>194</span>	            }
<span class='line-number'>195</span>	
<span class='line-number'>196</span>	            @* Features lists *@
<span class='line-number'>197</span>	            @if (featuresCount &gt; 0 &amp;&amp; featuresCount &lt; 10)
<span class='line-number'>198</span>	            {
<span class='line-number'>199</span>	                &lt;div class=&quot;grid__col-12 grid__col--bleed-y&quot;&gt;
<span class='line-number'>200</span>	                    &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Product information&quot;)&lt;/h2&gt;
<span class='line-number'>201</span>	                    &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>202</span>	                        @if (GetLoop(&quot;CustomFieldValues&quot;).Count &gt; 0)
<span class='line-number'>203</span>	                        {
<span class='line-number'>204</span>	                            &lt;div class=&quot;grid__col-md-6 grid__col-sm-6&quot;&gt;
<span class='line-number'>205</span>	                                &lt;table class=&quot;table table--clean table--compact u-margin-bottom&quot;&gt;
<span class='line-number'>206</span>	                                    @foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;))
<span class='line-number'>207</span>	                                    {
<span class='line-number'>208</span>	                                        string fieldValue = customField.GetString(&quot;Product.CustomField.Value&quot;);
<span class='line-number'>209</span>	
<span class='line-number'>210</span>	                                        if (customField.GetLoop(&quot;Product.CustomField.Options&quot;).Count &gt; 0)
<span class='line-number'>211</span>	                                        {
<span class='line-number'>212</span>	                                            fieldValue = &quot;&quot;;
<span class='line-number'>213</span>	                                            int count = 0;
<span class='line-number'>214</span>	
<span class='line-number'>215</span>	                                            foreach (LoopItem customFieldOptions in customField.GetLoop(&quot;Product.CustomField.Options&quot;))
<span class='line-number'>216</span>	                                            {
<span class='line-number'>217</span>	                                                if (customFieldOptions.GetBoolean(&quot;Product.CustomField.Option.IsSelected&quot;))
<span class='line-number'>218</span>	                                                {
<span class='line-number'>219</span>	                                                    if (count != 0)
<span class='line-number'>220</span>	                                                    {
<span class='line-number'>221</span>	                                                        fieldValue += &quot;, &quot;;
<span class='line-number'>222</span>	                                                    }
<span class='line-number'>223</span>	
<span class='line-number'>224</span>	                                                    fieldValue += customFieldOptions.GetString(&quot;Product.CustomField.Option.Name&quot;);
<span class='line-number'>225</span>	                                                    count++;
<span class='line-number'>226</span>	                                                }
<span class='line-number'>227</span>	                                            }
<span class='line-number'>228</span>	                                        }
<span class='line-number'>229</span>	
<span class='line-number'>230</span>	                                        if (fieldValue == &quot;False&quot;)
<span class='line-number'>231</span>	                                        {
<span class='line-number'>232</span>	                                            fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>233</span>	                                        }
<span class='line-number'>234</span>	
<span class='line-number'>235</span>	                                        if (fieldValue == &quot;True&quot;)
<span class='line-number'>236</span>	                                        {
<span class='line-number'>237</span>	                                            fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>238</span>	                                        }
<span class='line-number'>239</span>	
<span class='line-number'>240</span>	                                        if (!String.IsNullOrEmpty(customField.GetString(&quot;Product.CustomField.Name&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>241</span>	                                        {
<span class='line-number'>242</span>	                                            &lt;tr&gt;
<span class='line-number'>243</span>	                                                &lt;td width=&quot;160&quot;&gt;@customField.GetString(&quot;Product.CustomField.Name&quot;):&lt;/td&gt;
<span class='line-number'>244</span>	                                                @if (!String.IsNullOrEmpty(customField.GetString(&quot;Document.FullPath&quot;)))
<span class='line-number'>245</span>	                                                {
<span class='line-number'>246</span>	                                                    &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@customField.GetString(&quot;Document.FullPath&quot;)&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;i class=&quot;fa fa-arrow-circle-down&quot;&gt;&lt;/i&gt; @fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>247</span>	                                                }
<span class='line-number'>248</span>	                                                else
<span class='line-number'>249</span>	                                                {
<span class='line-number'>250</span>	                                                    &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>251</span>	                                                }
<span class='line-number'>252</span>	                                            &lt;/tr&gt;
<span class='line-number'>253</span>	                                        }
<span class='line-number'>254</span>	                                    }
<span class='line-number'>255</span>	                                &lt;/table&gt;
<span class='line-number'>256</span>	                            &lt;/div&gt;
<span class='line-number'>257</span>	                            &lt;div class=&quot;grid__col-md-6 grid__col-sm-6&quot;&gt;&lt;/div&gt;
<span class='line-number'>258</span>	                        }
<span class='line-number'>259</span>	
<span class='line-number'>260</span>	                        @if (GetLoop(&quot;ProductCategories&quot;).Count &gt; 0)
<span class='line-number'>261</span>	                        {
<span class='line-number'>262</span>	                            &lt;div class=&quot;grid__col-md-6 grid__col-sm-6&quot;&gt;
<span class='line-number'>263</span>	                                &lt;table class=&quot;table table--clean table--compact u-margin-bottom&quot;&gt;
<span class='line-number'>264</span>	                                    @foreach (LoopItem categoryGroup in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'>265</span>	                                    {
<span class='line-number'>266</span>	                                        int fieldsCount = 0;
<span class='line-number'>267</span>	                                        foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>268</span>	                                        {
<span class='line-number'>269</span>	                                            if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;)))
<span class='line-number'>270</span>	                                            {
<span class='line-number'>271</span>	                                                fieldsCount++;
<span class='line-number'>272</span>	                                            }
<span class='line-number'>273</span>	                                        }
<span class='line-number'>274</span>	
<span class='line-number'>275</span>	                                        if (fieldsCount &gt; 0)
<span class='line-number'>276</span>	                                        {
<span class='line-number'>277</span>	                                            &lt;tr&gt;
<span class='line-number'>278</span>	                                                &lt;td colspan=&quot;2&quot; class=&quot;u-ta-left table__section-header dw-mod&quot;&gt;@categoryGroup.GetString(&quot;Ecom:Product.Category.Name&quot;)&lt;/td&gt;
<span class='line-number'>279</span>	                                            &lt;/tr&gt;
<span class='line-number'>280</span>	
<span class='line-number'>281</span>	                                            foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>282</span>	                                            {
<span class='line-number'>283</span>	                                                string fieldValue = categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;);
<span class='line-number'>284</span>	
<span class='line-number'>285</span>	                                                if (fieldValue == &quot;False&quot;)
<span class='line-number'>286</span>	                                                {
<span class='line-number'>287</span>	                                                    fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>288</span>	                                                }
<span class='line-number'>289</span>	
<span class='line-number'>290</span>	                                                if (fieldValue == &quot;True&quot;)
<span class='line-number'>291</span>	                                                {
<span class='line-number'>292</span>	                                                    fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>293</span>	                                                }
<span class='line-number'>294</span>	
<span class='line-number'>295</span>	                                                if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>296</span>	                                                {
<span class='line-number'>297</span>	                                                    &lt;tr&gt;
<span class='line-number'>298</span>	                                                        &lt;td width=&quot;160&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;):&lt;/td&gt;
<span class='line-number'>299</span>	                                                        @if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;9&quot;)
<span class='line-number'>300</span>	                                                        {
<span class='line-number'>301</span>	                                                            &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@fieldValue&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;i class=&quot;fa fa-arrow-circle-down&quot;&gt;&lt;/i&gt; @fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>302</span>	                                                        }
<span class='line-number'>303</span>	                                                        else
<span class='line-number'>304</span>	                                                        {
<span class='line-number'>305</span>	                                                            &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>306</span>	                                                        }
<span class='line-number'>307</span>	                                                    &lt;/tr&gt;
<span class='line-number'>308</span>	                                                }
<span class='line-number'>309</span>	                                            }
<span class='line-number'>310</span>	                                        }
<span class='line-number'>311</span>	                                    }
<span class='line-number'>312</span>	                                &lt;/table&gt;
<span class='line-number'>313</span>	                            &lt;/div&gt;
<span class='line-number'>314</span>	                            &lt;div class=&quot;grid__col-md-6 grid__col-sm-6&quot;&gt;&lt;/div&gt;
<span class='line-number'>315</span>	                        }
<span class='line-number'>316</span>	                    &lt;/div&gt;
<span class='line-number'>317</span>	                &lt;/div&gt;
<span class='line-number'>318</span>	            }
<span class='line-number'>319</span>	
<span class='line-number'>320</span>	            @if (featuresCount &gt;= 10)
<span class='line-number'>321</span>	            {
<span class='line-number'>322</span>	                &lt;div class=&quot;grid__col-12 grid__col--bleed-y&quot;&gt;
<span class='line-number'>323</span>	                    &lt;input type=&quot;checkbox&quot; id=&quot;expandable-text-trigger&quot; class=&quot;expandable-text-trigger&quot; /&gt;
<span class='line-number'>324</span>	                    &lt;div class=&quot;expandable-text-container&quot;&gt;
<span class='line-number'>325</span>	                        &lt;div class=&quot;expandable-text-container__content dw-mod&quot;&gt;
<span class='line-number'>326</span>	                            &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Product information&quot;)&lt;/h2&gt;
<span class='line-number'>327</span>	                            &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>328</span>	                                @if (GetLoop(&quot;CustomFieldValues&quot;).Count &gt; 0)
<span class='line-number'>329</span>	                                {
<span class='line-number'>330</span>	                                    &lt;div class=&quot;grid__col-md-5 grid__col-sm-6&quot;&gt;
<span class='line-number'>331</span>	                                        &lt;table class=&quot;table table--clean table--compact u-margin-bottom&quot;&gt;
<span class='line-number'>332</span>	                                            @foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;))
<span class='line-number'>333</span>	                                            {
<span class='line-number'>334</span>	                                                string fieldValue = customField.GetString(&quot;Product.CustomField.Value.Clean&quot;);
<span class='line-number'>335</span>	
<span class='line-number'>336</span>	                                                if (customField.GetLoop(&quot;Product.CustomField.Options&quot;).Count &gt; 0)
<span class='line-number'>337</span>	                                                {
<span class='line-number'>338</span>	                                                    fieldValue = &quot;&quot;;
<span class='line-number'>339</span>	                                                    int count = 0;
<span class='line-number'>340</span>	
<span class='line-number'>341</span>	                                                    foreach (LoopItem customFieldOptions in customField.GetLoop(&quot;Product.CustomField.Options&quot;))
<span class='line-number'>342</span>	                                                    {
<span class='line-number'>343</span>	                                                        if (customFieldOptions.GetBoolean(&quot;Product.CustomField.Option.IsSelected&quot;))
<span class='line-number'>344</span>	                                                        {
<span class='line-number'>345</span>	                                                            if (count != 0)
<span class='line-number'>346</span>	                                                            {
<span class='line-number'>347</span>	                                                                fieldValue += &quot;, &quot;;
<span class='line-number'>348</span>	                                                            }
<span class='line-number'>349</span>	
<span class='line-number'>350</span>	                                                            fieldValue += customFieldOptions.GetString(&quot;Product.CustomField.Option.Name&quot;);
<span class='line-number'>351</span>	                                                            count++;
<span class='line-number'>352</span>	                                                        }
<span class='line-number'>353</span>	                                                    }
<span class='line-number'>354</span>	                                                }
<span class='line-number'>355</span>	
<span class='line-number'>356</span>	                                                if (fieldValue == &quot;False&quot;)
<span class='line-number'>357</span>	                                                {
<span class='line-number'>358</span>	                                                    fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>359</span>	                                                }
<span class='line-number'>360</span>	
<span class='line-number'>361</span>	                                                if (fieldValue == &quot;True&quot;)
<span class='line-number'>362</span>	                                                {
<span class='line-number'>363</span>	                                                    fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>364</span>	                                                }
<span class='line-number'>365</span>	
<span class='line-number'>366</span>	                                                if (!String.IsNullOrEmpty(customField.GetString(&quot;Product.CustomField.Name&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>367</span>	                                                {
<span class='line-number'>368</span>	                                                    &lt;tr&gt;
<span class='line-number'>369</span>	                                                        &lt;td width=&quot;160&quot;&gt;@customField.GetString(&quot;Product.CustomField.Name&quot;):&lt;/td&gt;
<span class='line-number'>370</span>	                                                        @if (!String.IsNullOrEmpty(customField.GetString(&quot;Document.FullPath&quot;)))
<span class='line-number'>371</span>	                                                        {
<span class='line-number'>372</span>	                                                            documentsCount++;
<span class='line-number'>373</span>	                                                            &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@customField.GetString(&quot;Document.FullPath&quot;)&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;&lt;i class=&quot;fa fa-arrow-circle-down&quot;&gt;&lt;/i&gt; @fieldValue&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>374</span>	                                                        }
<span class='line-number'>375</span>	                                                        else
<span class='line-number'>376</span>	                                                        {
<span class='line-number'>377</span>	                                                            &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>378</span>	                                                        }
<span class='line-number'>379</span>	                                                    &lt;/tr&gt;
<span class='line-number'>380</span>	                                                }
<span class='line-number'>381</span>	                                            }
<span class='line-number'>382</span>	                                        &lt;/table&gt;
<span class='line-number'>383</span>	                                    &lt;/div&gt;
<span class='line-number'>384</span>	                                    &lt;div class=&quot;grid__col-md-5 grid__col-sm-6&quot;&gt;&lt;/div&gt;
<span class='line-number'>385</span>	                                }
<span class='line-number'>386</span>	
<span class='line-number'>387</span>	                                @if (GetLoop(&quot;ProductCategories&quot;).Count &gt; 0)
<span class='line-number'>388</span>	                                {
<span class='line-number'>389</span>	                                    &lt;div class=&quot;grid__col-md-5 grid__col-sm-6&quot;&gt;
<span class='line-number'>390</span>	                                        &lt;table class=&quot;table table--clean table--compact u-margin-bottom&quot;&gt;
<span class='line-number'>391</span>	                                            @foreach (LoopItem categoryGroup in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'>392</span>	                                            {
<span class='line-number'>393</span>	                                                int fieldsCount = 0;
<span class='line-number'>394</span>	                                                foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>395</span>	                                                {
<span class='line-number'>396</span>	                                                    if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;)))
<span class='line-number'>397</span>	                                                    {
<span class='line-number'>398</span>	                                                        fieldsCount++;
<span class='line-number'>399</span>	                                                    }
<span class='line-number'>400</span>	                                                }
<span class='line-number'>401</span>	
<span class='line-number'>402</span>	                                                if (fieldsCount &gt; 0)
<span class='line-number'>403</span>	                                                {
<span class='line-number'>404</span>	                                                    &lt;tr&gt;
<span class='line-number'>405</span>	                                                        &lt;td colspan=&quot;2&quot; class=&quot;u-ta-left table__section-header dw-mod&quot;&gt;@categoryGroup.GetString(&quot;Ecom:Product.Category.Name&quot;)&lt;/td&gt;
<span class='line-number'>406</span>	                                                    &lt;/tr&gt;
<span class='line-number'>407</span>	
<span class='line-number'>408</span>	                                                    foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>409</span>	                                                    {
<span class='line-number'>410</span>	                                                        string fieldValue = categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;);
<span class='line-number'>411</span>	
<span class='line-number'>412</span>	                                                        if (fieldValue == &quot;False&quot;)
<span class='line-number'>413</span>	                                                        {
<span class='line-number'>414</span>	                                                            fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>415</span>	                                                        }
<span class='line-number'>416</span>	
<span class='line-number'>417</span>	                                                        if (fieldValue == &quot;True&quot;)
<span class='line-number'>418</span>	                                                        {
<span class='line-number'>419</span>	                                                            fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>420</span>	                                                        }
<span class='line-number'>421</span>	
<span class='line-number'>422</span>	                                                        if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>423</span>	                                                        {
<span class='line-number'>424</span>	                                                            &lt;tr&gt;
<span class='line-number'>425</span>	                                                                &lt;td width=&quot;160&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;):&lt;/td&gt;
<span class='line-number'>426</span>	                                                                @if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;9&quot;)
<span class='line-number'>427</span>	                                                                {
<span class='line-number'>428</span>	                                                                    documentsCount++;
<span class='line-number'>429</span>	                                                                    &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@fieldValue&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;i class=&quot;fa fa-arrow-circle-down&quot;&gt;&lt;/i&gt; @fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>430</span>	                                                                }
<span class='line-number'>431</span>	                                                                else
<span class='line-number'>432</span>	                                                                {
<span class='line-number'>433</span>	                                                                    &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>434</span>	                                                                }
<span class='line-number'>435</span>	                                                            &lt;/tr&gt;
<span class='line-number'>436</span>	                                                        }
<span class='line-number'>437</span>	                                                    }
<span class='line-number'>438</span>	                                                }
<span class='line-number'>439</span>	                                            }
<span class='line-number'>440</span>	                                        &lt;/table&gt;
<span class='line-number'>441</span>	                                    &lt;/div&gt;
<span class='line-number'>442</span>	                                    &lt;div class=&quot;grid__col-md-5 grid__col-sm-6&quot;&gt;&lt;/div&gt;
<span class='line-number'>443</span>	                                }
<span class='line-number'>444</span>	                            &lt;/div&gt;
<span class='line-number'>445</span>	                        &lt;/div&gt;
<span class='line-number'>446</span>	
<span class='line-number'>447</span>	                        &lt;div class=&quot;u-ta-center&quot;&gt;
<span class='line-number'>448</span>	                            &lt;label for=&quot;expandable-text-trigger&quot; class=&quot;btn btn--secondary expandable-text-container__btn more dw-mod&quot;&gt;@Translate(&quot;Show more&quot;)&lt;/label&gt;
<span class='line-number'>449</span>	                            &lt;label for=&quot;expandable-text-trigger&quot; class=&quot;btn btn--secondary expandable-text-container__btn less dw-mod&quot;&gt;@Translate(&quot;Show less&quot;)&lt;/label&gt;
<span class='line-number'>450</span>	                        &lt;/div&gt;
<span class='line-number'>451</span>	                    &lt;/div&gt;
<span class='line-number'>452</span>	                &lt;/div&gt;
<span class='line-number'>453</span>	            }
<span class='line-number'>454</span>	
<span class='line-number'>455</span>	            @* Related products *@
<span class='line-number'>456</span>	            &lt;div class=&quot;grid js-ajax-container&quot; id=&quot;ProductList&quot; data-template=&quot;ProductContainer&quot; data-pre-render-template=&quot;ProductPreRenderContainer&quot; data-json-feed=&quot;@feedFullUrl&quot; data-preloader=&quot;overlay&quot;&gt;&lt;/div&gt;
<span class='line-number'>457</span>	        &lt;/div&gt;
<span class='line-number'>458</span>	    &lt;/div&gt;
<span class='line-number'>459</span>	&lt;/div&gt;
<span class='line-number'>460</span>	&lt;aside class=&quot;panel panel--right dw-mod&quot;&gt;
<span class='line-number'>461</span>	    &lt;label for=&quot;PIMProductToolsTrigger&quot; class=&quot;panel-trigger-btn grid--justify-center dw-mod&quot;&gt;&lt;/label&gt;
<span class='line-number'>462</span>	
<span class='line-number'>463</span>	        &lt;div class=&quot;panel__content dw-mod&quot;&gt;
<span class='line-number'>464</span>	            &lt;form action=&quot;/Default.aspx?ID=@exportPageId&amp;ProductID=@System.Web.HttpContext.Current.Request.QueryString.Get(&quot;ProductID&quot;)&quot; method=&quot;post&quot;&gt;
<span class='line-number'>465</span>	                &lt;div class=&quot;panel__content__body panel__content__body--auto-height-400px dw-mod&quot;&gt;
<span class='line-number'>466</span>	                    &lt;h6 class=&quot;panel__header dw-mod&quot;&gt;@Translate(&quot;Images&quot;) (@(thumbsCount))&lt;/h6&gt;
<span class='line-number'>467</span>	                    @if (thumbsCount &gt; 0)
<span class='line-number'>468</span>	                    {
<span class='line-number'>469</span>	                        &lt;ul class=&quot;list list--clean dw-mod&quot;&gt;
<span class='line-number'>470</span>	                            &lt;li&gt;
<span class='line-number'>471</span>	                                &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>472</span>	                                    &lt;div class=&quot;grid__col-xs-1 grid--align-self-center&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;Image_@GetString(&quot;Ecom:Product.ImageSmall.Default.Clean&quot;)&quot; class=&quot;u-no-margin&quot; /&gt;&lt;/div&gt;
<span class='line-number'>473</span>	                                    &lt;div class=&quot;grid__col-xs-3 grid__col--bleed-y&quot;&gt;&lt;img src=&quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image=@GetString(&quot;Ecom:Product.ImageSmall.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot; class=&quot;flex-img&quot;&gt;&lt;/div&gt;
<span class='line-number'>474</span>	                                    &lt;div class=&quot;grid__col-xs-8 grid--align-self-center grid__col--bleed-y&quot;&gt;@GetString(&quot;Ecom:Product.Name&quot;)&lt;/div&gt;
<span class='line-number'>475</span>	                                &lt;/div&gt;
<span class='line-number'>476</span>	                            &lt;/li&gt;
<span class='line-number'>477</span>	
<span class='line-number'>478</span>	                            @foreach (LoopItem alternativeImage in GetLoop(&quot;Ecom:Product.AlternativeImages&quot;))
<span class='line-number'>479</span>	                            {
<span class='line-number'>480</span>	                                if (!String.IsNullOrEmpty(alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;)))
<span class='line-number'>481</span>	                                {
<span class='line-number'>482</span>	                                    string image = alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>483</span>	                                    string thumb = &quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image=&quot; + image;
<span class='line-number'>484</span>	
<span class='line-number'>485</span>	                                    &lt;li&gt;
<span class='line-number'>486</span>	                                        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>487</span>	                                            &lt;div class=&quot;grid__col-xs-1 grid--align-self-center&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;Image_@image&quot; class=&quot;u-no-margin&quot; /&gt;&lt;/div&gt;
<span class='line-number'>488</span>	                                            &lt;div class=&quot;grid__col-xs-3 grid__col--bleed-y&quot;&gt;&lt;img src=&quot;@thumb&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'>489</span>	                                            &lt;div class=&quot;grid__col-xs-8 grid--align-self-center grid__col--bleed-y&quot;&gt;&lt;span class=&quot;u-truncate-text u-w170px&quot;&gt;@GetString(&quot;Ecom:Product.Name&quot;)&lt;/span&gt;&lt;/div&gt;
<span class='line-number'>490</span>	                                        &lt;/div&gt;
<span class='line-number'>491</span>	                                    &lt;/li&gt;
<span class='line-number'>492</span>	                                }
<span class='line-number'>493</span>	                            }
<span class='line-number'>494</span>	
<span class='line-number'>495</span>	                            @foreach (LoopItem detail in GetLoop(&quot;Details&quot;))
<span class='line-number'>496</span>	                            {
<span class='line-number'>497</span>	                                string image = detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>498</span>	                                string thumb = &quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image=&quot; + image;
<span class='line-number'>499</span>	                                &lt;li&gt;
<span class='line-number'>500</span>	                                    &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>501</span>	                                        &lt;div class=&quot;grid__col-xs-1 grid--align-self-center&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;Image_@image&quot; class=&quot;u-no-margin&quot; /&gt;&lt;/div&gt;
<span class='line-number'>502</span>	                                        &lt;div class=&quot;grid__col-xs-3 grid__col--bleed-y&quot;&gt;&lt;img src=&quot;@thumb&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot; class=&quot;flex-img&quot;&gt;&lt;/div&gt;
<span class='line-number'>503</span>	                                        &lt;div class=&quot;grid__col-xs-8 grid--align-self-center grid__col--bleed-y&quot;&gt;&lt;span class=&quot;u-truncate-text u-w170px&quot;&gt;@GetString(&quot;Ecom:Product.Name&quot;)&lt;/span&gt;&lt;/div&gt;
<span class='line-number'>504</span>	                                    &lt;/div&gt;
<span class='line-number'>505</span>	                                &lt;/li&gt;
<span class='line-number'>506</span>	                            }
<span class='line-number'>507</span>	                        &lt;/ul&gt;
<span class='line-number'>508</span>	                    }
<span class='line-number'>509</span>	
<span class='line-number'>510</span>	                    @if (documentsCount &gt; 0)
<span class='line-number'>511</span>	                    {
<span class='line-number'>512</span>	                        &lt;h6 class=&quot;panel__header panel__header--line dw-mod&quot;&gt;@Translate(&quot;Documents&quot;) (@documentsCount)&lt;/h6&gt;
<span class='line-number'>513</span>	
<span class='line-number'>514</span>	                        &lt;ul class=&quot;list list--clean dw-mod&quot;&gt;
<span class='line-number'>515</span>	                            @foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;))
<span class='line-number'>516</span>	                            {
<span class='line-number'>517</span>	                                if (!String.IsNullOrEmpty(customField.GetString(&quot;Document.FullPath&quot;)))
<span class='line-number'>518</span>	                                {
<span class='line-number'>519</span>	                                    &lt;li&gt;
<span class='line-number'>520</span>	                                        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>521</span>	                                            &lt;div class=&quot;grid__col-xs-1 grid__col--bleed-y&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;Document_@customField.GetString(&quot;Document.FullPath&quot;)&quot; class=&quot;u-no-margin&quot; /&gt;&lt;/div&gt;
<span class='line-number'>522</span>	                                            &lt;div class=&quot;grid__col-xs-11 grid__col--bleed-y&quot;&gt;&lt;span class=&quot;u-truncate-text u-max-w220px&quot;&gt;@Path.GetFileName(customField.GetString(&quot;Document.FullPath&quot;))&lt;/span&gt;&lt;/div&gt;
<span class='line-number'>523</span>	                                        &lt;/div&gt;
<span class='line-number'>524</span>	                                    &lt;/li&gt;
<span class='line-number'>525</span>	                                }
<span class='line-number'>526</span>	                            }
<span class='line-number'>527</span>	
<span class='line-number'>528</span>	                            @foreach (LoopItem categoryGroup in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'>529</span>	                            {
<span class='line-number'>530</span>	                                foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>531</span>	                                {
<span class='line-number'>532</span>	                                    string fieldValue = categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;);
<span class='line-number'>533</span>	
<span class='line-number'>534</span>	                                    if (!String.IsNullOrEmpty(fieldValue))
<span class='line-number'>535</span>	                                    {
<span class='line-number'>536</span>	                                        if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;9&quot;)
<span class='line-number'>537</span>	                                        {
<span class='line-number'>538</span>	                                            &lt;li&gt;
<span class='line-number'>539</span>	                                                &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>540</span>	                                                    &lt;div class=&quot;grid__col-xs-1 grid__col--bleed-y&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;Document_@fieldValue&quot; class=&quot;u-no-margin&quot; /&gt;&lt;/div&gt;
<span class='line-number'>541</span>	                                                    &lt;div class=&quot;grid__col-xs-11 grid__col--bleed-y&quot;&gt;&lt;span class=&quot;u-truncate-text u-max-w220px&quot;&gt;@Path.GetFileName(fieldValue)&lt;/span&gt;&lt;/div&gt;
<span class='line-number'>542</span>	                                                &lt;/div&gt;
<span class='line-number'>543</span>	                                            &lt;/li&gt;
<span class='line-number'>544</span>	                                        }
<span class='line-number'>545</span>	                                    }
<span class='line-number'>546</span>	                                }
<span class='line-number'>547</span>	                            }
<span class='line-number'>548</span>	                        &lt;/ul&gt;
<span class='line-number'>549</span>	                    }
<span class='line-number'>550</span>	                &lt;/div&gt;
<span class='line-number'>551</span>	
<span class='line-number'>552</span>	                &lt;div class=&quot;panel__content__footer panel__content__footer--400px dw-mod&quot;&gt;
<span class='line-number'>553</span>	                &lt;input id=&quot;ID&quot; name=&quot;ID&quot; type=&quot;hidden&quot; value=&quot;532&quot; /&gt;
<span class='line-number'>554</span>	                &lt;input id=&quot;download&quot; name=&quot;download&quot; type=&quot;hidden&quot; value=&quot;true&quot; /&gt;
<span class='line-number'>555</span>	                &lt;input id=&quot;siteUrl&quot; name=&quot;siteUrl&quot; type=&quot;hidden&quot; value=&quot;@string.Format(&quot;{0}://{1}&quot;, GetGlobalValue(&quot;Global:Request.Scheme&quot;), GetGlobalValue(&quot;Global:Request.Host&quot;))&quot; /&gt;
<span class='line-number'>556</span>	
<span class='line-number'>557</span>	                &lt;h6 class=&quot;panel__header panel__header--line dw-mod&quot;&gt;@Translate(&quot;Export&quot;)&lt;/h6&gt;
<span class='line-number'>558</span>	
<span class='line-number'>559</span>	                &lt;label&gt;@Translate(&quot;Language&quot;)&lt;/label&gt;
<span class='line-number'>560</span>	                &lt;select id=&quot;exportLanguage&quot; name=&quot;LanguageId&quot; class=&quot;u-full-width&quot;&gt;
<span class='line-number'>561</span>	                    @foreach (Language lang in Language.GetLanguages())
<span class='line-number'>562</span>	                    {
<span class='line-number'>563</span>	                        &lt;option value=&quot;@lang.LanguageId&quot;&gt;@lang.Name&lt;/option&gt;
<span class='line-number'>564</span>	                    }
<span class='line-number'>565</span>	                &lt;/select&gt;
<span class='line-number'>566</span>	
<span class='line-number'>567</span>	                &lt;label&gt;@Translate(&quot;Purpose&quot;)&lt;/label&gt;
<span class='line-number'>568</span>	                &lt;select id=&quot;purpose&quot; name=&quot;purpose&quot; class=&quot;u-full-width&quot;&gt;
<span class='line-number'>569</span>	                    &lt;option value=&quot;Original&quot;&gt;@Translate(&quot;Original&quot;)&lt;/option&gt;
<span class='line-number'>570</span>	                    &lt;option value=&quot;Print&quot;&gt;@Translate(&quot;Print&quot;)&lt;/option&gt;
<span class='line-number'>571</span>	                    &lt;option value=&quot;Office&quot;&gt;@Translate(&quot;Office&quot;)&lt;/option&gt;
<span class='line-number'>572</span>	                    &lt;option value=&quot;Web&quot;&gt;Web&lt;/option&gt;
<span class='line-number'>573</span>	                &lt;/select&gt;
<span class='line-number'>574</span>	
<span class='line-number'>575</span>	                &lt;label&gt;@Translate(&quot;Export format&quot;)&lt;/label&gt;
<span class='line-number'>576</span>	                &lt;select id=&quot;exportFormat&quot; name=&quot;format&quot; class=&quot;u-full-width&quot;&gt;
<span class='line-number'>577</span>	                    &lt;option value=&quot;xml&quot;&gt;Xml&lt;/option&gt;
<span class='line-number'>578</span>	                    &lt;option value=&quot;json&quot;&gt;Json&lt;/option&gt;
<span class='line-number'>579</span>	                    &lt;option value=&quot;csv&quot;&gt;Csv&lt;/option&gt;
<span class='line-number'>580</span>	                &lt;/select&gt;
<span class='line-number'>581</span>	
<span class='line-number'>582</span>	                &lt;input type=&quot;submit&quot; value=&quot;@Translate(&quot;Download&quot;)&quot; class=&quot;btn btn--full btn--primary dw-mod&quot; title=&quot;@Translate(&quot;Download&quot;)&quot; /&gt;
<span class='line-number'>583</span>	            &lt;/div&gt;
<span class='line-number'>584</span>	            &lt;/form&gt;
<span class='line-number'>585</span>	
<span class='line-number'>586</span>	                &lt;form action=&quot;/Default.aspx?ID=@exportPageId&amp;ProductID=@System.Web.HttpContext.Current.Request.QueryString.Get(&quot;ProductID&quot;)&amp;GeneratePdf=true&quot; method=&quot;post&quot;&gt;
<span class='line-number'>587</span>	            &lt;div class=&quot;panel__content__footer panel__content__footer--400px dw-mod&quot;&gt;
<span class='line-number'>588</span>	                &lt;h6 class=&quot;panel__header panel__header--line dw-mod&quot;&gt;@Translate(&quot;Generate PDF&quot;)&lt;/h6&gt;
<span class='line-number'>589</span>	                &lt;input id=&quot;siteUrl&quot; name=&quot;siteUrl&quot; type=&quot;hidden&quot; value=&quot;@string.Format(&quot;{0}://{1}&quot;, GetGlobalValue(&quot;Global:Request.Scheme&quot;), GetGlobalValue(&quot;Global:Request.Host&quot;))&quot; /&gt;
<span class='line-number'>590</span>	                &lt;label&gt;@Translate(&quot;Language&quot;)&lt;/label&gt;
<span class='line-number'>591</span>	                &lt;select id=&quot;PdfLanguageId&quot; name=&quot;PdfLanguageId&quot; class=&quot;u-full-width&quot;&gt;
<span class='line-number'>592</span>	                    @foreach (Language lang in Language.GetLanguages())
<span class='line-number'>593</span>	                    {
<span class='line-number'>594</span>	                        &lt;option value=&quot;@lang.LanguageId&quot;&gt;@lang.Name&lt;/option&gt;
<span class='line-number'>595</span>	                    }
<span class='line-number'>596</span>	                &lt;/select&gt;
<span class='line-number'>597</span>	
<span class='line-number'>598</span>	                &lt;label&gt;@Translate(&quot;Generate PDF&quot;)&lt;/label&gt;
<span class='line-number'>599</span>	                &lt;select id=&quot;PdfPageId&quot; name=&quot;PdfPageId&quot; class=&quot;u-full-width&quot;&gt;
<span class='line-number'>600</span>	                    &lt;option value=&quot;&quot; selected&gt;@Translate(&quot;Select type&quot;)&lt;/option&gt;
<span class='line-number'>601</span>	                    @foreach (Dynamicweb.Content.Page page in ServiceLocator.Current.GetPageService().GetPagesByParentID(pdfFolderId))
<span class='line-number'>602</span>	                    {
<span class='line-number'>603</span>	                        &lt;option value=&quot;@page.ID&quot; selected&gt;@page.MenuText&lt;/option&gt;
<span class='line-number'>604</span>	                    }
<span class='line-number'>605</span>	                &lt;/select&gt;
<span class='line-number'>606</span>	
<span class='line-number'>607</span>	                &lt;input type=&quot;submit&quot; value=&quot;@Translate(&quot;Generate PDF&quot;)&quot; class=&quot;btn btn--full btn--primary dw-mod&quot; title=&quot;@Translate(&quot;Generate PDF&quot;)&quot; /&gt;
<span class='line-number'>608</span>	            &lt;/div&gt;
<span class='line-number'>609</span>	                &lt;/form&gt;
<span class='line-number'>610</span>	&lt;/div&gt;
<span class='line-number'>611</span>	&lt;/aside&gt;
<span class='line-number'>612</span>	
<span class='line-number'>613</span>	@* Script templates for the updateable product content *@
<span class='line-number'>614</span>	&lt;script id=&quot;productUpdateableContentTemplate&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>615</span>	    &lt;div class=&quot;grid product&quot;&gt;
<span class='line-number'>616</span>	        @* Image block with optional thumbs *@
<span class='line-number'>617</span>	        &lt;div class=&quot;grid__col-md-6 grid__col-sm-6&quot;&gt;
<span class='line-number'>618</span>	            &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>619</span>	                &lt;div class=&quot;grid__col-2 u-color-light-gray--bg u-hidden-xxs &quot;&gt;
<span class='line-number'>620</span>	                    &lt;div class=&quot;thumb-list&quot;&gt;
<span class='line-number'>621</span>	                        &lt;div id=&quot;ThumbnailImages&quot; data-template=&quot;ThumbnailImageTemplate&quot;&gt;&lt;/div&gt;
<span class='line-number'>622</span>	                    &lt;/div&gt;
<span class='line-number'>623</span>	                &lt;/div&gt;
<span class='line-number'>624</span>	
<span class='line-number'>625</span>	                &lt;div class=&quot;grid__col-auto&quot;&gt;
<span class='line-number'>626</span>	                    &lt;div class=&quot;sticker {{onSale}} dw-mod&quot;&gt;@Translate(&quot;Sale!&quot;)&lt;/div&gt;
<span class='line-number'>627</span>	                    &lt;img class=&quot;thumb-image-view flex-img&quot; id=&quot;Image_{{id}}&quot; src=&quot;/Admin/Public/GetImage.ashx?height=550&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image={{image}}&quot; alt=&quot;{{name}}&quot; /&gt;
<span class='line-number'>628</span>	                &lt;/div&gt;
<span class='line-number'>629</span>	            &lt;/div&gt;
<span class='line-number'>630</span>	        &lt;/div&gt;
<span class='line-number'>631</span>	
<span class='line-number'>632</span>	        @* Primary product informations *@
<span class='line-number'>633</span>	        &lt;div class=&quot;grid__col-auto&quot;&gt;
<span class='line-number'>634</span>	            &lt;div class=&quot;grid__cell&quot;&gt;
<span class='line-number'>635</span>	                &lt;div class=&quot;u-pull--left product__title dw-mod&quot;&gt;
<span class='line-number'>636</span>	                    &lt;h1 class=&quot;u-no-margin&quot;&gt;{{name}}&lt;/h1&gt;
<span class='line-number'>637</span>	                    &lt;div class=&quot;item-number dw-mod&quot;&gt;{{number}}&lt;/div&gt;
<span class='line-number'>638</span>	                &lt;/div&gt;
<span class='line-number'>639</span>	
<span class='line-number'>640</span>	                &lt;div&gt;
<span class='line-number'>641</span>	                    @* Short description *@
<span class='line-number'>642</span>	                    &lt;div class=&quot;introduction-text&quot;&gt;
<span class='line-number'>643</span>	                        {{description}}
<span class='line-number'>644</span>	                    &lt;/div&gt;
<span class='line-number'>645</span>	
<span class='line-number'>646</span>	                    @* Variants *@
<span class='line-number'>647</span>	                    &lt;div&gt;
<span class='line-number'>648</span>	                        @* Combinations div needed to handle variant options(used in script block with Variants.SetVariantOptionStatesForProductList function) and should not be deleted *@
<span class='line-number'>649</span>	                        &lt;div id=&quot;Combinations&quot; data-template=&quot;VariantCombinations&quot; data-product-id=&quot;{{id}}&quot; class=&quot;js-variants-wrap u-hidden&quot;&gt;&lt;/div&gt;
<span class='line-number'>650</span>	                        &lt;div id=&quot;Variants&quot; data-template=&quot;VariantGroup&quot; data-product-id=&quot;{{id}}&quot;&gt;&lt;/div&gt;
<span class='line-number'>651</span>	                        &lt;small id=&quot;helpText_{{id}}&quot; class=&quot;help-text {{hideViewMore}} {{hideHelpText}}&quot;&gt;@Translate(&quot;Please select variant!&quot;)&lt;/small&gt;
<span class='line-number'>652</span>	                    &lt;/div&gt;
<span class='line-number'>653</span>	                &lt;/div&gt;
<span class='line-number'>654</span>	            &lt;/div&gt;
<span class='line-number'>655</span>	
<span class='line-number'>656</span>	            &lt;div class=&quot;grid__cell-footer&quot;&gt;
<span class='line-number'>657</span>	                &lt;input type=&quot;hidden&quot; id=&quot;CartButton_{{id}}&quot; class=&quot;btn btn--primary dw-mod u-pull--right&quot; name=&quot;submit&quot; /&gt;
<span class='line-number'>658</span>	                &lt;input type=&quot;hidden&quot; value=&quot;{{variantid}}&quot; name=&quot;Variant&quot; id=&quot;Variant_{{id}}&quot; /&gt;
<span class='line-number'>659</span>	            &lt;/div&gt;
<span class='line-number'>660</span>	        &lt;/div&gt;
<span class='line-number'>661</span>	    &lt;/div&gt;
<span class='line-number'>662</span>	&lt;/script&gt;
<span class='line-number'>663</span>	
<span class='line-number'>664</span>	@* Thumbnail images *@
<span class='line-number'>665</span>	&lt;script id=&quot;ThumbnailImageTemplate&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>666</span>	    &lt;div class=&quot;thumb-list__item dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_{{productId}}&quot; data-image-path=&quot;/Admin/Public/GetImage.ashx?width=500&amp;amp;height=500&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image={{image}}&quot;&gt;&lt;img src=&quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image={{image}}&quot;&gt;&lt;/div&gt;
<span class='line-number'>667</span>	&lt;/script&gt;
<span class='line-number'>668</span>	
<span class='line-number'>669</span>	
<span class='line-number'>670</span>	@* Variants templates *@
<span class='line-number'>671</span>	&lt;script id=&quot;VariantGroup&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>672</span>	    &lt;div&gt;
<span class='line-number'>673</span>	        &lt;div&gt;{{name}}&lt;/div&gt;
<span class='line-number'>674</span>	        &lt;div id=&quot;VariantOptions&quot; data-template=&quot;VariantOption&quot;&gt;&lt;/div&gt;
<span class='line-number'>675</span>	    &lt;/div&gt;
<span class='line-number'>676</span>	&lt;/script&gt;
<span class='line-number'>677</span>	
<span class='line-number'>678</span>	&lt;script id=&quot;VariantOption&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>679</span>	    &lt;button type=&quot;button&quot; id=&quot;{{id}}&quot; data-product-id=&quot;@productId&quot; onclick=&quot;Variants.UpdateVariants(this)&quot; class=&quot;btn btn--tag {{disabled}} {{selected}}&quot; data-check=&quot;{{selected}}&quot; {{disabled}}&gt;{{name}}&lt;/button&gt;
<span class='line-number'>680</span>	&lt;/script&gt;
<span class='line-number'>681</span>	
<span class='line-number'>682</span>	@* Favorites templates *@
<span class='line-number'>683</span>	&lt;script id=&quot;FavoriteTemplate&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>684</span>	    &lt;div class=&quot;favorites-list u-pull--right u-ta-left&quot;&gt;
<span class='line-number'>685</span>	        &lt;i class=&quot;{{favoriteIcon}} fa-1_5x&quot;&gt;&lt;/i&gt;
<span class='line-number'>686</span>	        &lt;div class=&quot;favorites-list__container dw-mod&quot;&gt;
<span class='line-number'>687</span>	            &lt;ul id=&quot;FavoriteLists&quot; data-template=&quot;FavoriteListItem&quot; class=&quot;list list--clean dw-mod&quot;&gt;&lt;/ul&gt;
<span class='line-number'>688</span>	        &lt;/div&gt;
<span class='line-number'>689</span>	    &lt;/div&gt;
<span class='line-number'>690</span>	&lt;/script&gt;
<span class='line-number'>691</span>	
<span class='line-number'>692</span>	@* BOMProduct templates *@
<span class='line-number'>693</span>	&lt;script id=&quot;BOMProductTemplate&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>694</span>	    &lt;div class=&quot;grid__col--border grid&quot;&gt;
<span class='line-number'>695</span>	        &lt;div class=&quot;grid__cell grid__cell--align-middle-left&quot;&gt;
<span class='line-number'>696</span>	            &lt;a href=&quot;{{link}}&quot; class=&quot;u-pull--left u-margin-right&quot;&gt;
<span class='line-number'>697</span>	                &lt;img src=&quot;/Admin/Public/GetImage.ashx?width=50&amp;image={{image}}&amp;Compression=99&quot; /&gt;
<span class='line-number'>698</span>	            &lt;/a&gt;
<span class='line-number'>699</span>	            &lt;a href=&quot;{{link}}&quot;&gt;{{name}}&lt;/a&gt;
<span class='line-number'>700</span>	        &lt;/div&gt;
<span class='line-number'>701</span>	    &lt;/div&gt;
<span class='line-number'>702</span>	&lt;/script&gt;
<span class='line-number'>703</span>	
<span class='line-number'>704</span>	&lt;script id=&quot;FavoriteListItem&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>705</span>	    &lt;li&gt;
<span class='line-number'>706</span>	        &lt;a href=&quot;{{link}}&quot; class=&quot;list__link dw-mod&quot;&gt;&lt;i class=&quot;{{favoriteIcon}}&quot;&gt;&lt;/i&gt; {{name}}&lt;/a&gt;
<span class='line-number'>707</span>	    &lt;/li&gt;
<span class='line-number'>708</span>	&lt;/script&gt;
<span class='line-number'>709</span>	
<span class='line-number'>710</span>	&lt;script id=&quot;unitOption&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>711</span>	    &lt;div class=&quot;dropdown__item dw-mod&quot; onclick=&quot;Dynamo.UpdateContent(&#39;@productContainerId&#39;, &#39;@feedUrl&amp;ProductID=@productId&amp;UnitID={{value}}&#39;)&quot;&gt;{{name}}&lt;/div&gt;
<span class='line-number'>712</span>	&lt;/script&gt;
<span class='line-number'>713</span>	
<span class='line-number'>714</span>	
<span class='line-number'>715</span>	@* Script templates for related products *@
<span class='line-number'>716</span>	&lt;script id=&quot;ProductPreRenderContainer&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>717</span>	    &lt;div class=&quot;grid__col-md-4&quot;&gt;
<span class='line-number'>718</span>	        &lt;div class=&quot;pre-render-element pre-render-element--md&quot;&gt;&lt;/div&gt;
<span class='line-number'>719</span>	    &lt;/div&gt;
<span class='line-number'>720</span>	    &lt;div class=&quot;grid__col-md-4&quot;&gt;
<span class='line-number'>721</span>	        &lt;div class=&quot;pre-render-element pre-render-element--md&quot;&gt;&lt;/div&gt;
<span class='line-number'>722</span>	    &lt;/div&gt;
<span class='line-number'>723</span>	    &lt;div class=&quot;grid__col-md-4&quot;&gt;
<span class='line-number'>724</span>	        &lt;div class=&quot;pre-render-element pre-render-element--md&quot;&gt;&lt;/div&gt;
<span class='line-number'>725</span>	    &lt;/div&gt;
<span class='line-number'>726</span>	&lt;/script&gt;
<span class='line-number'>727</span>	
<span class='line-number'>728</span>	&lt;script id=&quot;ProductContainer&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>729</span>	    &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>730</span>	        &lt;h2 class=&quot;section-title section-title--condensed&quot;&gt;@Translate(&quot;What about these products?&quot;)&lt;/h2&gt;
<span class='line-number'>731</span>	    &lt;/div&gt;
<span class='line-number'>732</span>	
<span class='line-number'>733</span>	    &lt;div class=&quot;grid__col-1 grid__col--bleed-x&quot;&gt;
<span class='line-number'>734</span>	        &lt;div class=&quot;grid__cell grid__cell--align-middle-right&quot;&gt;
<span class='line-number'>735</span>	            &lt;button class=&quot;btn btn--condensed btn--clean {{prevdisabled}} dw-mod&quot; onclick=&quot;Dynamo.UpdateContent(&#39;ProductList&#39;, &#39;{{prevPage}}&#39;)&quot; {{prevdisabled}}&gt;&lt;i class=&quot;fa fa-chevron-left fa-2x&quot;&gt;&lt;/i&gt;&lt;/button&gt;
<span class='line-number'>736</span>	        &lt;/div&gt;
<span class='line-number'>737</span>	    &lt;/div&gt;
<span class='line-number'>738</span>	    &lt;div class=&quot;grid__col-10 grid__col--bleed-x&quot;&gt;
<span class='line-number'>739</span>	        &lt;div id=&quot;ProductsContainer&quot; class=&quot;grid product-list dw-mod&quot; data-template=&quot;ProductGridItemContainer&quot;&gt;&lt;/div&gt;
<span class='line-number'>740</span>	    &lt;/div&gt;
<span class='line-number'>741</span>	    &lt;div class=&quot;grid__col-1 grid__col--bleed-x&quot;&gt;
<span class='line-number'>742</span>	        &lt;div class=&quot;grid__cell grid__cell--align-middle-left&quot;&gt;
<span class='line-number'>743</span>	            &lt;button class=&quot;btn btn--condensed btn--clean {{nextdisabled}} dw-mod&quot; onclick=&quot;Dynamo.UpdateContent(&#39;ProductList&#39;, &#39;{{nextPage}}&#39;)&quot; {{nextdisabled}}&gt;&lt;i class=&quot;fa fa-chevron-right fa-2x&quot;&gt;&lt;/i&gt;&lt;/button&gt;
<span class='line-number'>744</span>	        &lt;/div&gt;
<span class='line-number'>745</span>	    &lt;/div&gt;
<span class='line-number'>746</span>	&lt;/script&gt;
<span class='line-number'>747</span>	
<span class='line-number'>748</span>	&lt;script id=&quot;ProductGridItemContainer&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>749</span>	    &lt;div id=&quot;Product&quot; class=&quot;grid__col-lg-4 grid__col-md-4 grid__col-sm-4 grid__col-xs-6&quot; data-template=&quot;ProductGridItem&quot; data-preloader=&quot;false&quot;&gt;&lt;/div&gt;
<span class='line-number'>750</span>	&lt;/script&gt;
<span class='line-number'>751</span>	
<span class='line-number'>752</span>	&lt;script id=&quot;ProductGridItem&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>753</span>	    &lt;div class=&quot;grid__cell u-border {{noImage}}&quot;&gt;
<span class='line-number'>754</span>	        &lt;div class=&quot;sticker {{onSale}} dw-mod&quot;&gt;@Translate(&quot;Sale!&quot;)&lt;/div&gt;
<span class='line-number'>755</span>	        &lt;a href=&quot;{{link}}&quot; onclick=&quot;Scroll.SavePosition(event)&quot;&gt;&lt;img class=&quot;grid__cell-img grid__cell-img--centered&quot; src=&quot;/Admin/Public/GetImage.ashx?width=300&amp;amp;height=300&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image={{image}}&quot; alt=&quot;{{name}}&quot; /&gt;&lt;/a&gt;
<span class='line-number'>756</span>	    &lt;/div&gt;
<span class='line-number'>757</span>	
<span class='line-number'>758</span>	    &lt;div class=&quot;grid__cell card u-color-light--bg u-border-left u-border-right&quot;&gt;
<span class='line-number'>759</span>	        &lt;div class=&quot;u-ta-center&quot;&gt;
<span class='line-number'>760</span>	            &lt;a href=&quot;{{link}}&quot; onclick=&quot;Scroll.SavePosition(event)&quot; title=&quot;{{name}}&quot;&gt;&lt;h6 class=&quot;u-ta-center u-condensed-text&quot;&gt;{{name}}&lt;/h6&gt;&lt;/a&gt;
<span class='line-number'>761</span>	            &lt;div class=&quot;item-number dw-mod&quot;&gt;{{number}}&lt;/div&gt;
<span class='line-number'>762</span>	            &lt;div class=&quot;before-price {{onSale}} dw-mod&quot;&gt;{{discount}}&lt;/div&gt;
<span class='line-number'>763</span>	            &lt;div class=&quot;price dw-mod&quot;&gt;{{price}}&lt;/div&gt;
<span class='line-number'>764</span>	        &lt;/div&gt;
<span class='line-number'>765</span>	    &lt;/div&gt;
<span class='line-number'>766</span>	
<span class='line-number'>767</span>	    &lt;div class=&quot;card-footer u-color-light--bg u-border-left u-border-right u-border-bottom&quot;&gt;
<span class='line-number'>768</span>	        &lt;div class=&quot;u-ta-center&quot;&gt;
<span class='line-number'>769</span>	            &lt;a href=&quot;{{link}}&quot; id=&quot;CartButton_{{id}}&quot; class=&quot;btn btn--secondary btn--full u-no-margin dw-mod&quot;&gt;@Translate(&quot;View&quot;)&lt;/a&gt;
<span class='line-number'>770</span>	        &lt;/div&gt;
<span class='line-number'>771</span>	    &lt;/div&gt;
<span class='line-number'>772</span>	&lt;/script&gt;
<span class='line-number'>773</span>	
<span class='line-number'>774</span>	@*Variants data generation*@
<span class='line-number'>775</span>	&lt;script&gt;
<span class='line-number'>776</span>	    document.addEventListener(&quot;DOMContentLoaded&quot;, function (event) {
<span class='line-number'>777</span>	        Facets.Init(&quot;productList&quot;, &#39;@productCatalogId&#39;, &#39;@requestQuery&#39;);
<span class='line-number'>778</span>	
<span class='line-number'>779</span>	        Variants.SetProductFeedId(&#39;@productCatalogId&#39;);
<span class='line-number'>780</span>	        Variants.SetViewMode(&quot;productList&quot;);
<span class='line-number'>781</span>	
<span class='line-number'>782</span>	        document.getElementById(&quot;productList&quot;).addEventListener(&#39;contentLoaded&#39;, function (e) {
<span class='line-number'>783</span>	            if (e.srcElement.classList.contains(&quot;js-variants-wrap&quot;)) {
<span class='line-number'>784</span>	                Variants.SetVariantOptionStatesForProductList(e.srcElement);
<span class='line-number'>785</span>	            }
<span class='line-number'>786</span>	        }, false);
<span class='line-number'>787</span>	    });
<span class='line-number'>788</span>	&lt;/script&gt;
</div>

2018-05-09 17:24:09.9929|ERROR|Templates|Error compiling razor template
Error compiling template "Designs/Rapido/eCom/Product/Product.cshtml"
Line 1873: The name 'productCatalogId' does not exist in the current context
Line 1877: The name 'requestQuery' does not exist in the current context
Line 1881: The name 'productCatalogId' does not exist in the current context
<hr/>
<div class='template-code'>
<span class='line-number'>  1</span>	@inherits Dynamicweb.Rendering.RazorTemplateBase&lt;Dynamicweb.Rendering.RazorTemplateModel&lt;Dynamicweb.Rendering.Template&gt;&gt;
<span class='line-number'>  2</span>	@using Dynamicweb.Extensibility
<span class='line-number'>  3</span>	@using Dynamicweb.Content
<span class='line-number'>  4</span>	@using System
<span class='line-number'>  5</span>	@using System.IO
<span class='line-number'>  6</span>	
<span class='line-number'>  7</span>	@{
<span class='line-number'>  8</span>	    string pageId = GetGlobalValue(&quot;Global:Page.ID&quot;).ToString();
<span class='line-number'>  9</span>	    string productId = GetString(&quot;Ecom:Product.ID&quot;);
<span class='line-number'> 10</span>	    string onSale = GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;) == GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;) ? &quot;u-hidden&quot; : &quot;&quot;;
<span class='line-number'> 11</span>	    string currentPrice = AddSpaceAfterCurrency(GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;) == GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;) ? GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;) : GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;));
<span class='line-number'> 12</span>	    string hideHelpText = &quot;&quot;;
<span class='line-number'> 13</span>	    string feedId = GetPageIdByNavigationTag(&quot;ProductsFeed&quot;).ToString();
<span class='line-number'> 14</span>	    int featuresCount = 0;
<span class='line-number'> 15</span>	    int thumbsCount = GetLoop(&quot;Details&quot;).Count;
<span class='line-number'> 16</span>	
<span class='line-number'> 17</span>	    foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;))
<span class='line-number'> 18</span>	    {
<span class='line-number'> 19</span>	        if (!String.IsNullOrEmpty(customField.GetString(&quot;Product.CustomField.Value.Clean&quot;)))
<span class='line-number'> 20</span>	        {
<span class='line-number'> 21</span>	            featuresCount++;
<span class='line-number'> 22</span>	        }
<span class='line-number'> 23</span>	    }
<span class='line-number'> 24</span>	
<span class='line-number'> 25</span>	    foreach (LoopItem customField in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'> 26</span>	    {
<span class='line-number'> 27</span>	        foreach (LoopItem field in customField.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'> 28</span>	        {
<span class='line-number'> 29</span>	            if (!String.IsNullOrEmpty(field.GetString(&quot;Ecom:Product.CategoryField.Value&quot;)))
<span class='line-number'> 30</span>	            {
<span class='line-number'> 31</span>	                featuresCount++;
<span class='line-number'> 32</span>	            }
<span class='line-number'> 33</span>	        }
<span class='line-number'> 34</span>	    }
<span class='line-number'> 35</span>	
<span class='line-number'> 36</span>	    foreach (LoopItem alternativeImage in GetLoop(&quot;Ecom:Product.AlternativeImages&quot;))
<span class='line-number'> 37</span>	    {
<span class='line-number'> 38</span>	        if (!String.IsNullOrEmpty(alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;)))
<span class='line-number'> 39</span>	        {
<span class='line-number'> 40</span>	            thumbsCount++;
<span class='line-number'> 41</span>	        }
<span class='line-number'> 42</span>	    }
<span class='line-number'> 43</span>	
<span class='line-number'> 44</span>	    foreach (LoopItem variantgroup in GetLoop(&quot;VariantGroups&quot;))
<span class='line-number'> 45</span>	    {
<span class='line-number'> 46</span>	        foreach (LoopItem variantoption in variantgroup.GetLoop(&quot;VariantAvailableOptions&quot;))
<span class='line-number'> 47</span>	        {
<span class='line-number'> 48</span>	            if (variantoption.GetBoolean(&quot;Ecom:VariantOption.Selected&quot;))
<span class='line-number'> 49</span>	            {
<span class='line-number'> 50</span>	                hideHelpText = &quot;u-hidden&quot;;
<span class='line-number'> 51</span>	            }
<span class='line-number'> 52</span>	        }
<span class='line-number'> 53</span>	    }
<span class='line-number'> 54</span>	
<span class='line-number'> 55</span>	    int relatedProductsPageSize = 4;
<span class='line-number'> 56</span>	    int relatedProductsColumnWidth = 3;
<span class='line-number'> 57</span>	
<span class='line-number'> 58</span>	    if (Pageview.Device.ToString() == &quot;Mobile&quot;)
<span class='line-number'> 59</span>	    {
<span class='line-number'> 60</span>	        relatedProductsPageSize = 1;
<span class='line-number'> 61</span>	        relatedProductsColumnWidth = 12;
<span class='line-number'> 62</span>	    }
<span class='line-number'> 63</span>	
<span class='line-number'> 64</span>	    if (Pageview.Device.ToString() == &quot;Tablet&quot;)
<span class='line-number'> 65</span>	    {
<span class='line-number'> 66</span>	        relatedProductsPageSize = 3;
<span class='line-number'> 67</span>	        relatedProductsColumnWidth = 4;
<span class='line-number'> 68</span>	    }
<span class='line-number'> 69</span>	
<span class='line-number'> 70</span>	    string feedPageUrl = &quot;/Default.aspx?ID=&quot; + GetPageIdByNavigationTag(&quot;RelatedProductsFeed&quot;);
<span class='line-number'> 71</span>	    string feedFullUrl = feedPageUrl + &quot;&amp;feedType=productCatalog&amp;PageSize=&quot; + relatedProductsPageSize + &quot;&amp;ProdID=&quot; + productId;
<span class='line-number'> 72</span>	    string productContainerId = &quot;Product&quot; + productId;
<span class='line-number'> 73</span>	
<span class='line-number'> 74</span>	    string HideStockStatus = GetString(&quot;Ecom:Product:Field.HideShowStock&quot;);
<span class='line-number'> 75</span>	
<span class='line-number'> 76</span>	}
<span class='line-number'> 77</span>	
<span class='line-number'> 78</span>	
<span class='line-number'> 79</span>	@functions {
<span class='line-number'> 80</span>	    string AddSpaceAfterCurrency(string str)
<span class='line-number'> 81</span>	    {
<span class='line-number'> 82</span>	        return str.Insert(str.IndexOfAny(&quot;0123456789-&quot;.ToCharArray()), &quot; &quot;);
<span class='line-number'> 83</span>	    }
<span class='line-number'> 84</span>	}
<span class='line-number'> 85</span>	
<span class='line-number'> 86</span>	&lt;!-- Trigger for the image modal --&gt;
<span class='line-number'> 87</span>	&lt;input type=&quot;checkbox&quot; id=&quot;ImageModalTrigger&quot; class=&quot;modal-trigger&quot; /&gt;
<span class='line-number'> 88</span>	
<span class='line-number'> 89</span>	&lt;!-- Image modal --&gt;
<span class='line-number'> 90</span>	&lt;div class=&quot;modal-container&quot;&gt;
<span class='line-number'> 91</span>	    &lt;label for=&quot;ImageModalTrigger&quot; id=&quot;ImageModalOverlay&quot; class=&quot;modal-overlay&quot;&gt;&lt;/label&gt;
<span class='line-number'> 92</span>	    &lt;div class=&quot;modal modal--full&quot; id=&quot;ImageModal&quot;&gt;
<span class='line-number'> 93</span>	        &lt;div class=&quot;modal__body&quot;&gt;
<span class='line-number'> 94</span>	            &lt;img id=&quot;FullImage&quot; class=&quot;modal--full__img&quot; src=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot; /&gt;
<span class='line-number'> 95</span>	        &lt;/div&gt;
<span class='line-number'> 96</span>	    &lt;/div&gt;
<span class='line-number'> 97</span>	&lt;/div&gt;
<span class='line-number'> 98</span>	
<span class='line-number'> 99</span>	&lt;div class=&quot;paragraph-container__grid--bleed-x paragraph-container__grid--bleed-y&quot;&gt;
<span class='line-number'>100</span>	    &lt;div class=&quot;grid product&quot; id=&quot;productGrid&quot;&gt;
<span class='line-number'>101</span>	        @* Image block with optional thumbs *@
<span class='line-number'>102</span>	        @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)))
<span class='line-number'>103</span>	        {
<span class='line-number'>104</span>	            &lt;div class=&quot;grid__col-md-6 grid__col-sm-6&quot;&gt;
<span class='line-number'>105</span>	                &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>106</span>	                    @if (thumbsCount &gt; 0)
<span class='line-number'>107</span>	                {
<span class='line-number'>108</span>	                        &lt;div class=&quot;grid__col-2 u-hidden-xxs product__thumbs dw-mod&quot;&gt;
<span class='line-number'>109</span>	                            &lt;div class=&quot;thumb-list&quot;&gt;
<span class='line-number'>110</span>	                                &lt;div class=&quot;thumb-list__item thumb-list__item--active dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_@productId&quot; data-full-image=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; data-image-path=&quot;/Admin/Public/GetImage.ashx?width=550&amp;amp;height=550&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot;&gt;&lt;img src=&quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'>111</span>	
<span class='line-number'>112</span>	                                @foreach (LoopItem alternativeImage in GetLoop(&quot;Ecom:Product.AlternativeImages&quot;))
<span class='line-number'>113</span>	                                {
<span class='line-number'>114</span>	                                    if (!String.IsNullOrEmpty(alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;)))
<span class='line-number'>115</span>	                                    {
<span class='line-number'>116</span>	                                        string fullImage = alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>117</span>	                                        string image = &quot;/Admin/Public/GetImage.ashx?width=550&amp;amp;height=550&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>118</span>	                                        string thumb = &quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>119</span>	
<span class='line-number'>120</span>	                                        &lt;div class=&quot;thumb-list__item dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_@productId&quot; data-full-image=&quot;@fullImage&quot; data-image-path=&quot;@image&quot;&gt;&lt;img src=&quot;@thumb&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'>121</span>	                                    }
<span class='line-number'>122</span>	                                }
<span class='line-number'>123</span>	
<span class='line-number'>124</span>	                                @foreach (LoopItem detail in GetLoop(&quot;Details&quot;))
<span class='line-number'>125</span>	                                {
<span class='line-number'>126</span>	                                    string fullImage = detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>127</span>	                                    string image = &quot;/Admin/Public/GetImage.ashx?width=550&amp;amp;height=550&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>128</span>	                                    string thumb = &quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>129</span>	
<span class='line-number'>130</span>	                                    &lt;div class=&quot;thumb-list__item dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_@productId&quot; data-full-image=&quot;@fullImage&quot; data-image-path=&quot;@image&quot;&gt;&lt;img src=&quot;@thumb&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'>131</span>	                                }
<span class='line-number'>132</span>	                            &lt;/div&gt;
<span class='line-number'>133</span>	                        &lt;/div&gt;
<span class='line-number'>134</span>	                    }
<span class='line-number'>135</span>	                    &lt;div class=&quot;grid__col-auto&quot;&gt;
<span class='line-number'>136</span>	                        @if (GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;) != GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;))
<span class='line-number'>137</span>	                        {
<span class='line-number'>138</span>	                            &lt;div class=&quot;sticker u-margin-left dw-mod&quot;&gt;@Translate(&quot;Sale!&quot;)&lt;/div&gt;
<span class='line-number'>139</span>	                        }
<span class='line-number'>140</span>	                        &lt;label for=&quot;ImageModalTrigger&quot; class=&quot;product__image-container&quot;&gt;
<span class='line-number'>141</span>	                            &lt;img class=&quot;thumb-image-view product__image-container__image dw-mod&quot; onclick=&quot;document.getElementById(&#39;FullImage&#39;).src = this.getAttribute(&#39;data-full-image&#39;)&quot; id=&quot;Image_@productId&quot; src=&quot;/Admin/Public/GetImage.ashx?crop=5&amp;height=550&amp;width=550&amp;Compression=75&amp;DoNotUpscale=true&amp;image=@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; data-full-image=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot; /&gt;
<span class='line-number'>142</span>	                        &lt;/label&gt;
<span class='line-number'>143</span>	                    &lt;/div&gt;
<span class='line-number'>144</span>	                &lt;/div&gt;
<span class='line-number'>145</span>	            &lt;/div&gt;
<span class='line-number'>146</span>	        }
<span class='line-number'>147</span>	
<span class='line-number'>148</span>	        @* Primary product informations *@
<span class='line-number'>149</span>	        &lt;div class=&quot;grid__col-auto product__info dw-mod&quot;&gt;
<span class='line-number'>150</span>	            &lt;div class=&quot;grid__cell&quot;&gt;
<span class='line-number'>151</span>	                &lt;div class=&quot;u-pull--left product__title dw-mod&quot;&gt;
<span class='line-number'>152</span>	                    &lt;h1 class=&quot;u-no-margin&quot;&gt;@GetString(&quot;Ecom:Product.Name&quot;) @GetString(&quot;Ecom:Product.SelectedVariantComboName&quot;)&lt;/h1&gt;
<span class='line-number'>153</span>	                    &lt;div class=&quot;item-number dw-mod&quot;&gt;@GetString(&quot;Ecom:Product.Number&quot;)&lt;/div&gt;
<span class='line-number'>154</span>	                &lt;/div&gt;
<span class='line-number'>155</span>	                @*&lt;div class=&quot;u-pull--right&quot;&gt;
<span class='line-number'>156</span>	                        @if (Dynamicweb.Core.Converter.ToBoolean(GetGlobalValue(&quot;Global:Extranet.UserName&quot;)))
<span class='line-number'>157</span>	                        {
<span class='line-number'>158</span>	                            string favoriteId = &quot;Favorite&quot; + GetString(&quot;Ecom:Product.ID&quot;);
<span class='line-number'>159</span>	                            &lt;div id=&quot;@favoriteId&quot; class=&quot;favorites favorites--md u-pull--right dw-mod&quot;&gt;
<span class='line-number'>160</span>	                                &lt;div&gt;
<span class='line-number'>161</span>	                                    @{ string favorite = GetBoolean(&quot;Ecom:Product.IsProductInFavoriteList&quot;) ? &quot;fa fa-star&quot; : &quot;fa fa-star-o&quot;; }
<span class='line-number'>162</span>	                                    &lt;i class=&quot;@favorite fa-1_5x&quot;&gt;&lt;/i&gt;
<span class='line-number'>163</span>	                                &lt;/div&gt;
<span class='line-number'>164</span>	
<span class='line-number'>165</span>	                                &lt;div class=&quot;favorites-list__container dw-mod&quot;&gt;
<span class='line-number'>166</span>	                                    &lt;ul class=&quot;list list--clean dw-mod&quot;&gt;
<span class='line-number'>167</span>	                                        @foreach (LoopItem listType in GetLoop(&quot;CustomerCenter.ListTypes&quot;))
<span class='line-number'>168</span>	                                        {
<span class='line-number'>169</span>	                                            foreach (LoopItem list in listType.GetLoop(&quot;CustomerCenter.ProductLists&quot;))
<span class='line-number'>170</span>	                                            {
<span class='line-number'>171</span>	                                                &lt;li&gt;
<span class='line-number'>172</span>	                                                    @{string favLinkType = list.GetString(&quot;Ecom:Product.List.IsProductInThisList&quot;) == &quot;True&quot; ? list.GetString(&quot;Ecom:Product.RemoveFromThisList&quot;) : list.GetString(&quot;Ecom:Product.AddToThisListAction&quot;);}
<span class='line-number'>173</span>	                                                    @{string isInListIcon = list.GetString(&quot;Ecom:Product.List.IsProductInThisList&quot;) == &quot;True&quot; ? &quot;fa fa-star&quot; : &quot;fa fa-star-o&quot;;}
<span class='line-number'>174</span>	                                                    &lt;a href=&quot;@favLinkType&quot; class=&quot;list__link dw-mod&quot;&gt;&lt;i class=&quot;@isInListIcon&quot;&gt;&lt;/i&gt; @list.GetValue(&quot;Ecom:CustomerCenter.List.Name&quot;)&lt;/a&gt;
<span class='line-number'>175</span>	                                                &lt;/li&gt;
<span class='line-number'>176</span>	                                                            }
<span class='line-number'>177</span>	                                                        }
<span class='line-number'>178</span>	                                    &lt;/ul&gt;
<span class='line-number'>179</span>	                                &lt;/div&gt;
<span class='line-number'>180</span>	                            &lt;/div&gt;
<span class='line-number'>181</span>	                                                        }
<span class='line-number'>182</span>	                    &lt;/div&gt;*@
<span class='line-number'>183</span>	
<span class='line-number'>184</span>	                &lt;div&gt;
<span class='line-number'>185</span>	                    &lt;div class=&quot;u-border-bottom u-full-width u-pull--left&quot;&gt;&lt;/div&gt;
<span class='line-number'>186</span>	
<span class='line-number'>187</span>	                    @*
<span class='line-number'>188</span>	                           // Delivery + stock information
<span class='line-number'>189</span>	                        @if (HideStockStatus == &quot;False&quot;)
<span class='line-number'>190</span>	                        {
<span class='line-number'>191</span>	                            string stockIcon = GetInteger(&quot;Ecom:Product.Stock&quot;) &gt; 0 ? &quot;stock-icon--in&quot; : &quot;stock-icon--not&quot;;
<span class='line-number'>192</span>	                            &lt;table class=&quot;table table--clean delivery-and-stock-info dw-mod&quot;&gt;
<span class='line-number'>193</span>	                                &lt;tr&gt;
<span class='line-number'>194</span>	                                    &lt;td class=&quot;u-no-padding&quot;&gt;@GetString(&quot;Ecom:Product:Stock.Text&quot;) &lt;div class=&quot;stock-icon @stockIcon&quot;&gt;&lt;/div&gt;&lt;/td&gt;
<span class='line-number'>195</span>	                                    @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product:Stock.Text&quot;)) || !String.IsNullOrEmpty(GetString(&quot;Ecom:Product:Stock.DeliveryText&quot;)))
<span class='line-number'>196</span>	                                    {
<span class='line-number'>197</span>	                                        if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product:Stock.DeliveryText&quot;)))
<span class='line-number'>198</span>	                                        {
<span class='line-number'>199</span>	                                            &lt;td class=&quot;u-no-padding u-ta-right&quot;&gt;@Translate(&quot;Shipping&quot;) @GetString(&quot;Ecom:Product:Stock.DeliveryText&quot;) @GetString(&quot;Ecom:Product:Stock.DeliveryUnit&quot;)&lt;/td&gt;
<span class='line-number'>200</span>	                                        }
<span class='line-number'>201</span>	                                    }
<span class='line-number'>202</span>	                                &lt;/tr&gt;
<span class='line-number'>203</span>	                            &lt;/table&gt;
<span class='line-number'>204</span>	
<span class='line-number'>205</span>	                        }
<span class='line-number'>206</span>	                    *@
<span class='line-number'>207</span>	                    @* Short description *@
<span class='line-number'>208</span>	                    @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product.ShortDescription&quot;)))
<span class='line-number'>209</span>	                    {
<span class='line-number'>210</span>	                        &lt;div class=&quot;introduction-text&quot;&gt;
<span class='line-number'>211</span>	                            @GetString(&quot;Ecom:Product.ShortDescription&quot;)
<span class='line-number'>212</span>	                        &lt;/div&gt;
<span class='line-number'>213</span>	                    }
<span class='line-number'>214</span>	                    @*Certification images*@
<span class='line-number'>215</span>	                    @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product:Field.Certification.Value.Clean&quot;)))
<span class='line-number'>216</span>	                    {
<span class='line-number'>217</span>	                        string[] certStrArr = GetString(&quot;Ecom:Product:Field.Certification.Value.Clean&quot;).Split(&#39;,&#39;);
<span class='line-number'>218</span>	                        &lt;div class=&quot;grid__col-12 u-no-padding&quot;&gt;
<span class='line-number'>219</span>	                            &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>220</span>	
<span class='line-number'>221</span>	                                @foreach (string certStrItem in certStrArr)
<span class='line-number'>222</span>	                                {
<span class='line-number'>223</span>	                                    &lt;div&gt;
<span class='line-number'>224</span>	                                        &lt;img class=&quot;grid__cell-img&quot; style=&quot;padding-right: 3px&quot; src=&quot;/Admin/Public/GetImage.ashx?Image=/Files/Images/Ecom/Certification/@(certStrItem).jpg&amp;Format=jpg&amp;Height=70&amp;Crop=0&amp;DoNotUpscale=1&quot; alt=&quot;certification image&quot; /&gt;
<span class='line-number'>225</span>	                                    &lt;/div&gt;
<span class='line-number'>226</span>	                                }
<span class='line-number'>227</span>	                            &lt;/div&gt;
<span class='line-number'>228</span>	                        &lt;/div&gt;
<span class='line-number'>229</span>	                    }
<span class='line-number'>230</span>	
<span class='line-number'>231</span>	                    @* Variants *@
<span class='line-number'>232</span>	                    @if (GetLoop(&quot;VariantGroups&quot;).Count &gt; 0)
<span class='line-number'>233</span>	                    {
<span class='line-number'>234</span>	                        &lt;small id=&quot;helpText_@productId&quot; class=&quot;help-text @hideHelpText&quot;&gt;@Translate(&quot;Please select a size and/or color!&quot;)&lt;/small&gt;
<span class='line-number'>235</span>	                        string containerId = &quot;Variants&quot; + productId;
<span class='line-number'>236</span>	                        &lt;div&gt;
<span class='line-number'>237</span>	                            &lt;div id=&quot;@containerId&quot; data-product-id=&quot;@productId&quot;&gt;
<span class='line-number'>238</span>	                                @foreach (LoopItem variantGoup in GetLoop(&quot;VariantGroups&quot;))
<span class='line-number'>239</span>	                                {
<span class='line-number'>240</span>	                                    &lt;div&gt;
<span class='line-number'>241</span>	                                        &lt;div class=&quot;u-bold&quot;&gt;@variantGoup.GetString(&quot;Ecom:VariantGroup.Name&quot;)&lt;/div&gt;
<span class='line-number'>242</span>	                                        &lt;div&gt;
<span class='line-number'>243</span>	                                            @foreach (LoopItem variantOption in variantGoup.GetLoop(&quot;VariantAvailableOptions&quot;))
<span class='line-number'>244</span>	                                            {
<span class='line-number'>245</span>	                                                string selected = variantOption.GetBoolean(&quot;Ecom:VariantOption.Selected&quot;) ? &quot;checked&quot; : &quot;&quot;;
<span class='line-number'>246</span>	
<span class='line-number'>247</span>	                                                if (!string.IsNullOrEmpty(variantOption.GetString(&quot;Ecom:VariantOption.ImgSmall.Clean&quot;)))
<span class='line-number'>248</span>	                                                {
<span class='line-number'>249</span>	                                                    &lt;img src=&quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=50&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image=/Images/@variantOption.GetString(&quot;Ecom:VariantOption.ImgSmall.Clean&quot;)&quot; title=&quot;@variantOption.GetString(&quot;Ecom:VariantOption.Name&quot;)&quot; id=&quot;@variantOption.GetString(&quot;Ecom:VariantOption.ID&quot;)&quot; data-product-id=&quot;@productId&quot; onclick=&quot;Variants.UpdateVariants(this, false)&quot; class=&quot;btn btn--tag @selected&quot; data-check=&quot;@selected&quot; /&gt;
<span class='line-number'>250</span>	                                                }
<span class='line-number'>251</span>	                                                else
<span class='line-number'>252</span>	                                                {
<span class='line-number'>253</span>	                                                    &lt;button type=&quot;button&quot; id=&quot;@variantOption.GetString(&quot;Ecom:VariantOption.ID&quot;)&quot; data-product-id=&quot;@productId&quot; onclick=&quot;Variants.UpdateVariants(this, false)&quot; class=&quot;btn btn--tag @selected&quot; data-check=&quot;@selected&quot;&gt;@variantOption.GetString(&quot;Ecom:VariantOption.Name&quot;)&lt;/button&gt;
<span class='line-number'>254</span>	                                                }
<span class='line-number'>255</span>	                                            }
<span class='line-number'>256</span>	                                        &lt;/div&gt;
<span class='line-number'>257</span>	                                    &lt;/div&gt;
<span class='line-number'>258</span>	                                }
<span class='line-number'>259</span>	                            &lt;/div&gt;
<span class='line-number'>260</span>	
<span class='line-number'>261</span>	                        &lt;/div&gt;
<span class='line-number'>262</span>	                    }
<span class='line-number'>263</span>	
<span class='line-number'>264</span>	                    @* BOMProducts *@
<span class='line-number'>265</span>	                    @if (GetLoop(&quot;BOMProducts&quot;).Count &gt; 0)
<span class='line-number'>266</span>	                    {
<span class='line-number'>267</span>	                        &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Including products&quot;)&lt;/h2&gt;
<span class='line-number'>268</span>	                        foreach (LoopItem BOMProductItem in GetLoop(&quot;BOMProducts&quot;))
<span class='line-number'>269</span>	                        {
<span class='line-number'>270</span>	                            string link = &quot;/&quot; + BOMProductItem.GetString(&quot;Ecom:Product.LinkGroup.Clean&quot;) + (!String.IsNullOrEmpty(BOMProductItem.GetString(&quot;Ecom:Product.VariantID&quot;)) ? &quot;&amp;VariantID=&quot; + BOMProductItem.GetString(&quot;Ecom:Product.VariantID&quot;) : &quot;&quot;);
<span class='line-number'>271</span>	                            &lt;div class=&quot;grid__col--border grid&quot;&gt;
<span class='line-number'>272</span>	                                &lt;div class=&quot;grid__cell grid__cell--align-middle-left&quot;&gt;
<span class='line-number'>273</span>	                                    &lt;a href=&quot;@link&quot; class=&quot;u-pull--left u-margin-right&quot;&gt;
<span class='line-number'>274</span>	                                        &lt;img src=&quot;/Admin/Public/GetImage.ashx?width=50&amp;image=@BOMProductItem.GetString(&quot;Ecom:Product.ImageSmall.Default.Clean&quot;)&amp;Compression=99&quot; /&gt;
<span class='line-number'>275</span>	                                    &lt;/a&gt;
<span class='line-number'>276</span>	                                    &lt;a href=&quot;@link&quot;&gt;@BOMProductItem.GetString(&quot;Ecom:Product.Name&quot;)&lt;/a&gt;
<span class='line-number'>277</span>	                                &lt;/div&gt;
<span class='line-number'>278</span>	                            &lt;/div&gt;
<span class='line-number'>279</span>	                        }
<span class='line-number'>280</span>	                    }
<span class='line-number'>281</span>	                &lt;/div&gt;
<span class='line-number'>282</span>	            &lt;/div&gt;
<span class='line-number'>283</span>	
<span class='line-number'>284</span>	            @* Buy block *@
<span class='line-number'>285</span>	            &lt;div class=&quot;grid__cell-footer&quot;&gt;
<span class='line-number'>286</span>	                &lt;div class=&quot;grid__cell product__price-actions js-ajax-container dw-mod&quot; id=&quot;PriceAndActions&quot; data-template=&quot;PricesAndActionsTemplate&quot; data-json-feed=&quot;/Default.aspx?ID=@feedId&amp;ProductID=@productId&quot;&gt;&lt;/div&gt;
<span class='line-number'>287</span>	                &lt;input type=&quot;hidden&quot; value=&quot;@GetString(&quot;Ecom:Product.VariantID.Extented&quot;)&quot; name=&quot;Variant&quot; id=&quot;Variant_@GetString(&quot;Ecom:Product.ID&quot;)&quot; /&gt;
<span class='line-number'>288</span>	            &lt;/div&gt;
<span class='line-number'>289</span>	        &lt;/div&gt;
<span class='line-number'>290</span>	    &lt;/div&gt;
<span class='line-number'>291</span>	
<span class='line-number'>292</span>	    &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>293</span>	        @* Long description *@
<span class='line-number'>294</span>	        @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product.LongDescription&quot;)))
<span class='line-number'>295</span>	        {
<span class='line-number'>296</span>	            &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>297</span>	                &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Description&quot;)&lt;/h2&gt;
<span class='line-number'>298</span>	
<span class='line-number'>299</span>	                &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>300</span>	                    &lt;div class=&quot;grid__col-lg-8 grid__col-md-8 grid__col-sm-12 grid__col-xs-12 product__description dw-mod&quot;&gt;
<span class='line-number'>301</span>	                        @GetString(&quot;Ecom:Product.LongDescription&quot;)
<span class='line-number'>302</span>	                    &lt;/div&gt;
<span class='line-number'>303</span>	                &lt;/div&gt;
<span class='line-number'>304</span>	            &lt;/div&gt;
<span class='line-number'>305</span>	        }
<span class='line-number'>306</span>	
<span class='line-number'>307</span>	        @* Features lists *@
<span class='line-number'>308</span>	        @if (featuresCount &gt; 0 &amp;&amp; featuresCount &lt; 10)
<span class='line-number'>309</span>	        {
<span class='line-number'>310</span>	            &lt;div class=&quot;grid__col-12 product__features dw-mod&quot;&gt;
<span class='line-number'>311</span>	                &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Product information&quot;)&lt;/h2&gt;
<span class='line-number'>312</span>	
<span class='line-number'>313</span>	                &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>314</span>	                    &lt;div class=&quot;grid__col-lg-8 grid__col-md-8 grid__col-sm-12 grid__col-xs-12&quot;&gt;
<span class='line-number'>315</span>	                        @if (GetLoop(&quot;CustomFieldValues&quot;).Count &gt; 0)
<span class='line-number'>316</span>	                        {
<span class='line-number'>317</span>	                            &lt;table class=&quot;table table--clean table--compact&quot;&gt;
<span class='line-number'>318</span>	                                @foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;).Where(x =&gt; x.GetString(&quot;Product.CustomField.System&quot;) != &quot;HideShowStock&quot;))
<span class='line-number'>319</span>	                                {
<span class='line-number'>320</span>	
<span class='line-number'>321</span>	                                    string fieldValue = customField.GetString(&quot;Product.CustomField.Value&quot;);
<span class='line-number'>322</span>	
<span class='line-number'>323</span>	                                    if (customField.GetLoop(&quot;Product.CustomField.Options&quot;).Count &gt; 0)
<span class='line-number'>324</span>	                                    {
<span class='line-number'>325</span>	                                        fieldValue = &quot;&quot;;
<span class='line-number'>326</span>	                                        int count = 0;
<span class='line-number'>327</span>	
<span class='line-number'>328</span>	                                        foreach (LoopItem customFieldOptions in customField.GetLoop(&quot;Product.CustomField.Options&quot;))
<span class='line-number'>329</span>	                                        {
<span class='line-number'>330</span>	                                            if (customFieldOptions.GetBoolean(&quot;Product.CustomField.Option.IsSelected&quot;))
<span class='line-number'>331</span>	                                            {
<span class='line-number'>332</span>	                                                if (count != 0)
<span class='line-number'>333</span>	                                                {
<span class='line-number'>334</span>	                                                    fieldValue += &quot;, &quot;;
<span class='line-number'>335</span>	                                                }
<span class='line-number'>336</span>	
<span class='line-number'>337</span>	                                                fieldValue += customFieldOptions.GetString(&quot;Product.CustomField.Option.Name&quot;);
<span class='line-number'>338</span>	                                                count++;
<span class='line-number'>339</span>	                                            }
<span class='line-number'>340</span>	                                        }
<span class='line-number'>341</span>	                                    }
<span class='line-number'>342</span>	
<span class='line-number'>343</span>	                                    if (fieldValue == &quot;False&quot;)
<span class='line-number'>344</span>	                                    {
<span class='line-number'>345</span>	                                        fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>346</span>	                                    }
<span class='line-number'>347</span>	
<span class='line-number'>348</span>	                                    if (fieldValue == &quot;True&quot;)
<span class='line-number'>349</span>	                                    {
<span class='line-number'>350</span>	                                        fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>351</span>	                                    }
<span class='line-number'>352</span>	
<span class='line-number'>353</span>	                                    if (!String.IsNullOrEmpty(customField.GetString(&quot;Product.CustomField.Name&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>354</span>	                                    {
<span class='line-number'>355</span>	                                        &lt;tr&gt;
<span class='line-number'>356</span>	                                            &lt;td width=&quot;160&quot;&gt;@customField.GetString(&quot;Product.CustomField.Name&quot;):&lt;/td&gt;
<span class='line-number'>357</span>	                                            @if (!String.IsNullOrEmpty(customField.GetString(&quot;Document.FullPath&quot;)))
<span class='line-number'>358</span>	                                            {
<span class='line-number'>359</span>	                                                &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@customField.GetString(&quot;Document.FullPath&quot;)&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;i class=&quot;fa @getIconForFile(fieldValue)&quot;&gt;&lt;/i&gt; @fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>360</span>	                                            }
<span class='line-number'>361</span>	                                            else
<span class='line-number'>362</span>	                                            {
<span class='line-number'>363</span>	                                                string[] extArr = { &quot;.jpg&quot;, &quot;.png&quot;, &quot;.gif&quot;, &quot;.jpeg&quot; };
<span class='line-number'>364</span>	
<span class='line-number'>365</span>	                                                if (extArr.Any(x =&gt; customField.GetString(&quot;Product.CustomField.Value&quot;).Contains(x)))
<span class='line-number'>366</span>	                                                {
<span class='line-number'>367</span>	                                                    &lt;td class=&quot;u-ta-left&quot;&gt;
<span class='line-number'>368</span>	                                                        &lt;img src=&quot;/Admin/Public/Getimage.ashx?height=50&amp;amp;compression=75&amp;amp;Crop=5&amp;amp;image=@customField.GetString(&quot;Product.CustomField.Value&quot;)&quot; alt=&quot;@fieldValue&quot; /&gt;
<span class='line-number'>369</span>	                                                    &lt;/td&gt;
<span class='line-number'>370</span>	                                                }
<span class='line-number'>371</span>	                                                else
<span class='line-number'>372</span>	                                                {
<span class='line-number'>373</span>	                                                    &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>374</span>	                                                }
<span class='line-number'>375</span>	                                            }
<span class='line-number'>376</span>	                                        &lt;/tr&gt;
<span class='line-number'>377</span>	                                    }
<span class='line-number'>378</span>	
<span class='line-number'>379</span>	                                }
<span class='line-number'>380</span>	
<span class='line-number'>381</span>	
<span class='line-number'>382</span>	                            &lt;/table&gt;
<span class='line-number'>383</span>	                        }
<span class='line-number'>384</span>	
<span class='line-number'>385</span>	                        @if (GetLoop(&quot;ProductCategories&quot;).Count &gt; 0)
<span class='line-number'>386</span>	                        {
<span class='line-number'>387</span>	                            &lt;table class=&quot;table table--clean table--compact u-margin-bottom&quot;&gt;
<span class='line-number'>388</span>	                                @foreach (LoopItem categoryGroup in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'>389</span>	                                {
<span class='line-number'>390</span>	                                    int fieldsCount = 0;
<span class='line-number'>391</span>	                                    foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>392</span>	                                    {
<span class='line-number'>393</span>	                                        if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;)))
<span class='line-number'>394</span>	                                        {
<span class='line-number'>395</span>	                                            fieldsCount++;
<span class='line-number'>396</span>	                                        }
<span class='line-number'>397</span>	                                    }
<span class='line-number'>398</span>	
<span class='line-number'>399</span>	                                    if (fieldsCount &gt; 0)
<span class='line-number'>400</span>	                                    {
<span class='line-number'>401</span>	                                        &lt;tr&gt;
<span class='line-number'>402</span>	                                            &lt;td colspan=&quot;2&quot; class=&quot;u-ta-left table__section-header dw-mod&quot;&gt;@categoryGroup.GetString(&quot;Ecom:Product.Category.Name&quot;)&lt;/td&gt;
<span class='line-number'>403</span>	                                        &lt;/tr&gt;
<span class='line-number'>404</span>	
<span class='line-number'>405</span>	                                        foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>406</span>	                                        {
<span class='line-number'>407</span>	                                            string fieldValue = categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;);
<span class='line-number'>408</span>	
<span class='line-number'>409</span>	                                            if (fieldValue == &quot;False&quot;)
<span class='line-number'>410</span>	                                            {
<span class='line-number'>411</span>	                                                fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>412</span>	                                            }
<span class='line-number'>413</span>	
<span class='line-number'>414</span>	                                            if (fieldValue == &quot;True&quot;)
<span class='line-number'>415</span>	                                            {
<span class='line-number'>416</span>	                                                fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>417</span>	                                            }
<span class='line-number'>418</span>	
<span class='line-number'>419</span>	                                            if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>420</span>	                                            {
<span class='line-number'>421</span>	                                                &lt;tr&gt;
<span class='line-number'>422</span>	                                                    &lt;td width=&quot;160&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;):&lt;/td&gt;
<span class='line-number'>423</span>	                                                    @if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;9&quot;)
<span class='line-number'>424</span>	                                                    {
<span class='line-number'>425</span>	
<span class='line-number'>426</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@fieldValue&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;i class=&quot;fa @getIconForFile(fieldValue)&quot;&gt;&lt;/i&gt; @fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>427</span>	                                                    }
<span class='line-number'>428</span>	                                                    else if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;15&quot;)
<span class='line-number'>429</span>	                                                    {
<span class='line-number'>430</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.OptionLabel&quot;)&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>431</span>	                                                    }
<span class='line-number'>432</span>	                                                    else if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;8&quot;)
<span class='line-number'>433</span>	                                                    {
<span class='line-number'>434</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a property=&quot;identifier&quot; href=&quot;@fieldValue&quot;&gt;@fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>435</span>	                                                    }
<span class='line-number'>436</span>	                                                    else
<span class='line-number'>437</span>	                                                    {
<span class='line-number'>438</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>439</span>	                                                    }
<span class='line-number'>440</span>	                                                &lt;/tr&gt;
<span class='line-number'>441</span>	                                            }
<span class='line-number'>442</span>	                                        }
<span class='line-number'>443</span>	                                    }
<span class='line-number'>444</span>	                                }
<span class='line-number'>445</span>	                            &lt;/table&gt;
<span class='line-number'>446</span>	                        }
<span class='line-number'>447</span>	                    &lt;/div&gt;
<span class='line-number'>448</span>	                &lt;/div&gt;
<span class='line-number'>449</span>	            &lt;/div&gt;
<span class='line-number'>450</span>	        }
<span class='line-number'>451</span>	
<span class='line-number'>452</span>	
<span class='line-number'>453</span>	        @if (featuresCount &gt;= 10)
<span class='line-number'>454</span>	        {
<span class='line-number'>455</span>	            &lt;div class=&quot;grid__col-12 grid__col--bleed-y&quot;&gt;
<span class='line-number'>456</span>	                &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Product information&quot;)&lt;/h2&gt;
<span class='line-number'>457</span>	
<span class='line-number'>458</span>	                &lt;input type=&quot;checkbox&quot; id=&quot;expandable-text-trigger&quot; class=&quot;expandable-text-trigger&quot; /&gt;
<span class='line-number'>459</span>	                &lt;div class=&quot;expandable-text-container&quot;&gt;
<span class='line-number'>460</span>	                    &lt;div class=&quot;expandable-text-container__content dw-mod&quot;&gt;
<span class='line-number'>461</span>	                        &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>462</span>	                            &lt;div class=&quot;grid__col-lg-8 grid__col-md-8 grid__col-sm-12 grid__col-xs-12&quot;&gt;
<span class='line-number'>463</span>	                                @if (GetLoop(&quot;CustomFieldValues&quot;).Count &gt; 0)
<span class='line-number'>464</span>	                                {
<span class='line-number'>465</span>	                                    &lt;table class=&quot;table table--clean table--compact&quot;&gt;
<span class='line-number'>466</span>	                                        @foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;))
<span class='line-number'>467</span>	                                        {
<span class='line-number'>468</span>	                                            string fieldValue = customField.GetString(&quot;Product.CustomField.Value.Clean&quot;);
<span class='line-number'>469</span>	
<span class='line-number'>470</span>	                                            if (customField.GetLoop(&quot;Product.CustomField.Options&quot;).Count &gt; 0)
<span class='line-number'>471</span>	                                            {
<span class='line-number'>472</span>	                                                fieldValue = &quot;&quot;;
<span class='line-number'>473</span>	                                                int count = 0;
<span class='line-number'>474</span>	
<span class='line-number'>475</span>	                                                foreach (LoopItem customFieldOptions in customField.GetLoop(&quot;Product.CustomField.Options&quot;))
<span class='line-number'>476</span>	                                                {
<span class='line-number'>477</span>	                                                    if (customFieldOptions.GetBoolean(&quot;Product.CustomField.Option.IsSelected&quot;))
<span class='line-number'>478</span>	                                                    {
<span class='line-number'>479</span>	                                                        if (count != 0)
<span class='line-number'>480</span>	                                                        {
<span class='line-number'>481</span>	                                                            fieldValue += &quot;, &quot;;
<span class='line-number'>482</span>	                                                        }
<span class='line-number'>483</span>	
<span class='line-number'>484</span>	                                                        fieldValue += customFieldOptions.GetString(&quot;Product.CustomField.Option.Name&quot;);
<span class='line-number'>485</span>	                                                        count++;
<span class='line-number'>486</span>	                                                    }
<span class='line-number'>487</span>	                                                }
<span class='line-number'>488</span>	                                            }
<span class='line-number'>489</span>	
<span class='line-number'>490</span>	                                            if (fieldValue == &quot;False&quot;)
<span class='line-number'>491</span>	                                            {
<span class='line-number'>492</span>	                                                fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>493</span>	                                            }
<span class='line-number'>494</span>	
<span class='line-number'>495</span>	                                            if (fieldValue == &quot;True&quot;)
<span class='line-number'>496</span>	                                            {
<span class='line-number'>497</span>	                                                fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>498</span>	                                            }
<span class='line-number'>499</span>	
<span class='line-number'>500</span>	                                            if (!String.IsNullOrEmpty(customField.GetString(&quot;Product.CustomField.Name&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>501</span>	                                            {
<span class='line-number'>502</span>	                                                &lt;tr&gt;
<span class='line-number'>503</span>	                                                    &lt;td width=&quot;160&quot;&gt;@customField.GetString(&quot;Product.CustomField.Name&quot;):&lt;/td&gt;
<span class='line-number'>504</span>	                                                    @if (!String.IsNullOrEmpty(customField.GetString(&quot;Document.FullPath&quot;)))
<span class='line-number'>505</span>	                                                    {
<span class='line-number'>506</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@customField.GetString(&quot;Document.FullPath&quot;)&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;&lt;i class=&quot;fa @getIconForFile(fieldValue)&quot;&gt;&lt;/i&gt; &amp;nbsp;@fieldValue&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>507</span>	                                                    }
<span class='line-number'>508</span>	                                                    else
<span class='line-number'>509</span>	                                                    {
<span class='line-number'>510</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>511</span>	                                                    }
<span class='line-number'>512</span>	                                                &lt;/tr&gt;
<span class='line-number'>513</span>	                                            }
<span class='line-number'>514</span>	                                        }
<span class='line-number'>515</span>	                                    &lt;/table&gt;
<span class='line-number'>516</span>	                                }
<span class='line-number'>517</span>	
<span class='line-number'>518</span>	                                @if (GetLoop(&quot;ProductCategories&quot;).Count &gt; 0)
<span class='line-number'>519</span>	                                {
<span class='line-number'>520</span>	                                    &lt;table class=&quot;table table--clean table--compact u-margin-bottom&quot;&gt;
<span class='line-number'>521</span>	                                        @foreach (LoopItem categoryGroup in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'>522</span>	                                        {
<span class='line-number'>523</span>	                                            int fieldsCount = 0;
<span class='line-number'>524</span>	                                            foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>525</span>	                                            {
<span class='line-number'>526</span>	                                                if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;)))
<span class='line-number'>527</span>	                                                {
<span class='line-number'>528</span>	                                                    fieldsCount++;
<span class='line-number'>529</span>	                                                }
<span class='line-number'>530</span>	                                            }
<span class='line-number'>531</span>	
<span class='line-number'>532</span>	                                            if (fieldsCount &gt; 0)
<span class='line-number'>533</span>	                                            {
<span class='line-number'>534</span>	                                                &lt;tr&gt;
<span class='line-number'>535</span>	                                                    &lt;td colspan=&quot;2&quot; class=&quot;u-ta-left table__section-header dw-mod&quot;&gt;@categoryGroup.GetString(&quot;Ecom:Product.Category.Name&quot;)&lt;/td&gt;
<span class='line-number'>536</span>	                                                &lt;/tr&gt;
<span class='line-number'>537</span>	
<span class='line-number'>538</span>	                                                foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>539</span>	                                                {
<span class='line-number'>540</span>	                                                    string fieldValue = categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;);
<span class='line-number'>541</span>	
<span class='line-number'>542</span>	                                                    if (fieldValue == &quot;False&quot;)
<span class='line-number'>543</span>	                                                    {
<span class='line-number'>544</span>	                                                        fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>545</span>	                                                    }
<span class='line-number'>546</span>	
<span class='line-number'>547</span>	                                                    if (fieldValue == &quot;True&quot;)
<span class='line-number'>548</span>	                                                    {
<span class='line-number'>549</span>	                                                        fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>550</span>	                                                    }
<span class='line-number'>551</span>	
<span class='line-number'>552</span>	                                                    if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>553</span>	                                                    {
<span class='line-number'>554</span>	                                                        &lt;tr&gt;
<span class='line-number'>555</span>	                                                            &lt;td width=&quot;160&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;):&lt;/td&gt;
<span class='line-number'>556</span>	                                                            @if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;9&quot;)
<span class='line-number'>557</span>	                                                            {
<span class='line-number'>558</span>	                                                                &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@fieldValue&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;i class=&quot;fa @getIconForFile(fieldValue)&quot;&gt;&lt;/i&gt; @fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>559</span>	                                                            }
<span class='line-number'>560</span>	                                                            else if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;15&quot;)
<span class='line-number'>561</span>	                                                            {
<span class='line-number'>562</span>	                                                                &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.OptionLabel&quot;)&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>563</span>	                                                            }
<span class='line-number'>564</span>	                                                            else if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;8&quot;)
<span class='line-number'>565</span>	                                                            {
<span class='line-number'>566</span>	                                                                &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a property=&quot;identifier&quot; href=&quot;@fieldValue&quot;&gt;@fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>567</span>	                                                            }
<span class='line-number'>568</span>	                                                            else
<span class='line-number'>569</span>	                                                            {
<span class='line-number'>570</span>	                                                                &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>571</span>	                                                            }
<span class='line-number'>572</span>	                                                        &lt;/tr&gt;
<span class='line-number'>573</span>	                                                    }
<span class='line-number'>574</span>	                                                }
<span class='line-number'>575</span>	                                            }
<span class='line-number'>576</span>	                                        }
<span class='line-number'>577</span>	                                    &lt;/table&gt;
<span class='line-number'>578</span>	                                }
<span class='line-number'>579</span>	                            &lt;/div&gt;
<span class='line-number'>580</span>	                        &lt;/div&gt;
<span class='line-number'>581</span>	                    &lt;/div&gt;
<span class='line-number'>582</span>	                    &lt;div class=&quot;u-ta-center&quot;&gt;
<span class='line-number'>583</span>	                        &lt;label for=&quot;expandable-text-trigger&quot; class=&quot;btn btn--secondary expandable-text-container__btn more dw-mod&quot;&gt;@Translate(&quot;Show more&quot;)&lt;/label&gt;
<span class='line-number'>584</span>	                        &lt;label for=&quot;expandable-text-trigger&quot; class=&quot;btn btn--secondary expandable-text-container__btn less dw-mod&quot;&gt;@Translate(&quot;Show less&quot;)&lt;/label&gt;
<span class='line-number'>585</span>	                    &lt;/div&gt;
<span class='line-number'>586</span>	                &lt;/div&gt;
<span class='line-number'>587</span>	            &lt;/div&gt;
<span class='line-number'>588</span>	        }
<span class='line-number'>589</span>	
<span class='line-number'>590</span>	        @*
<span class='line-number'>591</span>	               // Related products
<span class='line-number'>592</span>	            &lt;div class=&quot;js-ajax-container&quot; id=&quot;ProductList&quot; data-template=&quot;ProductContainer&quot; data-pre-render-template=&quot;ProductPreRenderContainer&quot; data-json-feed=&quot;@feedFullUrl&quot;&gt;&lt;/div&gt;*@
<span class='line-number'>593</span>	    &lt;/div&gt;
<span class='line-number'>594</span>	&lt;/div&gt;
<span class='line-number'>595</span>	
<span class='line-number'>596</span>	&lt;script id=&quot;PricesAndActionsTemplate&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>597</span>	    &lt;div class=&quot;product__price-actions__price dw-mod&quot;&gt;
<span class='line-number'>598</span>	        &lt;div class=&quot;before-price {{onSale}} dw-mod&quot;&gt;{{discount}}&lt;/div&gt;
<span class='line-number'>599</span>	        &lt;div class=&quot;price dw-mod&quot;&gt;{{price}}&lt;/div&gt;
<span class='line-number'>600</span>	    &lt;/div&gt;
<span class='line-number'>601</span>	    &lt;div class=&quot;buttons-collection buttons-collection--right product__price-actions__actions dw-mod&quot;&gt;
<span class='line-number'>602</span>	        &lt;button type=&quot;button&quot; id=&quot;CartButton_{{id}}&quot; class=&quot;btn btn--primary btn--condensed dw-mod u-pull--right&quot; name=&quot;submit&quot; onclick=&quot;Cart.AddToCart(event, &#39;{{id}}&#39;, document.getElementById(&#39;Quantity_{{id}}&#39;).value, &#39;Unit_{{id}}&#39;, &#39;Variant_{{id}}&#39;);&quot;&gt;&lt;i class=&quot;fa fa-shopping-cart&quot;&gt;&lt;/i&gt;&lt;span class=&quot;u-hidden-xs u-hidden-xxs&quot;&gt; @Translate(&quot;Add to cart&quot;)&lt;/span&gt;&lt;/button&gt;
<span class='line-number'>603</span>	        &lt;input type=&quot;number&quot; class=&quot;u-w70px u-pull--right&quot; id=&quot;Quantity_{{id}}&quot; name=&quot;Quantity&quot; value=&quot;1&quot; min=&quot;1&quot;&gt;
<span class='line-number'>604</span>	        &lt;input type=&quot;checkbox&quot; id=&quot;UnitOptions_{{id}}&quot; class=&quot;dropdown-trigger&quot; /&gt;
<span class='line-number'>605</span>	        &lt;div class=&quot;dropdown u-pull--right u-w150px u-w80px--xs dw-mod {{hasUnits}}&quot;&gt;
<span class='line-number'>606</span>	            @* &lt;label class=&quot;dropdown__header dropdown__btn dw-mod&quot; for=&quot;UnitOptions_{{id}}&quot;&gt;{{unitName}}&lt;/label&gt;*@
<span class='line-number'>607</span>	            &lt;div class=&quot;dropdown__content dw-mod&quot; id=&quot;unitOptions&quot; data-template=&quot;Units&quot;&gt;&lt;/div&gt;
<span class='line-number'>608</span>	            &lt;label class=&quot;dropdown-trigger-off&quot; for=&quot;UnitOptions_{{id}}&quot;&gt;&lt;/label&gt;
<span class='line-number'>609</span>	        &lt;/div&gt;
<span class='line-number'>610</span>	        &lt;input type=&quot;hidden&quot; value=&quot;{{unitId}}&quot; name=&quot;Unit&quot; id=&quot;Unit_{{id}}&quot; /&gt;
<span class='line-number'>611</span>	    &lt;/div&gt;
<span class='line-number'>612</span>	&lt;/script&gt;
<span class='line-number'>613</span>	
<span class='line-number'>614</span>	&lt;script id=&quot;Units&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>615</span>	    &lt;div class=&quot;dropdown__item dw-mod&quot; onclick=&quot;Dynamo.UpdateContent(&#39;PriceAndActions&#39;, &#39;/Default.aspx?ID=@feedId&amp;ProductID=@productId&amp;UnitID={{value}}&#39;)&quot;&gt;{{name}}&lt;/div&gt;
<span class='line-number'>616</span>	&lt;/script&gt;
<span class='line-number'>617</span>	
<span class='line-number'>618</span>	
<span class='line-number'>619</span>	@* Script templates for related products *@
<span class='line-number'>620</span>	&lt;script id=&quot;ProductPreRenderContainer&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>621</span>	    &lt;div class=&quot;u-h600px u-full-width&quot;&gt;
<span class='line-number'>622</span>	        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>623</span>	            &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>624</span>	                &lt;div class=&quot;pre-render-element pre-render-element--md&quot;&gt;&lt;/div&gt;
<span class='line-number'>625</span>	            &lt;/div&gt;
<span class='line-number'>626</span>	        &lt;/div&gt;
<span class='line-number'>627</span>	    &lt;/div&gt;
<span class='line-number'>628</span>	&lt;/script&gt;
<span class='line-number'>629</span>	
<span class='line-number'>630</span>	&lt;script id=&quot;ProductContainer&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>631</span>	    &lt;div class=&quot;u-min-h500px u-full-width&quot;&gt;
<span class='line-number'>632</span>	        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>633</span>	            &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>634</span>	                &lt;h2 class=&quot;section-title section-title--condensed&quot;&gt;@Translate(&quot;What about these products?&quot;)&lt;/h2&gt;
<span class='line-number'>635</span>	            &lt;/div&gt;
<span class='line-number'>636</span>	
<span class='line-number'>637</span>	            &lt;div class=&quot;grid__col-45px grid__col--bleed-x&quot;&gt;
<span class='line-number'>638</span>	                &lt;div class=&quot;grid__cell grid__cell--align-middle-left&quot;&gt;
<span class='line-number'>639</span>	                    &lt;button class=&quot;btn btn--condensed btn--clean {{prevdisabled}} dw-mod&quot; onclick=&quot;Dynamo.UpdateContent(&#39;ProductList&#39;, &#39;{{prevPage}}&#39;)&quot; {{prevdisabled}}&gt;&lt;i class=&quot;fa fa-chevron-left fa-2x&quot;&gt;&lt;/i&gt;&lt;/button&gt;
<span class='line-number'>640</span>	                &lt;/div&gt;
<span class='line-number'>641</span>	            &lt;/div&gt;
<span class='line-number'>642</span>	            &lt;div class=&quot;grid__col-auto grid__col--bleed-x&quot;&gt;
<span class='line-number'>643</span>	                &lt;div id=&quot;ProductsContainer&quot; class=&quot;grid product-list dw-mod&quot; data-template=&quot;ProductGridItemContainer&quot;&gt;&lt;/div&gt;
<span class='line-number'>644</span>	            &lt;/div&gt;
<span class='line-number'>645</span>	            &lt;div class=&quot;grid__col-45px grid__col--bleed-x&quot;&gt;
<span class='line-number'>646</span>	                &lt;div class=&quot;grid__cell grid__cell--align-middle-right&quot;&gt;
<span class='line-number'>647</span>	                    &lt;button class=&quot;btn btn--condensed btn--clean {{nextdisabled}} dw-mod&quot; onclick=&quot;Dynamo.UpdateContent(&#39;ProductList&#39;, &#39;{{nextPage}}&#39;)&quot; {{nextdisabled}}&gt;&lt;i class=&quot;fa fa-chevron-right fa-2x&quot;&gt;&lt;/i&gt;&lt;/button&gt;
<span class='line-number'>648</span>	                &lt;/div&gt;
<span class='line-number'>649</span>	            &lt;/div&gt;
<span class='line-number'>650</span>	        &lt;/div&gt;
<span class='line-number'>651</span>	    &lt;/div&gt;
<span class='line-number'>652</span>	&lt;/script&gt;
<span class='line-number'>653</span>	
<span class='line-number'>654</span>	&lt;script id=&quot;ProductGridItemContainer&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>655</span>	    &lt;div id=&quot;Product&quot; class=&quot;grid__col-@relatedProductsColumnWidth product-list__list-item dw-mod&quot; data-template=&quot;ProductGridItem&quot; data-preloader=&quot;false&quot;&gt;&lt;/div&gt;
<span class='line-number'>656</span>	&lt;/script&gt;
<span class='line-number'>657</span>	
<span class='line-number'>658</span>	&lt;script id=&quot;ProductGridItem&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>659</span>	    &lt;div class=&quot;grid__cell product-list__grid-item__image dw-mod {{noImage}}&quot;&gt;
<span class='line-number'>660</span>	        &lt;div class=&quot;sticker {{onSale}} dw-mod&quot;&gt;@Translate(&quot;Sale!&quot;)&lt;/div&gt;
<span class='line-number'>661</span>	        &lt;a href=&quot;{{link}}&quot; onclick=&quot;Scroll.SavePosition(event)&quot;&gt;&lt;img class=&quot;grid__cell-img grid__cell-img--centered&quot; src=&quot;/Admin/Public/GetImage.ashx?width=300&amp;amp;height=300&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image={{image}}&quot; alt=&quot;{{name}}&quot; /&gt;&lt;/a&gt;
<span class='line-number'>662</span>	    &lt;/div&gt;
<span class='line-number'>663</span>	
<span class='line-number'>664</span>	    &lt;div class=&quot;grid__cell product-list__grid-item__price-info dw-mod&quot;&gt;
<span class='line-number'>665</span>	        &lt;a href=&quot;{{link}}&quot; onclick=&quot;Scroll.SavePosition(event)&quot; title=&quot;{{name}}&quot;&gt;&lt;h6 class=&quot;u-condensed-text&quot;&gt;{{name}}&lt;/h6&gt;&lt;/a&gt;
<span class='line-number'>666</span>	        &lt;div class=&quot;item-number dw-mod&quot;&gt;{{number}}&lt;/div&gt;
<span class='line-number'>667</span>	        &lt;div class=&quot;price dw-mod&quot;&gt;{{price}}&lt;/div&gt;
<span class='line-number'>668</span>	        &lt;div class=&quot;before-price {{onSale}} dw-mod&quot;&gt;{{discount}}&lt;/div&gt;
<span class='line-number'>669</span>	    &lt;/div&gt;
<span class='line-number'>670</span>	
<span class='line-number'>671</span>	    &lt;div class=&quot;product-list__grid-item__footer dw-mod&quot;&gt;
<span class='line-number'>672</span>	        &lt;div class=&quot;u-ta-center&quot;&gt;
<span class='line-number'>673</span>	            &lt;a href=&quot;{{link}}&quot; id=&quot;CartButton_{{id}}&quot; class=&quot;btn btn--secondary btn--full u-no-margin dw-mod&quot;&gt;@Translate(&quot;View&quot;)&lt;/a&gt;
<span class='line-number'>674</span>	        &lt;/div&gt;
<span class='line-number'>675</span>	    &lt;/div&gt;
<span class='line-number'>676</span>	&lt;/script&gt;
<span class='line-number'>677</span>	
<span class='line-number'>678</span>	@*Variants data generation*@
<span class='line-number'>679</span>	&lt;script&gt;
<span class='line-number'>680</span>	    document.addEventListener(&quot;DOMContentLoaded&quot;, function (event) {
<span class='line-number'>681</span>	        var variants = [];
<span class='line-number'>682</span>	
<span class='line-number'>683</span>	        document.getElementById(&quot;productGrid&quot;).addEventListener(&#39;contentLoaded&#39;, function (e) {
<span class='line-number'>684</span>	            if (e.srcElement.classList.contains(&quot;js-variants-wrap&quot;)) {
<span class='line-number'>685</span>	                Variants.SetVariantOptionStatesForProductList(e.srcElement);
<span class='line-number'>686</span>	            }
<span class='line-number'>687</span>	        }, false);
<span class='line-number'>688</span>	
<span class='line-number'>689</span>	        @foreach (LoopItem variantgroup in GetLoop(&quot;VariantGroups&quot;))
<span class='line-number'>690</span>	        {
<span class='line-number'>691</span>	            &lt;text&gt;var optionsArray = [];&lt;/text&gt;
<span class='line-number'>692</span>	
<span class='line-number'>693</span>	            foreach (LoopItem variantoption in variantgroup.GetLoop(&quot;VariantAvailableOptions&quot;))
<span class='line-number'>694</span>	            {
<span class='line-number'>695</span>	                string variantSelection = variantoption.GetBoolean(&quot;Ecom:VariantOption.Selected&quot;) ? &quot;checked&quot; : &quot;&quot;;
<span class='line-number'>696</span>	
<span class='line-number'>697</span>	                &lt;text&gt;
<span class='line-number'>698</span>	        var option = new Variants.VariantOption(&quot;@variantoption.GetValue(&quot;Ecom:VariantOption.ID&quot;)&quot;, &quot;@GetString(&quot;Ecom:Product.ID&quot;)&quot;, &quot;@variantoption.GetString(&quot;Ecom:VariantOption.Name&quot;)&quot;, &quot;@variantSelection&quot;, &quot;&quot;, &quot;@variantoption.GetString(&quot;Ecom:VariantOption.Color&quot;)&quot;, &quot;@variantoption.GetString(&quot;Ecom:VariantOption.ImgSmall.Clean&quot;)&quot;);
<span class='line-number'>699</span>	        optionsArray.push(option);
<span class='line-number'>700</span>	        &lt;/text&gt;
<span class='line-number'>701</span>	            }
<span class='line-number'>702</span>	
<span class='line-number'>703</span>	            &lt;text&gt;
<span class='line-number'>704</span>	        var group = new Variants.VariantGroup(&quot;@GetString(&quot;Ecom:Product.ID&quot;)_@variantgroup.GetValue(&quot;Ecom:VariantGroup.ID&quot;)&quot;, &quot;@variantgroup.GetValue(&quot;Ecom:VariantGroup.Name&quot;)&quot;, optionsArray);
<span class='line-number'>705</span>	        variants.push(group);
<span class='line-number'>706</span>	        &lt;/text&gt;
<span class='line-number'>707</span>	            }
<span class='line-number'>708</span>	
<span class='line-number'>709</span>	        var combinations = [];
<span class='line-number'>710</span>	        @foreach (LoopItem variantcomb in GetLoop(&quot;VariantStockCombinations&quot;))
<span class='line-number'>711</span>	            {
<span class='line-number'>712</span>	                &lt;text&gt;
<span class='line-number'>713</span>	        combinations.push(new Variants.CombinationItem(&quot;@variantcomb.GetValue(&quot;Ecom:VariantStockCombination.VariantID&quot;)&quot;));
<span class='line-number'>714</span>	        &lt;/text&gt;
<span class='line-number'>715</span>	            }
<span class='line-number'>716</span>	
<span class='line-number'>717</span>	        Variants.SetProductFeedId(&#39;@feedId&#39;);
<span class='line-number'>718</span>	        Variants.SetProductUrl(&#39;/@GetString(&quot;Ecom:Product.VariantLinkGroup.Clean&quot;)&#39;);
<span class='line-number'>719</span>	
<span class='line-number'>720</span>	  		Dynamo.SetDataInCache((&quot;Variants&quot; + &quot;@productId&quot;), variants);
<span class='line-number'>721</span>	        Dynamo.SetDataInCache((&quot;Combinations&quot; + &quot;@productId&quot;), combinations);
<span class='line-number'>722</span>	
<span class='line-number'>723</span>	        document.getElementById(&quot;PriceAndActions&quot;).addEventListener(&#39;contentLoaded&#39;, function (e) {
<span class='line-number'>724</span>	            Variants.InitVariants(variants, combinations, &quot;@productId&quot;);
<span class='line-number'>725</span>	        }, false);
<span class='line-number'>726</span>	    });
<span class='line-number'>727</span>	&lt;/script&gt;
<span class='line-number'>728</span>	
<span class='line-number'>729</span>	@functions {
<span class='line-number'>730</span>	    string getIconForFile(string fileName)
<span class='line-number'>731</span>	    {
<span class='line-number'>732</span>	        string ext = Path.GetExtension(fileName);
<span class='line-number'>733</span>	        string icon = &quot;&quot;;
<span class='line-number'>734</span>	        switch (ext.ToLower())
<span class='line-number'>735</span>	        {
<span class='line-number'>736</span>	            case &quot;.pdf&quot;:
<span class='line-number'>737</span>	                icon = &quot;fa-file-pdf-o&quot;;
<span class='line-number'>738</span>	                break;
<span class='line-number'>739</span>	            case &quot;.xls&quot;:
<span class='line-number'>740</span>	            case &quot;.xlsx&quot;:
<span class='line-number'>741</span>	                icon = &quot;fa-file-excel-o&quot;;
<span class='line-number'>742</span>	                break;
<span class='line-number'>743</span>	            case &quot;.ppt&quot;:
<span class='line-number'>744</span>	            case &quot;.pptx&quot;:
<span class='line-number'>745</span>	                icon = &quot;fa-file-powerpoint-o&quot;;
<span class='line-number'>746</span>	                break;
<span class='line-number'>747</span>	            case &quot;.doc&quot;:
<span class='line-number'>748</span>	            case &quot;.docx&quot;:
<span class='line-number'>749</span>	                icon = &quot;fa-file-word-o&quot;;
<span class='line-number'>750</span>	                break;
<span class='line-number'>751</span>	            case &quot;.jpg&quot;:
<span class='line-number'>752</span>	            case &quot;.jpeg&quot;:
<span class='line-number'>753</span>	            case &quot;.png&quot;:
<span class='line-number'>754</span>	            case &quot;.gif&quot;:
<span class='line-number'>755</span>	                icon = &quot;fa-file-image-o&quot;;
<span class='line-number'>756</span>	                break;
<span class='line-number'>757</span>	            default:
<span class='line-number'>758</span>	                icon = &quot;fa-file-o&quot;;
<span class='line-number'>759</span>	                break;
<span class='line-number'>760</span>	        }
<span class='line-number'>761</span>	        return icon;
<span class='line-number'>762</span>	    }
<span class='line-number'>763</span>	}
<span class='line-number'>764</span>	@*Variants data generation*@
<span class='line-number'>765</span>	&lt;script&gt;
<span class='line-number'>766</span>	    document.addEventListener(&quot;DOMContentLoaded&quot;, function (event) {
<span class='line-number'>767</span>	        Facets.Init(&quot;productList&quot;, &#39;@productCatalogId&#39;, &#39;@requestQuery&#39;);
<span class='line-number'>768</span>	
<span class='line-number'>769</span>	        Variants.SetProductFeedId(&#39;@productCatalogId&#39;);
<span class='line-number'>770</span>	        Variants.SetViewMode(&quot;productList&quot;);
<span class='line-number'>771</span>	
<span class='line-number'>772</span>	        document.getElementById(&quot;productList&quot;).addEventListener(&#39;contentLoaded&#39;, function (e) {
<span class='line-number'>773</span>	            if (e.srcElement.classList.contains(&quot;js-variants-wrap&quot;)) {
<span class='line-number'>774</span>	                Variants.SetVariantOptionStatesForProductList(e.srcElement);
<span class='line-number'>775</span>	            }
<span class='line-number'>776</span>	        }, false);
<span class='line-number'>777</span>	    });
<span class='line-number'>778</span>	&lt;/script&gt;
</div>

2018-05-09 17:28:14.8242|ERROR|Templates|Error in razor template
System.Threading.ThreadAbortException: Thread was being aborted.
   at Dynamicweb.Frontend.Content.GetModuleOutput(Paragraph paragraph, PageView pageview)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.LazyInitValue()
   at CompiledRazorTemplates.Dynamic.dfcecfbfcec.Execute()
   at RazorEngine.Templating.TemplateBase.RazorEngine.Templating.ITemplate.Run(ExecuteContext context)
   at RazorEngine.Templating.TemplateService.Run(ITemplate template, DynamicViewBag viewBag)
   at RazorEngine.Templating.TemplateService.Parse(String razorTemplate, Object model, DynamicViewBag viewBag, String cacheName)
   at RazorEngine.Razor.Parse[T](String razorTemplate, T model, String cacheName)
   at Dynamicweb.Rendering.Template.RenderRazorTemplate()
2018-05-09 17:30:11.3194|ERROR|Templates|Error in razor template
System.Threading.ThreadAbortException: Thread was being aborted.
   at Dynamicweb.Frontend.Content.GetModuleOutput(Paragraph paragraph, PageView pageview)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.LazyInitValue()
   at CompiledRazorTemplates.Dynamic.ffabdabadfffe.<RenderModule>b__c(TextWriter __razor_helper_writer)
   at RazorEngine.Templating.TemplateWriter.WriteTo(TextWriter writer)
   at RazorEngine.Templating.TemplateBase.WriteTo(TextWriter writer, TemplateWriter helper)
   at CompiledRazorTemplates.Dynamic.ffabdabadfffe.<>c__DisplayClass1.<RenderContent>b__0(TextWriter __razor_helper_writer)
   at RazorEngine.Templating.TemplateWriter.WriteTo(TextWriter writer)
   at RazorEngine.Templating.TemplateBase.Write(TemplateWriter helper)
   at CompiledRazorTemplates.Dynamic.ffabdabadfffe.Execute()
   at RazorEngine.Templating.TemplateBase.RazorEngine.Templating.ITemplate.Run(ExecuteContext context)
   at RazorEngine.Templating.TemplateService.Run(ITemplate template, DynamicViewBag viewBag)
   at RazorEngine.Templating.TemplateService.Parse(String razorTemplate, Object model, DynamicViewBag viewBag, String cacheName)
   at RazorEngine.Razor.Parse[T](String razorTemplate, T model, String cacheName)
   at Dynamicweb.Rendering.Template.RenderRazorTemplate()
2018-05-09 17:30:11.8578|ERROR|Templates|Error in razor template
System.Threading.ThreadAbortException: Thread was being aborted.
   at Dynamicweb.Frontend.Content.GetModuleOutput(Paragraph paragraph, PageView pageview)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.LazyInitValue()
   at CompiledRazorTemplates.Dynamic.ffabdabadfffe.<RenderModule>b__c(TextWriter __razor_helper_writer)
   at RazorEngine.Templating.TemplateWriter.WriteTo(TextWriter writer)
   at RazorEngine.Templating.TemplateBase.WriteTo(TextWriter writer, TemplateWriter helper)
   at CompiledRazorTemplates.Dynamic.ffabdabadfffe.<>c__DisplayClass1.<RenderContent>b__0(TextWriter __razor_helper_writer)
   at RazorEngine.Templating.TemplateWriter.WriteTo(TextWriter writer)
   at RazorEngine.Templating.TemplateBase.Write(TemplateWriter helper)
   at CompiledRazorTemplates.Dynamic.ffabdabadfffe.Execute()
   at RazorEngine.Templating.TemplateBase.RazorEngine.Templating.ITemplate.Run(ExecuteContext context)
   at RazorEngine.Templating.TemplateService.Run(ITemplate template, DynamicViewBag viewBag)
   at RazorEngine.Templating.TemplateService.Parse(String razorTemplate, Object model, DynamicViewBag viewBag, String cacheName)
   at RazorEngine.Razor.Parse[T](String razorTemplate, T model, String cacheName)
   at Dynamicweb.Rendering.Template.RenderRazorTemplate()
2018-05-09 17:30:57.4298|ERROR|Templates|Error in razor template
System.Threading.ThreadAbortException: Thread was being aborted.
   at Dynamicweb.Frontend.Content.GetModuleOutput(Paragraph paragraph, PageView pageview)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.LazyInitValue()
   at CompiledRazorTemplates.Dynamic.ffabdabadfffe.<RenderModule>b__c(TextWriter __razor_helper_writer)
   at RazorEngine.Templating.TemplateWriter.WriteTo(TextWriter writer)
   at RazorEngine.Templating.TemplateBase.WriteTo(TextWriter writer, TemplateWriter helper)
   at CompiledRazorTemplates.Dynamic.ffabdabadfffe.<>c__DisplayClass1.<RenderContent>b__0(TextWriter __razor_helper_writer)
   at RazorEngine.Templating.TemplateWriter.WriteTo(TextWriter writer)
   at RazorEngine.Templating.TemplateBase.Write(TemplateWriter helper)
   at CompiledRazorTemplates.Dynamic.ffabdabadfffe.Execute()
   at RazorEngine.Templating.TemplateBase.RazorEngine.Templating.ITemplate.Run(ExecuteContext context)
   at RazorEngine.Templating.TemplateService.Run(ITemplate template, DynamicViewBag viewBag)
   at RazorEngine.Templating.TemplateService.Parse(String razorTemplate, Object model, DynamicViewBag viewBag, String cacheName)
   at RazorEngine.Razor.Parse[T](String razorTemplate, T model, String cacheName)
   at Dynamicweb.Rendering.Template.RenderRazorTemplate()
2018-05-09 17:31:02.1904|ERROR|Templates|Error in razor template
System.Threading.ThreadAbortException: Thread was being aborted.
   at Dynamicweb.Frontend.Content.GetModuleOutput(Paragraph paragraph, PageView pageview)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.LazyInitValue()
   at CompiledRazorTemplates.Dynamic.ffabdabadfffe.<RenderModule>b__c(TextWriter __razor_helper_writer)
   at RazorEngine.Templating.TemplateWriter.WriteTo(TextWriter writer)
   at RazorEngine.Templating.TemplateBase.WriteTo(TextWriter writer, TemplateWriter helper)
   at CompiledRazorTemplates.Dynamic.ffabdabadfffe.<>c__DisplayClass1.<RenderContent>b__0(TextWriter __razor_helper_writer)
   at RazorEngine.Templating.TemplateWriter.WriteTo(TextWriter writer)
   at RazorEngine.Templating.TemplateBase.Write(TemplateWriter helper)
   at CompiledRazorTemplates.Dynamic.ffabdabadfffe.Execute()
   at RazorEngine.Templating.TemplateBase.RazorEngine.Templating.ITemplate.Run(ExecuteContext context)
   at RazorEngine.Templating.TemplateService.Run(ITemplate template, DynamicViewBag viewBag)
   at RazorEngine.Templating.TemplateService.Parse(String razorTemplate, Object model, DynamicViewBag viewBag, String cacheName)
   at RazorEngine.Razor.Parse[T](String razorTemplate, T model, String cacheName)
   at Dynamicweb.Rendering.Template.RenderRazorTemplate()
2018-05-09 17:31:06.7518|ERROR|Templates|Error in razor template
System.Threading.ThreadAbortException: Thread was being aborted.
   at Dynamicweb.Frontend.Content.GetModuleOutput(Paragraph paragraph, PageView pageview)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.LazyInitValue()
   at CompiledRazorTemplates.Dynamic.ffabdabadfffe.<RenderModule>b__c(TextWriter __razor_helper_writer)
   at RazorEngine.Templating.TemplateWriter.WriteTo(TextWriter writer)
   at RazorEngine.Templating.TemplateBase.WriteTo(TextWriter writer, TemplateWriter helper)
   at CompiledRazorTemplates.Dynamic.ffabdabadfffe.<>c__DisplayClass1.<RenderContent>b__0(TextWriter __razor_helper_writer)
   at RazorEngine.Templating.TemplateWriter.WriteTo(TextWriter writer)
   at RazorEngine.Templating.TemplateBase.Write(TemplateWriter helper)
   at CompiledRazorTemplates.Dynamic.ffabdabadfffe.Execute()
   at RazorEngine.Templating.TemplateBase.RazorEngine.Templating.ITemplate.Run(ExecuteContext context)
   at RazorEngine.Templating.TemplateService.Run(ITemplate template, DynamicViewBag viewBag)
   at RazorEngine.Templating.TemplateService.Parse(String razorTemplate, Object model, DynamicViewBag viewBag, String cacheName)
   at RazorEngine.Razor.Parse[T](String razorTemplate, T model, String cacheName)
   at Dynamicweb.Rendering.Template.RenderRazorTemplate()
2018-05-09 17:35:08.9946|ERROR|Templates|Error compiling razor template
Error compiling template "Designs/Rapido/eCom/Product/Product.cshtml"
Line 1873: The name 'productCatalogId' does not exist in the current context
Line 1877: The name 'requestQuery' does not exist in the current context
Line 1881: The name 'productCatalogId' does not exist in the current context
<hr/>
<div class='template-code'>
<span class='line-number'>  1</span>	@inherits Dynamicweb.Rendering.RazorTemplateBase&lt;Dynamicweb.Rendering.RazorTemplateModel&lt;Dynamicweb.Rendering.Template&gt;&gt;
<span class='line-number'>  2</span>	@using Dynamicweb.Extensibility
<span class='line-number'>  3</span>	@using Dynamicweb.Content
<span class='line-number'>  4</span>	@using System
<span class='line-number'>  5</span>	@using System.IO
<span class='line-number'>  6</span>	
<span class='line-number'>  7</span>	@{
<span class='line-number'>  8</span>	    string pageId = GetGlobalValue(&quot;Global:Page.ID&quot;).ToString();
<span class='line-number'>  9</span>	    string productId = GetString(&quot;Ecom:Product.ID&quot;);
<span class='line-number'> 10</span>	    string onSale = GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;) == GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;) ? &quot;u-hidden&quot; : &quot;&quot;;
<span class='line-number'> 11</span>	    string currentPrice = AddSpaceAfterCurrency(GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;) == GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;) ? GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;) : GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;));
<span class='line-number'> 12</span>	    string hideHelpText = &quot;&quot;;
<span class='line-number'> 13</span>	    string feedId = GetPageIdByNavigationTag(&quot;ProductsFeed&quot;).ToString();
<span class='line-number'> 14</span>	    int featuresCount = 0;
<span class='line-number'> 15</span>	    int thumbsCount = GetLoop(&quot;Details&quot;).Count;
<span class='line-number'> 16</span>	
<span class='line-number'> 17</span>	    foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;))
<span class='line-number'> 18</span>	    {
<span class='line-number'> 19</span>	        if (!String.IsNullOrEmpty(customField.GetString(&quot;Product.CustomField.Value.Clean&quot;)))
<span class='line-number'> 20</span>	        {
<span class='line-number'> 21</span>	            featuresCount++;
<span class='line-number'> 22</span>	        }
<span class='line-number'> 23</span>	    }
<span class='line-number'> 24</span>	
<span class='line-number'> 25</span>	    foreach (LoopItem customField in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'> 26</span>	    {
<span class='line-number'> 27</span>	        foreach (LoopItem field in customField.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'> 28</span>	        {
<span class='line-number'> 29</span>	            if (!String.IsNullOrEmpty(field.GetString(&quot;Ecom:Product.CategoryField.Value&quot;)))
<span class='line-number'> 30</span>	            {
<span class='line-number'> 31</span>	                featuresCount++;
<span class='line-number'> 32</span>	            }
<span class='line-number'> 33</span>	        }
<span class='line-number'> 34</span>	    }
<span class='line-number'> 35</span>	
<span class='line-number'> 36</span>	    foreach (LoopItem alternativeImage in GetLoop(&quot;Ecom:Product.AlternativeImages&quot;))
<span class='line-number'> 37</span>	    {
<span class='line-number'> 38</span>	        if (!String.IsNullOrEmpty(alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;)))
<span class='line-number'> 39</span>	        {
<span class='line-number'> 40</span>	            thumbsCount++;
<span class='line-number'> 41</span>	        }
<span class='line-number'> 42</span>	    }
<span class='line-number'> 43</span>	
<span class='line-number'> 44</span>	    foreach (LoopItem variantgroup in GetLoop(&quot;VariantGroups&quot;))
<span class='line-number'> 45</span>	    {
<span class='line-number'> 46</span>	        foreach (LoopItem variantoption in variantgroup.GetLoop(&quot;VariantAvailableOptions&quot;))
<span class='line-number'> 47</span>	        {
<span class='line-number'> 48</span>	            if (variantoption.GetBoolean(&quot;Ecom:VariantOption.Selected&quot;))
<span class='line-number'> 49</span>	            {
<span class='line-number'> 50</span>	                hideHelpText = &quot;u-hidden&quot;;
<span class='line-number'> 51</span>	            }
<span class='line-number'> 52</span>	        }
<span class='line-number'> 53</span>	    }
<span class='line-number'> 54</span>	
<span class='line-number'> 55</span>	    int relatedProductsPageSize = 4;
<span class='line-number'> 56</span>	    int relatedProductsColumnWidth = 3;
<span class='line-number'> 57</span>	
<span class='line-number'> 58</span>	    if (Pageview.Device.ToString() == &quot;Mobile&quot;)
<span class='line-number'> 59</span>	    {
<span class='line-number'> 60</span>	        relatedProductsPageSize = 1;
<span class='line-number'> 61</span>	        relatedProductsColumnWidth = 12;
<span class='line-number'> 62</span>	    }
<span class='line-number'> 63</span>	
<span class='line-number'> 64</span>	    if (Pageview.Device.ToString() == &quot;Tablet&quot;)
<span class='line-number'> 65</span>	    {
<span class='line-number'> 66</span>	        relatedProductsPageSize = 3;
<span class='line-number'> 67</span>	        relatedProductsColumnWidth = 4;
<span class='line-number'> 68</span>	    }
<span class='line-number'> 69</span>	
<span class='line-number'> 70</span>	    string feedPageUrl = &quot;/Default.aspx?ID=&quot; + GetPageIdByNavigationTag(&quot;RelatedProductsFeed&quot;);
<span class='line-number'> 71</span>	    string feedFullUrl = feedPageUrl + &quot;&amp;feedType=productCatalog&amp;PageSize=&quot; + relatedProductsPageSize + &quot;&amp;ProdID=&quot; + productId;
<span class='line-number'> 72</span>	    string productContainerId = &quot;Product&quot; + productId;
<span class='line-number'> 73</span>	
<span class='line-number'> 74</span>	    string HideStockStatus = GetString(&quot;Ecom:Product:Field.HideShowStock&quot;);
<span class='line-number'> 75</span>	
<span class='line-number'> 76</span>	}
<span class='line-number'> 77</span>	
<span class='line-number'> 78</span>	
<span class='line-number'> 79</span>	@functions {
<span class='line-number'> 80</span>	    string AddSpaceAfterCurrency(string str)
<span class='line-number'> 81</span>	    {
<span class='line-number'> 82</span>	        return str.Insert(str.IndexOfAny(&quot;0123456789-&quot;.ToCharArray()), &quot; &quot;);
<span class='line-number'> 83</span>	    }
<span class='line-number'> 84</span>	}
<span class='line-number'> 85</span>	
<span class='line-number'> 86</span>	&lt;!-- Trigger for the image modal --&gt;
<span class='line-number'> 87</span>	&lt;input type=&quot;checkbox&quot; id=&quot;ImageModalTrigger&quot; class=&quot;modal-trigger&quot; /&gt;
<span class='line-number'> 88</span>	
<span class='line-number'> 89</span>	&lt;!-- Image modal --&gt;
<span class='line-number'> 90</span>	&lt;div class=&quot;modal-container&quot;&gt;
<span class='line-number'> 91</span>	    &lt;label for=&quot;ImageModalTrigger&quot; id=&quot;ImageModalOverlay&quot; class=&quot;modal-overlay&quot;&gt;&lt;/label&gt;
<span class='line-number'> 92</span>	    &lt;div class=&quot;modal modal--full&quot; id=&quot;ImageModal&quot;&gt;
<span class='line-number'> 93</span>	        &lt;div class=&quot;modal__body&quot;&gt;
<span class='line-number'> 94</span>	            &lt;img id=&quot;FullImage&quot; class=&quot;modal--full__img&quot; src=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot; /&gt;
<span class='line-number'> 95</span>	        &lt;/div&gt;
<span class='line-number'> 96</span>	    &lt;/div&gt;
<span class='line-number'> 97</span>	&lt;/div&gt;
<span class='line-number'> 98</span>	
<span class='line-number'> 99</span>	&lt;div class=&quot;paragraph-container__grid--bleed-x paragraph-container__grid--bleed-y&quot;&gt;
<span class='line-number'>100</span>	    &lt;div class=&quot;grid product&quot; id=&quot;productGrid&quot;&gt;
<span class='line-number'>101</span>	        @* Image block with optional thumbs *@
<span class='line-number'>102</span>	        @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)))
<span class='line-number'>103</span>	        {
<span class='line-number'>104</span>	            &lt;div class=&quot;grid__col-md-6 grid__col-sm-6&quot;&gt;
<span class='line-number'>105</span>	                &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>106</span>	                    @if (thumbsCount &gt; 0)
<span class='line-number'>107</span>	                {
<span class='line-number'>108</span>	                        &lt;div class=&quot;grid__col-2 u-hidden-xxs product__thumbs dw-mod&quot;&gt;
<span class='line-number'>109</span>	                            &lt;div class=&quot;thumb-list&quot;&gt;
<span class='line-number'>110</span>	                                &lt;div class=&quot;thumb-list__item thumb-list__item--active dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_@productId&quot; data-full-image=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; data-image-path=&quot;/Admin/Public/GetImage.ashx?width=550&amp;amp;height=550&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot;&gt;&lt;img src=&quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'>111</span>	
<span class='line-number'>112</span>	                                @foreach (LoopItem alternativeImage in GetLoop(&quot;Ecom:Product.AlternativeImages&quot;))
<span class='line-number'>113</span>	                                {
<span class='line-number'>114</span>	                                    if (!String.IsNullOrEmpty(alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;)))
<span class='line-number'>115</span>	                                    {
<span class='line-number'>116</span>	                                        string fullImage = alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>117</span>	                                        string image = &quot;/Admin/Public/GetImage.ashx?width=550&amp;amp;height=550&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>118</span>	                                        string thumb = &quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>119</span>	
<span class='line-number'>120</span>	                                        &lt;div class=&quot;thumb-list__item dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_@productId&quot; data-full-image=&quot;@fullImage&quot; data-image-path=&quot;@image&quot;&gt;&lt;img src=&quot;@thumb&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'>121</span>	                                    }
<span class='line-number'>122</span>	                                }
<span class='line-number'>123</span>	
<span class='line-number'>124</span>	                                @foreach (LoopItem detail in GetLoop(&quot;Details&quot;))
<span class='line-number'>125</span>	                                {
<span class='line-number'>126</span>	                                    string fullImage = detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>127</span>	                                    string image = &quot;/Admin/Public/GetImage.ashx?width=550&amp;amp;height=550&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>128</span>	                                    string thumb = &quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>129</span>	
<span class='line-number'>130</span>	                                    &lt;div class=&quot;thumb-list__item dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_@productId&quot; data-full-image=&quot;@fullImage&quot; data-image-path=&quot;@image&quot;&gt;&lt;img src=&quot;@thumb&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'>131</span>	                                }
<span class='line-number'>132</span>	                            &lt;/div&gt;
<span class='line-number'>133</span>	                        &lt;/div&gt;
<span class='line-number'>134</span>	                    }
<span class='line-number'>135</span>	                    &lt;div class=&quot;grid__col-auto&quot;&gt;
<span class='line-number'>136</span>	                        @if (GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;) != GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;))
<span class='line-number'>137</span>	                        {
<span class='line-number'>138</span>	                            &lt;div class=&quot;sticker u-margin-left dw-mod&quot;&gt;@Translate(&quot;Sale!&quot;)&lt;/div&gt;
<span class='line-number'>139</span>	                        }
<span class='line-number'>140</span>	                        &lt;label for=&quot;ImageModalTrigger&quot; class=&quot;product__image-container&quot;&gt;
<span class='line-number'>141</span>	                            &lt;img class=&quot;thumb-image-view product__image-container__image dw-mod&quot; onclick=&quot;document.getElementById(&#39;FullImage&#39;).src = this.getAttribute(&#39;data-full-image&#39;)&quot; id=&quot;Image_@productId&quot; src=&quot;/Admin/Public/GetImage.ashx?crop=5&amp;height=550&amp;width=550&amp;Compression=75&amp;DoNotUpscale=true&amp;image=@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; data-full-image=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot; /&gt;
<span class='line-number'>142</span>	                        &lt;/label&gt;
<span class='line-number'>143</span>	                    &lt;/div&gt;
<span class='line-number'>144</span>	                &lt;/div&gt;
<span class='line-number'>145</span>	            &lt;/div&gt;
<span class='line-number'>146</span>	        }
<span class='line-number'>147</span>	
<span class='line-number'>148</span>	        @* Primary product informations *@
<span class='line-number'>149</span>	        &lt;div class=&quot;grid__col-auto product__info dw-mod&quot;&gt;
<span class='line-number'>150</span>	            &lt;div class=&quot;grid__cell&quot;&gt;
<span class='line-number'>151</span>	                &lt;div class=&quot;u-pull--left product__title dw-mod&quot;&gt;
<span class='line-number'>152</span>	                    &lt;h1 class=&quot;u-no-margin&quot;&gt;@GetString(&quot;Ecom:Product.Name&quot;) @GetString(&quot;Ecom:Product.SelectedVariantComboName&quot;)&lt;/h1&gt;
<span class='line-number'>153</span>	                    &lt;div class=&quot;item-number dw-mod&quot;&gt;@GetString(&quot;Ecom:Product.Number&quot;)&lt;/div&gt;
<span class='line-number'>154</span>	                &lt;/div&gt;
<span class='line-number'>155</span>	                @*&lt;div class=&quot;u-pull--right&quot;&gt;
<span class='line-number'>156</span>	                        @if (Dynamicweb.Core.Converter.ToBoolean(GetGlobalValue(&quot;Global:Extranet.UserName&quot;)))
<span class='line-number'>157</span>	                        {
<span class='line-number'>158</span>	                            string favoriteId = &quot;Favorite&quot; + GetString(&quot;Ecom:Product.ID&quot;);
<span class='line-number'>159</span>	                            &lt;div id=&quot;@favoriteId&quot; class=&quot;favorites favorites--md u-pull--right dw-mod&quot;&gt;
<span class='line-number'>160</span>	                                &lt;div&gt;
<span class='line-number'>161</span>	                                    @{ string favorite = GetBoolean(&quot;Ecom:Product.IsProductInFavoriteList&quot;) ? &quot;fa fa-star&quot; : &quot;fa fa-star-o&quot;; }
<span class='line-number'>162</span>	                                    &lt;i class=&quot;@favorite fa-1_5x&quot;&gt;&lt;/i&gt;
<span class='line-number'>163</span>	                                &lt;/div&gt;
<span class='line-number'>164</span>	
<span class='line-number'>165</span>	                                &lt;div class=&quot;favorites-list__container dw-mod&quot;&gt;
<span class='line-number'>166</span>	                                    &lt;ul class=&quot;list list--clean dw-mod&quot;&gt;
<span class='line-number'>167</span>	                                        @foreach (LoopItem listType in GetLoop(&quot;CustomerCenter.ListTypes&quot;))
<span class='line-number'>168</span>	                                        {
<span class='line-number'>169</span>	                                            foreach (LoopItem list in listType.GetLoop(&quot;CustomerCenter.ProductLists&quot;))
<span class='line-number'>170</span>	                                            {
<span class='line-number'>171</span>	                                                &lt;li&gt;
<span class='line-number'>172</span>	                                                    @{string favLinkType = list.GetString(&quot;Ecom:Product.List.IsProductInThisList&quot;) == &quot;True&quot; ? list.GetString(&quot;Ecom:Product.RemoveFromThisList&quot;) : list.GetString(&quot;Ecom:Product.AddToThisListAction&quot;);}
<span class='line-number'>173</span>	                                                    @{string isInListIcon = list.GetString(&quot;Ecom:Product.List.IsProductInThisList&quot;) == &quot;True&quot; ? &quot;fa fa-star&quot; : &quot;fa fa-star-o&quot;;}
<span class='line-number'>174</span>	                                                    &lt;a href=&quot;@favLinkType&quot; class=&quot;list__link dw-mod&quot;&gt;&lt;i class=&quot;@isInListIcon&quot;&gt;&lt;/i&gt; @list.GetValue(&quot;Ecom:CustomerCenter.List.Name&quot;)&lt;/a&gt;
<span class='line-number'>175</span>	                                                &lt;/li&gt;
<span class='line-number'>176</span>	                                                            }
<span class='line-number'>177</span>	                                                        }
<span class='line-number'>178</span>	                                    &lt;/ul&gt;
<span class='line-number'>179</span>	                                &lt;/div&gt;
<span class='line-number'>180</span>	                            &lt;/div&gt;
<span class='line-number'>181</span>	                                                        }
<span class='line-number'>182</span>	                    &lt;/div&gt;*@
<span class='line-number'>183</span>	
<span class='line-number'>184</span>	                &lt;div&gt;
<span class='line-number'>185</span>	                    &lt;div class=&quot;u-border-bottom u-full-width u-pull--left&quot;&gt;&lt;/div&gt;
<span class='line-number'>186</span>	
<span class='line-number'>187</span>	                    @*
<span class='line-number'>188</span>	                           // Delivery + stock information
<span class='line-number'>189</span>	                        @if (HideStockStatus == &quot;False&quot;)
<span class='line-number'>190</span>	                        {
<span class='line-number'>191</span>	                            string stockIcon = GetInteger(&quot;Ecom:Product.Stock&quot;) &gt; 0 ? &quot;stock-icon--in&quot; : &quot;stock-icon--not&quot;;
<span class='line-number'>192</span>	                            &lt;table class=&quot;table table--clean delivery-and-stock-info dw-mod&quot;&gt;
<span class='line-number'>193</span>	                                &lt;tr&gt;
<span class='line-number'>194</span>	                                    &lt;td class=&quot;u-no-padding&quot;&gt;@GetString(&quot;Ecom:Product:Stock.Text&quot;) &lt;div class=&quot;stock-icon @stockIcon&quot;&gt;&lt;/div&gt;&lt;/td&gt;
<span class='line-number'>195</span>	                                    @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product:Stock.Text&quot;)) || !String.IsNullOrEmpty(GetString(&quot;Ecom:Product:Stock.DeliveryText&quot;)))
<span class='line-number'>196</span>	                                    {
<span class='line-number'>197</span>	                                        if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product:Stock.DeliveryText&quot;)))
<span class='line-number'>198</span>	                                        {
<span class='line-number'>199</span>	                                            &lt;td class=&quot;u-no-padding u-ta-right&quot;&gt;@Translate(&quot;Shipping&quot;) @GetString(&quot;Ecom:Product:Stock.DeliveryText&quot;) @GetString(&quot;Ecom:Product:Stock.DeliveryUnit&quot;)&lt;/td&gt;
<span class='line-number'>200</span>	                                        }
<span class='line-number'>201</span>	                                    }
<span class='line-number'>202</span>	                                &lt;/tr&gt;
<span class='line-number'>203</span>	                            &lt;/table&gt;
<span class='line-number'>204</span>	
<span class='line-number'>205</span>	                        }
<span class='line-number'>206</span>	                    *@
<span class='line-number'>207</span>	                    @* Short description *@
<span class='line-number'>208</span>	                    @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product.ShortDescription&quot;)))
<span class='line-number'>209</span>	                    {
<span class='line-number'>210</span>	                        &lt;div class=&quot;introduction-text&quot;&gt;
<span class='line-number'>211</span>	                            @GetString(&quot;Ecom:Product.ShortDescription&quot;)
<span class='line-number'>212</span>	                        &lt;/div&gt;
<span class='line-number'>213</span>	                    }
<span class='line-number'>214</span>	                    @*Certification images*@
<span class='line-number'>215</span>	                    @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product:Field.Certification.Value.Clean&quot;)))
<span class='line-number'>216</span>	                    {
<span class='line-number'>217</span>	                        string[] certStrArr = GetString(&quot;Ecom:Product:Field.Certification.Value.Clean&quot;).Split(&#39;,&#39;);
<span class='line-number'>218</span>	                        &lt;div class=&quot;grid__col-12 u-no-padding&quot;&gt;
<span class='line-number'>219</span>	                            &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>220</span>	
<span class='line-number'>221</span>	                                @foreach (string certStrItem in certStrArr)
<span class='line-number'>222</span>	                                {
<span class='line-number'>223</span>	                                    &lt;div&gt;
<span class='line-number'>224</span>	                                        &lt;img class=&quot;grid__cell-img&quot; style=&quot;padding-right: 3px&quot; src=&quot;/Admin/Public/GetImage.ashx?Image=/Files/Images/Ecom/Certification/@(certStrItem).jpg&amp;Format=jpg&amp;Height=70&amp;Crop=0&amp;DoNotUpscale=1&quot; alt=&quot;certification image&quot; /&gt;
<span class='line-number'>225</span>	                                    &lt;/div&gt;
<span class='line-number'>226</span>	                                }
<span class='line-number'>227</span>	                            &lt;/div&gt;
<span class='line-number'>228</span>	                        &lt;/div&gt;
<span class='line-number'>229</span>	                    }
<span class='line-number'>230</span>	
<span class='line-number'>231</span>	                    @* Variants *@
<span class='line-number'>232</span>	                    @if (GetLoop(&quot;VariantGroups&quot;).Count &gt; 0)
<span class='line-number'>233</span>	                    {
<span class='line-number'>234</span>	                        &lt;small id=&quot;helpText_@productId&quot; class=&quot;help-text @hideHelpText&quot;&gt;@Translate(&quot;Please select a size and/or color!&quot;)&lt;/small&gt;
<span class='line-number'>235</span>	                        string containerId = &quot;Variants&quot; + productId;
<span class='line-number'>236</span>	                        &lt;div&gt;
<span class='line-number'>237</span>	                            &lt;div id=&quot;@containerId&quot; data-product-id=&quot;@productId&quot;&gt;
<span class='line-number'>238</span>	                                @foreach (LoopItem variantGoup in GetLoop(&quot;VariantGroups&quot;))
<span class='line-number'>239</span>	                                {
<span class='line-number'>240</span>	                                    &lt;div&gt;
<span class='line-number'>241</span>	                                        &lt;div class=&quot;u-bold&quot;&gt;@variantGoup.GetString(&quot;Ecom:VariantGroup.Name&quot;)&lt;/div&gt;
<span class='line-number'>242</span>	                                        &lt;div&gt;
<span class='line-number'>243</span>	                                            @foreach (LoopItem variantOption in variantGoup.GetLoop(&quot;VariantAvailableOptions&quot;))
<span class='line-number'>244</span>	                                            {
<span class='line-number'>245</span>	                                                string selected = variantOption.GetBoolean(&quot;Ecom:VariantOption.Selected&quot;) ? &quot;checked&quot; : &quot;&quot;;
<span class='line-number'>246</span>	
<span class='line-number'>247</span>	                                                if (!string.IsNullOrEmpty(variantOption.GetString(&quot;Ecom:VariantOption.ImgSmall.Clean&quot;)))
<span class='line-number'>248</span>	                                                {
<span class='line-number'>249</span>	                                                    &lt;img src=&quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=50&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image=/Images/@variantOption.GetString(&quot;Ecom:VariantOption.ImgSmall.Clean&quot;)&quot; title=&quot;@variantOption.GetString(&quot;Ecom:VariantOption.Name&quot;)&quot; id=&quot;@variantOption.GetString(&quot;Ecom:VariantOption.ID&quot;)&quot; data-product-id=&quot;@productId&quot; onclick=&quot;Variants.UpdateVariants(this, false)&quot; class=&quot;btn btn--tag @selected&quot; data-check=&quot;@selected&quot; /&gt;
<span class='line-number'>250</span>	                                                }
<span class='line-number'>251</span>	                                                else
<span class='line-number'>252</span>	                                                {
<span class='line-number'>253</span>	                                                    &lt;button type=&quot;button&quot; id=&quot;@variantOption.GetString(&quot;Ecom:VariantOption.ID&quot;)&quot; data-product-id=&quot;@productId&quot; onclick=&quot;Variants.UpdateVariants(this, false)&quot; class=&quot;btn btn--tag @selected&quot; data-check=&quot;@selected&quot;&gt;@variantOption.GetString(&quot;Ecom:VariantOption.Name&quot;)&lt;/button&gt;
<span class='line-number'>254</span>	                                                }
<span class='line-number'>255</span>	                                            }
<span class='line-number'>256</span>	                                        &lt;/div&gt;
<span class='line-number'>257</span>	                                    &lt;/div&gt;
<span class='line-number'>258</span>	                                }
<span class='line-number'>259</span>	                            &lt;/div&gt;
<span class='line-number'>260</span>	
<span class='line-number'>261</span>	                        &lt;/div&gt;
<span class='line-number'>262</span>	                    }
<span class='line-number'>263</span>	
<span class='line-number'>264</span>	                    @* BOMProducts *@
<span class='line-number'>265</span>	                    @if (GetLoop(&quot;BOMProducts&quot;).Count &gt; 0)
<span class='line-number'>266</span>	                    {
<span class='line-number'>267</span>	                        &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Including products&quot;)&lt;/h2&gt;
<span class='line-number'>268</span>	                        foreach (LoopItem BOMProductItem in GetLoop(&quot;BOMProducts&quot;))
<span class='line-number'>269</span>	                        {
<span class='line-number'>270</span>	                            string link = &quot;/&quot; + BOMProductItem.GetString(&quot;Ecom:Product.LinkGroup.Clean&quot;) + (!String.IsNullOrEmpty(BOMProductItem.GetString(&quot;Ecom:Product.VariantID&quot;)) ? &quot;&amp;VariantID=&quot; + BOMProductItem.GetString(&quot;Ecom:Product.VariantID&quot;) : &quot;&quot;);
<span class='line-number'>271</span>	                            &lt;div class=&quot;grid__col--border grid&quot;&gt;
<span class='line-number'>272</span>	                                &lt;div class=&quot;grid__cell grid__cell--align-middle-left&quot;&gt;
<span class='line-number'>273</span>	                                    &lt;a href=&quot;@link&quot; class=&quot;u-pull--left u-margin-right&quot;&gt;
<span class='line-number'>274</span>	                                        &lt;img src=&quot;/Admin/Public/GetImage.ashx?width=50&amp;image=@BOMProductItem.GetString(&quot;Ecom:Product.ImageSmall.Default.Clean&quot;)&amp;Compression=99&quot; /&gt;
<span class='line-number'>275</span>	                                    &lt;/a&gt;
<span class='line-number'>276</span>	                                    &lt;a href=&quot;@link&quot;&gt;@BOMProductItem.GetString(&quot;Ecom:Product.Name&quot;)&lt;/a&gt;
<span class='line-number'>277</span>	                                &lt;/div&gt;
<span class='line-number'>278</span>	                            &lt;/div&gt;
<span class='line-number'>279</span>	                        }
<span class='line-number'>280</span>	                    }
<span class='line-number'>281</span>	                &lt;/div&gt;
<span class='line-number'>282</span>	            &lt;/div&gt;
<span class='line-number'>283</span>	
<span class='line-number'>284</span>	            @* Buy block *@
<span class='line-number'>285</span>	            &lt;div class=&quot;grid__cell-footer&quot;&gt;
<span class='line-number'>286</span>	                &lt;div class=&quot;grid__cell product__price-actions js-ajax-container dw-mod&quot; id=&quot;PriceAndActions&quot; data-template=&quot;PricesAndActionsTemplate&quot; data-json-feed=&quot;/Default.aspx?ID=@feedId&amp;ProductID=@productId&quot;&gt;&lt;/div&gt;
<span class='line-number'>287</span>	                &lt;input type=&quot;hidden&quot; value=&quot;@GetString(&quot;Ecom:Product.VariantID.Extented&quot;)&quot; name=&quot;Variant&quot; id=&quot;Variant_@GetString(&quot;Ecom:Product.ID&quot;)&quot; /&gt;
<span class='line-number'>288</span>	            &lt;/div&gt;
<span class='line-number'>289</span>	        &lt;/div&gt;
<span class='line-number'>290</span>	    &lt;/div&gt;
<span class='line-number'>291</span>	
<span class='line-number'>292</span>	    &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>293</span>	        @* Long description *@
<span class='line-number'>294</span>	        @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product.LongDescription&quot;)))
<span class='line-number'>295</span>	        {
<span class='line-number'>296</span>	            &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>297</span>	                &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Description&quot;)&lt;/h2&gt;
<span class='line-number'>298</span>	
<span class='line-number'>299</span>	                &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>300</span>	                    &lt;div class=&quot;grid__col-lg-8 grid__col-md-8 grid__col-sm-12 grid__col-xs-12 product__description dw-mod&quot;&gt;
<span class='line-number'>301</span>	                        @GetString(&quot;Ecom:Product.LongDescription&quot;)
<span class='line-number'>302</span>	                    &lt;/div&gt;
<span class='line-number'>303</span>	                &lt;/div&gt;
<span class='line-number'>304</span>	            &lt;/div&gt;
<span class='line-number'>305</span>	        }
<span class='line-number'>306</span>	
<span class='line-number'>307</span>	        @* Features lists *@
<span class='line-number'>308</span>	        @if (featuresCount &gt; 0 &amp;&amp; featuresCount &lt; 10)
<span class='line-number'>309</span>	        {
<span class='line-number'>310</span>	            &lt;div class=&quot;grid__col-12 product__features dw-mod&quot;&gt;
<span class='line-number'>311</span>	                &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Product information&quot;)&lt;/h2&gt;
<span class='line-number'>312</span>	
<span class='line-number'>313</span>	                &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>314</span>	                    &lt;div class=&quot;grid__col-lg-8 grid__col-md-8 grid__col-sm-12 grid__col-xs-12&quot;&gt;
<span class='line-number'>315</span>	                        @if (GetLoop(&quot;CustomFieldValues&quot;).Count &gt; 0)
<span class='line-number'>316</span>	                        {
<span class='line-number'>317</span>	                            &lt;table class=&quot;table table--clean table--compact&quot;&gt;
<span class='line-number'>318</span>	                                @foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;).Where(x =&gt; x.GetString(&quot;Product.CustomField.System&quot;) != &quot;HideShowStock&quot;))
<span class='line-number'>319</span>	                                {
<span class='line-number'>320</span>	
<span class='line-number'>321</span>	                                    string fieldValue = customField.GetString(&quot;Product.CustomField.Value&quot;);
<span class='line-number'>322</span>	
<span class='line-number'>323</span>	                                    if (customField.GetLoop(&quot;Product.CustomField.Options&quot;).Count &gt; 0)
<span class='line-number'>324</span>	                                    {
<span class='line-number'>325</span>	                                        fieldValue = &quot;&quot;;
<span class='line-number'>326</span>	                                        int count = 0;
<span class='line-number'>327</span>	
<span class='line-number'>328</span>	                                        foreach (LoopItem customFieldOptions in customField.GetLoop(&quot;Product.CustomField.Options&quot;))
<span class='line-number'>329</span>	                                        {
<span class='line-number'>330</span>	                                            if (customFieldOptions.GetBoolean(&quot;Product.CustomField.Option.IsSelected&quot;))
<span class='line-number'>331</span>	                                            {
<span class='line-number'>332</span>	                                                if (count != 0)
<span class='line-number'>333</span>	                                                {
<span class='line-number'>334</span>	                                                    fieldValue += &quot;, &quot;;
<span class='line-number'>335</span>	                                                }
<span class='line-number'>336</span>	
<span class='line-number'>337</span>	                                                fieldValue += customFieldOptions.GetString(&quot;Product.CustomField.Option.Name&quot;);
<span class='line-number'>338</span>	                                                count++;
<span class='line-number'>339</span>	                                            }
<span class='line-number'>340</span>	                                        }
<span class='line-number'>341</span>	                                    }
<span class='line-number'>342</span>	
<span class='line-number'>343</span>	                                    if (fieldValue == &quot;False&quot;)
<span class='line-number'>344</span>	                                    {
<span class='line-number'>345</span>	                                        fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>346</span>	                                    }
<span class='line-number'>347</span>	
<span class='line-number'>348</span>	                                    if (fieldValue == &quot;True&quot;)
<span class='line-number'>349</span>	                                    {
<span class='line-number'>350</span>	                                        fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>351</span>	                                    }
<span class='line-number'>352</span>	
<span class='line-number'>353</span>	                                    if (!String.IsNullOrEmpty(customField.GetString(&quot;Product.CustomField.Name&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>354</span>	                                    {
<span class='line-number'>355</span>	                                        &lt;tr&gt;
<span class='line-number'>356</span>	                                            &lt;td width=&quot;160&quot;&gt;@customField.GetString(&quot;Product.CustomField.Name&quot;):&lt;/td&gt;
<span class='line-number'>357</span>	                                            @if (!String.IsNullOrEmpty(customField.GetString(&quot;Document.FullPath&quot;)))
<span class='line-number'>358</span>	                                            {
<span class='line-number'>359</span>	                                                &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@customField.GetString(&quot;Document.FullPath&quot;)&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;i class=&quot;fa @getIconForFile(fieldValue)&quot;&gt;&lt;/i&gt; @fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>360</span>	                                            }
<span class='line-number'>361</span>	                                            else
<span class='line-number'>362</span>	                                            {
<span class='line-number'>363</span>	                                                string[] extArr = { &quot;.jpg&quot;, &quot;.png&quot;, &quot;.gif&quot;, &quot;.jpeg&quot; };
<span class='line-number'>364</span>	
<span class='line-number'>365</span>	                                                if (extArr.Any(x =&gt; customField.GetString(&quot;Product.CustomField.Value&quot;).Contains(x)))
<span class='line-number'>366</span>	                                                {
<span class='line-number'>367</span>	                                                    &lt;td class=&quot;u-ta-left&quot;&gt;
<span class='line-number'>368</span>	                                                        &lt;img src=&quot;/Admin/Public/Getimage.ashx?height=50&amp;amp;compression=75&amp;amp;Crop=5&amp;amp;image=@customField.GetString(&quot;Product.CustomField.Value&quot;)&quot; alt=&quot;@fieldValue&quot; /&gt;
<span class='line-number'>369</span>	                                                    &lt;/td&gt;
<span class='line-number'>370</span>	                                                }
<span class='line-number'>371</span>	                                                else
<span class='line-number'>372</span>	                                                {
<span class='line-number'>373</span>	                                                    &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>374</span>	                                                }
<span class='line-number'>375</span>	                                            }
<span class='line-number'>376</span>	                                        &lt;/tr&gt;
<span class='line-number'>377</span>	                                    }
<span class='line-number'>378</span>	
<span class='line-number'>379</span>	                                }
<span class='line-number'>380</span>	
<span class='line-number'>381</span>	
<span class='line-number'>382</span>	                            &lt;/table&gt;
<span class='line-number'>383</span>	                        }
<span class='line-number'>384</span>	
<span class='line-number'>385</span>	                        @if (GetLoop(&quot;ProductCategories&quot;).Count &gt; 0)
<span class='line-number'>386</span>	                        {
<span class='line-number'>387</span>	                            &lt;table class=&quot;table table--clean table--compact u-margin-bottom&quot;&gt;
<span class='line-number'>388</span>	                                @foreach (LoopItem categoryGroup in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'>389</span>	                                {
<span class='line-number'>390</span>	                                    int fieldsCount = 0;
<span class='line-number'>391</span>	                                    foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>392</span>	                                    {
<span class='line-number'>393</span>	                                        if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;)))
<span class='line-number'>394</span>	                                        {
<span class='line-number'>395</span>	                                            fieldsCount++;
<span class='line-number'>396</span>	                                        }
<span class='line-number'>397</span>	                                    }
<span class='line-number'>398</span>	
<span class='line-number'>399</span>	                                    if (fieldsCount &gt; 0)
<span class='line-number'>400</span>	                                    {
<span class='line-number'>401</span>	                                        &lt;tr&gt;
<span class='line-number'>402</span>	                                            &lt;td colspan=&quot;2&quot; class=&quot;u-ta-left table__section-header dw-mod&quot;&gt;@categoryGroup.GetString(&quot;Ecom:Product.Category.Name&quot;)&lt;/td&gt;
<span class='line-number'>403</span>	                                        &lt;/tr&gt;
<span class='line-number'>404</span>	
<span class='line-number'>405</span>	                                        foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>406</span>	                                        {
<span class='line-number'>407</span>	                                            string fieldValue = categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;);
<span class='line-number'>408</span>	
<span class='line-number'>409</span>	                                            if (fieldValue == &quot;False&quot;)
<span class='line-number'>410</span>	                                            {
<span class='line-number'>411</span>	                                                fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>412</span>	                                            }
<span class='line-number'>413</span>	
<span class='line-number'>414</span>	                                            if (fieldValue == &quot;True&quot;)
<span class='line-number'>415</span>	                                            {
<span class='line-number'>416</span>	                                                fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>417</span>	                                            }
<span class='line-number'>418</span>	
<span class='line-number'>419</span>	                                            if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>420</span>	                                            {
<span class='line-number'>421</span>	                                                &lt;tr&gt;
<span class='line-number'>422</span>	                                                    &lt;td width=&quot;160&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;):&lt;/td&gt;
<span class='line-number'>423</span>	                                                    @if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;9&quot;)
<span class='line-number'>424</span>	                                                    {
<span class='line-number'>425</span>	
<span class='line-number'>426</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@fieldValue&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;i class=&quot;fa @getIconForFile(fieldValue)&quot;&gt;&lt;/i&gt; @fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>427</span>	                                                    }
<span class='line-number'>428</span>	                                                    else if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;15&quot;)
<span class='line-number'>429</span>	                                                    {
<span class='line-number'>430</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.OptionLabel&quot;)&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>431</span>	                                                    }
<span class='line-number'>432</span>	                                                    else if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;8&quot;)
<span class='line-number'>433</span>	                                                    {
<span class='line-number'>434</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a property=&quot;identifier&quot; href=&quot;@fieldValue&quot;&gt;@fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>435</span>	                                                    }
<span class='line-number'>436</span>	                                                    else
<span class='line-number'>437</span>	                                                    {
<span class='line-number'>438</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>439</span>	                                                    }
<span class='line-number'>440</span>	                                                &lt;/tr&gt;
<span class='line-number'>441</span>	                                            }
<span class='line-number'>442</span>	                                        }
<span class='line-number'>443</span>	                                    }
<span class='line-number'>444</span>	                                }
<span class='line-number'>445</span>	                            &lt;/table&gt;
<span class='line-number'>446</span>	                        }
<span class='line-number'>447</span>	                    &lt;/div&gt;
<span class='line-number'>448</span>	                &lt;/div&gt;
<span class='line-number'>449</span>	            &lt;/div&gt;
<span class='line-number'>450</span>	        }
<span class='line-number'>451</span>	
<span class='line-number'>452</span>	
<span class='line-number'>453</span>	        @if (featuresCount &gt;= 10)
<span class='line-number'>454</span>	        {
<span class='line-number'>455</span>	            &lt;div class=&quot;grid__col-12 grid__col--bleed-y&quot;&gt;
<span class='line-number'>456</span>	                &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Product information&quot;)&lt;/h2&gt;
<span class='line-number'>457</span>	
<span class='line-number'>458</span>	                &lt;input type=&quot;checkbox&quot; id=&quot;expandable-text-trigger&quot; class=&quot;expandable-text-trigger&quot; /&gt;
<span class='line-number'>459</span>	                &lt;div class=&quot;expandable-text-container&quot;&gt;
<span class='line-number'>460</span>	                    &lt;div class=&quot;expandable-text-container__content dw-mod&quot;&gt;
<span class='line-number'>461</span>	                        &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>462</span>	                            &lt;div class=&quot;grid__col-lg-8 grid__col-md-8 grid__col-sm-12 grid__col-xs-12&quot;&gt;
<span class='line-number'>463</span>	                                @if (GetLoop(&quot;CustomFieldValues&quot;).Count &gt; 0)
<span class='line-number'>464</span>	                                {
<span class='line-number'>465</span>	                                    &lt;table class=&quot;table table--clean table--compact&quot;&gt;
<span class='line-number'>466</span>	                                        @foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;))
<span class='line-number'>467</span>	                                        {
<span class='line-number'>468</span>	                                            string fieldValue = customField.GetString(&quot;Product.CustomField.Value.Clean&quot;);
<span class='line-number'>469</span>	
<span class='line-number'>470</span>	                                            if (customField.GetLoop(&quot;Product.CustomField.Options&quot;).Count &gt; 0)
<span class='line-number'>471</span>	                                            {
<span class='line-number'>472</span>	                                                fieldValue = &quot;&quot;;
<span class='line-number'>473</span>	                                                int count = 0;
<span class='line-number'>474</span>	
<span class='line-number'>475</span>	                                                foreach (LoopItem customFieldOptions in customField.GetLoop(&quot;Product.CustomField.Options&quot;))
<span class='line-number'>476</span>	                                                {
<span class='line-number'>477</span>	                                                    if (customFieldOptions.GetBoolean(&quot;Product.CustomField.Option.IsSelected&quot;))
<span class='line-number'>478</span>	                                                    {
<span class='line-number'>479</span>	                                                        if (count != 0)
<span class='line-number'>480</span>	                                                        {
<span class='line-number'>481</span>	                                                            fieldValue += &quot;, &quot;;
<span class='line-number'>482</span>	                                                        }
<span class='line-number'>483</span>	
<span class='line-number'>484</span>	                                                        fieldValue += customFieldOptions.GetString(&quot;Product.CustomField.Option.Name&quot;);
<span class='line-number'>485</span>	                                                        count++;
<span class='line-number'>486</span>	                                                    }
<span class='line-number'>487</span>	                                                }
<span class='line-number'>488</span>	                                            }
<span class='line-number'>489</span>	
<span class='line-number'>490</span>	                                            if (fieldValue == &quot;False&quot;)
<span class='line-number'>491</span>	                                            {
<span class='line-number'>492</span>	                                                fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>493</span>	                                            }
<span class='line-number'>494</span>	
<span class='line-number'>495</span>	                                            if (fieldValue == &quot;True&quot;)
<span class='line-number'>496</span>	                                            {
<span class='line-number'>497</span>	                                                fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>498</span>	                                            }
<span class='line-number'>499</span>	
<span class='line-number'>500</span>	                                            if (!String.IsNullOrEmpty(customField.GetString(&quot;Product.CustomField.Name&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>501</span>	                                            {
<span class='line-number'>502</span>	                                                &lt;tr&gt;
<span class='line-number'>503</span>	                                                    &lt;td width=&quot;160&quot;&gt;@customField.GetString(&quot;Product.CustomField.Name&quot;):&lt;/td&gt;
<span class='line-number'>504</span>	                                                    @if (!String.IsNullOrEmpty(customField.GetString(&quot;Document.FullPath&quot;)))
<span class='line-number'>505</span>	                                                    {
<span class='line-number'>506</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@customField.GetString(&quot;Document.FullPath&quot;)&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;&lt;i class=&quot;fa @getIconForFile(fieldValue)&quot;&gt;&lt;/i&gt; &amp;nbsp;@fieldValue&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>507</span>	                                                    }
<span class='line-number'>508</span>	                                                    else
<span class='line-number'>509</span>	                                                    {
<span class='line-number'>510</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>511</span>	                                                    }
<span class='line-number'>512</span>	                                                &lt;/tr&gt;
<span class='line-number'>513</span>	                                            }
<span class='line-number'>514</span>	                                        }
<span class='line-number'>515</span>	                                    &lt;/table&gt;
<span class='line-number'>516</span>	                                }
<span class='line-number'>517</span>	
<span class='line-number'>518</span>	                                @if (GetLoop(&quot;ProductCategories&quot;).Count &gt; 0)
<span class='line-number'>519</span>	                                {
<span class='line-number'>520</span>	                                    &lt;table class=&quot;table table--clean table--compact u-margin-bottom&quot;&gt;
<span class='line-number'>521</span>	                                        @foreach (LoopItem categoryGroup in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'>522</span>	                                        {
<span class='line-number'>523</span>	                                            int fieldsCount = 0;
<span class='line-number'>524</span>	                                            foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>525</span>	                                            {
<span class='line-number'>526</span>	                                                if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;)))
<span class='line-number'>527</span>	                                                {
<span class='line-number'>528</span>	                                                    fieldsCount++;
<span class='line-number'>529</span>	                                                }
<span class='line-number'>530</span>	                                            }
<span class='line-number'>531</span>	
<span class='line-number'>532</span>	                                            if (fieldsCount &gt; 0)
<span class='line-number'>533</span>	                                            {
<span class='line-number'>534</span>	                                                &lt;tr&gt;
<span class='line-number'>535</span>	                                                    &lt;td colspan=&quot;2&quot; class=&quot;u-ta-left table__section-header dw-mod&quot;&gt;@categoryGroup.GetString(&quot;Ecom:Product.Category.Name&quot;)&lt;/td&gt;
<span class='line-number'>536</span>	                                                &lt;/tr&gt;
<span class='line-number'>537</span>	
<span class='line-number'>538</span>	                                                foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>539</span>	                                                {
<span class='line-number'>540</span>	                                                    string fieldValue = categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;);
<span class='line-number'>541</span>	
<span class='line-number'>542</span>	                                                    if (fieldValue == &quot;False&quot;)
<span class='line-number'>543</span>	                                                    {
<span class='line-number'>544</span>	                                                        fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>545</span>	                                                    }
<span class='line-number'>546</span>	
<span class='line-number'>547</span>	                                                    if (fieldValue == &quot;True&quot;)
<span class='line-number'>548</span>	                                                    {
<span class='line-number'>549</span>	                                                        fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>550</span>	                                                    }
<span class='line-number'>551</span>	
<span class='line-number'>552</span>	                                                    if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>553</span>	                                                    {
<span class='line-number'>554</span>	                                                        &lt;tr&gt;
<span class='line-number'>555</span>	                                                            &lt;td width=&quot;160&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;):&lt;/td&gt;
<span class='line-number'>556</span>	                                                            @if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;9&quot;)
<span class='line-number'>557</span>	                                                            {
<span class='line-number'>558</span>	                                                                &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@fieldValue&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;i class=&quot;fa @getIconForFile(fieldValue)&quot;&gt;&lt;/i&gt; @fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>559</span>	                                                            }
<span class='line-number'>560</span>	                                                            else if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;15&quot;)
<span class='line-number'>561</span>	                                                            {
<span class='line-number'>562</span>	                                                                &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.OptionLabel&quot;)&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>563</span>	                                                            }
<span class='line-number'>564</span>	                                                            else if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;8&quot;)
<span class='line-number'>565</span>	                                                            {
<span class='line-number'>566</span>	                                                                &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a property=&quot;identifier&quot; href=&quot;@fieldValue&quot;&gt;@fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>567</span>	                                                            }
<span class='line-number'>568</span>	                                                            else
<span class='line-number'>569</span>	                                                            {
<span class='line-number'>570</span>	                                                                &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>571</span>	                                                            }
<span class='line-number'>572</span>	                                                        &lt;/tr&gt;
<span class='line-number'>573</span>	                                                    }
<span class='line-number'>574</span>	                                                }
<span class='line-number'>575</span>	                                            }
<span class='line-number'>576</span>	                                        }
<span class='line-number'>577</span>	                                    &lt;/table&gt;
<span class='line-number'>578</span>	                                }
<span class='line-number'>579</span>	                            &lt;/div&gt;
<span class='line-number'>580</span>	                        &lt;/div&gt;
<span class='line-number'>581</span>	                    &lt;/div&gt;
<span class='line-number'>582</span>	                    &lt;div class=&quot;u-ta-center&quot;&gt;
<span class='line-number'>583</span>	                        &lt;label for=&quot;expandable-text-trigger&quot; class=&quot;btn btn--secondary expandable-text-container__btn more dw-mod&quot;&gt;@Translate(&quot;Show more&quot;)&lt;/label&gt;
<span class='line-number'>584</span>	                        &lt;label for=&quot;expandable-text-trigger&quot; class=&quot;btn btn--secondary expandable-text-container__btn less dw-mod&quot;&gt;@Translate(&quot;Show less&quot;)&lt;/label&gt;
<span class='line-number'>585</span>	                    &lt;/div&gt;
<span class='line-number'>586</span>	                &lt;/div&gt;
<span class='line-number'>587</span>	            &lt;/div&gt;
<span class='line-number'>588</span>	        }
<span class='line-number'>589</span>	
<span class='line-number'>590</span>	        @*
<span class='line-number'>591</span>	               // Related products
<span class='line-number'>592</span>	            &lt;div class=&quot;js-ajax-container&quot; id=&quot;ProductList&quot; data-template=&quot;ProductContainer&quot; data-pre-render-template=&quot;ProductPreRenderContainer&quot; data-json-feed=&quot;@feedFullUrl&quot;&gt;&lt;/div&gt;*@
<span class='line-number'>593</span>	    &lt;/div&gt;
<span class='line-number'>594</span>	&lt;/div&gt;
<span class='line-number'>595</span>	
<span class='line-number'>596</span>	&lt;script id=&quot;PricesAndActionsTemplate&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>597</span>	    &lt;div class=&quot;product__price-actions__price dw-mod&quot;&gt;
<span class='line-number'>598</span>	        &lt;div class=&quot;before-price {{onSale}} dw-mod&quot;&gt;{{discount}}&lt;/div&gt;
<span class='line-number'>599</span>	        &lt;div class=&quot;price dw-mod&quot;&gt;{{price}}&lt;/div&gt;
<span class='line-number'>600</span>	    &lt;/div&gt;
<span class='line-number'>601</span>	    &lt;div class=&quot;buttons-collection buttons-collection--right product__price-actions__actions dw-mod&quot;&gt;
<span class='line-number'>602</span>	        &lt;button type=&quot;button&quot; id=&quot;CartButton_{{id}}&quot; class=&quot;btn btn--primary btn--condensed dw-mod u-pull--right&quot; name=&quot;submit&quot; onclick=&quot;Cart.AddToCart(event, &#39;{{id}}&#39;, document.getElementById(&#39;Quantity_{{id}}&#39;).value, &#39;Unit_{{id}}&#39;, &#39;Variant_{{id}}&#39;);&quot;&gt;&lt;i class=&quot;fa fa-shopping-cart&quot;&gt;&lt;/i&gt;&lt;span class=&quot;u-hidden-xs u-hidden-xxs&quot;&gt; @Translate(&quot;Add to cart&quot;)&lt;/span&gt;&lt;/button&gt;
<span class='line-number'>603</span>	        &lt;input type=&quot;number&quot; class=&quot;u-w70px u-pull--right&quot; id=&quot;Quantity_{{id}}&quot; name=&quot;Quantity&quot; value=&quot;1&quot; min=&quot;1&quot;&gt;
<span class='line-number'>604</span>	        &lt;input type=&quot;checkbox&quot; id=&quot;UnitOptions_{{id}}&quot; class=&quot;dropdown-trigger&quot; /&gt;
<span class='line-number'>605</span>	        &lt;div class=&quot;dropdown u-pull--right u-w150px u-w80px--xs dw-mod {{hasUnits}}&quot;&gt;
<span class='line-number'>606</span>	            @* &lt;label class=&quot;dropdown__header dropdown__btn dw-mod&quot; for=&quot;UnitOptions_{{id}}&quot;&gt;{{unitName}}&lt;/label&gt;*@
<span class='line-number'>607</span>	            &lt;div class=&quot;dropdown__content dw-mod&quot; id=&quot;unitOptions&quot; data-template=&quot;Units&quot;&gt;&lt;/div&gt;
<span class='line-number'>608</span>	            &lt;label class=&quot;dropdown-trigger-off&quot; for=&quot;UnitOptions_{{id}}&quot;&gt;&lt;/label&gt;
<span class='line-number'>609</span>	        &lt;/div&gt;
<span class='line-number'>610</span>	        &lt;input type=&quot;hidden&quot; value=&quot;{{unitId}}&quot; name=&quot;Unit&quot; id=&quot;Unit_{{id}}&quot; /&gt;
<span class='line-number'>611</span>	    &lt;/div&gt;
<span class='line-number'>612</span>	&lt;/script&gt;
<span class='line-number'>613</span>	
<span class='line-number'>614</span>	&lt;script id=&quot;Units&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>615</span>	    &lt;div class=&quot;dropdown__item dw-mod&quot; onclick=&quot;Dynamo.UpdateContent(&#39;PriceAndActions&#39;, &#39;/Default.aspx?ID=@feedId&amp;ProductID=@productId&amp;UnitID={{value}}&#39;)&quot;&gt;{{name}}&lt;/div&gt;
<span class='line-number'>616</span>	&lt;/script&gt;
<span class='line-number'>617</span>	
<span class='line-number'>618</span>	
<span class='line-number'>619</span>	@* Script templates for related products *@
<span class='line-number'>620</span>	&lt;script id=&quot;ProductPreRenderContainer&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>621</span>	    &lt;div class=&quot;u-h600px u-full-width&quot;&gt;
<span class='line-number'>622</span>	        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>623</span>	            &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>624</span>	                &lt;div class=&quot;pre-render-element pre-render-element--md&quot;&gt;&lt;/div&gt;
<span class='line-number'>625</span>	            &lt;/div&gt;
<span class='line-number'>626</span>	        &lt;/div&gt;
<span class='line-number'>627</span>	    &lt;/div&gt;
<span class='line-number'>628</span>	&lt;/script&gt;
<span class='line-number'>629</span>	
<span class='line-number'>630</span>	&lt;script id=&quot;ProductContainer&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>631</span>	    &lt;div class=&quot;u-min-h500px u-full-width&quot;&gt;
<span class='line-number'>632</span>	        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>633</span>	            &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>634</span>	                &lt;h2 class=&quot;section-title section-title--condensed&quot;&gt;@Translate(&quot;What about these products?&quot;)&lt;/h2&gt;
<span class='line-number'>635</span>	            &lt;/div&gt;
<span class='line-number'>636</span>	
<span class='line-number'>637</span>	            &lt;div class=&quot;grid__col-45px grid__col--bleed-x&quot;&gt;
<span class='line-number'>638</span>	                &lt;div class=&quot;grid__cell grid__cell--align-middle-left&quot;&gt;
<span class='line-number'>639</span>	                    &lt;button class=&quot;btn btn--condensed btn--clean {{prevdisabled}} dw-mod&quot; onclick=&quot;Dynamo.UpdateContent(&#39;ProductList&#39;, &#39;{{prevPage}}&#39;)&quot; {{prevdisabled}}&gt;&lt;i class=&quot;fa fa-chevron-left fa-2x&quot;&gt;&lt;/i&gt;&lt;/button&gt;
<span class='line-number'>640</span>	                &lt;/div&gt;
<span class='line-number'>641</span>	            &lt;/div&gt;
<span class='line-number'>642</span>	            &lt;div class=&quot;grid__col-auto grid__col--bleed-x&quot;&gt;
<span class='line-number'>643</span>	                &lt;div id=&quot;ProductsContainer&quot; class=&quot;grid product-list dw-mod&quot; data-template=&quot;ProductGridItemContainer&quot;&gt;&lt;/div&gt;
<span class='line-number'>644</span>	            &lt;/div&gt;
<span class='line-number'>645</span>	            &lt;div class=&quot;grid__col-45px grid__col--bleed-x&quot;&gt;
<span class='line-number'>646</span>	                &lt;div class=&quot;grid__cell grid__cell--align-middle-right&quot;&gt;
<span class='line-number'>647</span>	                    &lt;button class=&quot;btn btn--condensed btn--clean {{nextdisabled}} dw-mod&quot; onclick=&quot;Dynamo.UpdateContent(&#39;ProductList&#39;, &#39;{{nextPage}}&#39;)&quot; {{nextdisabled}}&gt;&lt;i class=&quot;fa fa-chevron-right fa-2x&quot;&gt;&lt;/i&gt;&lt;/button&gt;
<span class='line-number'>648</span>	                &lt;/div&gt;
<span class='line-number'>649</span>	            &lt;/div&gt;
<span class='line-number'>650</span>	        &lt;/div&gt;
<span class='line-number'>651</span>	    &lt;/div&gt;
<span class='line-number'>652</span>	&lt;/script&gt;
<span class='line-number'>653</span>	
<span class='line-number'>654</span>	&lt;script id=&quot;ProductGridItemContainer&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>655</span>	    &lt;div id=&quot;Product&quot; class=&quot;grid__col-@relatedProductsColumnWidth product-list__list-item dw-mod&quot; data-template=&quot;ProductGridItem&quot; data-preloader=&quot;false&quot;&gt;&lt;/div&gt;
<span class='line-number'>656</span>	&lt;/script&gt;
<span class='line-number'>657</span>	
<span class='line-number'>658</span>	&lt;script id=&quot;ProductGridItem&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>659</span>	    &lt;div class=&quot;grid__cell product-list__grid-item__image dw-mod {{noImage}}&quot;&gt;
<span class='line-number'>660</span>	        &lt;div class=&quot;sticker {{onSale}} dw-mod&quot;&gt;@Translate(&quot;Sale!&quot;)&lt;/div&gt;
<span class='line-number'>661</span>	        &lt;a href=&quot;{{link}}&quot; onclick=&quot;Scroll.SavePosition(event)&quot;&gt;&lt;img class=&quot;grid__cell-img grid__cell-img--centered&quot; src=&quot;/Admin/Public/GetImage.ashx?width=300&amp;amp;height=300&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image={{image}}&quot; alt=&quot;{{name}}&quot; /&gt;&lt;/a&gt;
<span class='line-number'>662</span>	    &lt;/div&gt;
<span class='line-number'>663</span>	
<span class='line-number'>664</span>	    &lt;div class=&quot;grid__cell product-list__grid-item__price-info dw-mod&quot;&gt;
<span class='line-number'>665</span>	        &lt;a href=&quot;{{link}}&quot; onclick=&quot;Scroll.SavePosition(event)&quot; title=&quot;{{name}}&quot;&gt;&lt;h6 class=&quot;u-condensed-text&quot;&gt;{{name}}&lt;/h6&gt;&lt;/a&gt;
<span class='line-number'>666</span>	        &lt;div class=&quot;item-number dw-mod&quot;&gt;{{number}}&lt;/div&gt;
<span class='line-number'>667</span>	        &lt;div class=&quot;price dw-mod&quot;&gt;{{price}}&lt;/div&gt;
<span class='line-number'>668</span>	        &lt;div class=&quot;before-price {{onSale}} dw-mod&quot;&gt;{{discount}}&lt;/div&gt;
<span class='line-number'>669</span>	    &lt;/div&gt;
<span class='line-number'>670</span>	
<span class='line-number'>671</span>	    &lt;div class=&quot;product-list__grid-item__footer dw-mod&quot;&gt;
<span class='line-number'>672</span>	        &lt;div class=&quot;u-ta-center&quot;&gt;
<span class='line-number'>673</span>	            &lt;a href=&quot;{{link}}&quot; id=&quot;CartButton_{{id}}&quot; class=&quot;btn btn--secondary btn--full u-no-margin dw-mod&quot;&gt;@Translate(&quot;View&quot;)&lt;/a&gt;
<span class='line-number'>674</span>	        &lt;/div&gt;
<span class='line-number'>675</span>	    &lt;/div&gt;
<span class='line-number'>676</span>	&lt;/script&gt;
<span class='line-number'>677</span>	
<span class='line-number'>678</span>	@*Variants data generation*@
<span class='line-number'>679</span>	&lt;script&gt;
<span class='line-number'>680</span>	    document.addEventListener(&quot;DOMContentLoaded&quot;, function (event) {
<span class='line-number'>681</span>	        var variants = [];
<span class='line-number'>682</span>	
<span class='line-number'>683</span>	        document.getElementById(&quot;productGrid&quot;).addEventListener(&#39;contentLoaded&#39;, function (e) {
<span class='line-number'>684</span>	            if (e.srcElement.classList.contains(&quot;js-variants-wrap&quot;)) {
<span class='line-number'>685</span>	                Variants.SetVariantOptionStatesForProductList(e.srcElement);
<span class='line-number'>686</span>	            }
<span class='line-number'>687</span>	        }, false);
<span class='line-number'>688</span>	
<span class='line-number'>689</span>	        @foreach (LoopItem variantgroup in GetLoop(&quot;VariantGroups&quot;))
<span class='line-number'>690</span>	        {
<span class='line-number'>691</span>	            &lt;text&gt;var optionsArray = [];&lt;/text&gt;
<span class='line-number'>692</span>	
<span class='line-number'>693</span>	            foreach (LoopItem variantoption in variantgroup.GetLoop(&quot;VariantAvailableOptions&quot;))
<span class='line-number'>694</span>	            {
<span class='line-number'>695</span>	                string variantSelection = variantoption.GetBoolean(&quot;Ecom:VariantOption.Selected&quot;) ? &quot;checked&quot; : &quot;&quot;;
<span class='line-number'>696</span>	
<span class='line-number'>697</span>	                &lt;text&gt;
<span class='line-number'>698</span>	        var option = new Variants.VariantOption(&quot;@variantoption.GetValue(&quot;Ecom:VariantOption.ID&quot;)&quot;, &quot;@GetString(&quot;Ecom:Product.ID&quot;)&quot;, &quot;@variantoption.GetString(&quot;Ecom:VariantOption.Name&quot;)&quot;, &quot;@variantSelection&quot;, &quot;&quot;, &quot;@variantoption.GetString(&quot;Ecom:VariantOption.Color&quot;)&quot;, &quot;@variantoption.GetString(&quot;Ecom:VariantOption.ImgSmall.Clean&quot;)&quot;);
<span class='line-number'>699</span>	        optionsArray.push(option);
<span class='line-number'>700</span>	        &lt;/text&gt;
<span class='line-number'>701</span>	            }
<span class='line-number'>702</span>	
<span class='line-number'>703</span>	            &lt;text&gt;
<span class='line-number'>704</span>	        var group = new Variants.VariantGroup(&quot;@GetString(&quot;Ecom:Product.ID&quot;)_@variantgroup.GetValue(&quot;Ecom:VariantGroup.ID&quot;)&quot;, &quot;@variantgroup.GetValue(&quot;Ecom:VariantGroup.Name&quot;)&quot;, optionsArray);
<span class='line-number'>705</span>	        variants.push(group);
<span class='line-number'>706</span>	        &lt;/text&gt;
<span class='line-number'>707</span>	            }
<span class='line-number'>708</span>	
<span class='line-number'>709</span>	        var combinations = [];
<span class='line-number'>710</span>	        @foreach (LoopItem variantcomb in GetLoop(&quot;VariantStockCombinations&quot;))
<span class='line-number'>711</span>	            {
<span class='line-number'>712</span>	                &lt;text&gt;
<span class='line-number'>713</span>	        combinations.push(new Variants.CombinationItem(&quot;@variantcomb.GetValue(&quot;Ecom:VariantStockCombination.VariantID&quot;)&quot;));
<span class='line-number'>714</span>	        &lt;/text&gt;
<span class='line-number'>715</span>	            }
<span class='line-number'>716</span>	
<span class='line-number'>717</span>	        Variants.SetProductFeedId(&#39;@feedId&#39;);
<span class='line-number'>718</span>	        Variants.SetProductUrl(&#39;/@GetString(&quot;Ecom:Product.VariantLinkGroup.Clean&quot;)&#39;);
<span class='line-number'>719</span>	
<span class='line-number'>720</span>	  		Dynamo.SetDataInCache((&quot;Variants&quot; + &quot;@productId&quot;), variants);
<span class='line-number'>721</span>	        Dynamo.SetDataInCache((&quot;Combinations&quot; + &quot;@productId&quot;), combinations);
<span class='line-number'>722</span>	
<span class='line-number'>723</span>	        document.getElementById(&quot;PriceAndActions&quot;).addEventListener(&#39;contentLoaded&#39;, function (e) {
<span class='line-number'>724</span>	            Variants.InitVariants(variants, combinations, &quot;@productId&quot;);
<span class='line-number'>725</span>	        }, false);
<span class='line-number'>726</span>	    });
<span class='line-number'>727</span>	&lt;/script&gt;
<span class='line-number'>728</span>	
<span class='line-number'>729</span>	@functions {
<span class='line-number'>730</span>	    string getIconForFile(string fileName)
<span class='line-number'>731</span>	    {
<span class='line-number'>732</span>	        string ext = Path.GetExtension(fileName);
<span class='line-number'>733</span>	        string icon = &quot;&quot;;
<span class='line-number'>734</span>	        switch (ext.ToLower())
<span class='line-number'>735</span>	        {
<span class='line-number'>736</span>	            case &quot;.pdf&quot;:
<span class='line-number'>737</span>	                icon = &quot;fa-file-pdf-o&quot;;
<span class='line-number'>738</span>	                break;
<span class='line-number'>739</span>	            case &quot;.xls&quot;:
<span class='line-number'>740</span>	            case &quot;.xlsx&quot;:
<span class='line-number'>741</span>	                icon = &quot;fa-file-excel-o&quot;;
<span class='line-number'>742</span>	                break;
<span class='line-number'>743</span>	            case &quot;.ppt&quot;:
<span class='line-number'>744</span>	            case &quot;.pptx&quot;:
<span class='line-number'>745</span>	                icon = &quot;fa-file-powerpoint-o&quot;;
<span class='line-number'>746</span>	                break;
<span class='line-number'>747</span>	            case &quot;.doc&quot;:
<span class='line-number'>748</span>	            case &quot;.docx&quot;:
<span class='line-number'>749</span>	                icon = &quot;fa-file-word-o&quot;;
<span class='line-number'>750</span>	                break;
<span class='line-number'>751</span>	            case &quot;.jpg&quot;:
<span class='line-number'>752</span>	            case &quot;.jpeg&quot;:
<span class='line-number'>753</span>	            case &quot;.png&quot;:
<span class='line-number'>754</span>	            case &quot;.gif&quot;:
<span class='line-number'>755</span>	                icon = &quot;fa-file-image-o&quot;;
<span class='line-number'>756</span>	                break;
<span class='line-number'>757</span>	            default:
<span class='line-number'>758</span>	                icon = &quot;fa-file-o&quot;;
<span class='line-number'>759</span>	                break;
<span class='line-number'>760</span>	        }
<span class='line-number'>761</span>	        return icon;
<span class='line-number'>762</span>	    }
<span class='line-number'>763</span>	}
<span class='line-number'>764</span>	@*Variants data generation*@
<span class='line-number'>765</span>	&lt;script&gt;
<span class='line-number'>766</span>	    document.addEventListener(&quot;DOMContentLoaded&quot;, function (event) {
<span class='line-number'>767</span>	        Facets.Init(&quot;productList&quot;, &#39;@productCatalogId&#39;, &#39;@requestQuery&#39;);
<span class='line-number'>768</span>	
<span class='line-number'>769</span>	        Variants.SetProductFeedId(&#39;@productCatalogId&#39;);
<span class='line-number'>770</span>	        Variants.SetViewMode(&quot;productList&quot;);
<span class='line-number'>771</span>	
<span class='line-number'>772</span>	        document.getElementById(&quot;productList&quot;).addEventListener(&#39;contentLoaded&#39;, function (e) {
<span class='line-number'>773</span>	            if (e.srcElement.classList.contains(&quot;js-variants-wrap&quot;)) {
<span class='line-number'>774</span>	                Variants.SetVariantOptionStatesForProductList(e.srcElement);
<span class='line-number'>775</span>	            }
<span class='line-number'>776</span>	        }, false);
<span class='line-number'>777</span>	    });
<span class='line-number'>778</span>	&lt;/script&gt;
</div>

2018-05-09 17:42:35.6937|ERROR|Templates|Error compiling razor template
Error compiling template "Designs/Rapido/eCom/Product/Product.cshtml"
Line 1903: The name 'uniqueId' does not exist in the current context
Line 2011: The name 'uniqueId' does not exist in the current context
<hr/>
<div class='template-code'>
<span class='line-number'>  1</span>	@inherits Dynamicweb.Rendering.RazorTemplateBase&lt;Dynamicweb.Rendering.RazorTemplateModel&lt;Dynamicweb.Rendering.Template&gt;&gt;
<span class='line-number'>  2</span>	@using Dynamicweb.Extensibility
<span class='line-number'>  3</span>	@using Dynamicweb.Content
<span class='line-number'>  4</span>	@using System
<span class='line-number'>  5</span>	@using System.IO
<span class='line-number'>  6</span>	
<span class='line-number'>  7</span>	@{
<span class='line-number'>  8</span>	    string pageId = GetGlobalValue(&quot;Global:Page.ID&quot;).ToString();
<span class='line-number'>  9</span>	    string productId = GetString(&quot;Ecom:Product.ID&quot;);
<span class='line-number'> 10</span>	    string onSale = GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;) == GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;) ? &quot;u-hidden&quot; : &quot;&quot;;
<span class='line-number'> 11</span>	    string currentPrice = AddSpaceAfterCurrency(GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;) == GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;) ? GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;) : GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;));
<span class='line-number'> 12</span>	    string hideHelpText = &quot;&quot;;
<span class='line-number'> 13</span>	    string feedId = GetPageIdByNavigationTag(&quot;ProductsFeed&quot;).ToString();
<span class='line-number'> 14</span>	    int featuresCount = 0;
<span class='line-number'> 15</span>	    int thumbsCount = GetLoop(&quot;Details&quot;).Count;
<span class='line-number'> 16</span>	    string requestQuery = GetGlobalValue(&quot;Global:Request.Query&quot;);
<span class='line-number'> 17</span>	
<span class='line-number'> 18</span>	    foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;))
<span class='line-number'> 19</span>	    {
<span class='line-number'> 20</span>	        if (!String.IsNullOrEmpty(customField.GetString(&quot;Product.CustomField.Value.Clean&quot;)))
<span class='line-number'> 21</span>	        {
<span class='line-number'> 22</span>	            featuresCount++;
<span class='line-number'> 23</span>	        }
<span class='line-number'> 24</span>	    }
<span class='line-number'> 25</span>	
<span class='line-number'> 26</span>	    foreach (LoopItem customField in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'> 27</span>	    {
<span class='line-number'> 28</span>	        foreach (LoopItem field in customField.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'> 29</span>	        {
<span class='line-number'> 30</span>	            if (!String.IsNullOrEmpty(field.GetString(&quot;Ecom:Product.CategoryField.Value&quot;)))
<span class='line-number'> 31</span>	            {
<span class='line-number'> 32</span>	                featuresCount++;
<span class='line-number'> 33</span>	            }
<span class='line-number'> 34</span>	        }
<span class='line-number'> 35</span>	    }
<span class='line-number'> 36</span>	
<span class='line-number'> 37</span>	    foreach (LoopItem alternativeImage in GetLoop(&quot;Ecom:Product.AlternativeImages&quot;))
<span class='line-number'> 38</span>	    {
<span class='line-number'> 39</span>	        if (!String.IsNullOrEmpty(alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;)))
<span class='line-number'> 40</span>	        {
<span class='line-number'> 41</span>	            thumbsCount++;
<span class='line-number'> 42</span>	        }
<span class='line-number'> 43</span>	    }
<span class='line-number'> 44</span>	
<span class='line-number'> 45</span>	    foreach (LoopItem variantgroup in GetLoop(&quot;VariantGroups&quot;))
<span class='line-number'> 46</span>	    {
<span class='line-number'> 47</span>	        foreach (LoopItem variantoption in variantgroup.GetLoop(&quot;VariantAvailableOptions&quot;))
<span class='line-number'> 48</span>	        {
<span class='line-number'> 49</span>	            if (variantoption.GetBoolean(&quot;Ecom:VariantOption.Selected&quot;))
<span class='line-number'> 50</span>	            {
<span class='line-number'> 51</span>	                hideHelpText = &quot;u-hidden&quot;;
<span class='line-number'> 52</span>	            }
<span class='line-number'> 53</span>	        }
<span class='line-number'> 54</span>	    }
<span class='line-number'> 55</span>	
<span class='line-number'> 56</span>	    int relatedProductsPageSize = 4;
<span class='line-number'> 57</span>	    int relatedProductsColumnWidth = 3;
<span class='line-number'> 58</span>	
<span class='line-number'> 59</span>	    if (Pageview.Device.ToString() == &quot;Mobile&quot;)
<span class='line-number'> 60</span>	    {
<span class='line-number'> 61</span>	        relatedProductsPageSize = 1;
<span class='line-number'> 62</span>	        relatedProductsColumnWidth = 12;
<span class='line-number'> 63</span>	    }
<span class='line-number'> 64</span>	
<span class='line-number'> 65</span>	    if (Pageview.Device.ToString() == &quot;Tablet&quot;)
<span class='line-number'> 66</span>	    {
<span class='line-number'> 67</span>	        relatedProductsPageSize = 3;
<span class='line-number'> 68</span>	        relatedProductsColumnWidth = 4;
<span class='line-number'> 69</span>	    }
<span class='line-number'> 70</span>	
<span class='line-number'> 71</span>	    string feedPageUrl = &quot;/Default.aspx?ID=&quot; + GetPageIdByNavigationTag(&quot;RelatedProductsFeed&quot;);
<span class='line-number'> 72</span>	    string feedFullUrl = feedPageUrl + &quot;&amp;feedType=productCatalog&amp;PageSize=&quot; + relatedProductsPageSize + &quot;&amp;ProdID=&quot; + productId;
<span class='line-number'> 73</span>	    string productContainerId = &quot;Product&quot; + productId;
<span class='line-number'> 74</span>	
<span class='line-number'> 75</span>	    string HideStockStatus = GetString(&quot;Ecom:Product:Field.HideShowStock&quot;);
<span class='line-number'> 76</span>	
<span class='line-number'> 77</span>	}
<span class='line-number'> 78</span>	
<span class='line-number'> 79</span>	
<span class='line-number'> 80</span>	@functions {
<span class='line-number'> 81</span>	    string AddSpaceAfterCurrency(string str)
<span class='line-number'> 82</span>	    {
<span class='line-number'> 83</span>	        return str.Insert(str.IndexOfAny(&quot;0123456789-&quot;.ToCharArray()), &quot; &quot;);
<span class='line-number'> 84</span>	    }
<span class='line-number'> 85</span>	}
<span class='line-number'> 86</span>	
<span class='line-number'> 87</span>	&lt;!-- Trigger for the image modal --&gt;
<span class='line-number'> 88</span>	&lt;input type=&quot;checkbox&quot; id=&quot;ImageModalTrigger&quot; class=&quot;modal-trigger&quot; /&gt;
<span class='line-number'> 89</span>	
<span class='line-number'> 90</span>	&lt;!-- Image modal --&gt;
<span class='line-number'> 91</span>	&lt;div class=&quot;modal-container&quot;&gt;
<span class='line-number'> 92</span>	    &lt;label for=&quot;ImageModalTrigger&quot; id=&quot;ImageModalOverlay&quot; class=&quot;modal-overlay&quot;&gt;&lt;/label&gt;
<span class='line-number'> 93</span>	    &lt;div class=&quot;modal modal--full&quot; id=&quot;ImageModal&quot;&gt;
<span class='line-number'> 94</span>	        &lt;div class=&quot;modal__body&quot;&gt;
<span class='line-number'> 95</span>	            &lt;img id=&quot;FullImage&quot; class=&quot;modal--full__img&quot; src=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot; /&gt;
<span class='line-number'> 96</span>	        &lt;/div&gt;
<span class='line-number'> 97</span>	    &lt;/div&gt;
<span class='line-number'> 98</span>	&lt;/div&gt;
<span class='line-number'> 99</span>	
<span class='line-number'>100</span>	&lt;div class=&quot;paragraph-container__grid--bleed-x paragraph-container__grid--bleed-y&quot;&gt;
<span class='line-number'>101</span>	    &lt;div class=&quot;grid product&quot; id=&quot;productGrid&quot;&gt;
<span class='line-number'>102</span>	        @* Image block with optional thumbs *@
<span class='line-number'>103</span>	        @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)))
<span class='line-number'>104</span>	        {
<span class='line-number'>105</span>	            &lt;div class=&quot;grid__col-md-6 grid__col-sm-6&quot;&gt;
<span class='line-number'>106</span>	                &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>107</span>	                    @if (thumbsCount &gt; 0)
<span class='line-number'>108</span>	                {
<span class='line-number'>109</span>	                        &lt;div class=&quot;grid__col-2 u-hidden-xxs product__thumbs dw-mod&quot;&gt;
<span class='line-number'>110</span>	                            &lt;div class=&quot;thumb-list&quot;&gt;
<span class='line-number'>111</span>	                                &lt;div class=&quot;thumb-list__item thumb-list__item--active dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_@productId&quot; data-full-image=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; data-image-path=&quot;/Admin/Public/GetImage.ashx?width=550&amp;amp;height=550&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot;&gt;&lt;img src=&quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'>112</span>	
<span class='line-number'>113</span>	                                @foreach (LoopItem alternativeImage in GetLoop(&quot;Ecom:Product.AlternativeImages&quot;))
<span class='line-number'>114</span>	                                {
<span class='line-number'>115</span>	                                    if (!String.IsNullOrEmpty(alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;)))
<span class='line-number'>116</span>	                                    {
<span class='line-number'>117</span>	                                        string fullImage = alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>118</span>	                                        string image = &quot;/Admin/Public/GetImage.ashx?width=550&amp;amp;height=550&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>119</span>	                                        string thumb = &quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>120</span>	
<span class='line-number'>121</span>	                                        &lt;div class=&quot;thumb-list__item dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_@productId&quot; data-full-image=&quot;@fullImage&quot; data-image-path=&quot;@image&quot;&gt;&lt;img src=&quot;@thumb&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'>122</span>	                                    }
<span class='line-number'>123</span>	                                }
<span class='line-number'>124</span>	
<span class='line-number'>125</span>	                                @foreach (LoopItem detail in GetLoop(&quot;Details&quot;))
<span class='line-number'>126</span>	                                {
<span class='line-number'>127</span>	                                    string fullImage = detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>128</span>	                                    string image = &quot;/Admin/Public/GetImage.ashx?width=550&amp;amp;height=550&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>129</span>	                                    string thumb = &quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>130</span>	
<span class='line-number'>131</span>	                                    &lt;div class=&quot;thumb-list__item dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_@productId&quot; data-full-image=&quot;@fullImage&quot; data-image-path=&quot;@image&quot;&gt;&lt;img src=&quot;@thumb&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'>132</span>	                                }
<span class='line-number'>133</span>	                            &lt;/div&gt;
<span class='line-number'>134</span>	                        &lt;/div&gt;
<span class='line-number'>135</span>	                    }
<span class='line-number'>136</span>	                    &lt;div class=&quot;grid__col-auto&quot;&gt;
<span class='line-number'>137</span>	                        @if (GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;) != GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;))
<span class='line-number'>138</span>	                        {
<span class='line-number'>139</span>	                            &lt;div class=&quot;sticker u-margin-left dw-mod&quot;&gt;@Translate(&quot;Sale!&quot;)&lt;/div&gt;
<span class='line-number'>140</span>	                        }
<span class='line-number'>141</span>	                        &lt;label for=&quot;ImageModalTrigger&quot; class=&quot;product__image-container&quot;&gt;
<span class='line-number'>142</span>	                            &lt;img class=&quot;thumb-image-view product__image-container__image dw-mod&quot; onclick=&quot;document.getElementById(&#39;FullImage&#39;).src = this.getAttribute(&#39;data-full-image&#39;)&quot; id=&quot;Image_@productId&quot; src=&quot;/Admin/Public/GetImage.ashx?crop=5&amp;height=550&amp;width=550&amp;Compression=75&amp;DoNotUpscale=true&amp;image=@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; data-full-image=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot; /&gt;
<span class='line-number'>143</span>	                        &lt;/label&gt;
<span class='line-number'>144</span>	                    &lt;/div&gt;
<span class='line-number'>145</span>	                &lt;/div&gt;
<span class='line-number'>146</span>	            &lt;/div&gt;
<span class='line-number'>147</span>	        }
<span class='line-number'>148</span>	
<span class='line-number'>149</span>	        @* Primary product informations *@
<span class='line-number'>150</span>	        &lt;div class=&quot;grid__col-auto product__info dw-mod&quot;&gt;
<span class='line-number'>151</span>	            &lt;div class=&quot;grid__cell&quot;&gt;
<span class='line-number'>152</span>	                &lt;div class=&quot;u-pull--left product__title dw-mod&quot;&gt;
<span class='line-number'>153</span>	                    &lt;h1 class=&quot;u-no-margin&quot;&gt;@GetString(&quot;Ecom:Product.Name&quot;) @GetString(&quot;Ecom:Product.SelectedVariantComboName&quot;)&lt;/h1&gt;
<span class='line-number'>154</span>	                    &lt;div class=&quot;item-number dw-mod&quot;&gt;@GetString(&quot;Ecom:Product.Number&quot;)&lt;/div&gt;
<span class='line-number'>155</span>	                &lt;/div&gt;
<span class='line-number'>156</span>	                @*&lt;div class=&quot;u-pull--right&quot;&gt;
<span class='line-number'>157</span>	                        @if (Dynamicweb.Core.Converter.ToBoolean(GetGlobalValue(&quot;Global:Extranet.UserName&quot;)))
<span class='line-number'>158</span>	                        {
<span class='line-number'>159</span>	                            string favoriteId = &quot;Favorite&quot; + GetString(&quot;Ecom:Product.ID&quot;);
<span class='line-number'>160</span>	                            &lt;div id=&quot;@favoriteId&quot; class=&quot;favorites favorites--md u-pull--right dw-mod&quot;&gt;
<span class='line-number'>161</span>	                                &lt;div&gt;
<span class='line-number'>162</span>	                                    @{ string favorite = GetBoolean(&quot;Ecom:Product.IsProductInFavoriteList&quot;) ? &quot;fa fa-star&quot; : &quot;fa fa-star-o&quot;; }
<span class='line-number'>163</span>	                                    &lt;i class=&quot;@favorite fa-1_5x&quot;&gt;&lt;/i&gt;
<span class='line-number'>164</span>	                                &lt;/div&gt;
<span class='line-number'>165</span>	
<span class='line-number'>166</span>	                                &lt;div class=&quot;favorites-list__container dw-mod&quot;&gt;
<span class='line-number'>167</span>	                                    &lt;ul class=&quot;list list--clean dw-mod&quot;&gt;
<span class='line-number'>168</span>	                                        @foreach (LoopItem listType in GetLoop(&quot;CustomerCenter.ListTypes&quot;))
<span class='line-number'>169</span>	                                        {
<span class='line-number'>170</span>	                                            foreach (LoopItem list in listType.GetLoop(&quot;CustomerCenter.ProductLists&quot;))
<span class='line-number'>171</span>	                                            {
<span class='line-number'>172</span>	                                                &lt;li&gt;
<span class='line-number'>173</span>	                                                    @{string favLinkType = list.GetString(&quot;Ecom:Product.List.IsProductInThisList&quot;) == &quot;True&quot; ? list.GetString(&quot;Ecom:Product.RemoveFromThisList&quot;) : list.GetString(&quot;Ecom:Product.AddToThisListAction&quot;);}
<span class='line-number'>174</span>	                                                    @{string isInListIcon = list.GetString(&quot;Ecom:Product.List.IsProductInThisList&quot;) == &quot;True&quot; ? &quot;fa fa-star&quot; : &quot;fa fa-star-o&quot;;}
<span class='line-number'>175</span>	                                                    &lt;a href=&quot;@favLinkType&quot; class=&quot;list__link dw-mod&quot;&gt;&lt;i class=&quot;@isInListIcon&quot;&gt;&lt;/i&gt; @list.GetValue(&quot;Ecom:CustomerCenter.List.Name&quot;)&lt;/a&gt;
<span class='line-number'>176</span>	                                                &lt;/li&gt;
<span class='line-number'>177</span>	                                                            }
<span class='line-number'>178</span>	                                                        }
<span class='line-number'>179</span>	                                    &lt;/ul&gt;
<span class='line-number'>180</span>	                                &lt;/div&gt;
<span class='line-number'>181</span>	                            &lt;/div&gt;
<span class='line-number'>182</span>	                                                        }
<span class='line-number'>183</span>	                    &lt;/div&gt;*@
<span class='line-number'>184</span>	
<span class='line-number'>185</span>	                &lt;div&gt;
<span class='line-number'>186</span>	                    &lt;div class=&quot;u-border-bottom u-full-width u-pull--left&quot;&gt;&lt;/div&gt;
<span class='line-number'>187</span>	
<span class='line-number'>188</span>	                    @*
<span class='line-number'>189</span>	                           // Delivery + stock information
<span class='line-number'>190</span>	                        @if (HideStockStatus == &quot;False&quot;)
<span class='line-number'>191</span>	                        {
<span class='line-number'>192</span>	                            string stockIcon = GetInteger(&quot;Ecom:Product.Stock&quot;) &gt; 0 ? &quot;stock-icon--in&quot; : &quot;stock-icon--not&quot;;
<span class='line-number'>193</span>	                            &lt;table class=&quot;table table--clean delivery-and-stock-info dw-mod&quot;&gt;
<span class='line-number'>194</span>	                                &lt;tr&gt;
<span class='line-number'>195</span>	                                    &lt;td class=&quot;u-no-padding&quot;&gt;@GetString(&quot;Ecom:Product:Stock.Text&quot;) &lt;div class=&quot;stock-icon @stockIcon&quot;&gt;&lt;/div&gt;&lt;/td&gt;
<span class='line-number'>196</span>	                                    @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product:Stock.Text&quot;)) || !String.IsNullOrEmpty(GetString(&quot;Ecom:Product:Stock.DeliveryText&quot;)))
<span class='line-number'>197</span>	                                    {
<span class='line-number'>198</span>	                                        if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product:Stock.DeliveryText&quot;)))
<span class='line-number'>199</span>	                                        {
<span class='line-number'>200</span>	                                            &lt;td class=&quot;u-no-padding u-ta-right&quot;&gt;@Translate(&quot;Shipping&quot;) @GetString(&quot;Ecom:Product:Stock.DeliveryText&quot;) @GetString(&quot;Ecom:Product:Stock.DeliveryUnit&quot;)&lt;/td&gt;
<span class='line-number'>201</span>	                                        }
<span class='line-number'>202</span>	                                    }
<span class='line-number'>203</span>	                                &lt;/tr&gt;
<span class='line-number'>204</span>	                            &lt;/table&gt;
<span class='line-number'>205</span>	
<span class='line-number'>206</span>	                        }
<span class='line-number'>207</span>	                    *@
<span class='line-number'>208</span>	                    @* Short description *@
<span class='line-number'>209</span>	                    @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product.ShortDescription&quot;)))
<span class='line-number'>210</span>	                    {
<span class='line-number'>211</span>	                        &lt;div class=&quot;introduction-text&quot;&gt;
<span class='line-number'>212</span>	                            @GetString(&quot;Ecom:Product.ShortDescription&quot;)
<span class='line-number'>213</span>	                        &lt;/div&gt;
<span class='line-number'>214</span>	                    }
<span class='line-number'>215</span>	                    @*Certification images*@
<span class='line-number'>216</span>	                    @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product:Field.Certification.Value.Clean&quot;)))
<span class='line-number'>217</span>	                    {
<span class='line-number'>218</span>	                        string[] certStrArr = GetString(&quot;Ecom:Product:Field.Certification.Value.Clean&quot;).Split(&#39;,&#39;);
<span class='line-number'>219</span>	                        &lt;div class=&quot;grid__col-12 u-no-padding&quot;&gt;
<span class='line-number'>220</span>	                            &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>221</span>	
<span class='line-number'>222</span>	                                @foreach (string certStrItem in certStrArr)
<span class='line-number'>223</span>	                                {
<span class='line-number'>224</span>	                                    &lt;div&gt;
<span class='line-number'>225</span>	                                        &lt;img class=&quot;grid__cell-img&quot; style=&quot;padding-right: 3px&quot; src=&quot;/Admin/Public/GetImage.ashx?Image=/Files/Images/Ecom/Certification/@(certStrItem).jpg&amp;Format=jpg&amp;Height=70&amp;Crop=0&amp;DoNotUpscale=1&quot; alt=&quot;certification image&quot; /&gt;
<span class='line-number'>226</span>	                                    &lt;/div&gt;
<span class='line-number'>227</span>	                                }
<span class='line-number'>228</span>	                            &lt;/div&gt;
<span class='line-number'>229</span>	                        &lt;/div&gt;
<span class='line-number'>230</span>	                    }
<span class='line-number'>231</span>	
<span class='line-number'>232</span>	                    @* Variants *@
<span class='line-number'>233</span>	                    @if (GetLoop(&quot;VariantGroups&quot;).Count &gt; 0)
<span class='line-number'>234</span>	                    {
<span class='line-number'>235</span>	                        &lt;small id=&quot;helpText_@productId&quot; class=&quot;help-text @hideHelpText&quot;&gt;@Translate(&quot;Please select a size and/or color!&quot;)&lt;/small&gt;
<span class='line-number'>236</span>	                        string containerId = &quot;Variants&quot; + productId;
<span class='line-number'>237</span>	                        &lt;div&gt;
<span class='line-number'>238</span>	                            &lt;div id=&quot;@containerId&quot; data-product-id=&quot;@productId&quot;&gt;
<span class='line-number'>239</span>	                                @foreach (LoopItem variantGoup in GetLoop(&quot;VariantGroups&quot;))
<span class='line-number'>240</span>	                                {
<span class='line-number'>241</span>	                                    &lt;div&gt;
<span class='line-number'>242</span>	                                        &lt;div class=&quot;u-bold&quot;&gt;@variantGoup.GetString(&quot;Ecom:VariantGroup.Name&quot;)&lt;/div&gt;
<span class='line-number'>243</span>	                                        &lt;div&gt;
<span class='line-number'>244</span>	                                            @foreach (LoopItem variantOption in variantGoup.GetLoop(&quot;VariantAvailableOptions&quot;))
<span class='line-number'>245</span>	                                            {
<span class='line-number'>246</span>	                                                string selected = variantOption.GetBoolean(&quot;Ecom:VariantOption.Selected&quot;) ? &quot;checked&quot; : &quot;&quot;;
<span class='line-number'>247</span>	
<span class='line-number'>248</span>	                                                if (!string.IsNullOrEmpty(variantOption.GetString(&quot;Ecom:VariantOption.ImgSmall.Clean&quot;)))
<span class='line-number'>249</span>	                                                {
<span class='line-number'>250</span>	                                                    &lt;img src=&quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=50&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image=/Images/@variantOption.GetString(&quot;Ecom:VariantOption.ImgSmall.Clean&quot;)&quot; title=&quot;@variantOption.GetString(&quot;Ecom:VariantOption.Name&quot;)&quot; id=&quot;@variantOption.GetString(&quot;Ecom:VariantOption.ID&quot;)&quot; data-product-id=&quot;@productId&quot; onclick=&quot;Variants.UpdateVariants(this, false)&quot; class=&quot;btn btn--tag @selected&quot; data-check=&quot;@selected&quot; /&gt;
<span class='line-number'>251</span>	                                                }
<span class='line-number'>252</span>	                                                else
<span class='line-number'>253</span>	                                                {
<span class='line-number'>254</span>	                                                    &lt;button type=&quot;button&quot; id=&quot;@variantOption.GetString(&quot;Ecom:VariantOption.ID&quot;)&quot; data-product-id=&quot;@productId&quot; onclick=&quot;Variants.UpdateVariants(this, false)&quot; class=&quot;btn btn--tag @selected&quot; data-check=&quot;@selected&quot;&gt;@variantOption.GetString(&quot;Ecom:VariantOption.Name&quot;)&lt;/button&gt;
<span class='line-number'>255</span>	                                                }
<span class='line-number'>256</span>	                                            }
<span class='line-number'>257</span>	                                        &lt;/div&gt;
<span class='line-number'>258</span>	                                    &lt;/div&gt;
<span class='line-number'>259</span>	                                }
<span class='line-number'>260</span>	                            &lt;/div&gt;
<span class='line-number'>261</span>	
<span class='line-number'>262</span>	                        &lt;/div&gt;
<span class='line-number'>263</span>	                    }
<span class='line-number'>264</span>	
<span class='line-number'>265</span>	                    @* BOMProducts *@
<span class='line-number'>266</span>	                    @if (GetLoop(&quot;BOMProducts&quot;).Count &gt; 0)
<span class='line-number'>267</span>	                    {
<span class='line-number'>268</span>	                        &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Including products&quot;)&lt;/h2&gt;
<span class='line-number'>269</span>	                        foreach (LoopItem BOMProductItem in GetLoop(&quot;BOMProducts&quot;))
<span class='line-number'>270</span>	                        {
<span class='line-number'>271</span>	                            string link = &quot;/&quot; + BOMProductItem.GetString(&quot;Ecom:Product.LinkGroup.Clean&quot;) + (!String.IsNullOrEmpty(BOMProductItem.GetString(&quot;Ecom:Product.VariantID&quot;)) ? &quot;&amp;VariantID=&quot; + BOMProductItem.GetString(&quot;Ecom:Product.VariantID&quot;) : &quot;&quot;);
<span class='line-number'>272</span>	                            &lt;div class=&quot;grid__col--border grid&quot;&gt;
<span class='line-number'>273</span>	                                &lt;div class=&quot;grid__cell grid__cell--align-middle-left&quot;&gt;
<span class='line-number'>274</span>	                                    &lt;a href=&quot;@link&quot; class=&quot;u-pull--left u-margin-right&quot;&gt;
<span class='line-number'>275</span>	                                        &lt;img src=&quot;/Admin/Public/GetImage.ashx?width=50&amp;image=@BOMProductItem.GetString(&quot;Ecom:Product.ImageSmall.Default.Clean&quot;)&amp;Compression=99&quot; /&gt;
<span class='line-number'>276</span>	                                    &lt;/a&gt;
<span class='line-number'>277</span>	                                    &lt;a href=&quot;@link&quot;&gt;@BOMProductItem.GetString(&quot;Ecom:Product.Name&quot;)&lt;/a&gt;
<span class='line-number'>278</span>	                                &lt;/div&gt;
<span class='line-number'>279</span>	                            &lt;/div&gt;
<span class='line-number'>280</span>	                        }
<span class='line-number'>281</span>	                    }
<span class='line-number'>282</span>	                &lt;/div&gt;
<span class='line-number'>283</span>	            &lt;/div&gt;
<span class='line-number'>284</span>	
<span class='line-number'>285</span>	            @* Buy block *@
<span class='line-number'>286</span>	            &lt;div class=&quot;grid__cell-footer&quot;&gt;
<span class='line-number'>287</span>	                &lt;div class=&quot;grid__cell product__price-actions js-ajax-container dw-mod&quot; id=&quot;PriceAndActions&quot; data-template=&quot;PricesAndActionsTemplate&quot; data-json-feed=&quot;/Default.aspx?ID=@feedId&amp;ProductID=@productId&quot;&gt;&lt;/div&gt;
<span class='line-number'>288</span>	                &lt;input type=&quot;hidden&quot; value=&quot;@GetString(&quot;Ecom:Product.VariantID.Extented&quot;)&quot; name=&quot;Variant&quot; id=&quot;Variant_@GetString(&quot;Ecom:Product.ID&quot;)&quot; /&gt;
<span class='line-number'>289</span>	            &lt;/div&gt;
<span class='line-number'>290</span>	        &lt;/div&gt;
<span class='line-number'>291</span>	    &lt;/div&gt;
<span class='line-number'>292</span>	
<span class='line-number'>293</span>	    &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>294</span>	        @* Long description *@
<span class='line-number'>295</span>	        @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product.LongDescription&quot;)))
<span class='line-number'>296</span>	        {
<span class='line-number'>297</span>	            &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>298</span>	                &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Description&quot;)&lt;/h2&gt;
<span class='line-number'>299</span>	
<span class='line-number'>300</span>	                &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>301</span>	                    &lt;div class=&quot;grid__col-lg-8 grid__col-md-8 grid__col-sm-12 grid__col-xs-12 product__description dw-mod&quot;&gt;
<span class='line-number'>302</span>	                        @GetString(&quot;Ecom:Product.LongDescription&quot;)
<span class='line-number'>303</span>	                    &lt;/div&gt;
<span class='line-number'>304</span>	                &lt;/div&gt;
<span class='line-number'>305</span>	            &lt;/div&gt;
<span class='line-number'>306</span>	        }
<span class='line-number'>307</span>	
<span class='line-number'>308</span>	        @* Features lists *@
<span class='line-number'>309</span>	        @if (featuresCount &gt; 0 &amp;&amp; featuresCount &lt; 10)
<span class='line-number'>310</span>	        {
<span class='line-number'>311</span>	            &lt;div class=&quot;grid__col-12 product__features dw-mod&quot;&gt;
<span class='line-number'>312</span>	                &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Product information&quot;)&lt;/h2&gt;
<span class='line-number'>313</span>	
<span class='line-number'>314</span>	                &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>315</span>	                    &lt;div class=&quot;grid__col-lg-8 grid__col-md-8 grid__col-sm-12 grid__col-xs-12&quot;&gt;
<span class='line-number'>316</span>	                        @if (GetLoop(&quot;CustomFieldValues&quot;).Count &gt; 0)
<span class='line-number'>317</span>	                        {
<span class='line-number'>318</span>	                            &lt;table class=&quot;table table--clean table--compact&quot;&gt;
<span class='line-number'>319</span>	                                @foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;).Where(x =&gt; x.GetString(&quot;Product.CustomField.System&quot;) != &quot;HideShowStock&quot;))
<span class='line-number'>320</span>	                                {
<span class='line-number'>321</span>	
<span class='line-number'>322</span>	                                    string fieldValue = customField.GetString(&quot;Product.CustomField.Value&quot;);
<span class='line-number'>323</span>	
<span class='line-number'>324</span>	                                    if (customField.GetLoop(&quot;Product.CustomField.Options&quot;).Count &gt; 0)
<span class='line-number'>325</span>	                                    {
<span class='line-number'>326</span>	                                        fieldValue = &quot;&quot;;
<span class='line-number'>327</span>	                                        int count = 0;
<span class='line-number'>328</span>	
<span class='line-number'>329</span>	                                        foreach (LoopItem customFieldOptions in customField.GetLoop(&quot;Product.CustomField.Options&quot;))
<span class='line-number'>330</span>	                                        {
<span class='line-number'>331</span>	                                            if (customFieldOptions.GetBoolean(&quot;Product.CustomField.Option.IsSelected&quot;))
<span class='line-number'>332</span>	                                            {
<span class='line-number'>333</span>	                                                if (count != 0)
<span class='line-number'>334</span>	                                                {
<span class='line-number'>335</span>	                                                    fieldValue += &quot;, &quot;;
<span class='line-number'>336</span>	                                                }
<span class='line-number'>337</span>	
<span class='line-number'>338</span>	                                                fieldValue += customFieldOptions.GetString(&quot;Product.CustomField.Option.Name&quot;);
<span class='line-number'>339</span>	                                                count++;
<span class='line-number'>340</span>	                                            }
<span class='line-number'>341</span>	                                        }
<span class='line-number'>342</span>	                                    }
<span class='line-number'>343</span>	
<span class='line-number'>344</span>	                                    if (fieldValue == &quot;False&quot;)
<span class='line-number'>345</span>	                                    {
<span class='line-number'>346</span>	                                        fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>347</span>	                                    }
<span class='line-number'>348</span>	
<span class='line-number'>349</span>	                                    if (fieldValue == &quot;True&quot;)
<span class='line-number'>350</span>	                                    {
<span class='line-number'>351</span>	                                        fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>352</span>	                                    }
<span class='line-number'>353</span>	
<span class='line-number'>354</span>	                                    if (!String.IsNullOrEmpty(customField.GetString(&quot;Product.CustomField.Name&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>355</span>	                                    {
<span class='line-number'>356</span>	                                        &lt;tr&gt;
<span class='line-number'>357</span>	                                            &lt;td width=&quot;160&quot;&gt;@customField.GetString(&quot;Product.CustomField.Name&quot;):&lt;/td&gt;
<span class='line-number'>358</span>	                                            @if (!String.IsNullOrEmpty(customField.GetString(&quot;Document.FullPath&quot;)))
<span class='line-number'>359</span>	                                            {
<span class='line-number'>360</span>	                                                &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@customField.GetString(&quot;Document.FullPath&quot;)&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;i class=&quot;fa @getIconForFile(fieldValue)&quot;&gt;&lt;/i&gt; @fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>361</span>	                                            }
<span class='line-number'>362</span>	                                            else
<span class='line-number'>363</span>	                                            {
<span class='line-number'>364</span>	                                                string[] extArr = { &quot;.jpg&quot;, &quot;.png&quot;, &quot;.gif&quot;, &quot;.jpeg&quot; };
<span class='line-number'>365</span>	
<span class='line-number'>366</span>	                                                if (extArr.Any(x =&gt; customField.GetString(&quot;Product.CustomField.Value&quot;).Contains(x)))
<span class='line-number'>367</span>	                                                {
<span class='line-number'>368</span>	                                                    &lt;td class=&quot;u-ta-left&quot;&gt;
<span class='line-number'>369</span>	                                                        &lt;img src=&quot;/Admin/Public/Getimage.ashx?height=50&amp;amp;compression=75&amp;amp;Crop=5&amp;amp;image=@customField.GetString(&quot;Product.CustomField.Value&quot;)&quot; alt=&quot;@fieldValue&quot; /&gt;
<span class='line-number'>370</span>	                                                    &lt;/td&gt;
<span class='line-number'>371</span>	                                                }
<span class='line-number'>372</span>	                                                else
<span class='line-number'>373</span>	                                                {
<span class='line-number'>374</span>	                                                    &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>375</span>	                                                }
<span class='line-number'>376</span>	                                            }
<span class='line-number'>377</span>	                                        &lt;/tr&gt;
<span class='line-number'>378</span>	                                    }
<span class='line-number'>379</span>	
<span class='line-number'>380</span>	                                }
<span class='line-number'>381</span>	
<span class='line-number'>382</span>	
<span class='line-number'>383</span>	                            &lt;/table&gt;
<span class='line-number'>384</span>	                        }
<span class='line-number'>385</span>	
<span class='line-number'>386</span>	                        @if (GetLoop(&quot;ProductCategories&quot;).Count &gt; 0)
<span class='line-number'>387</span>	                        {
<span class='line-number'>388</span>	                            &lt;table class=&quot;table table--clean table--compact u-margin-bottom&quot;&gt;
<span class='line-number'>389</span>	                                @foreach (LoopItem categoryGroup in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'>390</span>	                                {
<span class='line-number'>391</span>	                                    int fieldsCount = 0;
<span class='line-number'>392</span>	                                    foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>393</span>	                                    {
<span class='line-number'>394</span>	                                        if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;)))
<span class='line-number'>395</span>	                                        {
<span class='line-number'>396</span>	                                            fieldsCount++;
<span class='line-number'>397</span>	                                        }
<span class='line-number'>398</span>	                                    }
<span class='line-number'>399</span>	
<span class='line-number'>400</span>	                                    if (fieldsCount &gt; 0)
<span class='line-number'>401</span>	                                    {
<span class='line-number'>402</span>	                                        &lt;tr&gt;
<span class='line-number'>403</span>	                                            &lt;td colspan=&quot;2&quot; class=&quot;u-ta-left table__section-header dw-mod&quot;&gt;@categoryGroup.GetString(&quot;Ecom:Product.Category.Name&quot;)&lt;/td&gt;
<span class='line-number'>404</span>	                                        &lt;/tr&gt;
<span class='line-number'>405</span>	
<span class='line-number'>406</span>	                                        foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>407</span>	                                        {
<span class='line-number'>408</span>	                                            string fieldValue = categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;);
<span class='line-number'>409</span>	
<span class='line-number'>410</span>	                                            if (fieldValue == &quot;False&quot;)
<span class='line-number'>411</span>	                                            {
<span class='line-number'>412</span>	                                                fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>413</span>	                                            }
<span class='line-number'>414</span>	
<span class='line-number'>415</span>	                                            if (fieldValue == &quot;True&quot;)
<span class='line-number'>416</span>	                                            {
<span class='line-number'>417</span>	                                                fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>418</span>	                                            }
<span class='line-number'>419</span>	
<span class='line-number'>420</span>	                                            if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>421</span>	                                            {
<span class='line-number'>422</span>	                                                &lt;tr&gt;
<span class='line-number'>423</span>	                                                    &lt;td width=&quot;160&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;):&lt;/td&gt;
<span class='line-number'>424</span>	                                                    @if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;9&quot;)
<span class='line-number'>425</span>	                                                    {
<span class='line-number'>426</span>	
<span class='line-number'>427</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@fieldValue&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;i class=&quot;fa @getIconForFile(fieldValue)&quot;&gt;&lt;/i&gt; @fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>428</span>	                                                    }
<span class='line-number'>429</span>	                                                    else if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;15&quot;)
<span class='line-number'>430</span>	                                                    {
<span class='line-number'>431</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.OptionLabel&quot;)&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>432</span>	                                                    }
<span class='line-number'>433</span>	                                                    else if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;8&quot;)
<span class='line-number'>434</span>	                                                    {
<span class='line-number'>435</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a property=&quot;identifier&quot; href=&quot;@fieldValue&quot;&gt;@fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>436</span>	                                                    }
<span class='line-number'>437</span>	                                                    else
<span class='line-number'>438</span>	                                                    {
<span class='line-number'>439</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>440</span>	                                                    }
<span class='line-number'>441</span>	                                                &lt;/tr&gt;
<span class='line-number'>442</span>	                                            }
<span class='line-number'>443</span>	                                        }
<span class='line-number'>444</span>	                                    }
<span class='line-number'>445</span>	                                }
<span class='line-number'>446</span>	                            &lt;/table&gt;
<span class='line-number'>447</span>	                        }
<span class='line-number'>448</span>	                    &lt;/div&gt;
<span class='line-number'>449</span>	                &lt;/div&gt;
<span class='line-number'>450</span>	            &lt;/div&gt;
<span class='line-number'>451</span>	        }
<span class='line-number'>452</span>	
<span class='line-number'>453</span>	
<span class='line-number'>454</span>	        @if (featuresCount &gt;= 10)
<span class='line-number'>455</span>	        {
<span class='line-number'>456</span>	            &lt;div class=&quot;grid__col-12 grid__col--bleed-y&quot;&gt;
<span class='line-number'>457</span>	                &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Product information&quot;)&lt;/h2&gt;
<span class='line-number'>458</span>	
<span class='line-number'>459</span>	                &lt;input type=&quot;checkbox&quot; id=&quot;expandable-text-trigger&quot; class=&quot;expandable-text-trigger&quot; /&gt;
<span class='line-number'>460</span>	                &lt;div class=&quot;expandable-text-container&quot;&gt;
<span class='line-number'>461</span>	                    &lt;div class=&quot;expandable-text-container__content dw-mod&quot;&gt;
<span class='line-number'>462</span>	                        &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>463</span>	                            &lt;div class=&quot;grid__col-lg-8 grid__col-md-8 grid__col-sm-12 grid__col-xs-12&quot;&gt;
<span class='line-number'>464</span>	                                @if (GetLoop(&quot;CustomFieldValues&quot;).Count &gt; 0)
<span class='line-number'>465</span>	                                {
<span class='line-number'>466</span>	                                    &lt;table class=&quot;table table--clean table--compact&quot;&gt;
<span class='line-number'>467</span>	                                        @foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;))
<span class='line-number'>468</span>	                                        {
<span class='line-number'>469</span>	                                            string fieldValue = customField.GetString(&quot;Product.CustomField.Value.Clean&quot;);
<span class='line-number'>470</span>	
<span class='line-number'>471</span>	                                            if (customField.GetLoop(&quot;Product.CustomField.Options&quot;).Count &gt; 0)
<span class='line-number'>472</span>	                                            {
<span class='line-number'>473</span>	                                                fieldValue = &quot;&quot;;
<span class='line-number'>474</span>	                                                int count = 0;
<span class='line-number'>475</span>	
<span class='line-number'>476</span>	                                                foreach (LoopItem customFieldOptions in customField.GetLoop(&quot;Product.CustomField.Options&quot;))
<span class='line-number'>477</span>	                                                {
<span class='line-number'>478</span>	                                                    if (customFieldOptions.GetBoolean(&quot;Product.CustomField.Option.IsSelected&quot;))
<span class='line-number'>479</span>	                                                    {
<span class='line-number'>480</span>	                                                        if (count != 0)
<span class='line-number'>481</span>	                                                        {
<span class='line-number'>482</span>	                                                            fieldValue += &quot;, &quot;;
<span class='line-number'>483</span>	                                                        }
<span class='line-number'>484</span>	
<span class='line-number'>485</span>	                                                        fieldValue += customFieldOptions.GetString(&quot;Product.CustomField.Option.Name&quot;);
<span class='line-number'>486</span>	                                                        count++;
<span class='line-number'>487</span>	                                                    }
<span class='line-number'>488</span>	                                                }
<span class='line-number'>489</span>	                                            }
<span class='line-number'>490</span>	
<span class='line-number'>491</span>	                                            if (fieldValue == &quot;False&quot;)
<span class='line-number'>492</span>	                                            {
<span class='line-number'>493</span>	                                                fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>494</span>	                                            }
<span class='line-number'>495</span>	
<span class='line-number'>496</span>	                                            if (fieldValue == &quot;True&quot;)
<span class='line-number'>497</span>	                                            {
<span class='line-number'>498</span>	                                                fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>499</span>	                                            }
<span class='line-number'>500</span>	
<span class='line-number'>501</span>	                                            if (!String.IsNullOrEmpty(customField.GetString(&quot;Product.CustomField.Name&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>502</span>	                                            {
<span class='line-number'>503</span>	                                                &lt;tr&gt;
<span class='line-number'>504</span>	                                                    &lt;td width=&quot;160&quot;&gt;@customField.GetString(&quot;Product.CustomField.Name&quot;):&lt;/td&gt;
<span class='line-number'>505</span>	                                                    @if (!String.IsNullOrEmpty(customField.GetString(&quot;Document.FullPath&quot;)))
<span class='line-number'>506</span>	                                                    {
<span class='line-number'>507</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@customField.GetString(&quot;Document.FullPath&quot;)&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;&lt;i class=&quot;fa @getIconForFile(fieldValue)&quot;&gt;&lt;/i&gt; &amp;nbsp;@fieldValue&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>508</span>	                                                    }
<span class='line-number'>509</span>	                                                    else
<span class='line-number'>510</span>	                                                    {
<span class='line-number'>511</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>512</span>	                                                    }
<span class='line-number'>513</span>	                                                &lt;/tr&gt;
<span class='line-number'>514</span>	                                            }
<span class='line-number'>515</span>	                                        }
<span class='line-number'>516</span>	                                    &lt;/table&gt;
<span class='line-number'>517</span>	                                }
<span class='line-number'>518</span>	
<span class='line-number'>519</span>	                                @if (GetLoop(&quot;ProductCategories&quot;).Count &gt; 0)
<span class='line-number'>520</span>	                                {
<span class='line-number'>521</span>	                                    &lt;table class=&quot;table table--clean table--compact u-margin-bottom&quot;&gt;
<span class='line-number'>522</span>	                                        @foreach (LoopItem categoryGroup in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'>523</span>	                                        {
<span class='line-number'>524</span>	                                            int fieldsCount = 0;
<span class='line-number'>525</span>	                                            foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>526</span>	                                            {
<span class='line-number'>527</span>	                                                if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;)))
<span class='line-number'>528</span>	                                                {
<span class='line-number'>529</span>	                                                    fieldsCount++;
<span class='line-number'>530</span>	                                                }
<span class='line-number'>531</span>	                                            }
<span class='line-number'>532</span>	
<span class='line-number'>533</span>	                                            if (fieldsCount &gt; 0)
<span class='line-number'>534</span>	                                            {
<span class='line-number'>535</span>	                                                &lt;tr&gt;
<span class='line-number'>536</span>	                                                    &lt;td colspan=&quot;2&quot; class=&quot;u-ta-left table__section-header dw-mod&quot;&gt;@categoryGroup.GetString(&quot;Ecom:Product.Category.Name&quot;)&lt;/td&gt;
<span class='line-number'>537</span>	                                                &lt;/tr&gt;
<span class='line-number'>538</span>	
<span class='line-number'>539</span>	                                                foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>540</span>	                                                {
<span class='line-number'>541</span>	                                                    string fieldValue = categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;);
<span class='line-number'>542</span>	
<span class='line-number'>543</span>	                                                    if (fieldValue == &quot;False&quot;)
<span class='line-number'>544</span>	                                                    {
<span class='line-number'>545</span>	                                                        fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>546</span>	                                                    }
<span class='line-number'>547</span>	
<span class='line-number'>548</span>	                                                    if (fieldValue == &quot;True&quot;)
<span class='line-number'>549</span>	                                                    {
<span class='line-number'>550</span>	                                                        fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>551</span>	                                                    }
<span class='line-number'>552</span>	
<span class='line-number'>553</span>	                                                    if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>554</span>	                                                    {
<span class='line-number'>555</span>	                                                        &lt;tr&gt;
<span class='line-number'>556</span>	                                                            &lt;td width=&quot;160&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;):&lt;/td&gt;
<span class='line-number'>557</span>	                                                            @if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;9&quot;)
<span class='line-number'>558</span>	                                                            {
<span class='line-number'>559</span>	                                                                &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@fieldValue&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;i class=&quot;fa @getIconForFile(fieldValue)&quot;&gt;&lt;/i&gt; @fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>560</span>	                                                            }
<span class='line-number'>561</span>	                                                            else if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;15&quot;)
<span class='line-number'>562</span>	                                                            {
<span class='line-number'>563</span>	                                                                &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.OptionLabel&quot;)&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>564</span>	                                                            }
<span class='line-number'>565</span>	                                                            else if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;8&quot;)
<span class='line-number'>566</span>	                                                            {
<span class='line-number'>567</span>	                                                                &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a property=&quot;identifier&quot; href=&quot;@fieldValue&quot;&gt;@fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>568</span>	                                                            }
<span class='line-number'>569</span>	                                                            else
<span class='line-number'>570</span>	                                                            {
<span class='line-number'>571</span>	                                                                &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>572</span>	                                                            }
<span class='line-number'>573</span>	                                                        &lt;/tr&gt;
<span class='line-number'>574</span>	                                                    }
<span class='line-number'>575</span>	                                                }
<span class='line-number'>576</span>	                                            }
<span class='line-number'>577</span>	                                        }
<span class='line-number'>578</span>	                                    &lt;/table&gt;
<span class='line-number'>579</span>	                                }
<span class='line-number'>580</span>	                            &lt;/div&gt;
<span class='line-number'>581</span>	                        &lt;/div&gt;
<span class='line-number'>582</span>	                    &lt;/div&gt;
<span class='line-number'>583</span>	                    &lt;div class=&quot;u-ta-center&quot;&gt;
<span class='line-number'>584</span>	                        &lt;label for=&quot;expandable-text-trigger&quot; class=&quot;btn btn--secondary expandable-text-container__btn more dw-mod&quot;&gt;@Translate(&quot;Show more&quot;)&lt;/label&gt;
<span class='line-number'>585</span>	                        &lt;label for=&quot;expandable-text-trigger&quot; class=&quot;btn btn--secondary expandable-text-container__btn less dw-mod&quot;&gt;@Translate(&quot;Show less&quot;)&lt;/label&gt;
<span class='line-number'>586</span>	                    &lt;/div&gt;
<span class='line-number'>587</span>	                &lt;/div&gt;
<span class='line-number'>588</span>	            &lt;/div&gt;
<span class='line-number'>589</span>	        }
<span class='line-number'>590</span>	
<span class='line-number'>591</span>	        @*
<span class='line-number'>592</span>	               // Related products
<span class='line-number'>593</span>	            &lt;div class=&quot;js-ajax-container&quot; id=&quot;ProductList&quot; data-template=&quot;ProductContainer&quot; data-pre-render-template=&quot;ProductPreRenderContainer&quot; data-json-feed=&quot;@feedFullUrl&quot;&gt;&lt;/div&gt;*@
<span class='line-number'>594</span>	    &lt;/div&gt;
<span class='line-number'>595</span>	&lt;/div&gt;
<span class='line-number'>596</span>	
<span class='line-number'>597</span>	&lt;script id=&quot;PricesAndActionsTemplate&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>598</span>	    &lt;div class=&quot;product__price-actions__price dw-mod&quot;&gt;
<span class='line-number'>599</span>	        &lt;div class=&quot;before-price {{onSale}} dw-mod&quot;&gt;{{discount}}&lt;/div&gt;
<span class='line-number'>600</span>	        &lt;div class=&quot;price dw-mod&quot;&gt;{{price}}&lt;/div&gt;
<span class='line-number'>601</span>	    &lt;/div&gt;
<span class='line-number'>602</span>	    &lt;div class=&quot;buttons-collection buttons-collection--right product__price-actions__actions dw-mod&quot;&gt;
<span class='line-number'>603</span>	        &lt;button type=&quot;button&quot; id=&quot;CartButton_{{id}}&quot; class=&quot;btn btn--primary btn--condensed dw-mod u-pull--right&quot; name=&quot;submit&quot; onclick=&quot;Cart.AddToCart(event, &#39;{{id}}&#39;, document.getElementById(&#39;Quantity_{{id}}&#39;).value, &#39;Unit_{{id}}&#39;, &#39;Variant_{{id}}&#39;);&quot;&gt;&lt;i class=&quot;fa fa-shopping-cart&quot;&gt;&lt;/i&gt;&lt;span class=&quot;u-hidden-xs u-hidden-xxs&quot;&gt; @Translate(&quot;Add to cart&quot;)&lt;/span&gt;&lt;/button&gt;
<span class='line-number'>604</span>	        &lt;input type=&quot;number&quot; class=&quot;u-w70px u-pull--right&quot; id=&quot;Quantity_{{id}}&quot; name=&quot;Quantity&quot; value=&quot;1&quot; min=&quot;1&quot;&gt;
<span class='line-number'>605</span>	        &lt;input type=&quot;checkbox&quot; id=&quot;UnitOptions_{{id}}&quot; class=&quot;dropdown-trigger&quot; /&gt;
<span class='line-number'>606</span>	        &lt;div class=&quot;dropdown u-pull--right u-w150px u-w80px--xs dw-mod {{hasUnits}}&quot;&gt;
<span class='line-number'>607</span>	            @* &lt;label class=&quot;dropdown__header dropdown__btn dw-mod&quot; for=&quot;UnitOptions_{{id}}&quot;&gt;{{unitName}}&lt;/label&gt;*@
<span class='line-number'>608</span>	            &lt;div class=&quot;dropdown__content dw-mod&quot; id=&quot;unitOptions&quot; data-template=&quot;Units&quot;&gt;&lt;/div&gt;
<span class='line-number'>609</span>	            &lt;label class=&quot;dropdown-trigger-off&quot; for=&quot;UnitOptions_{{id}}&quot;&gt;&lt;/label&gt;
<span class='line-number'>610</span>	        &lt;/div&gt;
<span class='line-number'>611</span>	        &lt;input type=&quot;hidden&quot; value=&quot;{{unitId}}&quot; name=&quot;Unit&quot; id=&quot;Unit_{{id}}&quot; /&gt;
<span class='line-number'>612</span>	    &lt;/div&gt;
<span class='line-number'>613</span>	&lt;/script&gt;
<span class='line-number'>614</span>	
<span class='line-number'>615</span>	&lt;script id=&quot;Units&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>616</span>	    &lt;div class=&quot;dropdown__item dw-mod&quot; onclick=&quot;Dynamo.UpdateContent(&#39;PriceAndActions&#39;, &#39;/Default.aspx?ID=@feedId&amp;ProductID=@productId&amp;UnitID={{value}}&#39;)&quot;&gt;{{name}}&lt;/div&gt;
<span class='line-number'>617</span>	&lt;/script&gt;
<span class='line-number'>618</span>	
<span class='line-number'>619</span>	
<span class='line-number'>620</span>	@* Script templates for related products *@
<span class='line-number'>621</span>	&lt;script id=&quot;ProductPreRenderContainer&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>622</span>	    &lt;div class=&quot;u-h600px u-full-width&quot;&gt;
<span class='line-number'>623</span>	        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>624</span>	            &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>625</span>	                &lt;div class=&quot;pre-render-element pre-render-element--md&quot;&gt;&lt;/div&gt;
<span class='line-number'>626</span>	            &lt;/div&gt;
<span class='line-number'>627</span>	        &lt;/div&gt;
<span class='line-number'>628</span>	    &lt;/div&gt;
<span class='line-number'>629</span>	&lt;/script&gt;
<span class='line-number'>630</span>	
<span class='line-number'>631</span>	&lt;script id=&quot;ProductContainer&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>632</span>	    &lt;div class=&quot;u-min-h500px u-full-width&quot;&gt;
<span class='line-number'>633</span>	        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>634</span>	            &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>635</span>	                &lt;h2 class=&quot;section-title section-title--condensed&quot;&gt;@Translate(&quot;What about these products?&quot;)&lt;/h2&gt;
<span class='line-number'>636</span>	            &lt;/div&gt;
<span class='line-number'>637</span>	
<span class='line-number'>638</span>	            &lt;div class=&quot;grid__col-45px grid__col--bleed-x&quot;&gt;
<span class='line-number'>639</span>	                &lt;div class=&quot;grid__cell grid__cell--align-middle-left&quot;&gt;
<span class='line-number'>640</span>	                    &lt;button class=&quot;btn btn--condensed btn--clean {{prevdisabled}} dw-mod&quot; onclick=&quot;Dynamo.UpdateContent(&#39;ProductList&#39;, &#39;{{prevPage}}&#39;)&quot; {{prevdisabled}}&gt;&lt;i class=&quot;fa fa-chevron-left fa-2x&quot;&gt;&lt;/i&gt;&lt;/button&gt;
<span class='line-number'>641</span>	                &lt;/div&gt;
<span class='line-number'>642</span>	            &lt;/div&gt;
<span class='line-number'>643</span>	            &lt;div class=&quot;grid__col-auto grid__col--bleed-x&quot;&gt;
<span class='line-number'>644</span>	                &lt;div id=&quot;ProductsContainer&quot; class=&quot;grid product-list dw-mod&quot; data-template=&quot;ProductGridItemContainer&quot;&gt;&lt;/div&gt;
<span class='line-number'>645</span>	            &lt;/div&gt;
<span class='line-number'>646</span>	            &lt;div class=&quot;grid__col-45px grid__col--bleed-x&quot;&gt;
<span class='line-number'>647</span>	                &lt;div class=&quot;grid__cell grid__cell--align-middle-right&quot;&gt;
<span class='line-number'>648</span>	                    &lt;button class=&quot;btn btn--condensed btn--clean {{nextdisabled}} dw-mod&quot; onclick=&quot;Dynamo.UpdateContent(&#39;ProductList&#39;, &#39;{{nextPage}}&#39;)&quot; {{nextdisabled}}&gt;&lt;i class=&quot;fa fa-chevron-right fa-2x&quot;&gt;&lt;/i&gt;&lt;/button&gt;
<span class='line-number'>649</span>	                &lt;/div&gt;
<span class='line-number'>650</span>	            &lt;/div&gt;
<span class='line-number'>651</span>	        &lt;/div&gt;
<span class='line-number'>652</span>	    &lt;/div&gt;
<span class='line-number'>653</span>	&lt;/script&gt;
<span class='line-number'>654</span>	
<span class='line-number'>655</span>	&lt;script id=&quot;ProductGridItemContainer&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>656</span>	    &lt;div id=&quot;Product&quot; class=&quot;grid__col-@relatedProductsColumnWidth product-list__list-item dw-mod&quot; data-template=&quot;ProductGridItem&quot; data-preloader=&quot;false&quot;&gt;&lt;/div&gt;
<span class='line-number'>657</span>	&lt;/script&gt;
<span class='line-number'>658</span>	
<span class='line-number'>659</span>	&lt;script id=&quot;ProductGridItem&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>660</span>	    &lt;div class=&quot;grid__cell product-list__grid-item__image dw-mod {{noImage}}&quot;&gt;
<span class='line-number'>661</span>	        &lt;div class=&quot;sticker {{onSale}} dw-mod&quot;&gt;@Translate(&quot;Sale!&quot;)&lt;/div&gt;
<span class='line-number'>662</span>	        &lt;a href=&quot;{{link}}&quot; onclick=&quot;Scroll.SavePosition(event)&quot;&gt;&lt;img class=&quot;grid__cell-img grid__cell-img--centered&quot; src=&quot;/Admin/Public/GetImage.ashx?width=300&amp;amp;height=300&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image={{image}}&quot; alt=&quot;{{name}}&quot; /&gt;&lt;/a&gt;
<span class='line-number'>663</span>	    &lt;/div&gt;
<span class='line-number'>664</span>	
<span class='line-number'>665</span>	    &lt;div class=&quot;grid__cell product-list__grid-item__price-info dw-mod&quot;&gt;
<span class='line-number'>666</span>	        &lt;a href=&quot;{{link}}&quot; onclick=&quot;Scroll.SavePosition(event)&quot; title=&quot;{{name}}&quot;&gt;&lt;h6 class=&quot;u-condensed-text&quot;&gt;{{name}}&lt;/h6&gt;&lt;/a&gt;
<span class='line-number'>667</span>	        &lt;div class=&quot;item-number dw-mod&quot;&gt;{{number}}&lt;/div&gt;
<span class='line-number'>668</span>	        &lt;div class=&quot;price dw-mod&quot;&gt;{{price}}&lt;/div&gt;
<span class='line-number'>669</span>	        &lt;div class=&quot;before-price {{onSale}} dw-mod&quot;&gt;{{discount}}&lt;/div&gt;
<span class='line-number'>670</span>	    &lt;/div&gt;
<span class='line-number'>671</span>	
<span class='line-number'>672</span>	    &lt;div class=&quot;product-list__grid-item__footer dw-mod&quot;&gt;
<span class='line-number'>673</span>	        &lt;div class=&quot;u-ta-center&quot;&gt;
<span class='line-number'>674</span>	            &lt;a href=&quot;{{link}}&quot; id=&quot;CartButton_{{id}}&quot; class=&quot;btn btn--secondary btn--full u-no-margin dw-mod&quot;&gt;@Translate(&quot;View&quot;)&lt;/a&gt;
<span class='line-number'>675</span>	        &lt;/div&gt;
<span class='line-number'>676</span>	    &lt;/div&gt;
<span class='line-number'>677</span>	&lt;/script&gt;
<span class='line-number'>678</span>	
<span class='line-number'>679</span>	@*Variants data generation*@
<span class='line-number'>680</span>	&lt;script&gt;
<span class='line-number'>681</span>	    document.addEventListener(&quot;DOMContentLoaded&quot;, function (event) {
<span class='line-number'>682</span>	        var variants = [];
<span class='line-number'>683</span>	
<span class='line-number'>684</span>	        document.getElementById(&quot;productGrid&quot;).addEventListener(&#39;contentLoaded&#39;, function (e) {
<span class='line-number'>685</span>	            if (e.srcElement.classList.contains(&quot;js-variants-wrap&quot;)) {
<span class='line-number'>686</span>	                Variants.SetVariantOptionStatesForProductList(e.srcElement);
<span class='line-number'>687</span>	            }
<span class='line-number'>688</span>	        }, false);
<span class='line-number'>689</span>	
<span class='line-number'>690</span>	        @foreach (LoopItem variantgroup in GetLoop(&quot;VariantGroups&quot;))
<span class='line-number'>691</span>	        {
<span class='line-number'>692</span>	            &lt;text&gt;var optionsArray = [];&lt;/text&gt;
<span class='line-number'>693</span>	
<span class='line-number'>694</span>	            foreach (LoopItem variantoption in variantgroup.GetLoop(&quot;VariantAvailableOptions&quot;))
<span class='line-number'>695</span>	            {
<span class='line-number'>696</span>	                string variantSelection = variantoption.GetBoolean(&quot;Ecom:VariantOption.Selected&quot;) ? &quot;checked&quot; : &quot;&quot;;
<span class='line-number'>697</span>	
<span class='line-number'>698</span>	                &lt;text&gt;
<span class='line-number'>699</span>	        var option = new Variants.VariantOption(&quot;@variantoption.GetValue(&quot;Ecom:VariantOption.ID&quot;)&quot;, &quot;@GetString(&quot;Ecom:Product.ID&quot;)&quot;, &quot;@variantoption.GetString(&quot;Ecom:VariantOption.Name&quot;)&quot;, &quot;@variantSelection&quot;, &quot;&quot;, &quot;@variantoption.GetString(&quot;Ecom:VariantOption.Color&quot;)&quot;, &quot;@variantoption.GetString(&quot;Ecom:VariantOption.ImgSmall.Clean&quot;)&quot;);
<span class='line-number'>700</span>	        optionsArray.push(option);
<span class='line-number'>701</span>	        &lt;/text&gt;
<span class='line-number'>702</span>	            }
<span class='line-number'>703</span>	
<span class='line-number'>704</span>	            &lt;text&gt;
<span class='line-number'>705</span>	        var group = new Variants.VariantGroup(&quot;@GetString(&quot;Ecom:Product.ID&quot;)_@variantgroup.GetValue(&quot;Ecom:VariantGroup.ID&quot;)&quot;, &quot;@variantgroup.GetValue(&quot;Ecom:VariantGroup.Name&quot;)&quot;, optionsArray);
<span class='line-number'>706</span>	        variants.push(group);
<span class='line-number'>707</span>	        &lt;/text&gt;
<span class='line-number'>708</span>	            }
<span class='line-number'>709</span>	
<span class='line-number'>710</span>	        var combinations = [];
<span class='line-number'>711</span>	        @foreach (LoopItem variantcomb in GetLoop(&quot;VariantStockCombinations&quot;))
<span class='line-number'>712</span>	            {
<span class='line-number'>713</span>	                &lt;text&gt;
<span class='line-number'>714</span>	        combinations.push(new Variants.CombinationItem(&quot;@variantcomb.GetValue(&quot;Ecom:VariantStockCombination.VariantID&quot;)&quot;));
<span class='line-number'>715</span>	        &lt;/text&gt;
<span class='line-number'>716</span>	            }
<span class='line-number'>717</span>	
<span class='line-number'>718</span>	        Variants.SetProductFeedId(&#39;@feedId&#39;);
<span class='line-number'>719</span>	        Variants.SetProductUrl(&#39;/@GetString(&quot;Ecom:Product.VariantLinkGroup.Clean&quot;)&#39;);
<span class='line-number'>720</span>	
<span class='line-number'>721</span>	  		Dynamo.SetDataInCache((&quot;Variants&quot; + &quot;@productId&quot;), variants);
<span class='line-number'>722</span>	        Dynamo.SetDataInCache((&quot;Combinations&quot; + &quot;@productId&quot;), combinations);
<span class='line-number'>723</span>	
<span class='line-number'>724</span>	        document.getElementById(&quot;PriceAndActions&quot;).addEventListener(&#39;contentLoaded&#39;, function (e) {
<span class='line-number'>725</span>	            Variants.InitVariants(variants, combinations, &quot;@productId&quot;);
<span class='line-number'>726</span>	        }, false);
<span class='line-number'>727</span>	    });
<span class='line-number'>728</span>	&lt;/script&gt;
<span class='line-number'>729</span>	
<span class='line-number'>730</span>	@functions {
<span class='line-number'>731</span>	    string getIconForFile(string fileName)
<span class='line-number'>732</span>	    {
<span class='line-number'>733</span>	        string ext = Path.GetExtension(fileName);
<span class='line-number'>734</span>	        string icon = &quot;&quot;;
<span class='line-number'>735</span>	        switch (ext.ToLower())
<span class='line-number'>736</span>	        {
<span class='line-number'>737</span>	            case &quot;.pdf&quot;:
<span class='line-number'>738</span>	                icon = &quot;fa-file-pdf-o&quot;;
<span class='line-number'>739</span>	                break;
<span class='line-number'>740</span>	            case &quot;.xls&quot;:
<span class='line-number'>741</span>	            case &quot;.xlsx&quot;:
<span class='line-number'>742</span>	                icon = &quot;fa-file-excel-o&quot;;
<span class='line-number'>743</span>	                break;
<span class='line-number'>744</span>	            case &quot;.ppt&quot;:
<span class='line-number'>745</span>	            case &quot;.pptx&quot;:
<span class='line-number'>746</span>	                icon = &quot;fa-file-powerpoint-o&quot;;
<span class='line-number'>747</span>	                break;
<span class='line-number'>748</span>	            case &quot;.doc&quot;:
<span class='line-number'>749</span>	            case &quot;.docx&quot;:
<span class='line-number'>750</span>	                icon = &quot;fa-file-word-o&quot;;
<span class='line-number'>751</span>	                break;
<span class='line-number'>752</span>	            case &quot;.jpg&quot;:
<span class='line-number'>753</span>	            case &quot;.jpeg&quot;:
<span class='line-number'>754</span>	            case &quot;.png&quot;:
<span class='line-number'>755</span>	            case &quot;.gif&quot;:
<span class='line-number'>756</span>	                icon = &quot;fa-file-image-o&quot;;
<span class='line-number'>757</span>	                break;
<span class='line-number'>758</span>	            default:
<span class='line-number'>759</span>	                icon = &quot;fa-file-o&quot;;
<span class='line-number'>760</span>	                break;
<span class='line-number'>761</span>	        }
<span class='line-number'>762</span>	        return icon;
<span class='line-number'>763</span>	    }
<span class='line-number'>764</span>	}
<span class='line-number'>765</span>	&lt;script&gt;
<span class='line-number'>766</span>	    document.addEventListener(&quot;DOMContentLoaded&quot;, function (event) {
<span class='line-number'>767</span>	        var variants = [];
<span class='line-number'>768</span>	
<span class='line-number'>769</span>	        document.getElementById(&quot;productGrid&quot;).addEventListener(&#39;contentLoaded&#39;, function (e) {
<span class='line-number'>770</span>	            if (e.srcElement.classList.contains(&quot;js-variants-wrap&quot;)) {
<span class='line-number'>771</span>	                Variants.SetVariantOptionStatesForProductList(e.srcElement);
<span class='line-number'>772</span>	            }
<span class='line-number'>773</span>	        }, false);
<span class='line-number'>774</span>	
<span class='line-number'>775</span>	        @foreach (LoopItem variantgroup in GetLoop(&quot;VariantGroups&quot;))
<span class='line-number'>776</span>	        {
<span class='line-number'>777</span>	            &lt;text&gt;var optionsArray = [];&lt;/text&gt;
<span class='line-number'>778</span>	
<span class='line-number'>779</span>	            foreach (LoopItem variantoption in variantgroup.GetLoop(&quot;VariantAvailableOptions&quot;))
<span class='line-number'>780</span>	            {
<span class='line-number'>781</span>	                string variantSelection = variantoption.GetBoolean(&quot;Ecom:VariantOption.Selected&quot;) ? &quot;checked&quot; : &quot;&quot;;
<span class='line-number'>782</span>	
<span class='line-number'>783</span>	                &lt;text&gt;
<span class='line-number'>784</span>	        var option = new Variants.VariantOption(&quot;@uniqueId&quot;, &quot;@GetString(&quot;Ecom:Product.ID&quot;)&quot;, &quot;@variantoption.GetValue(&quot;Ecom:VariantOption.ID&quot;)&quot;, &quot;@variantoption.GetString(&quot;Ecom:VariantOption.Name&quot;)&quot;, &quot;@variantSelection&quot;, &quot;&quot;, &quot;@variantoption.GetString(&quot;Ecom:VariantOption.Color&quot;)&quot;, &quot;@variantoption.GetString(&quot;Ecom:VariantOption.ImgSmall.Clean&quot;)&quot;);
<span class='line-number'>785</span>	        optionsArray.push(option);
<span class='line-number'>786</span>	        &lt;/text&gt;
<span class='line-number'>787</span>	            }
<span class='line-number'>788</span>	
<span class='line-number'>789</span>	            &lt;text&gt;
<span class='line-number'>790</span>	        var group = new Variants.VariantGroup(&quot;@GetString(&quot;Ecom:Product.ID&quot;)_@variantgroup.GetValue(&quot;Ecom:VariantGroup.ID&quot;)&quot;, &quot;@variantgroup.GetValue(&quot;Ecom:VariantGroup.Name&quot;)&quot;, optionsArray);
<span class='line-number'>791</span>	        variants.push(group);
<span class='line-number'>792</span>	        &lt;/text&gt;
<span class='line-number'>793</span>	        }
<span class='line-number'>794</span>	
<span class='line-number'>795</span>	        var combinations = [];
<span class='line-number'>796</span>	        @foreach (LoopItem variantcomb in GetLoop(&quot;VariantStockCombinations&quot;))
<span class='line-number'>797</span>	        {
<span class='line-number'>798</span>	        &lt;text&gt;
<span class='line-number'>799</span>	        combinations.push(new Variants.CombinationItem(&quot;@variantcomb.GetValue(&quot;Ecom:VariantStockCombination.VariantID&quot;)&quot;));
<span class='line-number'>800</span>	        &lt;/text&gt;
<span class='line-number'>801</span>	        }
<span class='line-number'>802</span>	
<span class='line-number'>803</span>	        variants = variants.sort(function (a, b) {
<span class='line-number'>804</span>	            var firstVariantId = a.VariantOptions[0].variantId;
<span class='line-number'>805</span>	            for (var i = 0; i &lt; combinations.length; i++) {
<span class='line-number'>806</span>	                var combinationIndex = combinations[i].id.indexOf(firstVariantId);
<span class='line-number'>807</span>	                if (combinationIndex != -1) {
<span class='line-number'>808</span>	                    return combinationIndex;
<span class='line-number'>809</span>	                }
<span class='line-number'>810</span>	            }
<span class='line-number'>811</span>	            //should never happen
<span class='line-number'>812</span>	            return 0;
<span class='line-number'>813</span>	        });
<span class='line-number'>814</span>	
<span class='line-number'>815</span>	        Variants.SetProductFeedId(&#39;@feedId&#39;);
<span class='line-number'>816</span>	        Variants.SetProductUrl(&#39;/@GetString(&quot;Ecom:Product.VariantLinkGroup.Clean&quot;)&#39;);
<span class='line-number'>817</span>	
<span class='line-number'>818</span>	        HandlebarsBolt.SetDataInCache((&quot;Variants&quot; + &quot;@productId&quot;), variants);
<span class='line-number'>819</span>	        HandlebarsBolt.SetDataInCache((&quot;Combinations&quot; + &quot;@productId&quot;), combinations);
<span class='line-number'>820</span>	
<span class='line-number'>821</span>	        document.getElementById(&quot;PriceAndActions&quot;).addEventListener(&#39;contentLoaded&#39;, function (e) {
<span class='line-number'>822</span>	            Variants.InitVariants(variants, combinations, &quot;@productId&quot;, &quot;@uniqueId&quot;);
<span class='line-number'>823</span>	        }, false);
<span class='line-number'>824</span>	    });
<span class='line-number'>825</span>	&lt;/script&gt;
<span class='line-number'>826</span>	@*Variants data generation*@
<span class='line-number'>827</span>	@*&lt;script&gt;
<span class='line-number'>828</span>	    document.addEventListener(&quot;DOMContentLoaded&quot;, function (event) {
<span class='line-number'>829</span>	        Facets.Init(&quot;productList&quot;, &#39;@productCatalogId&#39;, &#39;@requestQuery&#39;);
<span class='line-number'>830</span>	
<span class='line-number'>831</span>	        Variants.SetProductFeedId(&#39;@productCatalogId&#39;);
<span class='line-number'>832</span>	        Variants.SetViewMode(&quot;productList&quot;);
<span class='line-number'>833</span>	
<span class='line-number'>834</span>	        document.getElementById(&quot;productList&quot;).addEventListener(&#39;contentLoaded&#39;, function (e) {
<span class='line-number'>835</span>	            if (e.srcElement.classList.contains(&quot;js-variants-wrap&quot;)) {
<span class='line-number'>836</span>	                Variants.SetVariantOptionStatesForProductList(e.srcElement);
<span class='line-number'>837</span>	            }
<span class='line-number'>838</span>	        }, false);
<span class='line-number'>839</span>	    });
<span class='line-number'>840</span>	&lt;/script&gt;
<span class='line-number'>841</span>	*@
</div>

2018-05-09 17:54:36.2370|ERROR|Templates|Error compiling razor template
Error compiling template "Designs/Rapido/eCom/Product/Product.cshtml"
Line 1877: The name 'productCatalogId' does not exist in the current context
Line 1885: The name 'productCatalogId' does not exist in the current context
<hr/>
<div class='template-code'>
<span class='line-number'>  1</span>	@inherits Dynamicweb.Rendering.RazorTemplateBase&lt;Dynamicweb.Rendering.RazorTemplateModel&lt;Dynamicweb.Rendering.Template&gt;&gt;
<span class='line-number'>  2</span>	@using Dynamicweb.Extensibility
<span class='line-number'>  3</span>	@using Dynamicweb.Content
<span class='line-number'>  4</span>	@using System
<span class='line-number'>  5</span>	@using System.IO
<span class='line-number'>  6</span>	
<span class='line-number'>  7</span>	@{
<span class='line-number'>  8</span>	    string pageId = GetGlobalValue(&quot;Global:Page.ID&quot;).ToString();
<span class='line-number'>  9</span>	    string productId = GetString(&quot;Ecom:Product.ID&quot;);
<span class='line-number'> 10</span>	    string uniqueId = GetString(&quot;Ecom:Product.ID&quot;) + GetString(&quot;Ecom:Product.VariantID&quot;);
<span class='line-number'> 11</span>	    string onSale = GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;) == GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;) ? &quot;u-hidden&quot; : &quot;&quot;;
<span class='line-number'> 12</span>	    string currentPrice = AddSpaceAfterCurrency(GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;) == GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;) ? GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;) : GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;));
<span class='line-number'> 13</span>	    string hideHelpText = &quot;&quot;;
<span class='line-number'> 14</span>	    string feedId = GetPageIdByNavigationTag(&quot;ProductsFeed&quot;).ToString();
<span class='line-number'> 15</span>	    int featuresCount = 0;
<span class='line-number'> 16</span>	    int thumbsCount = GetLoop(&quot;Details&quot;).Count;
<span class='line-number'> 17</span>	    string requestQuery = GetGlobalValue(&quot;Global:Request.Query&quot;);
<span class='line-number'> 18</span>	
<span class='line-number'> 19</span>	    foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;))
<span class='line-number'> 20</span>	    {
<span class='line-number'> 21</span>	        if (!String.IsNullOrEmpty(customField.GetString(&quot;Product.CustomField.Value.Clean&quot;)))
<span class='line-number'> 22</span>	        {
<span class='line-number'> 23</span>	            featuresCount++;
<span class='line-number'> 24</span>	        }
<span class='line-number'> 25</span>	    }
<span class='line-number'> 26</span>	
<span class='line-number'> 27</span>	    foreach (LoopItem customField in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'> 28</span>	    {
<span class='line-number'> 29</span>	        foreach (LoopItem field in customField.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'> 30</span>	        {
<span class='line-number'> 31</span>	            if (!String.IsNullOrEmpty(field.GetString(&quot;Ecom:Product.CategoryField.Value&quot;)))
<span class='line-number'> 32</span>	            {
<span class='line-number'> 33</span>	                featuresCount++;
<span class='line-number'> 34</span>	            }
<span class='line-number'> 35</span>	        }
<span class='line-number'> 36</span>	    }
<span class='line-number'> 37</span>	
<span class='line-number'> 38</span>	    foreach (LoopItem alternativeImage in GetLoop(&quot;Ecom:Product.AlternativeImages&quot;))
<span class='line-number'> 39</span>	    {
<span class='line-number'> 40</span>	        if (!String.IsNullOrEmpty(alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;)))
<span class='line-number'> 41</span>	        {
<span class='line-number'> 42</span>	            thumbsCount++;
<span class='line-number'> 43</span>	        }
<span class='line-number'> 44</span>	    }
<span class='line-number'> 45</span>	
<span class='line-number'> 46</span>	    foreach (LoopItem variantgroup in GetLoop(&quot;VariantGroups&quot;))
<span class='line-number'> 47</span>	    {
<span class='line-number'> 48</span>	        foreach (LoopItem variantoption in variantgroup.GetLoop(&quot;VariantAvailableOptions&quot;))
<span class='line-number'> 49</span>	        {
<span class='line-number'> 50</span>	            if (variantoption.GetBoolean(&quot;Ecom:VariantOption.Selected&quot;))
<span class='line-number'> 51</span>	            {
<span class='line-number'> 52</span>	                hideHelpText = &quot;u-hidden&quot;;
<span class='line-number'> 53</span>	            }
<span class='line-number'> 54</span>	        }
<span class='line-number'> 55</span>	    }
<span class='line-number'> 56</span>	
<span class='line-number'> 57</span>	    int relatedProductsPageSize = 4;
<span class='line-number'> 58</span>	    int relatedProductsColumnWidth = 3;
<span class='line-number'> 59</span>	
<span class='line-number'> 60</span>	    if (Pageview.Device.ToString() == &quot;Mobile&quot;)
<span class='line-number'> 61</span>	    {
<span class='line-number'> 62</span>	        relatedProductsPageSize = 1;
<span class='line-number'> 63</span>	        relatedProductsColumnWidth = 12;
<span class='line-number'> 64</span>	    }
<span class='line-number'> 65</span>	
<span class='line-number'> 66</span>	    if (Pageview.Device.ToString() == &quot;Tablet&quot;)
<span class='line-number'> 67</span>	    {
<span class='line-number'> 68</span>	        relatedProductsPageSize = 3;
<span class='line-number'> 69</span>	        relatedProductsColumnWidth = 4;
<span class='line-number'> 70</span>	    }
<span class='line-number'> 71</span>	
<span class='line-number'> 72</span>	    string feedPageUrl = &quot;/Default.aspx?ID=&quot; + GetPageIdByNavigationTag(&quot;RelatedProductsFeed&quot;);
<span class='line-number'> 73</span>	    string feedFullUrl = feedPageUrl + &quot;&amp;feedType=productCatalog&amp;PageSize=&quot; + relatedProductsPageSize + &quot;&amp;ProdID=&quot; + productId;
<span class='line-number'> 74</span>	    string productContainerId = &quot;Product&quot; + productId;
<span class='line-number'> 75</span>	
<span class='line-number'> 76</span>	    string HideStockStatus = GetString(&quot;Ecom:Product:Field.HideShowStock&quot;);
<span class='line-number'> 77</span>	
<span class='line-number'> 78</span>	}
<span class='line-number'> 79</span>	
<span class='line-number'> 80</span>	
<span class='line-number'> 81</span>	@functions {
<span class='line-number'> 82</span>	    string AddSpaceAfterCurrency(string str)
<span class='line-number'> 83</span>	    {
<span class='line-number'> 84</span>	        return str.Insert(str.IndexOfAny(&quot;0123456789-&quot;.ToCharArray()), &quot; &quot;);
<span class='line-number'> 85</span>	    }
<span class='line-number'> 86</span>	}
<span class='line-number'> 87</span>	
<span class='line-number'> 88</span>	&lt;!-- Trigger for the image modal --&gt;
<span class='line-number'> 89</span>	&lt;input type=&quot;checkbox&quot; id=&quot;ImageModalTrigger&quot; class=&quot;modal-trigger&quot; /&gt;
<span class='line-number'> 90</span>	
<span class='line-number'> 91</span>	&lt;!-- Image modal --&gt;
<span class='line-number'> 92</span>	&lt;div class=&quot;modal-container&quot;&gt;
<span class='line-number'> 93</span>	    &lt;label for=&quot;ImageModalTrigger&quot; id=&quot;ImageModalOverlay&quot; class=&quot;modal-overlay&quot;&gt;&lt;/label&gt;
<span class='line-number'> 94</span>	    &lt;div class=&quot;modal modal--full&quot; id=&quot;ImageModal&quot;&gt;
<span class='line-number'> 95</span>	        &lt;div class=&quot;modal__body&quot;&gt;
<span class='line-number'> 96</span>	            &lt;img id=&quot;FullImage&quot; class=&quot;modal--full__img&quot; src=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot; /&gt;
<span class='line-number'> 97</span>	        &lt;/div&gt;
<span class='line-number'> 98</span>	    &lt;/div&gt;
<span class='line-number'> 99</span>	&lt;/div&gt;
<span class='line-number'>100</span>	
<span class='line-number'>101</span>	&lt;div class=&quot;paragraph-container__grid--bleed-x paragraph-container__grid--bleed-y&quot;&gt;
<span class='line-number'>102</span>	    &lt;div class=&quot;grid product&quot; id=&quot;productGrid&quot;&gt;
<span class='line-number'>103</span>	        @* Image block with optional thumbs *@
<span class='line-number'>104</span>	        @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)))
<span class='line-number'>105</span>	        {
<span class='line-number'>106</span>	            &lt;div class=&quot;grid__col-md-6 grid__col-sm-6&quot;&gt;
<span class='line-number'>107</span>	                &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>108</span>	                    @if (thumbsCount &gt; 0)
<span class='line-number'>109</span>	                {
<span class='line-number'>110</span>	                        &lt;div class=&quot;grid__col-2 u-hidden-xxs product__thumbs dw-mod&quot;&gt;
<span class='line-number'>111</span>	                            &lt;div class=&quot;thumb-list&quot;&gt;
<span class='line-number'>112</span>	                                &lt;div class=&quot;thumb-list__item thumb-list__item--active dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_@productId&quot; data-full-image=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; data-image-path=&quot;/Admin/Public/GetImage.ashx?width=550&amp;amp;height=550&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot;&gt;&lt;img src=&quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'>113</span>	
<span class='line-number'>114</span>	                                @foreach (LoopItem alternativeImage in GetLoop(&quot;Ecom:Product.AlternativeImages&quot;))
<span class='line-number'>115</span>	                                {
<span class='line-number'>116</span>	                                    if (!String.IsNullOrEmpty(alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;)))
<span class='line-number'>117</span>	                                    {
<span class='line-number'>118</span>	                                        string fullImage = alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>119</span>	                                        string image = &quot;/Admin/Public/GetImage.ashx?width=550&amp;amp;height=550&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>120</span>	                                        string thumb = &quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + alternativeImage.GetString(&quot;Ecom:Product.AlternativeImages.Image&quot;);
<span class='line-number'>121</span>	
<span class='line-number'>122</span>	                                        &lt;div class=&quot;thumb-list__item dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_@productId&quot; data-full-image=&quot;@fullImage&quot; data-image-path=&quot;@image&quot;&gt;&lt;img src=&quot;@thumb&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'>123</span>	                                    }
<span class='line-number'>124</span>	                                }
<span class='line-number'>125</span>	
<span class='line-number'>126</span>	                                @foreach (LoopItem detail in GetLoop(&quot;Details&quot;))
<span class='line-number'>127</span>	                                {
<span class='line-number'>128</span>	                                    string fullImage = detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>129</span>	                                    string image = &quot;/Admin/Public/GetImage.ashx?width=550&amp;amp;height=550&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>130</span>	                                    string thumb = &quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=100&amp;amp;crop=5&amp;DoNotUpscale=true&amp;amp;Compression=75&amp;amp;image=&quot; + detail.GetString(&quot;Ecom:Product:Detail.Image.Clean&quot;);
<span class='line-number'>131</span>	
<span class='line-number'>132</span>	                                    &lt;div class=&quot;thumb-list__item dw-mod js-thumb-btn&quot; onmouseover=&quot;ImageList.LoadImage(this)&quot; data-for=&quot;Image_@productId&quot; data-full-image=&quot;@fullImage&quot; data-image-path=&quot;@image&quot;&gt;&lt;img src=&quot;@thumb&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot;&gt;&lt;/div&gt;
<span class='line-number'>133</span>	                                }
<span class='line-number'>134</span>	                            &lt;/div&gt;
<span class='line-number'>135</span>	                        &lt;/div&gt;
<span class='line-number'>136</span>	                    }
<span class='line-number'>137</span>	                    &lt;div class=&quot;grid__col-auto&quot;&gt;
<span class='line-number'>138</span>	                        @if (GetString(&quot;Ecom:Product.Discount.Price.PriceWithVATFormatted&quot;) != GetString(&quot;Ecom:Product.Price.PriceWithVATFormatted&quot;))
<span class='line-number'>139</span>	                        {
<span class='line-number'>140</span>	                            &lt;div class=&quot;sticker u-margin-left dw-mod&quot;&gt;@Translate(&quot;Sale!&quot;)&lt;/div&gt;
<span class='line-number'>141</span>	                        }
<span class='line-number'>142</span>	                        &lt;label for=&quot;ImageModalTrigger&quot; class=&quot;product__image-container&quot;&gt;
<span class='line-number'>143</span>	                            &lt;img class=&quot;thumb-image-view product__image-container__image dw-mod&quot; onclick=&quot;document.getElementById(&#39;FullImage&#39;).src = this.getAttribute(&#39;data-full-image&#39;)&quot; id=&quot;Image_@productId&quot; src=&quot;/Admin/Public/GetImage.ashx?crop=5&amp;height=550&amp;width=550&amp;Compression=75&amp;DoNotUpscale=true&amp;image=@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; data-full-image=&quot;@GetString(&quot;Ecom:Product.ImageLarge.Default.Clean&quot;)&quot; alt=&quot;@GetString(&quot;Ecom:Product.Name&quot;)&quot; /&gt;
<span class='line-number'>144</span>	                        &lt;/label&gt;
<span class='line-number'>145</span>	                    &lt;/div&gt;
<span class='line-number'>146</span>	                &lt;/div&gt;
<span class='line-number'>147</span>	            &lt;/div&gt;
<span class='line-number'>148</span>	        }
<span class='line-number'>149</span>	
<span class='line-number'>150</span>	        @* Primary product informations *@
<span class='line-number'>151</span>	        &lt;div class=&quot;grid__col-auto product__info dw-mod&quot;&gt;
<span class='line-number'>152</span>	            &lt;div class=&quot;grid__cell&quot;&gt;
<span class='line-number'>153</span>	                &lt;div class=&quot;u-pull--left product__title dw-mod&quot;&gt;
<span class='line-number'>154</span>	                    &lt;h1 class=&quot;u-no-margin&quot;&gt;@GetString(&quot;Ecom:Product.Name&quot;) @GetString(&quot;Ecom:Product.SelectedVariantComboName&quot;)&lt;/h1&gt;
<span class='line-number'>155</span>	                    &lt;div class=&quot;item-number dw-mod&quot;&gt;@GetString(&quot;Ecom:Product.Number&quot;)&lt;/div&gt;
<span class='line-number'>156</span>	                &lt;/div&gt;
<span class='line-number'>157</span>	                @*&lt;div class=&quot;u-pull--right&quot;&gt;
<span class='line-number'>158</span>	                        @if (Dynamicweb.Core.Converter.ToBoolean(GetGlobalValue(&quot;Global:Extranet.UserName&quot;)))
<span class='line-number'>159</span>	                        {
<span class='line-number'>160</span>	                            string favoriteId = &quot;Favorite&quot; + GetString(&quot;Ecom:Product.ID&quot;);
<span class='line-number'>161</span>	                            &lt;div id=&quot;@favoriteId&quot; class=&quot;favorites favorites--md u-pull--right dw-mod&quot;&gt;
<span class='line-number'>162</span>	                                &lt;div&gt;
<span class='line-number'>163</span>	                                    @{ string favorite = GetBoolean(&quot;Ecom:Product.IsProductInFavoriteList&quot;) ? &quot;fa fa-star&quot; : &quot;fa fa-star-o&quot;; }
<span class='line-number'>164</span>	                                    &lt;i class=&quot;@favorite fa-1_5x&quot;&gt;&lt;/i&gt;
<span class='line-number'>165</span>	                                &lt;/div&gt;
<span class='line-number'>166</span>	
<span class='line-number'>167</span>	                                &lt;div class=&quot;favorites-list__container dw-mod&quot;&gt;
<span class='line-number'>168</span>	                                    &lt;ul class=&quot;list list--clean dw-mod&quot;&gt;
<span class='line-number'>169</span>	                                        @foreach (LoopItem listType in GetLoop(&quot;CustomerCenter.ListTypes&quot;))
<span class='line-number'>170</span>	                                        {
<span class='line-number'>171</span>	                                            foreach (LoopItem list in listType.GetLoop(&quot;CustomerCenter.ProductLists&quot;))
<span class='line-number'>172</span>	                                            {
<span class='line-number'>173</span>	                                                &lt;li&gt;
<span class='line-number'>174</span>	                                                    @{string favLinkType = list.GetString(&quot;Ecom:Product.List.IsProductInThisList&quot;) == &quot;True&quot; ? list.GetString(&quot;Ecom:Product.RemoveFromThisList&quot;) : list.GetString(&quot;Ecom:Product.AddToThisListAction&quot;);}
<span class='line-number'>175</span>	                                                    @{string isInListIcon = list.GetString(&quot;Ecom:Product.List.IsProductInThisList&quot;) == &quot;True&quot; ? &quot;fa fa-star&quot; : &quot;fa fa-star-o&quot;;}
<span class='line-number'>176</span>	                                                    &lt;a href=&quot;@favLinkType&quot; class=&quot;list__link dw-mod&quot;&gt;&lt;i class=&quot;@isInListIcon&quot;&gt;&lt;/i&gt; @list.GetValue(&quot;Ecom:CustomerCenter.List.Name&quot;)&lt;/a&gt;
<span class='line-number'>177</span>	                                                &lt;/li&gt;
<span class='line-number'>178</span>	                                                            }
<span class='line-number'>179</span>	                                                        }
<span class='line-number'>180</span>	                                    &lt;/ul&gt;
<span class='line-number'>181</span>	                                &lt;/div&gt;
<span class='line-number'>182</span>	                            &lt;/div&gt;
<span class='line-number'>183</span>	                                                        }
<span class='line-number'>184</span>	                    &lt;/div&gt;*@
<span class='line-number'>185</span>	
<span class='line-number'>186</span>	                &lt;div&gt;
<span class='line-number'>187</span>	                    &lt;div class=&quot;u-border-bottom u-full-width u-pull--left&quot;&gt;&lt;/div&gt;
<span class='line-number'>188</span>	
<span class='line-number'>189</span>	                    @*
<span class='line-number'>190</span>	                           // Delivery + stock information
<span class='line-number'>191</span>	                        @if (HideStockStatus == &quot;False&quot;)
<span class='line-number'>192</span>	                        {
<span class='line-number'>193</span>	                            string stockIcon = GetInteger(&quot;Ecom:Product.Stock&quot;) &gt; 0 ? &quot;stock-icon--in&quot; : &quot;stock-icon--not&quot;;
<span class='line-number'>194</span>	                            &lt;table class=&quot;table table--clean delivery-and-stock-info dw-mod&quot;&gt;
<span class='line-number'>195</span>	                                &lt;tr&gt;
<span class='line-number'>196</span>	                                    &lt;td class=&quot;u-no-padding&quot;&gt;@GetString(&quot;Ecom:Product:Stock.Text&quot;) &lt;div class=&quot;stock-icon @stockIcon&quot;&gt;&lt;/div&gt;&lt;/td&gt;
<span class='line-number'>197</span>	                                    @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product:Stock.Text&quot;)) || !String.IsNullOrEmpty(GetString(&quot;Ecom:Product:Stock.DeliveryText&quot;)))
<span class='line-number'>198</span>	                                    {
<span class='line-number'>199</span>	                                        if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product:Stock.DeliveryText&quot;)))
<span class='line-number'>200</span>	                                        {
<span class='line-number'>201</span>	                                            &lt;td class=&quot;u-no-padding u-ta-right&quot;&gt;@Translate(&quot;Shipping&quot;) @GetString(&quot;Ecom:Product:Stock.DeliveryText&quot;) @GetString(&quot;Ecom:Product:Stock.DeliveryUnit&quot;)&lt;/td&gt;
<span class='line-number'>202</span>	                                        }
<span class='line-number'>203</span>	                                    }
<span class='line-number'>204</span>	                                &lt;/tr&gt;
<span class='line-number'>205</span>	                            &lt;/table&gt;
<span class='line-number'>206</span>	
<span class='line-number'>207</span>	                        }
<span class='line-number'>208</span>	                    *@
<span class='line-number'>209</span>	                    @* Short description *@
<span class='line-number'>210</span>	                    @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product.ShortDescription&quot;)))
<span class='line-number'>211</span>	                    {
<span class='line-number'>212</span>	                        &lt;div class=&quot;introduction-text&quot;&gt;
<span class='line-number'>213</span>	                            @GetString(&quot;Ecom:Product.ShortDescription&quot;)
<span class='line-number'>214</span>	                        &lt;/div&gt;
<span class='line-number'>215</span>	                    }
<span class='line-number'>216</span>	                    @*Certification images*@
<span class='line-number'>217</span>	                    @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product:Field.Certification.Value.Clean&quot;)))
<span class='line-number'>218</span>	                    {
<span class='line-number'>219</span>	                        string[] certStrArr = GetString(&quot;Ecom:Product:Field.Certification.Value.Clean&quot;).Split(&#39;,&#39;);
<span class='line-number'>220</span>	                        &lt;div class=&quot;grid__col-12 u-no-padding&quot;&gt;
<span class='line-number'>221</span>	                            &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>222</span>	
<span class='line-number'>223</span>	                                @foreach (string certStrItem in certStrArr)
<span class='line-number'>224</span>	                                {
<span class='line-number'>225</span>	                                    &lt;div&gt;
<span class='line-number'>226</span>	                                        &lt;img class=&quot;grid__cell-img&quot; style=&quot;padding-right: 3px&quot; src=&quot;/Admin/Public/GetImage.ashx?Image=/Files/Images/Ecom/Certification/@(certStrItem).jpg&amp;Format=jpg&amp;Height=70&amp;Crop=0&amp;DoNotUpscale=1&quot; alt=&quot;certification image&quot; /&gt;
<span class='line-number'>227</span>	                                    &lt;/div&gt;
<span class='line-number'>228</span>	                                }
<span class='line-number'>229</span>	                            &lt;/div&gt;
<span class='line-number'>230</span>	                        &lt;/div&gt;
<span class='line-number'>231</span>	                    }
<span class='line-number'>232</span>	
<span class='line-number'>233</span>	                    @* Variants *@
<span class='line-number'>234</span>	                    @if (GetLoop(&quot;VariantGroups&quot;).Count &gt; 0)
<span class='line-number'>235</span>	                    {
<span class='line-number'>236</span>	                        &lt;small id=&quot;helpText_@productId&quot; class=&quot;help-text @hideHelpText&quot;&gt;@Translate(&quot;Please select a size and/or color!&quot;)&lt;/small&gt;
<span class='line-number'>237</span>	                        string containerId = &quot;Variants&quot; + productId;
<span class='line-number'>238</span>	                        &lt;div&gt;
<span class='line-number'>239</span>	                            &lt;div id=&quot;@containerId&quot; data-product-id=&quot;@productId&quot;&gt;
<span class='line-number'>240</span>	                                @foreach (LoopItem variantGoup in GetLoop(&quot;VariantGroups&quot;))
<span class='line-number'>241</span>	                                {
<span class='line-number'>242</span>	                                    &lt;div&gt;
<span class='line-number'>243</span>	                                        &lt;div class=&quot;u-bold&quot;&gt;@variantGoup.GetString(&quot;Ecom:VariantGroup.Name&quot;)&lt;/div&gt;
<span class='line-number'>244</span>	                                        &lt;div&gt;
<span class='line-number'>245</span>	                                            @foreach (LoopItem variantOption in variantGoup.GetLoop(&quot;VariantAvailableOptions&quot;))
<span class='line-number'>246</span>	                                            {
<span class='line-number'>247</span>	                                                string selected = variantOption.GetBoolean(&quot;Ecom:VariantOption.Selected&quot;) ? &quot;checked&quot; : &quot;&quot;;
<span class='line-number'>248</span>	
<span class='line-number'>249</span>	                                                if (!string.IsNullOrEmpty(variantOption.GetString(&quot;Ecom:VariantOption.ImgSmall.Clean&quot;)))
<span class='line-number'>250</span>	                                                {
<span class='line-number'>251</span>	                                                    &lt;img src=&quot;/Admin/Public/GetImage.ashx?width=100&amp;amp;height=50&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image=/Images/@variantOption.GetString(&quot;Ecom:VariantOption.ImgSmall.Clean&quot;)&quot; title=&quot;@variantOption.GetString(&quot;Ecom:VariantOption.Name&quot;)&quot; id=&quot;@variantOption.GetString(&quot;Ecom:VariantOption.ID&quot;)&quot; data-product-id=&quot;@productId&quot; onclick=&quot;Variants.UpdateVariants(this, false)&quot; class=&quot;btn btn--tag @selected&quot; data-check=&quot;@selected&quot; /&gt;
<span class='line-number'>252</span>	                                                }
<span class='line-number'>253</span>	                                                else
<span class='line-number'>254</span>	                                                {
<span class='line-number'>255</span>	                                                    &lt;button type=&quot;button&quot; id=&quot;@variantOption.GetString(&quot;Ecom:VariantOption.ID&quot;)&quot; data-product-id=&quot;@productId&quot; onclick=&quot;Variants.UpdateVariants(this, false)&quot; class=&quot;btn btn--tag @selected&quot; data-check=&quot;@selected&quot;&gt;@variantOption.GetString(&quot;Ecom:VariantOption.Name&quot;)&lt;/button&gt;
<span class='line-number'>256</span>	                                                }
<span class='line-number'>257</span>	                                            }
<span class='line-number'>258</span>	                                        &lt;/div&gt;
<span class='line-number'>259</span>	                                    &lt;/div&gt;
<span class='line-number'>260</span>	                                }
<span class='line-number'>261</span>	                            &lt;/div&gt;
<span class='line-number'>262</span>	
<span class='line-number'>263</span>	                        &lt;/div&gt;
<span class='line-number'>264</span>	                    }
<span class='line-number'>265</span>	
<span class='line-number'>266</span>	                    @* BOMProducts *@
<span class='line-number'>267</span>	                    @if (GetLoop(&quot;BOMProducts&quot;).Count &gt; 0)
<span class='line-number'>268</span>	                    {
<span class='line-number'>269</span>	                        &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Including products&quot;)&lt;/h2&gt;
<span class='line-number'>270</span>	                        foreach (LoopItem BOMProductItem in GetLoop(&quot;BOMProducts&quot;))
<span class='line-number'>271</span>	                        {
<span class='line-number'>272</span>	                            string link = &quot;/&quot; + BOMProductItem.GetString(&quot;Ecom:Product.LinkGroup.Clean&quot;) + (!String.IsNullOrEmpty(BOMProductItem.GetString(&quot;Ecom:Product.VariantID&quot;)) ? &quot;&amp;VariantID=&quot; + BOMProductItem.GetString(&quot;Ecom:Product.VariantID&quot;) : &quot;&quot;);
<span class='line-number'>273</span>	                            &lt;div class=&quot;grid__col--border grid&quot;&gt;
<span class='line-number'>274</span>	                                &lt;div class=&quot;grid__cell grid__cell--align-middle-left&quot;&gt;
<span class='line-number'>275</span>	                                    &lt;a href=&quot;@link&quot; class=&quot;u-pull--left u-margin-right&quot;&gt;
<span class='line-number'>276</span>	                                        &lt;img src=&quot;/Admin/Public/GetImage.ashx?width=50&amp;image=@BOMProductItem.GetString(&quot;Ecom:Product.ImageSmall.Default.Clean&quot;)&amp;Compression=99&quot; /&gt;
<span class='line-number'>277</span>	                                    &lt;/a&gt;
<span class='line-number'>278</span>	                                    &lt;a href=&quot;@link&quot;&gt;@BOMProductItem.GetString(&quot;Ecom:Product.Name&quot;)&lt;/a&gt;
<span class='line-number'>279</span>	                                &lt;/div&gt;
<span class='line-number'>280</span>	                            &lt;/div&gt;
<span class='line-number'>281</span>	                        }
<span class='line-number'>282</span>	                    }
<span class='line-number'>283</span>	                &lt;/div&gt;
<span class='line-number'>284</span>	            &lt;/div&gt;
<span class='line-number'>285</span>	
<span class='line-number'>286</span>	            @* Buy block *@
<span class='line-number'>287</span>	            &lt;div class=&quot;grid__cell-footer&quot;&gt;
<span class='line-number'>288</span>	                &lt;div class=&quot;grid__cell product__price-actions js-ajax-container dw-mod&quot; id=&quot;PriceAndActions&quot; data-template=&quot;PricesAndActionsTemplate&quot; data-json-feed=&quot;/Default.aspx?ID=@feedId&amp;ProductID=@productId&quot;&gt;&lt;/div&gt;
<span class='line-number'>289</span>	                &lt;input type=&quot;hidden&quot; value=&quot;@GetString(&quot;Ecom:Product.VariantID.Extented&quot;)&quot; name=&quot;Variant&quot; id=&quot;Variant_@GetString(&quot;Ecom:Product.ID&quot;)&quot; /&gt;
<span class='line-number'>290</span>	            &lt;/div&gt;
<span class='line-number'>291</span>	        &lt;/div&gt;
<span class='line-number'>292</span>	    &lt;/div&gt;
<span class='line-number'>293</span>	
<span class='line-number'>294</span>	    &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>295</span>	        @* Long description *@
<span class='line-number'>296</span>	        @if (!String.IsNullOrEmpty(GetString(&quot;Ecom:Product.LongDescription&quot;)))
<span class='line-number'>297</span>	        {
<span class='line-number'>298</span>	            &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>299</span>	                &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Description&quot;)&lt;/h2&gt;
<span class='line-number'>300</span>	
<span class='line-number'>301</span>	                &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>302</span>	                    &lt;div class=&quot;grid__col-lg-8 grid__col-md-8 grid__col-sm-12 grid__col-xs-12 product__description dw-mod&quot;&gt;
<span class='line-number'>303</span>	                        @GetString(&quot;Ecom:Product.LongDescription&quot;)
<span class='line-number'>304</span>	                    &lt;/div&gt;
<span class='line-number'>305</span>	                &lt;/div&gt;
<span class='line-number'>306</span>	            &lt;/div&gt;
<span class='line-number'>307</span>	        }
<span class='line-number'>308</span>	
<span class='line-number'>309</span>	        @* Features lists *@
<span class='line-number'>310</span>	        @if (featuresCount &gt; 0 &amp;&amp; featuresCount &lt; 10)
<span class='line-number'>311</span>	        {
<span class='line-number'>312</span>	            &lt;div class=&quot;grid__col-12 product__features dw-mod&quot;&gt;
<span class='line-number'>313</span>	                &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Product information&quot;)&lt;/h2&gt;
<span class='line-number'>314</span>	
<span class='line-number'>315</span>	                &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>316</span>	                    &lt;div class=&quot;grid__col-lg-8 grid__col-md-8 grid__col-sm-12 grid__col-xs-12&quot;&gt;
<span class='line-number'>317</span>	                        @if (GetLoop(&quot;CustomFieldValues&quot;).Count &gt; 0)
<span class='line-number'>318</span>	                        {
<span class='line-number'>319</span>	                            &lt;table class=&quot;table table--clean table--compact&quot;&gt;
<span class='line-number'>320</span>	                                @foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;).Where(x =&gt; x.GetString(&quot;Product.CustomField.System&quot;) != &quot;HideShowStock&quot;))
<span class='line-number'>321</span>	                                {
<span class='line-number'>322</span>	
<span class='line-number'>323</span>	                                    string fieldValue = customField.GetString(&quot;Product.CustomField.Value&quot;);
<span class='line-number'>324</span>	
<span class='line-number'>325</span>	                                    if (customField.GetLoop(&quot;Product.CustomField.Options&quot;).Count &gt; 0)
<span class='line-number'>326</span>	                                    {
<span class='line-number'>327</span>	                                        fieldValue = &quot;&quot;;
<span class='line-number'>328</span>	                                        int count = 0;
<span class='line-number'>329</span>	
<span class='line-number'>330</span>	                                        foreach (LoopItem customFieldOptions in customField.GetLoop(&quot;Product.CustomField.Options&quot;))
<span class='line-number'>331</span>	                                        {
<span class='line-number'>332</span>	                                            if (customFieldOptions.GetBoolean(&quot;Product.CustomField.Option.IsSelected&quot;))
<span class='line-number'>333</span>	                                            {
<span class='line-number'>334</span>	                                                if (count != 0)
<span class='line-number'>335</span>	                                                {
<span class='line-number'>336</span>	                                                    fieldValue += &quot;, &quot;;
<span class='line-number'>337</span>	                                                }
<span class='line-number'>338</span>	
<span class='line-number'>339</span>	                                                fieldValue += customFieldOptions.GetString(&quot;Product.CustomField.Option.Name&quot;);
<span class='line-number'>340</span>	                                                count++;
<span class='line-number'>341</span>	                                            }
<span class='line-number'>342</span>	                                        }
<span class='line-number'>343</span>	                                    }
<span class='line-number'>344</span>	
<span class='line-number'>345</span>	                                    if (fieldValue == &quot;False&quot;)
<span class='line-number'>346</span>	                                    {
<span class='line-number'>347</span>	                                        fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>348</span>	                                    }
<span class='line-number'>349</span>	
<span class='line-number'>350</span>	                                    if (fieldValue == &quot;True&quot;)
<span class='line-number'>351</span>	                                    {
<span class='line-number'>352</span>	                                        fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>353</span>	                                    }
<span class='line-number'>354</span>	
<span class='line-number'>355</span>	                                    if (!String.IsNullOrEmpty(customField.GetString(&quot;Product.CustomField.Name&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>356</span>	                                    {
<span class='line-number'>357</span>	                                        &lt;tr&gt;
<span class='line-number'>358</span>	                                            &lt;td width=&quot;160&quot;&gt;@customField.GetString(&quot;Product.CustomField.Name&quot;):&lt;/td&gt;
<span class='line-number'>359</span>	                                            @if (!String.IsNullOrEmpty(customField.GetString(&quot;Document.FullPath&quot;)))
<span class='line-number'>360</span>	                                            {
<span class='line-number'>361</span>	                                                &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@customField.GetString(&quot;Document.FullPath&quot;)&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;i class=&quot;fa @getIconForFile(fieldValue)&quot;&gt;&lt;/i&gt; @fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>362</span>	                                            }
<span class='line-number'>363</span>	                                            else
<span class='line-number'>364</span>	                                            {
<span class='line-number'>365</span>	                                                string[] extArr = { &quot;.jpg&quot;, &quot;.png&quot;, &quot;.gif&quot;, &quot;.jpeg&quot; };
<span class='line-number'>366</span>	
<span class='line-number'>367</span>	                                                if (extArr.Any(x =&gt; customField.GetString(&quot;Product.CustomField.Value&quot;).Contains(x)))
<span class='line-number'>368</span>	                                                {
<span class='line-number'>369</span>	                                                    &lt;td class=&quot;u-ta-left&quot;&gt;
<span class='line-number'>370</span>	                                                        &lt;img src=&quot;/Admin/Public/Getimage.ashx?height=50&amp;amp;compression=75&amp;amp;Crop=5&amp;amp;image=@customField.GetString(&quot;Product.CustomField.Value&quot;)&quot; alt=&quot;@fieldValue&quot; /&gt;
<span class='line-number'>371</span>	                                                    &lt;/td&gt;
<span class='line-number'>372</span>	                                                }
<span class='line-number'>373</span>	                                                else
<span class='line-number'>374</span>	                                                {
<span class='line-number'>375</span>	                                                    &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>376</span>	                                                }
<span class='line-number'>377</span>	                                            }
<span class='line-number'>378</span>	                                        &lt;/tr&gt;
<span class='line-number'>379</span>	                                    }
<span class='line-number'>380</span>	
<span class='line-number'>381</span>	                                }
<span class='line-number'>382</span>	
<span class='line-number'>383</span>	
<span class='line-number'>384</span>	                            &lt;/table&gt;
<span class='line-number'>385</span>	                        }
<span class='line-number'>386</span>	
<span class='line-number'>387</span>	                        @if (GetLoop(&quot;ProductCategories&quot;).Count &gt; 0)
<span class='line-number'>388</span>	                        {
<span class='line-number'>389</span>	                            &lt;table class=&quot;table table--clean table--compact u-margin-bottom&quot;&gt;
<span class='line-number'>390</span>	                                @foreach (LoopItem categoryGroup in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'>391</span>	                                {
<span class='line-number'>392</span>	                                    int fieldsCount = 0;
<span class='line-number'>393</span>	                                    foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>394</span>	                                    {
<span class='line-number'>395</span>	                                        if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;)))
<span class='line-number'>396</span>	                                        {
<span class='line-number'>397</span>	                                            fieldsCount++;
<span class='line-number'>398</span>	                                        }
<span class='line-number'>399</span>	                                    }
<span class='line-number'>400</span>	
<span class='line-number'>401</span>	                                    if (fieldsCount &gt; 0)
<span class='line-number'>402</span>	                                    {
<span class='line-number'>403</span>	                                        &lt;tr&gt;
<span class='line-number'>404</span>	                                            &lt;td colspan=&quot;2&quot; class=&quot;u-ta-left table__section-header dw-mod&quot;&gt;@categoryGroup.GetString(&quot;Ecom:Product.Category.Name&quot;)&lt;/td&gt;
<span class='line-number'>405</span>	                                        &lt;/tr&gt;
<span class='line-number'>406</span>	
<span class='line-number'>407</span>	                                        foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>408</span>	                                        {
<span class='line-number'>409</span>	                                            string fieldValue = categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;);
<span class='line-number'>410</span>	
<span class='line-number'>411</span>	                                            if (fieldValue == &quot;False&quot;)
<span class='line-number'>412</span>	                                            {
<span class='line-number'>413</span>	                                                fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>414</span>	                                            }
<span class='line-number'>415</span>	
<span class='line-number'>416</span>	                                            if (fieldValue == &quot;True&quot;)
<span class='line-number'>417</span>	                                            {
<span class='line-number'>418</span>	                                                fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>419</span>	                                            }
<span class='line-number'>420</span>	
<span class='line-number'>421</span>	                                            if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>422</span>	                                            {
<span class='line-number'>423</span>	                                                &lt;tr&gt;
<span class='line-number'>424</span>	                                                    &lt;td width=&quot;160&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;):&lt;/td&gt;
<span class='line-number'>425</span>	                                                    @if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;9&quot;)
<span class='line-number'>426</span>	                                                    {
<span class='line-number'>427</span>	
<span class='line-number'>428</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@fieldValue&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;i class=&quot;fa @getIconForFile(fieldValue)&quot;&gt;&lt;/i&gt; @fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>429</span>	                                                    }
<span class='line-number'>430</span>	                                                    else if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;15&quot;)
<span class='line-number'>431</span>	                                                    {
<span class='line-number'>432</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.OptionLabel&quot;)&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>433</span>	                                                    }
<span class='line-number'>434</span>	                                                    else if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;8&quot;)
<span class='line-number'>435</span>	                                                    {
<span class='line-number'>436</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a property=&quot;identifier&quot; href=&quot;@fieldValue&quot;&gt;@fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>437</span>	                                                    }
<span class='line-number'>438</span>	                                                    else
<span class='line-number'>439</span>	                                                    {
<span class='line-number'>440</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>441</span>	                                                    }
<span class='line-number'>442</span>	                                                &lt;/tr&gt;
<span class='line-number'>443</span>	                                            }
<span class='line-number'>444</span>	                                        }
<span class='line-number'>445</span>	                                    }
<span class='line-number'>446</span>	                                }
<span class='line-number'>447</span>	                            &lt;/table&gt;
<span class='line-number'>448</span>	                        }
<span class='line-number'>449</span>	                    &lt;/div&gt;
<span class='line-number'>450</span>	                &lt;/div&gt;
<span class='line-number'>451</span>	            &lt;/div&gt;
<span class='line-number'>452</span>	        }
<span class='line-number'>453</span>	
<span class='line-number'>454</span>	
<span class='line-number'>455</span>	        @if (featuresCount &gt;= 10)
<span class='line-number'>456</span>	        {
<span class='line-number'>457</span>	            &lt;div class=&quot;grid__col-12 grid__col--bleed-y&quot;&gt;
<span class='line-number'>458</span>	                &lt;h2 class=&quot;section-title&quot;&gt;@Translate(&quot;Product information&quot;)&lt;/h2&gt;
<span class='line-number'>459</span>	
<span class='line-number'>460</span>	                &lt;input type=&quot;checkbox&quot; id=&quot;expandable-text-trigger&quot; class=&quot;expandable-text-trigger&quot; /&gt;
<span class='line-number'>461</span>	                &lt;div class=&quot;expandable-text-container&quot;&gt;
<span class='line-number'>462</span>	                    &lt;div class=&quot;expandable-text-container__content dw-mod&quot;&gt;
<span class='line-number'>463</span>	                        &lt;div class=&quot;grid grid--bleed&quot;&gt;
<span class='line-number'>464</span>	                            &lt;div class=&quot;grid__col-lg-8 grid__col-md-8 grid__col-sm-12 grid__col-xs-12&quot;&gt;
<span class='line-number'>465</span>	                                @if (GetLoop(&quot;CustomFieldValues&quot;).Count &gt; 0)
<span class='line-number'>466</span>	                                {
<span class='line-number'>467</span>	                                    &lt;table class=&quot;table table--clean table--compact&quot;&gt;
<span class='line-number'>468</span>	                                        @foreach (LoopItem customField in GetLoop(&quot;CustomFieldValues&quot;))
<span class='line-number'>469</span>	                                        {
<span class='line-number'>470</span>	                                            string fieldValue = customField.GetString(&quot;Product.CustomField.Value.Clean&quot;);
<span class='line-number'>471</span>	
<span class='line-number'>472</span>	                                            if (customField.GetLoop(&quot;Product.CustomField.Options&quot;).Count &gt; 0)
<span class='line-number'>473</span>	                                            {
<span class='line-number'>474</span>	                                                fieldValue = &quot;&quot;;
<span class='line-number'>475</span>	                                                int count = 0;
<span class='line-number'>476</span>	
<span class='line-number'>477</span>	                                                foreach (LoopItem customFieldOptions in customField.GetLoop(&quot;Product.CustomField.Options&quot;))
<span class='line-number'>478</span>	                                                {
<span class='line-number'>479</span>	                                                    if (customFieldOptions.GetBoolean(&quot;Product.CustomField.Option.IsSelected&quot;))
<span class='line-number'>480</span>	                                                    {
<span class='line-number'>481</span>	                                                        if (count != 0)
<span class='line-number'>482</span>	                                                        {
<span class='line-number'>483</span>	                                                            fieldValue += &quot;, &quot;;
<span class='line-number'>484</span>	                                                        }
<span class='line-number'>485</span>	
<span class='line-number'>486</span>	                                                        fieldValue += customFieldOptions.GetString(&quot;Product.CustomField.Option.Name&quot;);
<span class='line-number'>487</span>	                                                        count++;
<span class='line-number'>488</span>	                                                    }
<span class='line-number'>489</span>	                                                }
<span class='line-number'>490</span>	                                            }
<span class='line-number'>491</span>	
<span class='line-number'>492</span>	                                            if (fieldValue == &quot;False&quot;)
<span class='line-number'>493</span>	                                            {
<span class='line-number'>494</span>	                                                fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>495</span>	                                            }
<span class='line-number'>496</span>	
<span class='line-number'>497</span>	                                            if (fieldValue == &quot;True&quot;)
<span class='line-number'>498</span>	                                            {
<span class='line-number'>499</span>	                                                fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>500</span>	                                            }
<span class='line-number'>501</span>	
<span class='line-number'>502</span>	                                            if (!String.IsNullOrEmpty(customField.GetString(&quot;Product.CustomField.Name&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>503</span>	                                            {
<span class='line-number'>504</span>	                                                &lt;tr&gt;
<span class='line-number'>505</span>	                                                    &lt;td width=&quot;160&quot;&gt;@customField.GetString(&quot;Product.CustomField.Name&quot;):&lt;/td&gt;
<span class='line-number'>506</span>	                                                    @if (!String.IsNullOrEmpty(customField.GetString(&quot;Document.FullPath&quot;)))
<span class='line-number'>507</span>	                                                    {
<span class='line-number'>508</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@customField.GetString(&quot;Document.FullPath&quot;)&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;&lt;i class=&quot;fa @getIconForFile(fieldValue)&quot;&gt;&lt;/i&gt; &amp;nbsp;@fieldValue&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>509</span>	                                                    }
<span class='line-number'>510</span>	                                                    else
<span class='line-number'>511</span>	                                                    {
<span class='line-number'>512</span>	                                                        &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>513</span>	                                                    }
<span class='line-number'>514</span>	                                                &lt;/tr&gt;
<span class='line-number'>515</span>	                                            }
<span class='line-number'>516</span>	                                        }
<span class='line-number'>517</span>	                                    &lt;/table&gt;
<span class='line-number'>518</span>	                                }
<span class='line-number'>519</span>	
<span class='line-number'>520</span>	                                @if (GetLoop(&quot;ProductCategories&quot;).Count &gt; 0)
<span class='line-number'>521</span>	                                {
<span class='line-number'>522</span>	                                    &lt;table class=&quot;table table--clean table--compact u-margin-bottom&quot;&gt;
<span class='line-number'>523</span>	                                        @foreach (LoopItem categoryGroup in GetLoop(&quot;ProductCategories&quot;))
<span class='line-number'>524</span>	                                        {
<span class='line-number'>525</span>	                                            int fieldsCount = 0;
<span class='line-number'>526</span>	                                            foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>527</span>	                                            {
<span class='line-number'>528</span>	                                                if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;)))
<span class='line-number'>529</span>	                                                {
<span class='line-number'>530</span>	                                                    fieldsCount++;
<span class='line-number'>531</span>	                                                }
<span class='line-number'>532</span>	                                            }
<span class='line-number'>533</span>	
<span class='line-number'>534</span>	                                            if (fieldsCount &gt; 0)
<span class='line-number'>535</span>	                                            {
<span class='line-number'>536</span>	                                                &lt;tr&gt;
<span class='line-number'>537</span>	                                                    &lt;td colspan=&quot;2&quot; class=&quot;u-ta-left table__section-header dw-mod&quot;&gt;@categoryGroup.GetString(&quot;Ecom:Product.Category.Name&quot;)&lt;/td&gt;
<span class='line-number'>538</span>	                                                &lt;/tr&gt;
<span class='line-number'>539</span>	
<span class='line-number'>540</span>	                                                foreach (LoopItem categoryField in categoryGroup.GetLoop(&quot;ProductCategoryFields&quot;))
<span class='line-number'>541</span>	                                                {
<span class='line-number'>542</span>	                                                    string fieldValue = categoryField.GetString(&quot;Ecom:Product.CategoryField.Value&quot;);
<span class='line-number'>543</span>	
<span class='line-number'>544</span>	                                                    if (fieldValue == &quot;False&quot;)
<span class='line-number'>545</span>	                                                    {
<span class='line-number'>546</span>	                                                        fieldValue = Translate(&quot;No&quot;);
<span class='line-number'>547</span>	                                                    }
<span class='line-number'>548</span>	
<span class='line-number'>549</span>	                                                    if (fieldValue == &quot;True&quot;)
<span class='line-number'>550</span>	                                                    {
<span class='line-number'>551</span>	                                                        fieldValue = Translate(&quot;Yes&quot;);
<span class='line-number'>552</span>	                                                    }
<span class='line-number'>553</span>	
<span class='line-number'>554</span>	                                                    if (!String.IsNullOrEmpty(categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;)) &amp;&amp; !String.IsNullOrEmpty(fieldValue))
<span class='line-number'>555</span>	                                                    {
<span class='line-number'>556</span>	                                                        &lt;tr&gt;
<span class='line-number'>557</span>	                                                            &lt;td width=&quot;160&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.Label&quot;):&lt;/td&gt;
<span class='line-number'>558</span>	                                                            @if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;9&quot;)
<span class='line-number'>559</span>	                                                            {
<span class='line-number'>560</span>	                                                                &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a href=&quot;@fieldValue&quot; download title=&quot;@Translate(&quot;Download&quot;)&quot;&gt;&lt;i class=&quot;fa @getIconForFile(fieldValue)&quot;&gt;&lt;/i&gt; @fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>561</span>	                                                            }
<span class='line-number'>562</span>	                                                            else if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;15&quot;)
<span class='line-number'>563</span>	                                                            {
<span class='line-number'>564</span>	                                                                &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@categoryField.GetString(&quot;Ecom:Product.CategoryField.OptionLabel&quot;)&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>565</span>	                                                            }
<span class='line-number'>566</span>	                                                            else if (categoryField.GetString(&quot;Ecom:Product.CategoryField.TypeID&quot;) == &quot;8&quot;)
<span class='line-number'>567</span>	                                                            {
<span class='line-number'>568</span>	                                                                &lt;td class=&quot;u-ta-left&quot;&gt;&lt;a property=&quot;identifier&quot; href=&quot;@fieldValue&quot;&gt;@fieldValue&lt;/a&gt;&lt;/td&gt;
<span class='line-number'>569</span>	                                                            }
<span class='line-number'>570</span>	                                                            else
<span class='line-number'>571</span>	                                                            {
<span class='line-number'>572</span>	                                                                &lt;td class=&quot;u-ta-left&quot;&gt;&lt;span property=&quot;identifier&quot;&gt;@fieldValue&lt;/span&gt;&lt;/td&gt;
<span class='line-number'>573</span>	                                                            }
<span class='line-number'>574</span>	                                                        &lt;/tr&gt;
<span class='line-number'>575</span>	                                                    }
<span class='line-number'>576</span>	                                                }
<span class='line-number'>577</span>	                                            }
<span class='line-number'>578</span>	                                        }
<span class='line-number'>579</span>	                                    &lt;/table&gt;
<span class='line-number'>580</span>	                                }
<span class='line-number'>581</span>	                            &lt;/div&gt;
<span class='line-number'>582</span>	                        &lt;/div&gt;
<span class='line-number'>583</span>	                    &lt;/div&gt;
<span class='line-number'>584</span>	                    &lt;div class=&quot;u-ta-center&quot;&gt;
<span class='line-number'>585</span>	                        &lt;label for=&quot;expandable-text-trigger&quot; class=&quot;btn btn--secondary expandable-text-container__btn more dw-mod&quot;&gt;@Translate(&quot;Show more&quot;)&lt;/label&gt;
<span class='line-number'>586</span>	                        &lt;label for=&quot;expandable-text-trigger&quot; class=&quot;btn btn--secondary expandable-text-container__btn less dw-mod&quot;&gt;@Translate(&quot;Show less&quot;)&lt;/label&gt;
<span class='line-number'>587</span>	                    &lt;/div&gt;
<span class='line-number'>588</span>	                &lt;/div&gt;
<span class='line-number'>589</span>	            &lt;/div&gt;
<span class='line-number'>590</span>	        }
<span class='line-number'>591</span>	
<span class='line-number'>592</span>	        @*
<span class='line-number'>593</span>	               // Related products
<span class='line-number'>594</span>	            &lt;div class=&quot;js-ajax-container&quot; id=&quot;ProductList&quot; data-template=&quot;ProductContainer&quot; data-pre-render-template=&quot;ProductPreRenderContainer&quot; data-json-feed=&quot;@feedFullUrl&quot;&gt;&lt;/div&gt;*@
<span class='line-number'>595</span>	    &lt;/div&gt;
<span class='line-number'>596</span>	&lt;/div&gt;
<span class='line-number'>597</span>	
<span class='line-number'>598</span>	&lt;script id=&quot;PricesAndActionsTemplate&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>599</span>	    &lt;div class=&quot;product__price-actions__price dw-mod&quot;&gt;
<span class='line-number'>600</span>	        &lt;div class=&quot;before-price {{onSale}} dw-mod&quot;&gt;{{discount}}&lt;/div&gt;
<span class='line-number'>601</span>	        &lt;div class=&quot;price dw-mod&quot;&gt;{{price}}&lt;/div&gt;
<span class='line-number'>602</span>	    &lt;/div&gt;
<span class='line-number'>603</span>	    &lt;div class=&quot;buttons-collection buttons-collection--right product__price-actions__actions dw-mod&quot;&gt;
<span class='line-number'>604</span>	        &lt;button type=&quot;button&quot; id=&quot;CartButton_{{id}}&quot; class=&quot;btn btn--primary btn--condensed dw-mod u-pull--right&quot; name=&quot;submit&quot; onclick=&quot;Cart.AddToCart(event, &#39;{{id}}&#39;, document.getElementById(&#39;Quantity_{{id}}&#39;).value, &#39;Unit_{{id}}&#39;, &#39;Variant_{{id}}&#39;);&quot;&gt;&lt;i class=&quot;fa fa-shopping-cart&quot;&gt;&lt;/i&gt;&lt;span class=&quot;u-hidden-xs u-hidden-xxs&quot;&gt; @Translate(&quot;Add to cart&quot;)&lt;/span&gt;&lt;/button&gt;
<span class='line-number'>605</span>	        &lt;input type=&quot;number&quot; class=&quot;u-w70px u-pull--right&quot; id=&quot;Quantity_{{id}}&quot; name=&quot;Quantity&quot; value=&quot;1&quot; min=&quot;1&quot;&gt;
<span class='line-number'>606</span>	        &lt;input type=&quot;checkbox&quot; id=&quot;UnitOptions_{{id}}&quot; class=&quot;dropdown-trigger&quot; /&gt;
<span class='line-number'>607</span>	        &lt;div class=&quot;dropdown u-pull--right u-w150px u-w80px--xs dw-mod {{hasUnits}}&quot;&gt;
<span class='line-number'>608</span>	            @* &lt;label class=&quot;dropdown__header dropdown__btn dw-mod&quot; for=&quot;UnitOptions_{{id}}&quot;&gt;{{unitName}}&lt;/label&gt;*@
<span class='line-number'>609</span>	            &lt;div class=&quot;dropdown__content dw-mod&quot; id=&quot;unitOptions&quot; data-template=&quot;Units&quot;&gt;&lt;/div&gt;
<span class='line-number'>610</span>	            &lt;label class=&quot;dropdown-trigger-off&quot; for=&quot;UnitOptions_{{id}}&quot;&gt;&lt;/label&gt;
<span class='line-number'>611</span>	        &lt;/div&gt;
<span class='line-number'>612</span>	        &lt;input type=&quot;hidden&quot; value=&quot;{{unitId}}&quot; name=&quot;Unit&quot; id=&quot;Unit_{{id}}&quot; /&gt;
<span class='line-number'>613</span>	    &lt;/div&gt;
<span class='line-number'>614</span>	&lt;/script&gt;
<span class='line-number'>615</span>	
<span class='line-number'>616</span>	&lt;script id=&quot;Units&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>617</span>	    &lt;div class=&quot;dropdown__item dw-mod&quot; onclick=&quot;Dynamo.UpdateContent(&#39;PriceAndActions&#39;, &#39;/Default.aspx?ID=@feedId&amp;ProductID=@productId&amp;UnitID={{value}}&#39;)&quot;&gt;{{name}}&lt;/div&gt;
<span class='line-number'>618</span>	&lt;/script&gt;
<span class='line-number'>619</span>	
<span class='line-number'>620</span>	
<span class='line-number'>621</span>	@* Script templates for related products *@
<span class='line-number'>622</span>	&lt;script id=&quot;ProductPreRenderContainer&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>623</span>	    &lt;div class=&quot;u-h600px u-full-width&quot;&gt;
<span class='line-number'>624</span>	        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>625</span>	            &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>626</span>	                &lt;div class=&quot;pre-render-element pre-render-element--md&quot;&gt;&lt;/div&gt;
<span class='line-number'>627</span>	            &lt;/div&gt;
<span class='line-number'>628</span>	        &lt;/div&gt;
<span class='line-number'>629</span>	    &lt;/div&gt;
<span class='line-number'>630</span>	&lt;/script&gt;
<span class='line-number'>631</span>	
<span class='line-number'>632</span>	&lt;script id=&quot;ProductContainer&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>633</span>	    &lt;div class=&quot;u-min-h500px u-full-width&quot;&gt;
<span class='line-number'>634</span>	        &lt;div class=&quot;grid&quot;&gt;
<span class='line-number'>635</span>	            &lt;div class=&quot;grid__col-12&quot;&gt;
<span class='line-number'>636</span>	                &lt;h2 class=&quot;section-title section-title--condensed&quot;&gt;@Translate(&quot;What about these products?&quot;)&lt;/h2&gt;
<span class='line-number'>637</span>	            &lt;/div&gt;
<span class='line-number'>638</span>	
<span class='line-number'>639</span>	            &lt;div class=&quot;grid__col-45px grid__col--bleed-x&quot;&gt;
<span class='line-number'>640</span>	                &lt;div class=&quot;grid__cell grid__cell--align-middle-left&quot;&gt;
<span class='line-number'>641</span>	                    &lt;button class=&quot;btn btn--condensed btn--clean {{prevdisabled}} dw-mod&quot; onclick=&quot;Dynamo.UpdateContent(&#39;ProductList&#39;, &#39;{{prevPage}}&#39;)&quot; {{prevdisabled}}&gt;&lt;i class=&quot;fa fa-chevron-left fa-2x&quot;&gt;&lt;/i&gt;&lt;/button&gt;
<span class='line-number'>642</span>	                &lt;/div&gt;
<span class='line-number'>643</span>	            &lt;/div&gt;
<span class='line-number'>644</span>	            &lt;div class=&quot;grid__col-auto grid__col--bleed-x&quot;&gt;
<span class='line-number'>645</span>	                &lt;div id=&quot;ProductsContainer&quot; class=&quot;grid product-list dw-mod&quot; data-template=&quot;ProductGridItemContainer&quot;&gt;&lt;/div&gt;
<span class='line-number'>646</span>	            &lt;/div&gt;
<span class='line-number'>647</span>	            &lt;div class=&quot;grid__col-45px grid__col--bleed-x&quot;&gt;
<span class='line-number'>648</span>	                &lt;div class=&quot;grid__cell grid__cell--align-middle-right&quot;&gt;
<span class='line-number'>649</span>	                    &lt;button class=&quot;btn btn--condensed btn--clean {{nextdisabled}} dw-mod&quot; onclick=&quot;Dynamo.UpdateContent(&#39;ProductList&#39;, &#39;{{nextPage}}&#39;)&quot; {{nextdisabled}}&gt;&lt;i class=&quot;fa fa-chevron-right fa-2x&quot;&gt;&lt;/i&gt;&lt;/button&gt;
<span class='line-number'>650</span>	                &lt;/div&gt;
<span class='line-number'>651</span>	            &lt;/div&gt;
<span class='line-number'>652</span>	        &lt;/div&gt;
<span class='line-number'>653</span>	    &lt;/div&gt;
<span class='line-number'>654</span>	&lt;/script&gt;
<span class='line-number'>655</span>	
<span class='line-number'>656</span>	&lt;script id=&quot;ProductGridItemContainer&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>657</span>	    &lt;div id=&quot;Product&quot; class=&quot;grid__col-@relatedProductsColumnWidth product-list__list-item dw-mod&quot; data-template=&quot;ProductGridItem&quot; data-preloader=&quot;false&quot;&gt;&lt;/div&gt;
<span class='line-number'>658</span>	&lt;/script&gt;
<span class='line-number'>659</span>	
<span class='line-number'>660</span>	&lt;script id=&quot;ProductGridItem&quot; type=&quot;text/x-template&quot;&gt;
<span class='line-number'>661</span>	    &lt;div class=&quot;grid__cell product-list__grid-item__image dw-mod {{noImage}}&quot;&gt;
<span class='line-number'>662</span>	        &lt;div class=&quot;sticker {{onSale}} dw-mod&quot;&gt;@Translate(&quot;Sale!&quot;)&lt;/div&gt;
<span class='line-number'>663</span>	        &lt;a href=&quot;{{link}}&quot; onclick=&quot;Scroll.SavePosition(event)&quot;&gt;&lt;img class=&quot;grid__cell-img grid__cell-img--centered&quot; src=&quot;/Admin/Public/GetImage.ashx?width=300&amp;amp;height=300&amp;amp;crop=5&amp;amp;Compression=75&amp;amp;image={{image}}&quot; alt=&quot;{{name}}&quot; /&gt;&lt;/a&gt;
<span class='line-number'>664</span>	    &lt;/div&gt;
<span class='line-number'>665</span>	
<span class='line-number'>666</span>	    &lt;div class=&quot;grid__cell product-list__grid-item__price-info dw-mod&quot;&gt;
<span class='line-number'>667</span>	        &lt;a href=&quot;{{link}}&quot; onclick=&quot;Scroll.SavePosition(event)&quot; title=&quot;{{name}}&quot;&gt;&lt;h6 class=&quot;u-condensed-text&quot;&gt;{{name}}&lt;/h6&gt;&lt;/a&gt;
<span class='line-number'>668</span>	        &lt;div class=&quot;item-number dw-mod&quot;&gt;{{number}}&lt;/div&gt;
<span class='line-number'>669</span>	        &lt;div class=&quot;price dw-mod&quot;&gt;{{price}}&lt;/div&gt;
<span class='line-number'>670</span>	        &lt;div class=&quot;before-price {{onSale}} dw-mod&quot;&gt;{{discount}}&lt;/div&gt;
<span class='line-number'>671</span>	    &lt;/div&gt;
<span class='line-number'>672</span>	
<span class='line-number'>673</span>	    &lt;div class=&quot;product-list__grid-item__footer dw-mod&quot;&gt;
<span class='line-number'>674</span>	        &lt;div class=&quot;u-ta-center&quot;&gt;
<span class='line-number'>675</span>	            &lt;a href=&quot;{{link}}&quot; id=&quot;CartButton_{{id}}&quot; class=&quot;btn btn--secondary btn--full u-no-margin dw-mod&quot;&gt;@Translate(&quot;View&quot;)&lt;/a&gt;
<span class='line-number'>676</span>	        &lt;/div&gt;
<span class='line-number'>677</span>	    &lt;/div&gt;
<span class='line-number'>678</span>	&lt;/script&gt;
<span class='line-number'>679</span>	
<span class='line-number'>680</span>	@*Variants data generation*@
<span class='line-number'>681</span>	&lt;script&gt;
<span class='line-number'>682</span>	    document.addEventListener(&quot;DOMContentLoaded&quot;, function (event) {
<span class='line-number'>683</span>	        var variants = [];
<span class='line-number'>684</span>	
<span class='line-number'>685</span>	        document.getElementById(&quot;productGrid&quot;).addEventListener(&#39;contentLoaded&#39;, function (e) {
<span class='line-number'>686</span>	            if (e.srcElement.classList.contains(&quot;js-variants-wrap&quot;)) {
<span class='line-number'>687</span>	                Variants.SetVariantOptionStatesForProductList(e.srcElement);
<span class='line-number'>688</span>	            }
<span class='line-number'>689</span>	        }, false);
<span class='line-number'>690</span>	
<span class='line-number'>691</span>	        @foreach (LoopItem variantgroup in GetLoop(&quot;VariantGroups&quot;))
<span class='line-number'>692</span>	        {
<span class='line-number'>693</span>	            &lt;text&gt;var optionsArray = [];&lt;/text&gt;
<span class='line-number'>694</span>	
<span class='line-number'>695</span>	            foreach (LoopItem variantoption in variantgroup.GetLoop(&quot;VariantAvailableOptions&quot;))
<span class='line-number'>696</span>	            {
<span class='line-number'>697</span>	                string variantSelection = variantoption.GetBoolean(&quot;Ecom:VariantOption.Selected&quot;) ? &quot;checked&quot; : &quot;&quot;;
<span class='line-number'>698</span>	
<span class='line-number'>699</span>	                &lt;text&gt;
<span class='line-number'>700</span>	        var option = new Variants.VariantOption(&quot;@variantoption.GetValue(&quot;Ecom:VariantOption.ID&quot;)&quot;, &quot;@GetString(&quot;Ecom:Product.ID&quot;)&quot;, &quot;@variantoption.GetString(&quot;Ecom:VariantOption.Name&quot;)&quot;, &quot;@variantSelection&quot;, &quot;&quot;, &quot;@variantoption.GetString(&quot;Ecom:VariantOption.Color&quot;)&quot;, &quot;@variantoption.GetString(&quot;Ecom:VariantOption.ImgSmall.Clean&quot;)&quot;);
<span class='line-number'>701</span>	        optionsArray.push(option);
<span class='line-number'>702</span>	        &lt;/text&gt;
<span class='line-number'>703</span>	            }
<span class='line-number'>704</span>	
<span class='line-number'>705</span>	            &lt;text&gt;
<span class='line-number'>706</span>	        var group = new Variants.VariantGroup(&quot;@GetString(&quot;Ecom:Product.ID&quot;)_@variantgroup.GetValue(&quot;Ecom:VariantGroup.ID&quot;)&quot;, &quot;@variantgroup.GetValue(&quot;Ecom:VariantGroup.Name&quot;)&quot;, optionsArray);
<span class='line-number'>707</span>	        variants.push(group);
<span class='line-number'>708</span>	        &lt;/text&gt;
<span class='line-number'>709</span>	            }
<span class='line-number'>710</span>	
<span class='line-number'>711</span>	        var combinations = [];
<span class='line-number'>712</span>	        @foreach (LoopItem variantcomb in GetLoop(&quot;VariantStockCombinations&quot;))
<span class='line-number'>713</span>	            {
<span class='line-number'>714</span>	                &lt;text&gt;
<span class='line-number'>715</span>	        combinations.push(new Variants.CombinationItem(&quot;@variantcomb.GetValue(&quot;Ecom:VariantStockCombination.VariantID&quot;)&quot;));
<span class='line-number'>716</span>	        &lt;/text&gt;
<span class='line-number'>717</span>	            }
<span class='line-number'>718</span>	
<span class='line-number'>719</span>	        Variants.SetProductFeedId(&#39;@feedId&#39;);
<span class='line-number'>720</span>	        Variants.SetProductUrl(&#39;/@GetString(&quot;Ecom:Product.VariantLinkGroup.Clean&quot;)&#39;);
<span class='line-number'>721</span>	
<span class='line-number'>722</span>	  		Dynamo.SetDataInCache((&quot;Variants&quot; + &quot;@productId&quot;), variants);
<span class='line-number'>723</span>	        Dynamo.SetDataInCache((&quot;Combinations&quot; + &quot;@productId&quot;), combinations);
<span class='line-number'>724</span>	
<span class='line-number'>725</span>	        document.getElementById(&quot;PriceAndActions&quot;).addEventListener(&#39;contentLoaded&#39;, function (e) {
<span class='line-number'>726</span>	            Variants.InitVariants(variants, combinations, &quot;@productId&quot;);
<span class='line-number'>727</span>	        }, false);
<span class='line-number'>728</span>	    });
<span class='line-number'>729</span>	&lt;/script&gt;
<span class='line-number'>730</span>	
<span class='line-number'>731</span>	@functions {
<span class='line-number'>732</span>	    string getIconForFile(string fileName)
<span class='line-number'>733</span>	    {
<span class='line-number'>734</span>	        string ext = Path.GetExtension(fileName);
<span class='line-number'>735</span>	        string icon = &quot;&quot;;
<span class='line-number'>736</span>	        switch (ext.ToLower())
<span class='line-number'>737</span>	        {
<span class='line-number'>738</span>	            case &quot;.pdf&quot;:
<span class='line-number'>739</span>	                icon = &quot;fa-file-pdf-o&quot;;
<span class='line-number'>740</span>	                break;
<span class='line-number'>741</span>	            case &quot;.xls&quot;:
<span class='line-number'>742</span>	            case &quot;.xlsx&quot;:
<span class='line-number'>743</span>	                icon = &quot;fa-file-excel-o&quot;;
<span class='line-number'>744</span>	                break;
<span class='line-number'>745</span>	            case &quot;.ppt&quot;:
<span class='line-number'>746</span>	            case &quot;.pptx&quot;:
<span class='line-number'>747</span>	                icon = &quot;fa-file-powerpoint-o&quot;;
<span class='line-number'>748</span>	                break;
<span class='line-number'>749</span>	            case &quot;.doc&quot;:
<span class='line-number'>750</span>	            case &quot;.docx&quot;:
<span class='line-number'>751</span>	                icon = &quot;fa-file-word-o&quot;;
<span class='line-number'>752</span>	                break;
<span class='line-number'>753</span>	            case &quot;.jpg&quot;:
<span class='line-number'>754</span>	            case &quot;.jpeg&quot;:
<span class='line-number'>755</span>	            case &quot;.png&quot;:
<span class='line-number'>756</span>	            case &quot;.gif&quot;:
<span class='line-number'>757</span>	                icon = &quot;fa-file-image-o&quot;;
<span class='line-number'>758</span>	                break;
<span class='line-number'>759</span>	            default:
<span class='line-number'>760</span>	                icon = &quot;fa-file-o&quot;;
<span class='line-number'>761</span>	                break;
<span class='line-number'>762</span>	        }
<span class='line-number'>763</span>	        return icon;
<span class='line-number'>764</span>	    }
<span class='line-number'>765</span>	}
<span class='line-number'>766</span>	@*
<span class='line-number'>767</span>	&lt;script&gt;
<span class='line-number'>768</span>	    document.addEventListener(&quot;DOMContentLoaded&quot;, function (event) {
<span class='line-number'>769</span>	        var variants = [];
<span class='line-number'>770</span>	
<span class='line-number'>771</span>	        document.getElementById(&quot;productGrid&quot;).addEventListener(&#39;contentLoaded&#39;, function (e) {
<span class='line-number'>772</span>	            if (e.srcElement.classList.contains(&quot;js-variants-wrap&quot;)) {
<span class='line-number'>773</span>	                Variants.SetVariantOptionStatesForProductList(e.srcElement);
<span class='line-number'>774</span>	            }
<span class='line-number'>775</span>	        }, false);
<span class='line-number'>776</span>	
<span class='line-number'>777</span>	        @foreach (LoopItem variantgroup in GetLoop(&quot;VariantGroups&quot;))
<span class='line-number'>778</span>	        {
<span class='line-number'>779</span>	            &lt;text&gt;var optionsArray = [];&lt;/text&gt;
<span class='line-number'>780</span>	
<span class='line-number'>781</span>	            foreach (LoopItem variantoption in variantgroup.GetLoop(&quot;VariantAvailableOptions&quot;))
<span class='line-number'>782</span>	            {
<span class='line-number'>783</span>	                string variantSelection = variantoption.GetBoolean(&quot;Ecom:VariantOption.Selected&quot;) ? &quot;checked&quot; : &quot;&quot;;
<span class='line-number'>784</span>	
<span class='line-number'>785</span>	                &lt;text&gt;
<span class='line-number'>786</span>	        var option = new Variants.VariantOption(&quot;@uniqueId&quot;, &quot;@GetString(&quot;Ecom:Product.ID&quot;)&quot;, &quot;@variantoption.GetValue(&quot;Ecom:VariantOption.ID&quot;)&quot;, &quot;@variantoption.GetString(&quot;Ecom:VariantOption.Name&quot;)&quot;, &quot;@variantSelection&quot;, &quot;&quot;, &quot;@variantoption.GetString(&quot;Ecom:VariantOption.Color&quot;)&quot;, &quot;@variantoption.GetString(&quot;Ecom:VariantOption.ImgSmall.Clean&quot;)&quot;);
<span class='line-number'>787</span>	        optionsArray.push(option);
<span class='line-number'>788</span>	        &lt;/text&gt;
<span class='line-number'>789</span>	            }
<span class='line-number'>790</span>	
<span class='line-number'>791</span>	            &lt;text&gt;
<span class='line-number'>792</span>	        var group = new Variants.VariantGroup(&quot;@GetString(&quot;Ecom:Product.ID&quot;)_@variantgroup.GetValue(&quot;Ecom:VariantGroup.ID&quot;)&quot;, &quot;@variantgroup.GetValue(&quot;Ecom:VariantGroup.Name&quot;)&quot;, optionsArray);
<span class='line-number'>793</span>	        variants.push(group);
<span class='line-number'>794</span>	        &lt;/text&gt;
<span class='line-number'>795</span>	        }
<span class='line-number'>796</span>	
<span class='line-number'>797</span>	        var combinations = [];
<span class='line-number'>798</span>	        @foreach (LoopItem variantcomb in GetLoop(&quot;VariantStockCombinations&quot;))
<span class='line-number'>799</span>	        {
<span class='line-number'>800</span>	        &lt;text&gt;
<span class='line-number'>801</span>	        combinations.push(new Variants.CombinationItem(&quot;@variantcomb.GetValue(&quot;Ecom:VariantStockCombination.VariantID&quot;)&quot;));
<span class='line-number'>802</span>	        &lt;/text&gt;
<span class='line-number'>803</span>	        }
<span class='line-number'>804</span>	
<span class='line-number'>805</span>	        variants = variants.sort(function (a, b) {
<span class='line-number'>806</span>	            var firstVariantId = a.VariantOptions[0].variantId;
<span class='line-number'>807</span>	            for (var i = 0; i &lt; combinations.length; i++) {
<span class='line-number'>808</span>	                var combinationIndex = combinations[i].id.indexOf(firstVariantId);
<span class='line-number'>809</span>	                if (combinationIndex != -1) {
<span class='line-number'>810</span>	                    return combinationIndex;
<span class='line-number'>811</span>	                }
<span class='line-number'>812</span>	            }
<span class='line-number'>813</span>	            //should never happen
<span class='line-number'>814</span>	            return 0;
<span class='line-number'>815</span>	        });
<span class='line-number'>816</span>	
<span class='line-number'>817</span>	        Variants.SetProductFeedId(&#39;@feedId&#39;);
<span class='line-number'>818</span>	        Variants.SetProductUrl(&#39;/@GetString(&quot;Ecom:Product.VariantLinkGroup.Clean&quot;)&#39;);
<span class='line-number'>819</span>	
<span class='line-number'>820</span>	        HandlebarsBolt.SetDataInCache((&quot;Variants&quot; + &quot;@productId&quot;), variants);
<span class='line-number'>821</span>	        HandlebarsBolt.SetDataInCache((&quot;Combinations&quot; + &quot;@productId&quot;), combinations);
<span class='line-number'>822</span>	
<span class='line-number'>823</span>	        document.getElementById(&quot;PriceAndActions&quot;).addEventListener(&#39;contentLoaded&#39;, function (e) {
<span class='line-number'>824</span>	            Variants.InitVariants(variants, combinations, &quot;@productId&quot;, &quot;@uniqueId&quot;);
<span class='line-number'>825</span>	        }, false);
<span class='line-number'>826</span>	    });
<span class='line-number'>827</span>	&lt;/script&gt;*@
<span class='line-number'>828</span>	@*Variants data generation*@
<span class='line-number'>829</span>	&lt;script&gt;
<span class='line-number'>830</span>	    document.addEventListener(&quot;DOMContentLoaded&quot;, function (event) {
<span class='line-number'>831</span>	        Facets.Init(&quot;productList&quot;, &#39;@productCatalogId&#39;, &#39;@requestQuery&#39;);
<span class='line-number'>832</span>	
<span class='line-number'>833</span>	        Variants.SetProductFeedId(&#39;@productCatalogId&#39;);
<span class='line-number'>834</span>	        Variants.SetViewMode(&quot;productList&quot;);
<span class='line-number'>835</span>	
<span class='line-number'>836</span>	        document.getElementById(&quot;productList&quot;).addEventListener(&#39;contentLoaded&#39;, function (e) {
<span class='line-number'>837</span>	            if (e.srcElement.classList.contains(&quot;js-variants-wrap&quot;)) {
<span class='line-number'>838</span>	                Variants.SetVariantOptionStatesForProductList(e.srcElement);
<span class='line-number'>839</span>	            }
<span class='line-number'>840</span>	        }, false);
<span class='line-number'>841</span>	    });
<span class='line-number'>842</span>	&lt;/script&gt;
<span class='line-number'>843</span>	
</div>

